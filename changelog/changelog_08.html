<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>
            
    
    0.8 更新日志
 &mdash;
    SQLAlchemy 2.0 Documentation

        </title>

        
            <!-- begin iterate through site-imported + sphinx environment css_files -->
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/default.css" type="text/css" />
                <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
                <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../_static/sphinx_paramlinks.css" type="text/css" />
            <!-- end iterate through site-imported + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
        <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="SQLAlchemy 2.0 Documentation" href="../index.html" />
        <link rel="up" title="变更和迁移" href="index.html" />
        <link rel="next" title="&lt;no title&gt;" href="changelog_07.html" />
        <link rel="prev" title="0.9版本更新日志" href="changelog_09.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">2.0.19</span>


        | Release Date: July 15, 2023

    </div>

    <h1><a href="../index.html">SQLAlchemy 2.0 Documentation</a></h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">



        <div id="docs-sidebar-popout">
            <h3><a href="../index.html">SQLAlchemy 2.0 Documentation</a></h3>
            <p id="sidebar-topnav">
                <a href="../index.html">Home</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12" />
                  </label>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="index.html" title="变更和迁移">变更和迁移</a>
        </h3>

        <ul>
<li><span class="link-container"><a class="reference external" href="migration_20.html">SQLAlchemy 2.0 - 主要迁移指南</a></span></li>
<li><span class="link-container"><a class="reference external" href="whatsnew_20.html">SQLAlchemy 2.0 有什么新特性？</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_20.html">2.0 变更日志</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_14.html">1.4 版本更新历史</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_13.html">1.3 更新日志</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_12.html">1.2 更新日志</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_11.html">1.1 更新日志</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_10.html">1.0 更新日志</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_09.html">0.9版本更新日志</a></span></li>
<li class="selected"><span class="link-container"><strong>0.8 更新日志</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_06.html">0.6 更新日志</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_05.html">0.5 更新日志</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_04.html">0.4 变更日志</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_03.html">0.3 更新日志</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_02.html">0.2 更新日志</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_01.html">版本记录</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_14.html">SQLAlchemy 1.4有哪些新内容？</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_13.html">SQLAlchemy 1.3有什么新特性？</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_12.html">SQLAlchemy 1.2有哪些新特性?</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_11.html">SQLAlchemy 1.1新功能</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_10.html">SQLAlchemy 1.0有哪些新特性？</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_09.html">SQLAlchemy 0.9 的新特性</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_08.html">SQLAlchemy 0.8有哪些新特性？</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_07.html">SQLAlchemy 0.7有什么新特性？</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_06.html">SQLAlchemy 0.6 有哪些新变化?</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_05.html">SQLAlchemy 0.5有哪些新特性？</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_05.html#id1">主要文档更改</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_05.html#id6">退化源</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_05.html#id7">需求更改</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_05.html#id8">ORM</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_05.html#id21">ORM扩展</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_05.html#id22">模式/类型</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_05.html#id23">连接池不再默认为线程本地</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_05.html#args-args">*args已接受，不再接受*args</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_05.html#id44">删除</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_05.html#id77">已重命名或已移动</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_05.html#id86">已弃用</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_04.html">SQLAlchemy 0.4有什么新功能？</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_04.html#id1">首先要做什么</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_04.html#id2">模块导入</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_04.html#id3">对象关系映射</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_04.html#id22">SQL表达式</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_04.html#id26">架构和反射</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_04.html#id28">SQL执行</a></span></li>
</ul>



        </div>

        </div>

    </div>

    <div id="narrow-index-nav">
        <form class="search" action="../search.html" method="get">
            <label>
                Search terms:
            <input type="text" placeholder="search..." name="q" size="12" />
            </label>
            <input type="submit" value="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>

        <p>
        <a href="../index.html">Home</a>
        </p>

    </div>


        <div id="docs-narrow-top-navigation">
            <ul>
                <li><b>Previous:</b>
                <a href="changelog_09.html" title="previous chapter">0.9版本更新日志</a></li>
                <li><b>Next:</b>
                <a href="changelog_07.html" title="next chapter">&lt;no title&gt;</a></li>

            <li><b>Up:</b> <a href="../index.html">Home</a></li>
                    <ul><li><a href="index.html" title="变更和迁移">变更和迁移</a></li>
                </ul>



            <li><b>On this page:</b></li>
            <ul>
<li><a class="reference internal" href="#id1">0.8 更新日志</a></li>
</ul>


            </ul>

        </div>



    <div id="docs-body" role="main" class="withsidebar changelog-changelog_08" >
        
<section id="id1">
<h1>0.8 更新日志<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> .foreign`可能会产生问题，因为会进行注释的固有复制操作，这导致父表未在联接中呈现。</p></li>
<li><p>非工作的 :class:<a href="#id2"><span class="problematic" id="id3">`</span></a>_schema.ForeignKey`上的”schema”参数已被废弃;引发了一个警告。在0.9中将被删除。</p></li>
<li><p>修复了PostgreSQL版本字符串无法解析的错误，该字符串具有在单词”PostgreSQL”或”EnterpriseDB”之前的前缀。感谢Scott Schaefer。</p></li>
<li><p>现在， :class:<a href="#id4"><span class="problematic" id="id5">`</span></a>.URL`的 :class:<a href="#id6"><span class="problematic" id="id7">`</span></a>_engine.Engine`表述将使用星号隐藏密码。感谢Gunnlaugur Þór Briem。</p></li>
<li><p>修复  <a class="reference internal" href="../orm/queryguide/query.html#sqlalchemy.orm.Query.exists" title="sqlalchemy.orm.Query.exists"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.exists()</span></code></a>  无WHERE条件时无法正常工作的bug。感谢Vladimir Magamedov。</p></li>
<li><p>修复了使用`column_reflect`事件更改传入的  <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> .key`时会防止正确反映主键约束，索引和外键约束的bug。</p></li>
<li><p>增加了一个新标志：<cite>system=True</cite>，用于  <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> ，将列标记为”系统”列，数据库会自动使其存在（例如PostgreSQL <cite>oid`或`xmin</cite>）。列将从`CREATE TABLE`语句中省略，但其他情况下可用于查询。此外， :class:<a href="#id8"><span class="problematic" id="id9">`</span></a>.CreateColumn`结构可以应用于自定义编译规则，该规则允许跳过列，即生成一个返回’’的规则。</p></li>
<li><p>从0.9中回退了一项更改，此更改也适用于0.8.子级映射器层次结构的迭代现在进行了排序，这有助于具有确定性渲染的多态查询生成的SELECT语句，而这又有助于缓存方案，在SQL字符串本身缓存时缓存该字符串本身。</p></li>
<li><p>在ORM中使用的有序序列实现中的潜在问题已过去，该问题用于迭代器继承加载器层次结构；在Jython解释器下，此实现未排序，即使cPython和PyPy都保持排序。</p></li>
<li><p>在版本控制示例中创建历史记录表，添加了“autoincrement=False”，因为在任何情况下，此表都不应具有autoinc，感谢Patrick Schmid。</p></li>
<li><p>:meth:<a href="#id10"><span class="problematic" id="id11">`</span></a>.ColumnOperators.notin_`运算符现在正确地生成`IN`返回的否定表达式，即使针对空集合使用该运算符时。</p></li>
<li><p>改进了``examples/generic_associations``中的一些示例，包括``discriminator_on_association.py``使用单表继承执行”discriminator”的工作。还增加了一个真正的”通用外键”示例，其工作方式类似于其他流行的框架。它使用开放式整数来指向任何其他表，这样就可以省略传统的参照完整性。虽然我们不推荐此模式，但是信息想要变得自由。</p></li>
<li><p>增加了一个方便的类装饰器：func:<cite>.as_declarative</cite>，它是 :func:<a href="#id12"><span class="problematic" id="id13">`</span></a>.declarative_base`的一个包装器，允许使用嵌套的类进行传递。</p></li>
<li><p>修复了ORM中事件注册的bug，其中”原始”或”propagate”标志在某些”未映射的基类”配置中可能会配置错误。</p></li>
<li><p>改进了  <a class="reference internal" href="../orm/queryguide/columns.html#sqlalchemy.orm.defer" title="sqlalchemy.orm.defer"><code class="xref py py-func docutils literal notranslate"><span class="pre">defer()</span></code></a> <a href="#id14"><span class="problematic" id="id15">`</span></a>defer（）``的目的是减少DB/网络开销，而不一定是函数调用计数）；在所有情况下，函数调用开销现在小于从列加载数据的开销。此外，从N（结果中的总延迟值）到1（延迟列的总数）每次加载的“懒惰可调用”对象数量也有所减少。</p></li>
<li><p>为PostgreSQL 9.2范围类型添加了支持。目前，不提供类型转换，因此当前可以直接使用字符串或psycopg2 2.5范围扩展类型。修补程序由Chris Withers提供。</p></li>
<li><p>出现了一个HSTORE类型的错误，其中包含了反斜杠引号的键/值将无法在使用HSTORE数据的“非本机”（即非psycopg2）方法转换时正确转义。感谢Ryan Kelly。</p></li>
<li><p>修复了多种错误，否则会导致在：meth:<a href="#id16"><span class="problematic" id="id17">`</span></a>_query.Query.order_by`中发送复合属性产生括号表达式，这是某些数据库不接受的。</p></li>
<li><p>修复  <code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.reflect()</span></code>  在远程模式和本地模式均具有相同名称的表时可能会产生错误结果的bug。</p></li>
<li><p>修复了  <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sqlalchemy.schema.Index()</span></code></a>  中使用的`mysql_length`参数，使其成为列名称/长度的字典，供复合索引使用。感谢Russell Stuart。</p></li>
<li><p>在  <code class="xref py py-meth docutils literal notranslate"><span class="pre">sqlalchemy.orm.relationship()</span></code>  中添加了一个新方法  <code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.select_entity_from()</span></code>  ，该方法将在0.9中替换  <a class="reference internal" href="../orm/queryguide/query.html#sqlalchemy.orm.Query.select_from" title="sqlalchemy.orm.Query.select_from"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.select_from()</span></code></a>  的部分功能。在0.8中，这两种方法执行相同的功能，因此可以根据需要将代码迁移到使用  <code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.select_entity_from()</span></code>  方法。详见0.9迁移指南。</p></li>
<li><p>修复Bug：多对多关系使用`uselist = False`将无法删除关联行并引发错误，如果将标量属性设置为None。这是由为：ticket:<a href="#id18"><span class="problematic" id="id19">`</span></a>2229`更改引起的回归。</p></li>
<li><p>ORM映射对象中对于强Session引用的创建已做出改进;当该对象处于瞬态状态或进入分离状态时，将不再创建内部引用循环——只有当对象附加到Session并且在分离时才创建强引用。即使不建议使用这种方法，一个对象仍然可以具有 <cite>¨del（）</cite> 方法，因为关系与backrefs一起产生循环。映射了一个带有 <cite>¨del（）方法的类</cite>，增加了一个警告。</p></li>
<li><p>SQLAlchemy延迟规则的错误已修复，原先用于防止在自定义运算符上实现`__getitem __（）`方法的对象调用`list（）`时出现无限且扩大内存的循环，但这实际上会使列元素报告它们是可迭代类型，然后尝试循环时抛出错误。这里无法有太多选择，所以我们坚持最佳实践。在自定义运算符上实现`__getitem __（）`方面要特别小心！</p></li>
<li><p>定义`id`属性的便利方法，该方法将查询转换为一个形如 <a href="#id20"><span class="problematic" id="id21">`</span></a>EXISTS（SELECT 1 FROM … where …)`的子查询。</p></li>
<li><p>修复bug：由于在多表更新时，辅助表是具有其自己的绑定参数的SELECT，因此绑定参数的位置与语句本身相比会颠倒，而使用多表更新时出现`mysql+gaerdbms`方言的一些问题。</p></li>
<li><p>提供额外的条件用于将”disconnect”与psycopg2/libpq检测到的字符串消息进行检查，以检测已知异常类型层次结构中的所有不同”断开连接”消息。特别是，在至少三种不同的异常类型中，已经发现了“意外关闭连接”的消息。感谢Eli Collins。</p></li>
<li><p>由于MySQL配置“不锁定外键”，将不再在MySQL方言上渲染“deferrable”关键字，原因是很长一段时间以来，可撤销的外键与不可撤销的外键之间的差异非常大，但是一些环境仅在MySQL上禁用FK，因此我们将在此处不再具有意见。</p></li>
<li><p>修复了 ORM 中集合属性和`orm.join()`函数的序列化。使得方便在SQLAlchemy中对序列化的对象和项目进行反序列化并生成JSON。</p></li>
<li><p>更新了用于从Google App Engine v1.7.5及更高版本开始的mysqlconnector 方言的正则表达式，以正确提取错误代码。由Dan Ring赞助的。</p></li>
<li><p>修复了ORM映射对象的反序列化的条件分支，以便在对象被拾取器序列化时丢失引用时，我们不会错误地尝试设置`_sa_instance_state`，以修复NoneType错误。</p></li>
<li><p>修复了多个与 CPython 2.x 兼容BUG，可能会导致在CPython 2.x 上出现未经处理的异常。修复来自Ben Trofatter。</p></li>
<li><p>对于从多个外键路径扩展到表”B”的SELECT()，其与多个外键路径扩展到表”A”直接连接到”B”的情况不同，现在会正常出现很多冲突的连接条件。此前在一些情况下，在SQLAlchemy 0.7会在另一个“duped”列上静默地发出第二次SELECT， 而在SQLAlchemy 0.8则会发出模糊的列错误。现在的 ‘keys’ 应用到 .C. 集合，现在每个 SELECT() 中的“被替换的列”警告将不再发出线程阻断 切换，因为多个访问它们 的线程排他地获取一个链接，这个未释放的连接一直到访问的所有线程都已经完成后才会被释放。0.8.0版本变更日志：</p></li>
</ul>
<p>问题修复：</p>
<p>修复了“metadata.create_all”和“metadata.drop_all”方法的参数存在且所包含的内容为空列表时无法创建/删除任何项目的问题。</p>
<p>修复了DBAPI可能会返回“0”来标识最后一行ID的情况下，不能在“ResultProxy.inserted_primary_key”中正确运行的问题。</p>
<p>修复了在“mapper”实例配置时，ORM在刷新映射类时会运行错误类型的查询的问题。</p>
<p>修复了描述符“MapperProperty”上的“__repr __()”方法无法在对象初始化之前运行的问题。</p>
<p>修复了删除对象后“object_session”函数仍返回相关“Session”的情况。</p>
<p>改进：</p>
<p>添加了“QueryableAttribute.info”属性，该属性默认直接从“Column”对象中的“.info”属性继承特性，它也可以从符合条件的“MapperProperty”对象中继承。</p>
<p>现在“KeyedTuple”类拥有“_asdict”属性和“_fields”属性。</p>
<p>现在“_expression.Insert”结构支持插入多个对象。</p>
<p>现在“postgresql.ARRAY.Comparator.all”和“postgresql.ARRAY.Comparator”支持“any”方法。</p>
<p>现在默认情况下允许在“Table()”方法中传递没有特定数据库引擎的选项。只需要检查参数格式即可，而无需在SQLAlchemy方言中查找该引擎。</p>
<p>添加了更多的“disconnect”消息来支持“pymssql”扩展。</p>
<p>现在对“Oracle”数据类型支持表反射和导入。</p>
<p>现在支持表的基本键和次要键的ID属性改变的情况。</p>
<p>现在允许使用同义词来定义关系的主要/次要连接。</p>
<p>现在可以使用“query.select_from”方法和“aliased”构造，因此当前方案返回合法的“SELECT” SQL语句。</p>
<p>添加了新参数“inherit_schema”到“Enum”和其基本类“SchemaType”，如果设置为“True”，则类型将继承其所属的“Table”的” schema”属性。</p>
<p>现在支持通过用于“column”注释的任意SQL表达式或函数，而不是仅仅是直接使用列名来创建“Index”。</p>
<p>各类更新：</p>
<p>现在，SQL表达式如“select()”和“alias()”将与映射实体如“aliased”构造分开来处理。</p>
<p>增加了一些关于ORM/扩展的新内部事件函数，用来检索ORM或ORM扩展中关联的所有Python描述符。</p>
<p>现在“<a href="#id44"><span class="problematic" id="id45">ColumnOperators.in_</span></a>”运算符把“None”值转换为“null”。</p>
<p>添加了一些新的列修饰符“mssql_include”和“mssql_clustered”，来指定用于呈现“INCLUDE”和“CLUSTERED”关键字的SQL语句。</p>
<p>现在只有当运算符为“==”或“! =”时，“__nonzero__”方法返回一个值- 其他情况抛出“TypeError”。</p>
<p>现在表别名和内部路径可以精准地处理子类名称相同的关系。</p>
<p>现在查找移动信息架构表中表名和架构名称的表的所有信息模式查询都将增加一个新参数，目的是避免出现比较“NVARCHAR”和“NTEXT”的问题。</p>
<p>修复了在连接对象已关闭的情况下检测到“disconnect detect on error”的bug。</p>
<p>改进了包含ORM继承映射类的查询时ORM将运行错误查询的bug。现在，当父类被映射到一个非“Table”对象（例如自定义“join()”或“select()”）时，ORM只会运行适用于每个类的单独“Table-per-class”查询。比如类似这样的查询之前会运行错误“SELECT * FROM foo”，现在会为“foo”类和继承它的“bar”类分别运行查询语句。</p>
<p>在ORM中加入了“__repr __()”方法，使其在对象初始化之前工作。这是为了使使用最新Sphinx版本生成文档时可以正确读取它们。</p>
<dl class="simple">
<dt>PS：其中包含的英文标点符号不能转化为中文标点符号！.. 相关记录::</dt><dd><dl class="field-list simple">
<dt class="field-odd">version<span class="colon">:</span></dt>
<dd class="field-odd"><p>0.8.0b1</p>
</dd>
<dt class="field-even">released<span class="colon">:</span></dt>
<dd class="field-even"><p>2012年10月30日</p>
</dd>
</dl>
</dd>
</dl>
<ul class="simple">
<li><p>调整列优先级，将”concat”和”match”运算符的优先级与”is”，”like”等相同；这有助于在与”IS”结合使用时进行括号呈现。</p></li>
</ul>
<p>### 增强</p>
<ul class="simple">
<li><p><a href="#id22"><span class="problematic" id="id23">`</span></a>GenericFunction`和`func.*`可以允许用户定义的`GenericFunction`子类按照类名自动通过`func.*`命名空间提供，可选择使用包名，以及具有与在`func.* <a href="#id24"><span class="problematic" id="id25">`</span></a>中标识的名称不同的呈现名称的功能。</p></li>
<li><p><cite>cast（）`和`extract（）`构造现在也将通过`func.*`访问器生成，由于用户通常尝试从`func.*`访问这些名称，因此它们可能会做出预期，即使返回对象不是`FunctionElement</cite>。</p></li>
<li><p><cite>expression.sql</cite> 中的大多数类现在不再在前面加下划线，即`Label`，<cite>SelectBase</cite>，<cite>Generative</cite>，<cite>CompareMixin</cite>。<cite>_BindParamClause`也重新命名为 `BindParameter</cite>。对于这些类的旧下划线名称将在将来可预见的情况下保留为同义词。</p></li>
<li><p>Inspector对象现在可以使用新的检查服务`inspect()`获得，作为 …</p></li>
<li><p><a href="#id26"><span class="problematic" id="id27">`</span></a>column_reflect`事件现在将`Inspector`对象作为第一个参数接受，其前面是“table”。使用0.7版本这种非常新的事件的代码将需要修改以添加“验证者”对象作为第一个参数。</p></li>
<li><p>现在，默认情况下结果集中的列定位行为区分大小写。多年来，SQLAlchemy一般会在这些值上运行不区分大小写的转换，可能是为了缓解Dialect（例如Oracle和Firebird）的早期大小写敏感性问题。这些问题已经在更现代的版本中得到更有效的解决，因此调用标识符上的`lower（）`的性能开销被删除。不区分大小写的比较可以通过在`create_engine()`上设置“<cite>case_insensitive = False</cite>”来重新启用。</p></li>
<li><p>现在，将应用添加到`select`语句的列表达式，使用具有或不带其他修改构造的标签，不再将其”target”到底层`Column`；这影响依赖于 Column 定位以便检索结果的ORM操作。也就是说，查询`query（User.id，User.id.label（’foo’）`现在将单独跟踪每个`User.id`表达式的值，而不是将它们混合在一起。不希望受到影响任何用户，但是使用`select()`与`query.from_statement()`相结合的用法，并尝试以任意`.label()`名称的select()列对象加载完整组合ORM实体可能不能如预期地运行，因为这些对象不再定位到那个实体映射的`Column`对象。</p></li>
<li><p><a href="#id28"><span class="problematic" id="id29">`</span></a>insert.values()`或`update.values()`中存在键，但不在目标表中的“未使用的列名”警告现在是异常。</p></li>
<li><p><a href="#id30"><span class="problematic" id="id31">`</span></a>ForeignKey`和`ForeignKeyConstraint`添加了“MATCH”子句，由Ryan Kelly提供。</p></li>
<li><p>添加了从表的别名到DELETE和UPDATE的支持，假定在查询中的其他位置与其相关，由Ryan Kelly提供。</p></li>
<li><p>现在在`select()`上提供`correlate_except()`方法，自动排除除传递的所有可选择之外的所有可选择。</p></li>
<li><p><cite>prefix_with()`方法现在在每个`select（）</cite>，<cite>insert（）</cite>，<cite>update（）</cite>，<a href="#id32"><span class="problematic" id="id33">`</span></a>delete（）`上都可用，使用相同的API接受多个前缀调用，以及“方言名称”，以便将前缀限制为一种语言方言。</p></li>
<li><p>将`reduce_columns（）`方法添加到`select（）`构造中，内联替换列使用`util.reduce_columns`实用程序函数以删除等效列。<a href="#id34"><span class="problematic" id="id35">`</span></a>reduce_columns()`还添加了“with_only_synonyms”以将减少仅限于拥有相同名称的那些列。已删除已弃用的`fold_equivalents()`功能。</p></li>
<li><p>重新设计了`startswith()`，<a href="#id36"><span class="problematic" id="id37">`</span></a>endswith()`和`contains()`操作符，以更好地支持否定（NOT LIKE）并在编译时装配它们，以便可以更改它们的呈现SQL，例如Firebird的情况下开头叫STARTING WITH。</p></li>
<li><p>添加了一个系统的渲染CREATE TABLE的钩子，通过针对新的 schema.CreateColumn构造一个&#64;compiles函数，可以为每个列提供单独的渲染。</p></li>
<li><p>“标量”选择现在具有WHERE方法，以帮助进行创造性的构建。此外，关于如何“关联”列的SS的略微调整;新方法不再适用于正在选择的基础表列。这改善了一些相当偏门的情况，并且似乎存在的逻辑没有任何目的。</p></li>
<li><p>修复了将列“default”参数解释为可调用参数的问题，以便不要将ExecutionContext传递给关键字参数。</p></li>
<li><p>当它们直接引用表绑定的列对象（即不仅仅是字符串列名称），并且仅引用一个表时，所有UniqueConstraint、ForeignKeyConstraint、CheckConstraint和PrimaryKeyConstraint将自动附加到它们的父表上。在0.8之前，此行为适用于UniqueConstraint和PrimaryKeyConstraint，但不适用于ForeignKeyConstraint和CheckConstraint。</p></li>
<li><p>TypeDecorator现在包含by默认在“impl”类型中工作的通用repr()。对于指定自定义`__init__()`方法的TypeDecorator类，这是一种行为上的变化;如果这些类型需要`__repr__()`提供忠实的构造函数表示形式，则这些类型将需要重新定义`__repr__()`</p></li>
<li><p><a href="#id38"><span class="problematic" id="id39">`</span></a>column.label(None)`现在产生匿名标签，而不是返回列对象本身，与`label(column, None)`的行为一致。</p></li>
<li><p>显式错误会在第一次使用被构造用于引用多个远程表的`ForeignKeyConstraint()`时引发。</p></li>
<li><p>MS Access方言已移至Bitbucket上的自己的项目中，利用新的SQLAlchemy方言符合性套件。然而，该方言仍处于非常粗略的状态，可能尚未准备好进行一般使用。 <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy-access">https://bitbucket.org/zzzeek/sqlalchemy-access</a></p></li>
<li><p>多年未运行的MaxDB方言移至挂起的Bitbucket项目 <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy">https://bitbucket.org/zzzeek/sqlalchemy</a>-maxdb中。</p></li>
<li><p>SQLite日期和时间类型已进行了大幅改进，以支持更开放的格式以进行输入和输出，使用基于名称的格式字符串和正则表达式。新的“<cite>microseconds</cite>”参数还提供了省略时间戳“毫秒”部分的选项。感谢Nathan Wright提供工作和测试。</p></li>
<li><p>SQL Server方言现在可以给予数据库合格的模式名称，即“schema =’mydatabase.dbo’”；反射操作将检测此，将模式分成“。”来单独获取所有者，并在反映目标之前发出“USE mydatabase”语句，“dbo”所有者;然后恢复现有的从DB_NAME（）返回的数据库。</p></li>
<li><p>已删除将`==`用于将列比较为标量`SELECT`的旧的不可用行为-of用SQL Server方言。这是隐含的行为，在其他情况下会失败，因此被删除。依赖于此的代码需要修改为明确使用`column.in_（select）`。</p></li>
<li><p>更新了mxodbc驱动程序的支持; mxodbc 3.2.1建议进行全面兼容性。</p></li>
<li><p>postgresql.ARRAY带有可选的“尺寸”参数，将代表特定数量的数组，将呈现为DDL中的ARRAY[][]…，还提高了绑定/结果处理的性能。</p></li>
<li><p><a href="#id40"><span class="problematic" id="id41">`</span></a>postgresql.ARRAY`现在支持索引和切片。所有类型为ARRAY的SQL表达式都可以使用Python []运算符；可以传递整数或简单片段。还可以在UPDATE语句的SET子句中使用这些片段，在Update.values()中将它们传入。请参阅文档以获取示例。</p></li>
<li><p>添加了新的“‘array literal’”构造postgresql.array()。基本上，它是一个将呈现为ARRAY [1,2,3]的“元组”。</p></li>
<li><p>添加了支持PostgreSQL ONLY关键字的新功能，该关键字可以对应于SELECT，UPDATE或DELETE语句中的表。该短语使用with_hint（）建立。由Ryan Kelly提供</p></li>
<li><p>PostgreSQL方言的”ischema_names”字典是“非官方”自定义的。也就是说，可以将新类型添加到此字典中，例如PostGIS类型，该PG类型反射代码应开始处理具有可变数目参数的简单类型。这里的功能是“非官方”的，因为：</p></li>
</ul>
<p>1.这不是“官方”的API。理想情况下，“官方”的API将允许在方言或全局级别以一种通用的方式使用自定义类型处理可调用的API。</p>
<p>2.这仅针对PG方言实现，特别是因为PG具有广泛支持自定义类型，而其他数据库后端没有。将在默认方言级别实现真正的API。</p>
<p>3.这里的反射代码仅针对简单类型进行了测试，并且可能存在更多组合类型的问题。</p>
<ul class="simple">
<li><p>“startswith()”运算符现在将呈现为“STARTING WITH”，“~startswith()”后者渲染为“NOT STARTING WITH”，使用FB的更高效运算符。</p></li>
<li><p>制造`VARCHAR`，并省略长度时将引发`CompileError`，与MySQL相同。</p></li>
<li><p>现在，Firebird使用严格的“ansi绑定规则”，因此在语句的列子句中不会渲染绑定参数-它们的字面意思仍然会被显示出来</p></li>
<li><p>当使用DateTime类型与Firebird时，还支持将datetime作为date传递。其他方言支持这一点。</p></li>
<li><p>添加了fbd驱动程序的实验方言，但是未经测试，因为我无法使fbd包编译。</p></li>
<li><p>现在，dialect不再在第一次连接时发出昂贵的服务器排列查询，以及服务器大小写。这些功能仍然是半私有的。</p></li>
<li><p>MySQL方言现在将TIME类型添加到其支持范围内，接受“fst”参数，该参数是最近MySQL版本的新的“分数秒”说明符。数据类型将解释从驱动程序接收到的微秒部分，但请注意，此时，大多数/所有MySQL DBAPI都不支持返回此值。</p></li>
<li><p>现在从具有quote = True的Column传递引用信息，当生成一个与绑定参数同名的构建参数时，就像在生成的INSERT和UPDATE语句中一样，这样可以完全支持未知的保留名称。</p></li>
<li><p>可以通过将字符串DBAPI类型名称的列表发送到`exclude_setinputsizes`方言参数来自定义将排除setinputsizes（）集的类型的列。先前，此列表是固定的。列表现在也默认为STRING，UNICODE，从中删除CLOB，NCLOB。</p></li>
<li><p>Oracle构造中的CreateIndex将现在使索引的名称模式限定为父表的名称。先前，该名称被省略，这显然会在默认模式中创建索引，而不是表中的模式。</p></li>
<li><p>将`ColumnOperators.notin_`，<cite>ColumnOperators.notlike</cite>，<a href="#id42"><span class="problematic" id="id43">`</span></a>ColumnOperators.notilike`添加到`ColumnOperators`中。</p></li>
</ul>
</section>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="changelog_09.html" title="previous chapter">0.9版本更新日志</a>
        Next:
        <a href="changelog_07.html" title="next chapter">&lt;no title&gt;</a>

    <div id="docs-copyright">
        &copy; <a href="../copyright.html">Copyright</a> 2007-2023, the SQLAlchemy authors and contributors.


    <p><b>flambé!</b> the dragon and <b><i>The Alchemist</i></b> image designs created and generously donated by <a href="https://github.com/vmalloc">Rotem Yaari</a>.</p>

        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 7.0.1.

    Documentation last generated: 2023/8/18 18:43:39

    </div>
</div>

</div>



        
        

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '2.0.19',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>

    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script type="text/javascript" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/sphinx_highlight.js"></script>
        <script type="text/javascript" src="../_static/clipboard.min.js"></script>
        <script type="text/javascript" src="../_static/copybutton.js"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../_static/init.js"></script>


    </body>
</html>


