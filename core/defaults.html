<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>
            
    
    列INSERT/UPDATE默认值
 &mdash;
    SQLAlchemy 2.0 Documentation

        </title>

        
            <!-- begin iterate through site-imported + sphinx environment css_files -->
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/default.css" type="text/css" />
                <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
                <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../_static/sphinx_paramlinks.css" type="text/css" />
            <!-- end iterate through site-imported + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
        <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="SQLAlchemy 2.0 Documentation" href="../index.html" />
        <link rel="up" title="模式定义语言 (Schema Definition Language)" href="schema.html" />
        <link rel="next" title="定义约束和索引" href="constraints.html" />
        <link rel="prev" title="从数据库反射对象" href="reflection.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">2.0.19</span>


        | Release Date: July 15, 2023

    </div>

    <h1><a href="../index.html">SQLAlchemy 2.0 Documentation</a></h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">



        <div id="docs-sidebar-popout">
            <h3><a href="../index.html">SQLAlchemy 2.0 Documentation</a></h3>
            <p id="sidebar-topnav">
                <a href="../index.html">Home</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12" />
                  </label>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="index.html" title="SQLAlchemy 核心">SQLAlchemy 核心</a>
        </h3>

        <ul>
<li><span class="link-container"><a class="reference external" href="expression_api.html">SQL语句和表达式API</a></span></li>
<li><span class="link-container"><a class="reference external" href="schema.html">模式定义语言 (Schema Definition Language)</a></span><ul>
<li><span class="link-container"><a class="reference external" href="metadata.html">使用MetaData描述数据库</a></span></li>
<li><span class="link-container"><a class="reference external" href="reflection.html">从数据库反射对象</a></span></li>
<li class="selected"><span class="link-container"><strong>列INSERT/UPDATE默认值</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#id1">标量默认值</a></span></li>
<li><span class="link-container"><a class="reference external" href="#python-executed-functions">Python-Executed Functions</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#context-default-functions">上下文敏感的默认函数</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sql">由客户端调用的SQL表达式</a></span></li>
<li><span class="link-container"><a class="reference external" href="#defaults-sequences">定义序列</a></span></li>
<li><span class="link-container"><a class="reference external" href="#ddl">基于服务器调用DDL显式默认表达式</a></span></li>
<li><span class="link-container"><a class="reference external" href="#triggered-columns">标记隐式生成的值、时间戳和触发列</a></span></li>
<li><span class="link-container"><a class="reference external" href="#id23">定义序列</a></span></li>
<li><span class="link-container"><a class="reference external" href="#id29">基于服务器调用DDL显式默认表达式</a></span></li>
<li><span class="link-container"><a class="reference external" href="#id35">标记隐式生成的值、时间戳和触发列</a></span></li>
<li><span class="link-container"><a class="reference external" href="#generated-always-as">计算列 (GENERATED ALWAYS AS)</a></span></li>
<li><span class="link-container"><a class="reference external" href="#generated-always-by-default-as-identity">标识列 (GENERATED {ALWAYS | BY DEFAULT} AS IDENTITY)</a></span></li>
<li><span class="link-container"><a class="reference external" href="#api">默认对象API</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.Computed"><code class="docutils literal notranslate"><span class="pre">Computed</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.Computed.__init__"><code class="docutils literal notranslate"><span class="pre">Computed.__init__()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.Computed.copy"><code class="docutils literal notranslate"><span class="pre">Computed.copy()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.ColumnDefault"><code class="docutils literal notranslate"><span class="pre">ColumnDefault</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.DefaultClause"><code class="docutils literal notranslate"><span class="pre">DefaultClause</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.DefaultGenerator"><code class="docutils literal notranslate"><span class="pre">DefaultGenerator</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.FetchedValue"><code class="docutils literal notranslate"><span class="pre">FetchedValue</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.Sequence"><code class="docutils literal notranslate"><span class="pre">Sequence</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.Sequence.__init__"><code class="docutils literal notranslate"><span class="pre">Sequence.__init__()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.Sequence.create"><code class="docutils literal notranslate"><span class="pre">Sequence.create()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.Sequence.drop"><code class="docutils literal notranslate"><span class="pre">Sequence.drop()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.Sequence.next_value"><code class="docutils literal notranslate"><span class="pre">Sequence.next_value()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.Identity"><code class="docutils literal notranslate"><span class="pre">Identity</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.Identity.__init__"><code class="docutils literal notranslate"><span class="pre">Identity.__init__()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.Identity.copy"><code class="docutils literal notranslate"><span class="pre">Identity.copy()</span></code></a></span></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="constraints.html">定义约束和索引</a></span></li>
<li><span class="link-container"><a class="reference external" href="ddl.html">自定义 DDL</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="types.html">SQL 数据类型对象</a></span></li>
<li><span class="link-container"><a class="reference external" href="engines_connections.html">引擎与连接使用</a></span></li>
<li><span class="link-container"><a class="reference external" href="api_basics.html">Core API基础知识</a></span></li>
</ul>



        </div>

        </div>

    </div>

    <div id="narrow-index-nav">
        <form class="search" action="../search.html" method="get">
            <label>
                Search terms:
            <input type="text" placeholder="search..." name="q" size="12" />
            </label>
            <input type="submit" value="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>

        <p>
        <a href="../index.html">Home</a>
        </p>

    </div>


        <div id="docs-narrow-top-navigation">
            <ul>
                <li><b>Previous:</b>
                <a href="reflection.html" title="previous chapter">从数据库反射对象</a></li>
                <li><b>Next:</b>
                <a href="constraints.html" title="next chapter">定义约束和索引</a></li>

            <li><b>Up:</b> <a href="../index.html">Home</a></li>
                    <ul><li><a href="index.html" title="SQLAlchemy 核心">SQLAlchemy 核心</a></li>
                    <ul><li><a href="schema.html" title="模式定义语言 (Schema Definition Language)">模式定义语言 (Schema Definition Language)</a></li>
                </ul>
                </ul>



            <li><b>On this page:</b></li>
            <ul>
<li><a class="reference internal" href="#insert-update">列INSERT/UPDATE默认值</a><ul>
<li><a class="reference internal" href="#id1">标量默认值</a></li>
<li><a class="reference internal" href="#python-executed-functions">Python-Executed Functions</a><ul>
<li><a class="reference internal" href="#context-default-functions">上下文敏感的默认函数</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sql">由客户端调用的SQL表达式</a></li>
<li><a class="reference internal" href="#defaults-sequences">定义序列</a></li>
<li><a class="reference internal" href="#ddl">基于服务器调用DDL显式默认表达式</a></li>
<li><a class="reference internal" href="#triggered-columns">标记隐式生成的值、时间戳和触发列</a></li>
<li><a class="reference internal" href="#id23">定义序列</a></li>
<li><a class="reference internal" href="#id29">基于服务器调用DDL显式默认表达式</a></li>
<li><a class="reference internal" href="#id35">标记隐式生成的值、时间戳和触发列</a></li>
<li><a class="reference internal" href="#generated-always-as">计算列 (GENERATED ALWAYS AS)</a></li>
<li><a class="reference internal" href="#generated-always-by-default-as-identity">标识列 (GENERATED {ALWAYS | BY DEFAULT} AS IDENTITY)</a></li>
<li><a class="reference internal" href="#api">默认对象API</a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.Computed"><code class="docutils literal notranslate"><span class="pre">Computed</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.Computed.__init__"><code class="docutils literal notranslate"><span class="pre">Computed.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Computed.copy"><code class="docutils literal notranslate"><span class="pre">Computed.copy()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema.ColumnDefault"><code class="docutils literal notranslate"><span class="pre">ColumnDefault</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.DefaultClause"><code class="docutils literal notranslate"><span class="pre">DefaultClause</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.DefaultGenerator"><code class="docutils literal notranslate"><span class="pre">DefaultGenerator</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.FetchedValue"><code class="docutils literal notranslate"><span class="pre">FetchedValue</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Sequence"><code class="docutils literal notranslate"><span class="pre">Sequence</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.Sequence.__init__"><code class="docutils literal notranslate"><span class="pre">Sequence.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Sequence.create"><code class="docutils literal notranslate"><span class="pre">Sequence.create()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Sequence.drop"><code class="docutils literal notranslate"><span class="pre">Sequence.drop()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Sequence.next_value"><code class="docutils literal notranslate"><span class="pre">Sequence.next_value()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema.Identity"><code class="docutils literal notranslate"><span class="pre">Identity</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.Identity.__init__"><code class="docutils literal notranslate"><span class="pre">Identity.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Identity.copy"><code class="docutils literal notranslate"><span class="pre">Identity.copy()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


            </ul>

        </div>



    <div id="docs-body" role="main" class="withsidebar core-defaults" >
        
<section id="insert-update">
<span id="metadata-defaults"></span><span id="metadata-defaults-toplevel"></span><h1>列INSERT/UPDATE默认值<a class="headerlink" href="#insert-update" title="Permalink to this heading">¶</a></h1>
<p>列INSERT和UPDATE默认值是指在执行对行的INSERT或UPDATE语句时为某个列创建一个默认值
当**在INSERT或UPDATE语句中，没有为该列提供值的情况下**，用作插入到“时间戳”列的值创建新值，如当前时间。
如果语句*不*包含此列的值，则将不会发生默认值。</p>
<p>列默认值可以是与架构中的  <span class="xref std std-term">DDL</span>  一起定义的服务器端函数或常量值，
也可以是作为SQL表达式直接渲染在SQLAlchemy发出的INSERT或UPDATE语句中的服务器端SQL表达式；
它们也可以是由SQLAlchemy在将数据传递​​到数据库之前调用的客户端Python函数或常量值。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>不要将列默认处理程序与拦截并修改INSERT和UPDATE语句中提供的值的构造混淆
应用程序应用程序会更改某个列的值。这是称为  <span class="xref std std-term">数据装配</span>  ，
它修改某个列的值，从而在发送到数据库之前通过应用程序以某种方式进行修改。
SQLAlchemy提供了一些实现此目的的方法，包括使用:ref：自定义数据类型&lt;types_typedecorator&gt;，</p>
<blockquote>
<div><p><a class="reference internal" href="events.html#core-sql-events"><span class="std std-ref">SQL执行事件</span></a> 及在ORM中使用的:</p>
</div></blockquote>
<p>ref：定制验证器&lt;simple_validators&gt;以及 <a class="reference internal" href="../orm/events.html#orm-attribute-events"><span class="std std-ref">orm_attribute_events</span></a> 中的属性事件。
仅当在SQL :term: DML语句中不存在**值**时，列默认值才会被调用。</p>
</div>
<p>SQLAlchemy提供了一系列有关在INSERT和UPDATE语句中生成缺失值的默认生成功能。
选项包括：</p>
<ul class="simple">
<li><p>插入和更新操作期间用作默认值的标量值</p></li>
<li><p>执行INSERT和UPDATE操作的Python函数</p></li>
<li><p>嵌入在INSERT语句中的SQL表达式（或在某些情况下先执行）</p></li>
<li><p>嵌入在UPDATE语句中的SQL表达式</p></li>
<li><p>用于INSERT的服务器端默认值</p></li>
<li><p>用于UPDATE时使用的服务器端触发器标记</p></li>
</ul>
<p>对于所有插入/更新默认值的通用规则是，仅在没有传递特定列的值作为“execute()”参数时才会生效
否则使用给定的值。</p>
<section id="id1">
<h2>标量默认值<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h2>
<p>最简单的默认值是用作列默认值的标量值:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Table</span><span class="p">(</span><span class="s2">&quot;mytable&quot;</span><span class="p">,</span> <span class="n">metadata_obj</span><span class="p">,</span> <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;somecolumn&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">12</span><span class="p">))</span></pre></div>
</div>
<p>上面，如果没有提供其他值，”12”将在INSERT时绑定为列值。</p>
<p>标量值也可以与UPDATE语句关联，但这不太常见（因为UPDATE语句通常正在寻找动态默认值）。：</p>
<blockquote>
<div><p>Table(“mytable”, metadata_obj, Column(“somecolumn”, Integer, onupdate=25))</p>
</div></blockquote>
</section>
<section id="python-executed-functions">
<h2>Python-Executed Functions<a class="headerlink" href="#python-executed-functions" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><p><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.default</span></code></a>  和  :paramref:` _schema.Column.onupdate`  关键字参数也接受Python</p>
</div></blockquote>
<p>函数。如果没有为该列提供其他值，则在插入或更新时调用这些函数，然后返回的值用于列的值。下面说明了简单的“序列”
将递增计数器分配给主键列的方法:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># a function which counts upwards</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>


<span class="k">def</span> <span class="nf">mydefault</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">i</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">i</span>


<span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;mytable&quot;</span><span class="p">,</span>
    <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">mydefault</span><span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<p>应该注意，对于真正的“递增序列”行为，应正常使用数据库的内置功能
此包括序列对象或其他自动递增功能。对于主键列，SQLAlchemy在大多数情况下将自动使用这些功能
参见  <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>  标志，
以及本章后面有关 <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> 的部分，用于了解标准主键生成技术的背景信息。</p>
<p>为说明onupdate，我们将Python的datetime函数“now”分配给  <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.onupdate" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.onupdate</span></code></a>  属性：：</p>
<blockquote>
<div><p>import datetime</p>
<dl class="simple">
<dt>t = Table(</dt><dd><p>“mytable”,
metadata_obj,
Column(“id”, Integer, primary_key=True),
# define ‘last_updated’ to be populated with datetime.now()
Column(“last_updated”, DateTime, onupdate=datetime.datetime.now),</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
<p>更新语句执行并且没有为“last_updated”传递值时，将执行“datetime.datetime.now（）”Python函数，并且其返回值用作“last_updated”的值。
请注意，我们将“now”作为函数本身提供，而无需调用它（即，没有括号以下）-SQLAlchemy将在语句执行时执行函数。</p>
<section id="context-default-functions">
<span id="id2"></span><h3>上下文敏感的默认函数<a class="headerlink" href="#context-default-functions" title="Permalink to this heading">¶</a></h3>
<dl class="simple">
<dt>由于某个语句的上下文会包含所有关于正在执行的语句的信息，因此  <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.default</span></code></a>  和</dt><dd><p><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.onupdate" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.onupdate</span></code></a>  中使用的Python函数可以使用当前语句的上下文来确定值。典型的用例与</p>
</dd>
</dl>
<p>默认生成相关，可以使用上下文访问在行上插入或更新的其他值。要访问上下文，请提供一个接受一个“context”参数的函数:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">mydefault</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">context</span><span class="o">.</span><span class="n">get_current_parameters</span><span class="p">()[</span><span class="s2">&quot;counter&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">12</span>


<span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;mytable&quot;</span><span class="p">,</span>
    <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;counter&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;counter_plus_twelve&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">mydefault</span><span class="p">,</span> <span class="n">onupdate</span><span class="o">=</span><span class="n">mydefault</span><span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<p>上面的默认生成功能将应用于所有INSERT和UPDATE语句，其中并没有提供“counter_plus_twelve”的值，
该值将是执行插入或更新时存在于“counter”列的任何值加上数字12的值。</p>
<p>对于使用“executemany”样式执行的单个语句（即使用传递给  <a class="reference internal" href="connections.html#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a>  的多个参数集的语句），
会为每组参数调用用户定义的函数。对于多值 <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> 构造（例如使用多个VALUES
由  <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert.values" title="sqlalchemy.sql.expression.Insert.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Insert.values()</span></code></a>  方法设置的子句），也会为每个参数集调用用户定义的函数。</p>
<p>调用函数时，从上下文对象中可用  <a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultExecutionContext.get_current_parameters" title="sqlalchemy.engine.default.DefaultExecutionContext.get_current_parameters"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DefaultExecutionContext.get_current_parameters()</span></code></a>  特殊方法
(一个 <a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultExecutionContext" title="sqlalchemy.engine.default.DefaultExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">DefaultExecutionContext</span></code></a> 子类)。
此方法返回一个字典，其中列键对应于值，表示INSERT或UPDATE语句的完整值集。针对
多值INSERT构造，将仅从完整参数字典中分离与单个VALUES子句对应的子集参数，并将其单独返回。</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.2: </span>添加了  <a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultExecutionContext.get_current_parameters" title="sqlalchemy.engine.default.DefaultExecutionContext.get_current_parameters"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DefaultExecutionContext.get_current_parameters()</span></code></a>  方法，
它改进了仍然存在的  <a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultExecutionContext.current_parameters" title="sqlalchemy.engine.default.DefaultExecutionContext.current_parameters"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DefaultExecutionContext.current_parameters</span></code></a>  属性，
通过提供将多个VALUES子句组织到单个参数字典中的服务来提供服务。</p>
</div>
</section>
</section>
<section id="sql">
<span id="defaults-client-invoked-sql"></span><h2>由客户端调用的SQL表达式<a class="headerlink" href="#sql" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><p><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.default</span></code></a>  和  :paramref:` _schema.Column.onupdate`  关键字也可以传递SQL表达式，</p>
</div></blockquote>
<p>在大多数情况下，这些表达式直接在
INSERT或UPDATE语句内联呈现：</p>
<blockquote>
<div><dl>
<dt>t = Table(</dt><dd><p>“mytable”,
metadata_obj,
Column(“id”, Integer, primary_key=True),
# define ‘create_date’ to default to now()
Column(“create_date”, DateTime, default=func.now()),
# define ‘key’ to pull its default from the ‘keyvalues’ table
Column(</p>
<blockquote>
<div><p>“key”,
String(20),
default=select(keyvalues.c.key).where(keyvalues.c.type=”type1”),</p>
</div></blockquote>
<p>),
# define ‘last_modified’ to use the current_timestamp SQL function on update
Column(“last_modified”, DateTime, onupdate=func.utc_timestamp()),</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
<p>上面，“create_date”列将使用“now（）”SQL函数（根据后端，大多数情况下编译为“NOW（）”
或“CURRENT_TIMESTAMP”）在INSERT语句中填充，而“key”列的结果是从其他表中查询的SELECT子查询的结果。
“last_modified”列将在发出此表的UPDATE语句时与SQL“UTC_TIMESTAMP（）” MySQL函数的值一起填充。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>在使用  <code class="xref py py-attr docutils literal notranslate"><span class="pre">func</span></code>  构造使用SQL函数时，我们“调用”命名函数，
例如使用括号，如``func.now（）``。这与指定Python可调用对象略有不同，例如
<code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code>，其中我们传递函数本身，但是我们不
手动调用。在使用SQL函数时，调用``func.now（）``会返回这种
执行“NOW”函数的SQL表达式对象正在发出的SQL。</p>
</div>
<p>由  <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.default</span></code></a>  引用的默认值和  :paramref:` _schema.Column.onupdate`  是在INSERT或UPDATE语句发生时显式调用的
大多数情况下内联呈现在DML语句中，除非在下面列出的某些情况下。这与无法更改的“服务器端”默认值不同，
该值作为表的DDL定义的一部分存在，例如作为“CREATE TABLE”语句的一部分，这些DDL定义可能更常见。要
有关服务器端默认值，请参见下一节：ref：<cite>server_defaults</cite>。</p>
<p>使用PRIMARY KEY列的SQL表达式指示由于某些其他服务器端数据库机制（例如某些平台上的TIMESTAMP列）或自定义触发器而在INSERT或UPDATE
上生成了新值的列，可以使用 :class：` .FetchedValue`作为标记：：</p>
<blockquote>
<div><blockquote>
<div><p>from sqlalchemy.schema import FetchedValue</p>
<dl class="simple">
<dt>t = Table(</dt><dd><p>“test”,
metadata_obj,
Column(“id”, Integer, primary_key=True),
Column(“abc”, TIMESTAMP, server_default=FetchedValue()),
Column(“def”, String(20), server_onupdate=FetchedValue()),</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
<p><a class="reference internal" href="#sqlalchemy.schema.FetchedValue" title="sqlalchemy.schema.FetchedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">FetchedValue</span></code></a> 指示符不会影响CREATE TABLE的渲染DDL。它标记列，用作将在执行INSERT或UPDATE语句期间为该列填充一个新值的列。</p>
</div></blockquote>
<p>该值用于支持数据库可能用于此列的RETURNING或输出子句。工具，例如
ORM然后将使用此标记，以便知道如何访问操作后的列的值。特别是，的</p>
<blockquote>
<div><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.return_defaults()</span></code>  方法可用于  :class:` _expression.Insert`</p>
</div></blockquote>
<p>或 <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a> 构造指定要返回这些值。</p>
<p>有关在ORM中使用 <code class="xref py py-class docutils literal notranslate"> <span class="pre">FetchedValue</span></code> 的详细信息，请参见
：ref：<cite>orm_server_defaults</cite>。</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.server_onupdate" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.server_onupdate</span></code></a> 指令
<a href="#id3"><span class="problematic" id="id4">**</span></a>并不**目前会生成MySQL的
“ON UPDATE CURRENT_TIMESTAMP（）”子句。看
:ref：<a href="#id5"><span class="problematic" id="id6">`</span></a>mysql_timestamp_onupdate`了解如何生成
此子句的背景。</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../orm/persistence_techniques.html#orm-server-defaults"><span class="std std-ref">提取服务器生成的默认值</span></a></p>
</div>
</section>
<section id="defaults-sequences">
<span id="id7"></span><h2>定义序列<a class="headerlink" href="#defaults-sequences" title="Permalink to this heading">¶</a></h2>
<p>SQLAlchemy使用 <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> 对象表示数据库序列，它被认为是一种
特殊情况的“列默认值”。它仅对具有明确支持序列的数据库有效，
在SQLAlchemy包括的方言之间，包括PostgreSQL、Oracle、MS SQL Server和MariaDB。  <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>
对象将被忽略。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<blockquote>
<div><p>在较新的数据库引擎中，  <a class="reference internal" href="#sqlalchemy.schema.Identity" title="sqlalchemy.schema.Identity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code></a> .Sequence`
用于生成整数主键值。请参见该部分：ref:<a href="#id8"><span class="problematic" id="id9">`</span></a>identity_ddl`以获取有关此构造的背景信息。</p>
</div></blockquote>
<p><a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> 可以作为“默认”生成器放置在任何列上，</p>
</div>
<p>在INSERT操作期间使用，也可以在需要时配置在UPDATE操作期间触发的操作。
它通常与单个整数主键列结合使用：</p>
<blockquote>
<div><dl>
<dt>table = Table(</dt><dd><p>“cartitems”,
metadata_obj,
Column(</p>
<blockquote>
<div><p>“cart_id”,
Integer,
Sequence(“cart_id_seq”, start=1),
primary_key=True,</p>
</div></blockquote>
<p>),
Column(“description”, String(40)),
Column(“createdate”, DateTime()),</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
<p>在上面的示例中，表``cartitems``与名为``cart_id_seq``的序列相关联。
执行  <code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code>  以用于上述表将包括：</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="n">SEQUENCE</span><span class="w"> </span><span class="n">cart_id_seq</span><span class="w"> </span><span class="k">START</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="mi">1</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">cartitems</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">cart_id</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="n">description</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
<span class="w">    </span><span class="n">createdate</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">WITHOUT</span><span class="w"> </span><span class="k">TIME</span><span class="w"> </span><span class="k">ZONE</span><span class="p">,</span>
<span class="w">    </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">cart_id</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>在使用具有显式模式名称的表时（在详细了解中）中，  <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> .Sequence` 分享
相反，指定  <a class="reference internal" href="#sqlalchemy.schema.Sequence.params.schema" title="sqlalchemy.schema.Sequence"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Sequence.schema</span></code></a>  ：</p>
<blockquote>
<div><p>Sequence(“cart_id_seq”, start=1, schema=”some_schema”)</p>
<p><a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> ` <cite>.MetaData.schema``设置在使用中的   :class:</cite>.MetaData` ;</p>
</div></blockquote>
<p>有关背景信息，请参见：ref：<cite>sequence_metadata</cite>。</p>
</div>
<p>当使用  <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Insert()</span></code></a>   DML构造执行针对` <a href="#id10"><span class="problematic" id="id11">`</span></a>cartitems``表时，如果没有为``cart_id``列传递显式值，则将使用``cart_id_seq``序列生成值。
通常，序列函数将嵌入INSERT语句中，该语句与返回新生成的值的PYTHON过程或函数组合：</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">cartitems</span><span class="w"> </span><span class="p">(</span><span class="n">cart_id</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="p">,</span><span class="w"> </span><span class="n">createdate</span><span class="p">)</span>
<span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="n">next_val</span><span class="p">(</span><span class="n">cart_id_seq</span><span class="p">),</span><span class="w"> </span><span class="s1">&#39;some description&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2015-10-15 12:00:15&#39;</span><span class="p">)</span>
<span class="k">RETURNING</span><span class="w"> </span><span class="n">cart_id</span></pre></div>
</div>
<p>通过使用  <a class="reference internal" href="connections.html#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a>  将 :class:` _dml.Insert`构造传递给执行来调用：
在此类操作中生成的新的主键标识符，包括但不限于
使用  <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> .CursorResult` 构造使用
使用  <a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a>  属性。</p>
<p>当为  <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Insert()</span></code></a>  构造调用RETURNING时，这些新生成的主键标识符通常也可用于  :class:` .CursorResult`
使用  <a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.last_inserted_params" title="sqlalchemy.engine.CursorResult.last_inserted_params"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.last_inserted_params()</span></code></a>  或  :meth:` .CursorResult.last_updated_params`  中的集合。</p>
<blockquote>
<div><p><a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a>  集合包含插入的行的主键</p>
</div></blockquote>
<p>（使用列表，以便单列和复合列主键以相同的格式表示）。</p>
</section>
<section id="ddl">
<span id="server-defaults"></span><h2>基于服务器调用DDL显式默认表达式<a class="headerlink" href="#ddl" title="Permalink to this heading">¶</a></h2>
<p>SQL表达式默认值的变体是  <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.server_default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.server_default</span></code></a>  ，在CREATE TABLE操作期间将其放置在
使用 : meth：<a href="#id12"><span class="problematic" id="id13">`</span></a>_schema.Table.create`操作：</p>
<div class="highlight-python+sql notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span> <span class="n">server_default</span><span class="o">=</span><span class="s2">&quot;abc&quot;</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;created_at&quot;</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">,</span> <span class="n">server_default</span><span class="o">=</span><span class="n">func</span><span class="o">.</span><span class="n">sysdate</span><span class="p">()),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;index_value&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">server_default</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)),</span>
<span class="p">)</span></pre></div>
</div>
<p>上述示例说明了用于SQL函数（在上述示例中为SYSDATE）以及服务器端常量值（上述示例中的整数“0”）的两种典型用例
。建议对任何文本SQL值使用:func：<a href="#id14"><span class="problematic" id="id15">`</span></a>_expression.text`构造而不是传递原始值，
因为SQLAlchemy通常不对这些值执行任何引用或转义。</p>
<dl class="simple">
<dt>与使用  <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.default</span></code></a>  或  :paramref:` _schema.Column.onupdate`  的用户定义Python函数一样，</dt><dd><p><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.server_default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.server_default</span></code></a>  可以容纳SQL表达式，但通常情况下这些将是简单的表达式</p>
</dd>
</dl>
<p>函数和表达式，而不是更复杂的情况，如嵌入SELECT。</p>
</section>
<section id="triggered-columns">
<span id="id16"></span><h2>标记隐式生成的值、时间戳和触发列<a class="headerlink" href="#triggered-columns" title="Permalink to this heading">¶</a></h2>
<p>对于在INSERT或UPDATE上生成新值的列，这些值基于其他服务器端数据库机制，
例如某些平台上的特定于数据库的自动生成行为，例如在某些平台上的TIMESTAMP列，以及
在INSERT或UPDATE触发器上调用自定义触发器，可以使用:class：<a href="#id17"><span class="problematic" id="id18">`</span></a>.FetchedValue`作为标记：：</p>
<blockquote>
<div><blockquote>
<div><p>from sqlalchemy.schema import FetchedValue</p>
<dl class="simple">
<dt>t = Table(</dt><dd><p>“test”,
metadata_obj,
Column(“id”, Integer, primary_key=True),
Column(“abc”, TIMESTAMP, server_default=FetchedValue()),
Column(“def”, String(20), server_onupdate=FetchedValue()),</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
<p><a class="reference internal" href="#sqlalchemy.schema.FetchedValue" title="sqlalchemy.schema.FetchedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">FetchedValue</span></code></a> 指示符不会影响 CREATE TABLE 的呈现 DDL。它标记</p>
</div></blockquote>
<p>该列将在进行INSERT或UPDATE语句处理期间填充一个新值，并且对于支持的数据库可能用于返回子句的该列应该包括在其中。
ORM之类的工具然后使用此标记，以便知道如何访问操作后的列的值。特别是</p>
<blockquote>
<div><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.return_defaults()</span></code>  方法可用于  :class:` _expression.Insert`</p>
</div></blockquote>
<p>或 <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a> 构造指定要返回这些值。</p>
<p>有关使用ORM中的  <a class="reference internal" href="#sqlalchemy.schema.FetchedValue" title="sqlalchemy.schema.FetchedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">FetchedValue</span></code></a> 。</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.server_onupdate" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.server_onupdate</span></code></a> 指令
<a href="#id19"><span class="problematic" id="id20">**</span></a>不会**目前生成MySQL的
“ON UPDATE CURRENT_TIMESTAMP（）”子句。看
:ref：<a href="#id21"><span class="problematic" id="id22">`</span></a>mysql_timestamp_onupdate`了解如何生成
此子句的背景。</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../orm/persistence_techniques.html#orm-server-defaults"><span class="std std-ref">提取服务器生成的默认值</span></a></p>
</div>
</section>
<section id="id23">
<span id="id24"></span><h2>定义序列<a class="headerlink" href="#id23" title="Permalink to this heading">¶</a></h2>
<p>SQLAlchemy使用 <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> 对象表示数据库序列，它被认为是一种
特殊情况的“列默认值”。它仅对具有明确支持序列的数据库有效，
在SQLAlchemy包括的方言之间，包括PostgreSQL、Oracle、MS SQL Server和MariaDB。  <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>
对象将被忽略。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<blockquote>
<div><p>在较新的数据库引擎中，  <a class="reference internal" href="#sqlalchemy.schema.Identity" title="sqlalchemy.schema.Identity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code></a> .Sequence`
用于生成整数主键值。请参见该部分：ref:<a href="#id25"><span class="problematic" id="id26">`</span></a>identity_ddl`以获取有关此构造的背景信息。</p>
</div></blockquote>
<p><a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> 可以作为“默认”生成器放置在任何列上，</p>
</div>
<p>在INSERT操作期间使用，也可以在需要时配置在UPDATE操作期间触发的操作。
它通常与单个整数主键列结合使用：</p>
<blockquote>
<div><dl>
<dt>table = Table(</dt><dd><p>“cartitems”,
metadata_obj,
Column(</p>
<blockquote>
<div><p>“cart_id”,
Integer,
Sequence(“cart_id_seq”, start=1),
primary_key=True,</p>
</div></blockquote>
<p>),
Column(“description”, String(40)),
Column(“createdate”, DateTime()),</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
<p>在上面的示例中，表``cartitems``与名为``cart_id_seq``的序列相关联。
执行  <code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code>  以用于上述表将包括：</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="n">SEQUENCE</span><span class="w"> </span><span class="n">cart_id_seq</span><span class="w"> </span><span class="k">START</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="mi">1</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">cartitems</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">cart_id</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="n">description</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
<span class="w">    </span><span class="n">createdate</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">WITHOUT</span><span class="w"> </span><span class="k">TIME</span><span class="w"> </span><span class="k">ZONE</span><span class="p">,</span>
<span class="w">    </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">cart_id</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>在使用具有显式模式名称的表时（在详细了解中）中，  <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> .Sequence` 分享
相反，指定  <a class="reference internal" href="#sqlalchemy.schema.Sequence.params.schema" title="sqlalchemy.schema.Sequence"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Sequence.schema</span></code></a>  ：</p>
<blockquote>
<div><p>Sequence(“cart_id_seq”, start=1, schema=”some_schema”)</p>
<p><a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> ` <cite>.MetaData.schema``设置在使用中的   :class:</cite>.MetaData` ;</p>
</div></blockquote>
<p>有关背景信息，请参见：ref：<cite>sequence_metadata</cite>。</p>
</div>
<p>当使用  <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Insert()</span></code></a>   DML构造执行针对` <a href="#id27"><span class="problematic" id="id28">`</span></a>cartitems``表时，如果没有为``cart_id``列传递显式值，则将使用``cart_id_seq``序列生成值。
通常，序列函数将嵌入INSERT语句中，该语句与返回新生成的值的PYTHON过程或函数组合：</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">cartitems</span><span class="w"> </span><span class="p">(</span><span class="n">cart_id</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="p">,</span><span class="w"> </span><span class="n">createdate</span><span class="p">)</span>
<span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="n">next_val</span><span class="p">(</span><span class="n">cart_id_seq</span><span class="p">),</span><span class="w"> </span><span class="s1">&#39;some description&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2015-10-15 12:00:15&#39;</span><span class="p">)</span>
<span class="k">RETURNING</span><span class="w"> </span><span class="n">cart_id</span></pre></div>
</div>
<p>通过使用  <a class="reference internal" href="connections.html#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a>  将 :class:` _dml.Insert`构造传递给执行来调用：
在此类操作中生成的新的主键标识符，包括但不限于
使用  <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> .CursorResult` 构造使用
使用  <a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a>  属性。</p>
<p>当为  <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Insert()</span></code></a>  构造调用RETURNING时，这些新生成的主键标识符通常也可用于  :class:` .CursorResult`
使用  <a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.last_inserted_params" title="sqlalchemy.engine.CursorResult.last_inserted_params"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.last_inserted_params()</span></code></a>  或  :meth:` .CursorResult.last_updated_params`  中的集合。</p>
<blockquote>
<div><p><a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a>  集合包含插入的行的主键</p>
</div></blockquote>
<p>（使用列表，以便单列和复合列主键以相同的格式表示）。</p>
</section>
<section id="id29">
<span id="id30"></span><h2>基于服务器调用DDL显式默认表达式<a class="headerlink" href="#id29" title="Permalink to this heading">¶</a></h2>
<p>SQL表达式默认值的变体是  <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.server_default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.server_default</span></code></a>  ，在CREATE TABLE操作期间将其放置在
使用: meth:<a href="#id31"><span class="problematic" id="id32">`</span></a>_schema.Table.create`操作：</p>
<div class="highlight-python+sql notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span> <span class="n">server_default</span><span class="o">=</span><span class="s2">&quot;abc&quot;</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;created_at&quot;</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">,</span> <span class="n">server_default</span><span class="o">=</span><span class="n">func</span><span class="o">.</span><span class="n">sysdate</span><span class="p">()),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;index_value&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">server_default</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)),</span>
<span class="p">)</span></pre></div>
</div>
<p>上述示例说明了用于SQL函数（在上述示例中为SYSDATE）以及服务器端常量值（上述示例中的整数“0”）的两种典型用例
。建议对任何文本SQL值使用:func：<a href="#id33"><span class="problematic" id="id34">`</span></a>_expression.text`构造而不是传递原始值，
因为SQLAlchemy通常不对这些值执行任何引用或转义。</p>
<dl class="simple">
<dt>与使用  <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.default</span></code></a>  或  :paramref:` _schema.Column.onupdate`  的用户定义Python函数一样，</dt><dd><p><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.server_default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.server_default</span></code></a>  可以容纳SQL表达式，但通常情况下这些将是简单的表达式</p>
</dd>
</dl>
<p>函数和表达式，而不是更复杂的情况，如嵌入SELECT。</p>
</section>
<section id="id35">
<span id="id36"></span><h2>标记隐式生成的值、时间戳和触发列<a class="headerlink" href="#id35" title="Permalink to this heading">¶</a></h2>
<p>对于在INSERT或UPDATE上生成新值的列，这些值基于其他服务器端数据库机制，
例如某些平台上的特定于数据库的自动生成行为，例如在某些平台上的TIMESTAMP列，以及
在INSERT或UPDATE触发器上调用自定义触发器，可以使用:class：<a href="#id37"><span class="problematic" id="id38">`</span></a>.FetchedValue`作为标记：：</p>
<blockquote>
<div><blockquote>
<div><p>from sqlalchemy.schema import FetchedValue</p>
<dl class="simple">
<dt>t = Table(</dt><dd><p>“test”,
metadata_obj,
Column(“id”, Integer, primary_key=True),
Column(“abc”, TIMESTAMP, server_default=FetchedValue()),
Column(“def”, String(20), server_onupdate=FetchedValue()),</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
<p><a class="reference internal" href="#sqlalchemy.schema.FetchedValue" title="sqlalchemy.schema.FetchedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">FetchedValue</span></code></a> 指示符不会影响 CREATE TABLE 的呈现 DDL。它标记</p>
</div></blockquote>
<p>该列将在进行INSERT或UPDATE语句处理期间填充一个新值，并且对于支持的数据库可能用于返回子句的该列应该包括在其中。
ORM之类的工具然后使用此标记，以便知道如何访问操作后的列的值。特别是</p>
<blockquote>
<div><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.return_defaults()</span></code>  方法可用于  :class:` _expression.Insert`</p>
</div></blockquote>
<p>或 <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a> 构造指定要返回这些值。</p>
<p>有关使用ORM中的  <a class="reference internal" href="#sqlalchemy.schema.FetchedValue" title="sqlalchemy.schema.FetchedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">FetchedValue</span></code></a> 。</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.server_onupdate" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.server_onupdate</span></code></a> 指令
<a href="#id39"><span class="problematic" id="id40">**</span></a>不会**目前生成MySQL的
“ON UPDATE CURRENT_TIMESTAMP（）”子句。看
:ref：<a href="#id41"><span class="problematic" id="id42">`</span></a>mysql_timestamp_onupdate`了解如何生成
此子句的背景。</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../orm/persistence_techniques.html#orm-server-defaults"><span class="std std-ref">提取服务器生成的默认值</span></a> 完全关联于 <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> 集合的参数，包括默认架构（如果有）。</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../dialects/postgresql.html#postgresql-sequences"><span class="std std-ref">Sequences/SERIAL/IDENTITY</span></a>  - 在PostgreSQL方言文档中</p>
<p><a class="reference internal" href="../dialects/oracle.html#oracle-returning"><span class="std std-ref">RETURNING Support</span></a>  - 在Oracle方言文档中</p>
</div>
</section>
<section id="generated-always-as">
<span id="computed-ddl"></span><h2>计算列 (GENERATED ALWAYS AS)<a class="headerlink" href="#generated-always-as" title="Permalink to this heading">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.11: </span><a class="reference internal" href="#sqlalchemy.schema.Computed" title="sqlalchemy.schema.Computed"><code class="xref py py-class docutils literal notranslate"><span class="pre">Computed</span></code></a>  构造函数以文本形式声明，与   :class:` .CheckConstraint`  类似。然后，数据库服务器将解释SQL表达式，以确定行中列的值。</p>
</div>
<p>例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Table</span><span class="p">,</span> <span class="n">Column</span><span class="p">,</span> <span class="n">MetaData</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">Computed</span>

<span class="n">metadata_obj</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>

<span class="n">square</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;square&quot;</span><span class="p">,</span>
    <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;side&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">Computed</span><span class="p">(</span><span class="s2">&quot;side * side&quot;</span><span class="p">)),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;perimeter&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">Computed</span><span class="p">(</span><span class="s2">&quot;4 * side&quot;</span><span class="p">)),</span>
<span class="p">)</span></pre></div>
</div>
<p>当在PostgreSQL 12后端上运行时，<a href="#id43"><span class="problematic" id="id44">``</span></a>square``表的DDL将如下所示:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">square</span> <span class="p">(</span>
    <span class="n">id</span> <span class="n">SERIAL</span> <span class="n">NOT</span> <span class="n">NULL</span><span class="p">,</span>
    <span class="n">side</span> <span class="n">INTEGER</span><span class="p">,</span>
    <span class="n">area</span> <span class="n">INTEGER</span> <span class="n">GENERATED</span> <span class="n">ALWAYS</span> <span class="n">AS</span> <span class="p">(</span><span class="n">side</span> <span class="o">*</span> <span class="n">side</span><span class="p">)</span> <span class="n">STORED</span><span class="p">,</span>
    <span class="n">perimeter</span> <span class="n">INTEGER</span> <span class="n">GENERATED</span> <span class="n">ALWAYS</span> <span class="n">AS</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">side</span><span class="p">)</span> <span class="n">STORED</span><span class="p">,</span>
    <span class="n">PRIMARY</span> <span class="n">KEY</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<p>值是在插入和更新时是否持久化，还是在获取时计算，这是数据库的一个实现细节；前者称为 “stored”，后者称为 “virtual”。某些数据库实现支持两者，但有些只支持其中一个。可以指定 <strong>computed.persisted</strong> 标志，指定 “STORED” 或 “VIRTUAL” 关键字是否应呈现在DDL中，如果目标后端不支持关键字，则会引发错误；如果不设置，则使用目标后端的默认值。</p>
<blockquote>
<div><p><a class="reference internal" href="#sqlalchemy.schema.Computed" title="sqlalchemy.schema.Computed"><code class="xref py py-class docutils literal notranslate"><span class="pre">Computed</span></code></a> .FetchedValue` 对象的子类，将自己设置为目标   <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>  的 “server default” 和 “server onupdate” 生成器，这意味着在生成INSERT和UPDATE语句时，它将被视为一个默认生成列，当使用ORM时也将被获取为一个生成列。这包括对于支持RETURNING的数据库：它将成为数据库的RETURNING子句的一部分，并且生成的值将被急切地获取。</p>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>用   <a class="reference internal" href="#sqlalchemy.schema.Computed" title="sqlalchemy.schema.Computed"><code class="xref py py-class docutils literal notranslate"><span class="pre">Computed</span></code></a>  定义的   :class:` _schema.Column`  可以在服务器应用的值之外不存储任何值；当向这样的列中传递值以应写入INSERT或UPDATE时，SQLAlchemy在当前实现中的行为是将忽略该值。</p>
</div>
<p>现在“GENERATED ALWAYS AS”已知支持以下数据库：</p>
<ul class="simple">
<li><p>MySQL版本5.7及更高版本</p></li>
<li><p>MariaDB10.x系列及更高版本</p></li>
<li><p>PostgreSQL自版本12起</p></li>
<li><p>Oracle - 带有警告，即UPDATE.. RETURNING中包括计算列时，RETURNING无法正确工作，会发出一个警告。</p></li>
<li><p>Microsoft SQL Server</p></li>
<li><p>SQLite自版本3.31起</p></li>
</ul>
<p>当不支持   <a class="reference internal" href="#sqlalchemy.schema.Computed" title="sqlalchemy.schema.Computed"><code class="xref py py-class docutils literal notranslate"><span class="pre">Computed</span></code></a>  的后端使用时，如果目标方言不支持它，则会在尝试渲染构造时引发   :class:` .CompileError` 。否则，如果方言支持它，但所使用的特定数据库服务器版本不支持它，则在将DDL发布到数据库时引发   <a class="reference internal" href="exceptions.html#sqlalchemy.exc.DBAPIError" title="sqlalchemy.exc.DBAPIError"><code class="xref py py-class docutils literal notranslate"><span class="pre">DBAPIError</span></code></a>  子类，通常是   :class:` .OperationalError` 。</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.schema.Computed" title="sqlalchemy.schema.Computed"><code class="xref py py-class docutils literal notranslate"><span class="pre">Computed</span></code></a></p>
</div>
</section>
<section id="generated-always-by-default-as-identity">
<span id="identity-ddl"></span><h2>标识列 (GENERATED {ALWAYS | BY DEFAULT} AS IDENTITY)<a class="headerlink" href="#generated-always-by-default-as-identity" title="Permalink to this heading">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4: </span><a class="reference internal" href="#sqlalchemy.schema.Identity" title="sqlalchemy.schema.Identity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code></a> .Sequence` 控件控制数据库行为的选项的共享。</p>
</div>
<p>例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Table</span><span class="p">,</span> <span class="n">Column</span><span class="p">,</span> <span class="n">MetaData</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">Identity</span><span class="p">,</span> <span class="n">String</span>

<span class="n">metadata_obj</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;data&quot;</span><span class="p">,</span>
    <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">Identity</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">cycle</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<p>当在PostgreSQL 12后端上运行时，<a href="#id45"><span class="problematic" id="id46">``</span></a>data``表的DDL将如下所示:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">data</span> <span class="p">(</span>
    <span class="n">id</span> <span class="n">INTEGER</span> <span class="n">GENERATED</span> <span class="n">BY</span> <span class="n">DEFAULT</span> <span class="n">AS</span> <span class="n">IDENTITY</span> <span class="p">(</span><span class="n">START</span> <span class="n">WITH</span> <span class="mi">42</span> <span class="n">CYCLE</span><span class="p">)</span> <span class="n">NOT</span> <span class="n">NULL</span><span class="p">,</span>
    <span class="n">data</span> <span class="n">VARCHAR</span><span class="p">,</span>
    <span class="n">PRIMARY</span> <span class="n">KEY</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<p>在插入时，数据库将为”<code class="docutils literal notranslate"><span class="pre">id</span></code>”列生成一个值，从”<code class="docutils literal notranslate"><span class="pre">42</span></code>”开始，如果语句中不存在”<code class="docutils literal notranslate"><span class="pre">id</span></code>”列的值。标识列还可以要求数据库生成该列的值，无论传递给语句的值如何，或者引发错误，具体取决于后端。要激活此模式，在  <a class="reference internal" href="#sqlalchemy.schema.Identity" title="sqlalchemy.schema.Identity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code></a>  设置为 ` <cite>True`</cite> 。将上一个示例更新以包括此参数将生成以下DDL：</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="p">(</span>
<span class="w">      </span><span class="n">id</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">GENERATED</span><span class="w"> </span><span class="n">ALWAYS</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">IDENTITY</span><span class="w"> </span><span class="p">(</span><span class="k">START</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="mi">42</span><span class="w"> </span><span class="k">CYCLE</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">      </span><span class="k">data</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span>
<span class="w">      </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="w">  </span><span class="p">)</span>

<span class="p">:</span><span class="k">class</span><span class="p">:</span><span class="o">`</span><span class="p">.</span><span class="k">Identity</span><span class="o">`</span><span class="w">  </span><span class="err">构造是</span><span class="w">   </span><span class="p">:</span><span class="k">class</span><span class="p">:</span><span class="o">`</span><span class="w"> </span><span class="p">.</span><span class="n">FetchedValue</span><span class="o">`</span><span class="w">  </span><span class="err">对象的子类，并将自身设置为目标</span><span class="w">   </span><span class="p">:</span><span class="k">class</span><span class="p">:</span><span class="o">`</span><span class="n">_schema</span><span class="p">.</span><span class="k">Column</span><span class="o">`</span><span class="w">  </span><span class="err">的</span><span class="w"> </span><span class="ss">&quot;server default&quot;</span><span class="w"> </span><span class="err">生成器，这意味着在生成</span><span class="n">INSERT语句时</span><span class="err">，它将被视为一个默认生成列，当使用</span><span class="n">ORM时也将被获取为一个生成列</span><span class="err">。这包括对于支持</span><span class="n">RETURNING的数据库</span><span class="err">：它将成为数据库的</span><span class="n">RETURNING子句的一部分</span><span class="err">，并且生成的值将被急切地获取。</span></pre></div>
</div>
<p>目前已知支持   <a class="reference internal" href="#sqlalchemy.schema.Identity" title="sqlalchemy.schema.Identity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code></a>  构造的有：</p>
<ul class="simple">
<li><p>PostgreSQL自版本10起。</p></li>
<li><p>Oracle自版本12起。它还支持将always=None传递以启用默认生成模式，并支持将参数on_null=True与 “BY DEFAULT” 标识列结合使用来指定 “ON NULL”。</p></li>
<li><p>Microsoft SQL Server。MSSQL使用自定义语法，仅支持 “start” 和 “increment” 参数，并忽略所有其他参数。</p></li>
</ul>
<p>当在  <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> .Identity` 且同时设置  <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.autoincrement" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.autoincrement</span></code></a>  为 ` <cite>False`</cite> 时，将引发错误。</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.schema.Identity" title="sqlalchemy.schema.Identity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code></a></p>
</div>
</section>
<section id="api">
<h2>默认对象API<a class="headerlink" href="#api" title="Permalink to this heading">¶</a></h2>
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.ColumnDefault"><span class="sig-name descname">ColumnDefault</span></a></p></td>
<td><p>A plain default value on a column.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.Computed"><span class="sig-name descname">Computed</span></a></p></td>
<td><p>Defines a generated column, i.e. “GENERATED ALWAYS AS” syntax.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.DefaultClause"><span class="sig-name descname">DefaultClause</span></a></p></td>
<td><p>A DDL-specified DEFAULT column value.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.DefaultGenerator"><span class="sig-name descname">DefaultGenerator</span></a></p></td>
<td><p>Base class for column <em>default</em> values.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.FetchedValue"><span class="sig-name descname">FetchedValue</span></a></p></td>
<td><p>A marker for a transparent database-side default.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.Identity"><span class="sig-name descname">Identity</span></a></p></td>
<td><p>Defines an identity column, i.e. “GENERATED { ALWAYS | BY DEFAULT }
AS IDENTITY” syntax.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.Sequence"><span class="sig-name descname">Sequence</span></a></p></td>
<td><p>Represents a named database sequence.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.Computed">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">Computed</span></span><a class="headerlink" href="#sqlalchemy.schema.Computed" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines a generated column, i.e. “GENERATED ALWAYS AS” syntax.</p>
<p>The <a class="reference internal" href="#sqlalchemy.schema.Computed" title="sqlalchemy.schema.Computed"><code class="xref py py-class docutils literal notranslate"><span class="pre">Computed</span></code></a> construct is an inline construct added to the
argument list of a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Computed</span>

<span class="n">Table</span><span class="p">(</span><span class="s1">&#39;square&#39;</span><span class="p">,</span> <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;side&#39;</span><span class="p">,</span> <span class="n">Float</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;area&#39;</span><span class="p">,</span> <span class="n">Float</span><span class="p">,</span> <span class="n">Computed</span><span class="p">(</span><span class="s1">&#39;side * side&#39;</span><span class="p">))</span>
<span class="p">)</span></pre></div>
</div>
<p>See the linked documentation below for complete details.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.11.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#computed-ddl"><span class="std std-ref">计算列 (GENERATED ALWAYS AS)</span></a></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.schema.Computed.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.Computed.copy"><span class="sig-name descname">copy()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.schema.Computed" title="sqlalchemy.schema.Computed"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.Computed</span></code></a> (<a class="reference internal" href="#sqlalchemy.schema.FetchedValue" title="sqlalchemy.schema.FetchedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.FetchedValue</span></code></a>, <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.SchemaItem</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.Computed.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.Computed"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Computed.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sqltext</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_DDLColumnArgument</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">persisted</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.Computed.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a GENERATED ALWAYS AS DDL construct to accompany a
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.Computed.params.sqltext"></span><strong>sqltext</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Computed.params.sqltext">¶</a> – <p>A string containing the column generation expression, which will be
used verbatim, or a SQL expression construct, such as a
<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a>
object.   If given as a string, the object is converted to a
<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a> object.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <a class="reference internal" href="#sqlalchemy.schema.Computed.params.sqltext" title="sqlalchemy.schema.Computed"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Computed.sqltext</span></code></a> argument to <a class="reference internal" href="#sqlalchemy.schema.Computed" title="sqlalchemy.schema.Computed"><code class="xref py py-class docutils literal notranslate"><span class="pre">Computed</span></code></a> can be passed as a Python string argument, which will be treated as <strong>trusted SQL text</strong> and rendered as given.  <strong>DO NOT PASS UNTRUSTED INPUT TO THIS PARAMETER</strong>.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Computed.params.persisted"></span><strong>persisted</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Computed.params.persisted">¶</a> – <p>Optional, controls how this column should be persisted by the
database.   Possible values are:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">None</span></code>, the default, it will use the default persistence
defined by the database.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">True</span></code>, will render <code class="docutils literal notranslate"><span class="pre">GENERATED</span> <span class="pre">ALWAYS</span> <span class="pre">AS</span> <span class="pre">...</span> <span class="pre">STORED</span></code>, or the
equivalent for the target database if supported.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">False</span></code>, will render <code class="docutils literal notranslate"><span class="pre">GENERATED</span> <span class="pre">ALWAYS</span> <span class="pre">AS</span> <span class="pre">...</span> <span class="pre">VIRTUAL</span></code>, or
the equivalent for the target database if supported.</p></li>
</ul>
<p>Specifying <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> may raise an error when the DDL
is emitted to the target database if the database does not support
that persistence option.   Leaving this parameter at its default
of <code class="docutils literal notranslate"><span class="pre">None</span></code> is guaranteed to succeed for all databases that support
<code class="docutils literal notranslate"><span class="pre">GENERATED</span> <span class="pre">ALWAYS</span> <span class="pre">AS</span></code>.</p>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.Computed.copy">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.Computed"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Computed.</span></code></a><span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.sql.schema.Table"><span class="pre">Table</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.schema.Computed" title="sqlalchemy.sql.schema.Computed"><span class="pre">Computed</span></a></span></span><a class="headerlink" href="#sqlalchemy.schema.Computed.copy" title="Permalink to this definition">¶</a></dt>
<dd><div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4: </span>The <a class="reference internal" href="#sqlalchemy.schema.Computed.copy" title="sqlalchemy.schema.Computed.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Computed.copy()</span></code></a> method is deprecated and will be removed in a future release.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.ColumnDefault">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">ColumnDefault</span></span><a class="headerlink" href="#sqlalchemy.schema.ColumnDefault" title="Permalink to this definition">¶</a></dt>
<dd><p>A plain default value on a column.</p>
<p>This could correspond to a constant, a callable function,
or a SQL clause.</p>
<p><a class="reference internal" href="#sqlalchemy.schema.ColumnDefault" title="sqlalchemy.schema.ColumnDefault"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnDefault</span></code></a> is generated automatically
whenever the <code class="docutils literal notranslate"><span class="pre">default</span></code>, <code class="docutils literal notranslate"><span class="pre">onupdate</span></code> arguments of
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> are used.  A <a class="reference internal" href="#sqlalchemy.schema.ColumnDefault" title="sqlalchemy.schema.ColumnDefault"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnDefault</span></code></a>
can be passed positionally as well.</p>
<p>For example, the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span></pre></div>
</div>
<p>Is equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">ColumnDefault</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span></pre></div>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.schema.ColumnDefault" title="sqlalchemy.schema.ColumnDefault"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.ColumnDefault</span></code></a> (<a class="reference internal" href="#sqlalchemy.schema.DefaultGenerator" title="sqlalchemy.schema.DefaultGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.DefaultGenerator</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code>)</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.DefaultClause">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">DefaultClause</span></span><a class="headerlink" href="#sqlalchemy.schema.DefaultClause" title="Permalink to this definition">¶</a></dt>
<dd><p>A DDL-specified DEFAULT column value.</p>
<p><a class="reference internal" href="#sqlalchemy.schema.DefaultClause" title="sqlalchemy.schema.DefaultClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">DefaultClause</span></code></a> is a <a class="reference internal" href="#sqlalchemy.schema.FetchedValue" title="sqlalchemy.schema.FetchedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">FetchedValue</span></code></a>
that also generates a “DEFAULT” clause when
“CREATE TABLE” is emitted.</p>
<p><a class="reference internal" href="#sqlalchemy.schema.DefaultClause" title="sqlalchemy.schema.DefaultClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">DefaultClause</span></code></a> is generated automatically
whenever the <code class="docutils literal notranslate"><span class="pre">server_default</span></code>, <code class="docutils literal notranslate"><span class="pre">server_onupdate</span></code> arguments of
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> are used.  A <a class="reference internal" href="#sqlalchemy.schema.DefaultClause" title="sqlalchemy.schema.DefaultClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">DefaultClause</span></code></a>
can be passed positionally as well.</p>
<p>For example, the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">server_default</span><span class="o">=</span><span class="s2">&quot;50&quot;</span><span class="p">)</span></pre></div>
</div>
<p>Is equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">DefaultClause</span><span class="p">(</span><span class="s2">&quot;50&quot;</span><span class="p">))</span></pre></div>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.schema.DefaultClause" title="sqlalchemy.schema.DefaultClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.DefaultClause</span></code></a> (<a class="reference internal" href="#sqlalchemy.schema.FetchedValue" title="sqlalchemy.schema.FetchedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.FetchedValue</span></code></a>)</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.DefaultGenerator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">DefaultGenerator</span></span><a class="headerlink" href="#sqlalchemy.schema.DefaultGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for column <em>default</em> values.</p>
<p>This object is only present on column.default or column.onupdate.
It’s not valid as a server default.</p>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.schema.DefaultGenerator" title="sqlalchemy.schema.DefaultGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.DefaultGenerator</span></code></a> (<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Executable</span></code></a>, <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.SchemaItem</span></code></a>)</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.FetchedValue">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">FetchedValue</span></span><a class="headerlink" href="#sqlalchemy.schema.FetchedValue" title="Permalink to this definition">¶</a></dt>
<dd><p>A marker for a transparent database-side default.</p>
<p>Use <a class="reference internal" href="#sqlalchemy.schema.FetchedValue" title="sqlalchemy.schema.FetchedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">FetchedValue</span></code></a> when the database is configured
to provide some automatic default for a column.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">FetchedValue</span><span class="p">())</span></pre></div>
</div>
<p>Would indicate that some trigger or default generator
will create a new value for the <code class="docutils literal notranslate"><span class="pre">foo</span></code> column during an
INSERT.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">triggered_columns</span></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.schema.FetchedValue" title="sqlalchemy.schema.FetchedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.FetchedValue</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.SchemaEventTarget</span></code>)</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.Sequence">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">Sequence</span></span><a class="headerlink" href="#sqlalchemy.schema.Sequence" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a named database sequence.</p>
<p>The <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> object represents the name and configurational
parameters of a database sequence.   It also represents
a construct that can be “executed” by a SQLAlchemy <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
or <a class="reference internal" href="connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>,
rendering the appropriate “next value” function
for the target database and returning a result.</p>
<p>The <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> is typically associated with a primary key column:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">some_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s1">&#39;some_table&#39;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">(</span><span class="s1">&#39;some_table_seq&#39;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
    <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<p>When CREATE TABLE is emitted for the above <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>, if the
target platform supports sequences, a CREATE SEQUENCE statement will
be emitted as well.   For platforms that don’t support sequences,
the <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> construct is ignored.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">defaults_sequences</span></p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateSequence</span></code></p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">DropSequence</span></code></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.schema.Sequence.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.Sequence.create"><span class="sig-name descname">create()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.Sequence.drop"><span class="sig-name descname">drop()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.Sequence.next_value"><span class="sig-name descname">next_value()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.Sequence</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.HasSchemaAttr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.IdentityOptions</span></code>, <a class="reference internal" href="#sqlalchemy.schema.DefaultGenerator" title="sqlalchemy.schema.DefaultGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.DefaultGenerator</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.Sequence.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.Sequence"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Sequence.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">increment</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minvalue</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxvalue</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nominvalue</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nomaxvalue</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cycle</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">SchemaConst.BLANK_SCHEMA</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_TypeEngineArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optional</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quote</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><span class="pre">MetaData</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quote_schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">for_update</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.Sequence.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.Sequence.params.name"></span><strong>name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.name">¶</a> – the name of the sequence.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Sequence.params.start"></span><strong>start</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.start">¶</a> – <p>the starting index of the sequence.  This value is
used when the CREATE SEQUENCE command is emitted to the database
as the value of the “START WITH” clause. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, the
clause is omitted, which on most platforms indicates a starting
value of 1.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.0: </span>The <a class="reference internal" href="#sqlalchemy.schema.Sequence.params.start" title="sqlalchemy.schema.Sequence"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Sequence.start</span></code></a> parameter
is required in order to have DDL emit “START WITH”.  This is a
reversal of a change made in version 1.4 which would implicitly
render “START WITH 1” if the <a class="reference internal" href="#sqlalchemy.schema.Sequence.params.start" title="sqlalchemy.schema.Sequence"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Sequence.start</span></code></a> were
not included.  See <a class="reference internal" href="../changelog/whatsnew_20.html#change-7211"><span class="std std-ref">``Sequence``构造现在默认不具有任何显式的默认“开始”值；影响到SQL Server</span></a> for more detail.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Sequence.params.increment"></span><strong>increment</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.increment">¶</a> – the increment value of the sequence.  This
value is used when the CREATE SEQUENCE command is emitted to
the database as the value of the “INCREMENT BY” clause.  If <code class="docutils literal notranslate"><span class="pre">None</span></code>,
the clause is omitted, which on most platforms indicates an
increment of 1.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Sequence.params.minvalue"></span><strong>minvalue</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.minvalue">¶</a> – the minimum value of the sequence.  This
value is used when the CREATE SEQUENCE command is emitted to
the database as the value of the “MINVALUE” clause.  If <code class="docutils literal notranslate"><span class="pre">None</span></code>,
the clause is omitted, which on most platforms indicates a
minvalue of 1 and -2^63-1 for ascending and descending sequences,
respectively.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Sequence.params.maxvalue"></span><strong>maxvalue</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.maxvalue">¶</a> – the maximum value of the sequence.  This
value is used when the CREATE SEQUENCE command is emitted to
the database as the value of the “MAXVALUE” clause.  If <code class="docutils literal notranslate"><span class="pre">None</span></code>,
the clause is omitted, which on most platforms indicates a
maxvalue of 2^63-1 and -1 for ascending and descending sequences,
respectively.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Sequence.params.nominvalue"></span><strong>nominvalue</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.nominvalue">¶</a> – no minimum value of the sequence.  This
value is used when the CREATE SEQUENCE command is emitted to
the database as the value of the “NO MINVALUE” clause.  If <code class="docutils literal notranslate"><span class="pre">None</span></code>,
the clause is omitted, which on most platforms indicates a
minvalue of 1 and -2^63-1 for ascending and descending sequences,
respectively.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Sequence.params.nomaxvalue"></span><strong>nomaxvalue</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.nomaxvalue">¶</a> – no maximum value of the sequence.  This
value is used when the CREATE SEQUENCE command is emitted to
the database as the value of the “NO MAXVALUE” clause.  If <code class="docutils literal notranslate"><span class="pre">None</span></code>,
the clause is omitted, which on most platforms indicates a
maxvalue of 2^63-1 and -1 for ascending and descending sequences,
respectively.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Sequence.params.cycle"></span><strong>cycle</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.cycle">¶</a> – allows the sequence to wrap around when the maxvalue
or minvalue has been reached by an ascending or descending sequence
respectively.  This value is used when the CREATE SEQUENCE command
is emitted to the database as the “CYCLE” clause.  If the limit is
reached, the next number generated will be the minvalue or maxvalue,
respectively.  If cycle=False (the default) any calls to nextval
after the sequence has reached its maximum value will return an
error.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Sequence.params.schema"></span><strong>schema</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.schema">¶</a> – optional schema name for the sequence, if located
in a schema other than the default.  The rules for selecting the
schema name when a <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>
is also present are the same
as that of <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.params.schema" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.schema</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Sequence.params.cache"></span><strong>cache</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.cache">¶</a> – optional integer value; number of future values in the
sequence which are calculated in advance.  Renders the CACHE keyword
understood by Oracle and PostgreSQL.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Sequence.params.order"></span><strong>order</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.order">¶</a> – optional boolean value; if <code class="docutils literal notranslate"><span class="pre">True</span></code>, renders the
ORDER keyword, understood by Oracle, indicating the sequence is
definitively ordered.   May be necessary to provide deterministic
ordering using Oracle RAC.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Sequence.params.data_type"></span><strong>data_type</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.data_type">¶</a> – <p>The type to be returned by the sequence, for
dialects that allow us to choose between INTEGER, BIGINT, etc.
(e.g., mssql).</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Sequence.params.optional"></span><strong>optional</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.optional">¶</a> – boolean value, when <code class="docutils literal notranslate"><span class="pre">True</span></code>, indicates that this
<a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> object only needs to be explicitly generated
on backends that don’t provide another way to generate primary
key identifiers.  Currently, it essentially means, “don’t create
this sequence on the PostgreSQL backend, where the SERIAL keyword
creates a sequence for us automatically”.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Sequence.params.quote"></span><strong>quote</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.quote">¶</a> – boolean value, when <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>, explicitly
forces quoting of the <a class="reference internal" href="#sqlalchemy.schema.Sequence.params.name" title="sqlalchemy.schema.Sequence"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Sequence.name</span></code></a> on or off.
When left at its default of <code class="docutils literal notranslate"><span class="pre">None</span></code>, normal quoting rules based
on casing and reserved words take place.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Sequence.params.quote_schema"></span><strong>quote_schema</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.quote_schema">¶</a> – Set the quoting preferences for the <code class="docutils literal notranslate"><span class="pre">schema</span></code>
name.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Sequence.params.metadata"></span><strong>metadata</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.metadata">¶</a> – <p>optional <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> object which this
<a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> will be associated with.  A <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>
that is associated with a <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>
gains the following
capabilities:</p>
<ul>
<li><p>The <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> will inherit the
<a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.params.schema" title="sqlalchemy.schema.MetaData"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">MetaData.schema</span></code></a>
parameter specified to the target <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>, which
affects the production of CREATE / DROP DDL, if any.</p></li>
<li><p>The <a class="reference internal" href="#sqlalchemy.schema.Sequence.create" title="sqlalchemy.schema.Sequence.create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Sequence.create()</span></code></a> and <a class="reference internal" href="#sqlalchemy.schema.Sequence.drop" title="sqlalchemy.schema.Sequence.drop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Sequence.drop()</span></code></a> methods
automatically use the engine bound to the <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>
object, if any.</p></li>
<li><p>The <code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code> and
<code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.drop_all()</span></code>
methods will emit CREATE / DROP for this <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>,
even if the <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> is not associated with any
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> / <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
that’s a member of this
<a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>.</p></li>
</ul>
<p>The above behaviors can only occur if the <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> is
explicitly associated with the <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>
via this parameter.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">sequence_metadata</span> - full discussion of the
<a class="reference internal" href="#sqlalchemy.schema.Sequence.params.metadata" title="sqlalchemy.schema.Sequence"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Sequence.metadata</span></code></a> parameter.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Sequence.params.for_update"></span><strong>for_update</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.for_update">¶</a> – Indicates this <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>, when associated
with a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>,
should be invoked for UPDATE statements
on that column’s table, rather than for INSERT statements, when
no value is otherwise present for that column in the statement.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.Sequence.create">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.Sequence"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Sequence.</span></code></a><span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CreateDropBind</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkfirst</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.Sequence.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates this sequence in the database.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.Sequence.drop">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.Sequence"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Sequence.</span></code></a><span class="sig-name descname"><span class="pre">drop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CreateDropBind</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkfirst</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.Sequence.drop" title="Permalink to this definition">¶</a></dt>
<dd><p>Drops this sequence from the database.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.Sequence.next_value">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.Sequence"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Sequence.</span></code></a><span class="sig-name descname"><span class="pre">next_value</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="functions.html#sqlalchemy.sql.functions.Function" title="sqlalchemy.sql.functions.Function"><span class="pre">Function</span></a><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.schema.Sequence.next_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="functions.html#sqlalchemy.sql.functions.next_value" title="sqlalchemy.sql.functions.next_value"><code class="xref py py-class docutils literal notranslate"><span class="pre">next_value</span></code></a> function element
which will render the appropriate increment function
for this <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> within any SQL expression.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.Identity">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">Identity</span></span><a class="headerlink" href="#sqlalchemy.schema.Identity" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines an identity column, i.e. “GENERATED { ALWAYS | BY DEFAULT }
AS IDENTITY” syntax.</p>
<p>The <a class="reference internal" href="#sqlalchemy.schema.Identity" title="sqlalchemy.schema.Identity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code></a> construct is an inline construct added to the
argument list of a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Identity</span>

<span class="n">Table</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">Identity</span><span class="p">())</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">,</span> <span class="n">Text</span><span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<p>See the linked documentation below for complete details.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#identity-ddl"><span class="std std-ref">标识列 (GENERATED {ALWAYS | BY DEFAULT} AS IDENTITY)</span></a></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.schema.Identity.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.Identity.copy"><span class="sig-name descname">copy()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.schema.Identity" title="sqlalchemy.schema.Identity"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.Identity</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.IdentityOptions</span></code>, <a class="reference internal" href="#sqlalchemy.schema.FetchedValue" title="sqlalchemy.schema.FetchedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.FetchedValue</span></code></a>, <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.SchemaItem</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.Identity.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.Identity"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Identity.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">always</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">on_null</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">increment</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minvalue</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxvalue</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nominvalue</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nomaxvalue</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cycle</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.Identity.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a GENERATED { ALWAYS | BY DEFAULT } AS IDENTITY DDL
construct to accompany a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>.</p>
<p>See the <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> documentation for a complete description
of most parameters.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>MSSQL supports this construct as the preferred alternative to
generate an IDENTITY on a column, but it uses non standard
syntax that only support <a class="reference internal" href="#sqlalchemy.schema.Identity.params.start" title="sqlalchemy.schema.Identity"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Identity.start</span></code></a>
and <a class="reference internal" href="#sqlalchemy.schema.Identity.params.increment" title="sqlalchemy.schema.Identity"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Identity.increment</span></code></a>.
All other parameters are ignored.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.Identity.params.always"></span><strong>always</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Identity.params.always">¶</a> – A boolean, that indicates the type of identity column.
If <code class="docutils literal notranslate"><span class="pre">False</span></code> is specified, the default, then the user-specified
value takes precedence.
If <code class="docutils literal notranslate"><span class="pre">True</span></code> is specified, a user-specified value is not accepted (
on some backends, like PostgreSQL, OVERRIDING SYSTEM VALUE, or
similar, may be specified in an INSERT to override the sequence
value).
Some backends also have a default value for this parameter,
<code class="docutils literal notranslate"><span class="pre">None</span></code> can be used to omit rendering this part in the DDL. It
will be treated as <code class="docutils literal notranslate"><span class="pre">False</span></code> if a backend does not have a default
value.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Identity.params.on_null"></span><strong>on_null</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Identity.params.on_null">¶</a> – Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to specify ON NULL in conjunction with a
<code class="docutils literal notranslate"><span class="pre">always=False</span></code> identity column. This option is only supported on
some backends, like Oracle.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Identity.params.start"></span><strong>start</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Identity.params.start">¶</a> – the starting index of the sequence.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Identity.params.increment"></span><strong>increment</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Identity.params.increment">¶</a> – the increment value of the sequence.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Identity.params.minvalue"></span><strong>minvalue</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Identity.params.minvalue">¶</a> – the minimum value of the sequence.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Identity.params.maxvalue"></span><strong>maxvalue</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Identity.params.maxvalue">¶</a> – the maximum value of the sequence.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Identity.params.nominvalue"></span><strong>nominvalue</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Identity.params.nominvalue">¶</a> – no minimum value of the sequence.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Identity.params.nomaxvalue"></span><strong>nomaxvalue</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Identity.params.nomaxvalue">¶</a> – no maximum value of the sequence.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Identity.params.cycle"></span><strong>cycle</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Identity.params.cycle">¶</a> – allows the sequence to wrap around when the maxvalue
or minvalue has been reached.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Identity.params.cache"></span><strong>cache</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Identity.params.cache">¶</a> – optional integer value; number of future values in the
sequence which are calculated in advance.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Identity.params.order"></span><strong>order</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Identity.params.order">¶</a> – optional boolean value; if true, renders the
ORDER keyword.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.Identity.copy">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.Identity"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Identity.</span></code></a><span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.schema.Identity" title="sqlalchemy.sql.schema.Identity"><span class="pre">Identity</span></a></span></span><a class="headerlink" href="#sqlalchemy.schema.Identity.copy" title="Permalink to this definition">¶</a></dt>
<dd><div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4: </span>The <a class="reference internal" href="#sqlalchemy.schema.Identity.copy" title="sqlalchemy.schema.Identity.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Identity.copy()</span></code></a> method is deprecated and will be removed in a future release.</p>
</div>
</dd></dl>

</dd></dl>

</section>
</section>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="reflection.html" title="previous chapter">从数据库反射对象</a>
        Next:
        <a href="constraints.html" title="next chapter">定义约束和索引</a>

    <div id="docs-copyright">
        &copy; <a href="../copyright.html">Copyright</a> 2007-2023, the SQLAlchemy authors and contributors.


    <p><b>flambé!</b> the dragon and <b><i>The Alchemist</i></b> image designs created and generously donated by <a href="https://github.com/vmalloc">Rotem Yaari</a>.</p>

        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 7.0.1.

    Documentation last generated: 2023/8/18 18:58:41

    </div>
</div>

</div>



        
        

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '2.0.19',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>

    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script type="text/javascript" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/sphinx_highlight.js"></script>
        <script type="text/javascript" src="../_static/clipboard.min.js"></script>
        <script type="text/javascript" src="../_static/copybutton.js"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../_static/init.js"></script>


    </body>
</html>


