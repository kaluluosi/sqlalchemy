<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>
            
    
    使用MetaData描述数据库
 &mdash;
    SQLAlchemy 2.0 Documentation

        </title>

        
            <!-- begin iterate through site-imported + sphinx environment css_files -->
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/default.css" type="text/css" />
                <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
                <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../_static/sphinx_paramlinks.css" type="text/css" />
            <!-- end iterate through site-imported + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
        <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="SQLAlchemy 2.0 Documentation" href="../index.html" />
        <link rel="up" title="模式定义语言 (Schema Definition Language)" href="schema.html" />
        <link rel="next" title="从数据库反射对象" href="reflection.html" />
        <link rel="prev" title="模式定义语言 (Schema Definition Language)" href="schema.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">2.0.19</span>


        | Release Date: July 15, 2023

    </div>

    <h1><a href="../index.html">SQLAlchemy 2.0 Documentation</a></h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">



        <div id="docs-sidebar-popout">
            <h3><a href="../index.html">SQLAlchemy 2.0 Documentation</a></h3>
            <p id="sidebar-topnav">
                <a href="../index.html">Home</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12" />
                  </label>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="index.html" title="SQLAlchemy 核心">SQLAlchemy 核心</a>
        </h3>

        <ul>
<li><span class="link-container"><a class="reference external" href="expression_api.html">SQL语句和表达式API</a></span></li>
<li><span class="link-container"><a class="reference external" href="schema.html">模式定义语言 (Schema Definition Language)</a></span><ul>
<li class="selected"><span class="link-container"><strong>使用MetaData描述数据库</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#metadata-tables-and-columns">访问表和列</a></span></li>
<li><span class="link-container"><a class="reference external" href="#id20">创建和删除数据库表</a></span></li>
<li><span class="link-container"><a class="reference external" href="#migrations">通过Migrations修改数据库对象</a></span></li>
<li><span class="link-container"><a class="reference external" href="#schema-table-schema-name">指定模式名称</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#schema-metadata-schema-name">使用MetaData指定默认模式名称</a></span></li>
<li><span class="link-container"><a class="reference external" href="#schema-dynamic-naming-convention">应用动态模式命名约定</a></span></li>
<li><span class="link-container"><a class="reference external" href="#schema-set-default-connections">为新连接设置默认模式</a></span></li>
<li><span class="link-container"><a class="reference external" href="#id43">模式和反射</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#id44">特定于后端的选项</a></span></li>
<li><span class="link-container"><a class="reference external" href="#metadata-api">列，表，MetaData API</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.sqlalchemy.schema.BLANK_SCHEMA"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.BLANK_SCHEMA</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.sqlalchemy.schema.RETAIN_SCHEMA"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.RETAIN_SCHEMA</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.Column"><code class="docutils literal notranslate"><span class="pre">Column</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.Column.__init__"><code class="docutils literal notranslate"><span class="pre">Column.__init__()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.MetaData"><code class="docutils literal notranslate"><span class="pre">MetaData</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.MetaData.__init__"><code class="docutils literal notranslate"><span class="pre">MetaData.__init__()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.SchemaConst"><code class="docutils literal notranslate"><span class="pre">SchemaConst</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.SchemaItem"><code class="docutils literal notranslate"><span class="pre">SchemaItem</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.insert_sentinel"><code class="docutils literal notranslate"><span class="pre">insert_sentinel()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.Table"><code class="docutils literal notranslate"><span class="pre">Table</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.Table.__init__"><code class="docutils literal notranslate"><span class="pre">Table.__init__()</span></code></a></span></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="reflection.html">从数据库反射对象</a></span></li>
<li><span class="link-container"><a class="reference external" href="defaults.html">列INSERT/UPDATE默认值</a></span></li>
<li><span class="link-container"><a class="reference external" href="constraints.html">定义约束和索引</a></span></li>
<li><span class="link-container"><a class="reference external" href="ddl.html">自定义 DDL</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="types.html">SQL 数据类型对象</a></span></li>
<li><span class="link-container"><a class="reference external" href="engines_connections.html">引擎与连接使用</a></span></li>
<li><span class="link-container"><a class="reference external" href="api_basics.html">Core API基础知识</a></span></li>
</ul>



        </div>

        </div>

    </div>

    <div id="narrow-index-nav">
        <form class="search" action="../search.html" method="get">
            <label>
                Search terms:
            <input type="text" placeholder="search..." name="q" size="12" />
            </label>
            <input type="submit" value="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>

        <p>
        <a href="../index.html">Home</a>
        </p>

    </div>


        <div id="docs-narrow-top-navigation">
            <ul>
                <li><b>Previous:</b>
                <a href="schema.html" title="previous chapter">模式定义语言 (Schema Definition Language)</a></li>
                <li><b>Next:</b>
                <a href="reflection.html" title="next chapter">从数据库反射对象</a></li>

            <li><b>Up:</b> <a href="../index.html">Home</a></li>
                    <ul><li><a href="index.html" title="SQLAlchemy 核心">SQLAlchemy 核心</a></li>
                    <ul><li><a href="schema.html" title="模式定义语言 (Schema Definition Language)">模式定义语言 (Schema Definition Language)</a></li>
                </ul>
                </ul>



            <li><b>On this page:</b></li>
            <ul>
<li><a class="reference internal" href="#module-sqlalchemy.schema">使用MetaData描述数据库</a><ul>
<li><a class="reference internal" href="#metadata-tables-and-columns">访问表和列</a></li>
<li><a class="reference internal" href="#id20">创建和删除数据库表</a></li>
<li><a class="reference internal" href="#migrations">通过Migrations修改数据库对象</a></li>
<li><a class="reference internal" href="#schema-table-schema-name">指定模式名称</a><ul>
<li><a class="reference internal" href="#schema-metadata-schema-name">使用MetaData指定默认模式名称</a></li>
<li><a class="reference internal" href="#schema-dynamic-naming-convention">应用动态模式命名约定</a></li>
<li><a class="reference internal" href="#schema-set-default-connections">为新连接设置默认模式</a></li>
<li><a class="reference internal" href="#id43">模式和反射</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id44">特定于后端的选项</a></li>
<li><a class="reference internal" href="#metadata-api">列，表，MetaData API</a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.sqlalchemy.schema.BLANK_SCHEMA"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.BLANK_SCHEMA</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.sqlalchemy.schema.RETAIN_SCHEMA"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.RETAIN_SCHEMA</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Column"><code class="docutils literal notranslate"><span class="pre">Column</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.Column.__init__"><code class="docutils literal notranslate"><span class="pre">Column.__init__()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema.MetaData"><code class="docutils literal notranslate"><span class="pre">MetaData</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.MetaData.__init__"><code class="docutils literal notranslate"><span class="pre">MetaData.__init__()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema.SchemaConst"><code class="docutils literal notranslate"><span class="pre">SchemaConst</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.SchemaItem"><code class="docutils literal notranslate"><span class="pre">SchemaItem</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.insert_sentinel"><code class="docutils literal notranslate"><span class="pre">insert_sentinel()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Table"><code class="docutils literal notranslate"><span class="pre">Table</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.Table.__init__"><code class="docutils literal notranslate"><span class="pre">Table.__init__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


            </ul>

        </div>



    <div id="docs-body" role="main" class="withsidebar core-metadata" >
        
<section id="module-sqlalchemy.schema">
<span id="metadata"></span><h1>使用MetaData描述数据库<a class="headerlink" href="#module-sqlalchemy.schema" title="Permalink to this heading">¶</a></h1>
<p>本节讨论基本的  <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> 、 :class:<a href="#id1"><span class="problematic" id="id2">`</span></a>_schema.Column`和 :class:<a href="#id3"><span class="problematic" id="id4">`</span></a>_schema.MetaData`对象。</p>
<p>       <a class="reference internal" href="../tutorial/metadata.html#tutorial-working-with-metadata"><span class="std std-ref">使用数据库元数据</span></a>  - 统一教程中介绍了SQLAlchemy数据库元数据概念的教程</p>
<p>许多不同的数据库（或多个数据库）描述存储在名为 :class:<a href="#id5"><span class="problematic" id="id6">`</span></a>~sqlalchemy.schema.MetaData`的对象中：</p>
<p>    from sqlalchemy import MetaData</p>
<p>    metadata_obj = MetaData()</p>
<blockquote>
<div><p><a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>  是一个容器对象，其中保存了许多描述数据库的（或多个数据库的）不同特性。</p>
</div></blockquote>
<p>要表示表，请使用  <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> ~sqlalchemy.schema.MetaData`对象。其余的位置参数大多数都是描述每个列的 :class:<a href="#id7"><span class="problematic" id="id8">`</span></a>~sqlalchemy.schema.Column`对象：</p>
<p>    from sqlalchemy import Table, Column, Integer, String</p>
<p>    user = Table(
        “user”,
        metadata_obj,
        Column(“user_id”, Integer, primary_key=True),
        Column(“user_name”, String(16), nullable=False),
        Column(“email_address”, String(60)),
        Column(“nickname”, String(50), nullable=False),
    )</p>
<p>上述描述了一个名为“user”的表，其中包含四个列。表的主键由“user_id”列组成。可将多个列分配`primary_key=True`标志，该标志表示多列主键，称为*组合*主键。</p>
<p>请注意，每个列都使用与通用化类型对应的对象描述其数据类型，例如  <a class="reference internal" href="type_basics.html#sqlalchemy.types.Integer" title="sqlalchemy.types.Integer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Integer</span></code></a> ~sqlalchemy.types.String`。 SQLAlchemy具有数十种具有不同特定性级别的类型以及创建自定义类型的能力。类型系统的文档可以在   <a class="reference internal" href="types.html"><span class="std std-ref">SQL 数据类型对象</span></a>  中找到。</p>
<section id="metadata-tables-and-columns">
<span id="id9"></span><h2>访问表和列<a class="headerlink" href="#metadata-tables-and-columns" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><p><a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> <a href="#id10"><span class="problematic" id="id11">`</span></a>sorted_tables``访问者，它以对外键依赖性的顺序返回每个 :class:<a href="#id12"><span class="problematic" id="id13">`</span></a>~sqlalchemy.schema.Table`对象的列表，即，每个表前面都有它所引用的所有表：</p>
</div></blockquote>
<p>    &gt;&gt;&gt; for t in metadata_obj.sorted_tables:
    …     print(t.name)
    user
    user_preference
    invoice
    invoice_item</p>
<p>在大多数情况下，已经显式声明了单个  <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> ~sqlalchemy.schema.Table`，它就具有完整的访问器，在检查其特性时允许检查其所有属性。给定以下 :class:<a href="#id14"><span class="problematic" id="id15">`</span></a>~sqlalchemy.schema.Table`定义：</p>
<p>    employees = Table(
        “employees”,
        metadata_obj,
        Column(“employee_id”, Integer, primary_key=True),
        Column(“employee_name”, String(60), nullable=False),
        Column(“employee_dept”, Integer, ForeignKey(“departments.department_id”)),
    )</p>
<p>请注意，本表中使用的 :class:<a href="#id16"><span class="problematic" id="id17">`</span></a>~sqlalchemy.schema.ForeignKey`对象 - 这个构造定义了对远程表的引用，并且在  :ref:<a href="#id18"><span class="problematic" id="id19">`</span></a>metadata_foreignkeys`中完全描述。 访问该表信息的方法包括:</p>
<p>    # 访问“employee_id”列：
    employees.columns.employee_id</p>
<p>    # 或者：
    employees.c.employee_id</p>
<p>    # 通过字符串
    employees.c [“employee_id”]</p>
<p>    # 可以使用多个字符串返回一组列（新的2.0功能）
    emp_id，name，type = employees.c [“employee_id”、”name”、”type”]</p>
<p>    # 遍历所有列
    for c in employees.c:
        print(c)</p>
<p>    # 获取表的主键列
    for primary_key in employees.primary_key:
        print(primary_key)</p>
<p>    # 获取表的外键对象：
    for fkey in employees.foreign_keys:
        print(fkey)</p>
<p>    # 访问表的MetaData：
    employees.metadata</p>
<p>    # 访问列的名称、类型、可空性、主键、外键
    employees.c.employee_id.name
    employees.c.employee_id.type
    employees.c.employee_id.nullable
    employees.c.employee_id.primary_key
    employees.c.employee_dept.foreign_keys</p>
<p>    # 获取列的“键”，默认为其名称，但可以是任何用户定义字符串：
    employees.c.employee_name.key</p>
<p>    # 访问列的表：
    employees.c.employee_id.table是employees</p>
<p>    # 获取由外键关联的表
    列表（employees.c.employee_dept.foreign_keys）[0] .column.table</p>
<p>   <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.FromClause.c" title="sqlalchemy.sql.expression.FromClause.c"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FromClause.c</span></code></a>  集合同义），是  <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnCollection" title="sqlalchemy.sql.expression.ColumnCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollection</span></code></a> <cite>employees.c.employee_name`</cite>。但是，对于带有空格或与字典方法名称匹配的名称（例如  <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnCollection.keys" title="sqlalchemy.sql.expression.ColumnCollection.keys"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnCollection.keys()</span></code></a>  或  <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnCollection.values" title="sqlalchemy.sql.expression.ColumnCollection.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnCollection.values()</span></code></a>  ），必须使用索引访问，例如``employees.c [‘values’]``或``employees.c [ “some column”]``。 有关详细信息，请参见  <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnCollection" title="sqlalchemy.sql.expression.ColumnCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollection</span></code></a> 。</p>
</section>
<section id="id20">
<h2>创建和删除数据库表<a class="headerlink" href="#id20" title="Permalink to this heading">¶</a></h2>
<p>一旦定义了一些 :class:<a href="#id21"><span class="problematic" id="id22">`</span></a>~sqlalchemy.schema.Table`对象，假设您正在使用全新的数据库，则可能要做的一件事是为这些表及其相关构造发出CREATE语句（顺便提一下，如果您已经有了一些首选方法，例如包含在您的数据库中的工具或现有脚本系统 ，请很高兴跳过此节 - SQLAlchemy不要求使用它来创建表）。</p>
<p>通常发出CREATE的方法是在  <a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> ~sqlalchemy.schema.MetaData.create_all`。此方法将发出查询，首先检查每个单独的表是否存在，如果找不到，则会发出CREATE语句：</p>
<div class="highlight-python+sql notranslate"><div class="highlight"><pre><span></span></pre></div>
</div>
<p>    engine = create_engine(“sqlite:///:memory:”)</p>
<p>    metadata_obj = MetaData()</p>
<p>    user = Table(
        “user”,
        metadata_obj,
        Column(“user_id”, Integer, primary_key=True),
        Column(“user_name”, String(16), nullable=False),
        Column(“email_address”, String(60), key=”email”),
        Column(“nickname”, String(50), nullable=False),
    )</p>
<p>    user_prefs = Table(
        “user_prefs”,
        metadata_obj,
        Column(“pref_id”, Integer, primary_key=True),
        Column(“user_id”, Integer, ForeignKey(“user.user_id”), nullable=False),
        Column(“pref_name”, String(40), nullable=False),
        Column(“pref_value”, String(100)),
    )</p>
<p>    metadata_obj.create_all(engine)
    {execsql}PRAGMA table_info(user){}
    CREATE TABLE user(
            user_id INTEGER NOT NULL PRIMARY KEY,
            user_name VARCHAR(16) NOT NULL,
            email_address VARCHAR(60),
            nickname VARCHAR(50) NOT NULL
    )
    PRAGMA table_info(user_prefs){}
    CREATE TABLE user_prefs(
            pref_id INTEGER NOT NULL PRIMARY KEY,
            user_id INTEGER NOT NULL REFERENCES user(user_id),
            pref_name VARCHAR(40) NOT NULL,
            pref_value VARCHAR(100)
    )</p>
<blockquote>
<div><p><code class="xref py py-func docutils literal notranslate"><span class="pre">create_all()</span></code> <cite>ALTER TABLE`</cite>。</p>
</div></blockquote>
<p>通过使用  <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> <a href="#id23"><span class="problematic" id="id24">`</span></a>create()``和``drop()``方法可以创建和删除单个表。默认情况下，这些方法无论表是否存在都会发出CREATE或DROP：</p>
<div class="highlight-python+sql notranslate"><div class="highlight"><pre><span></span></pre></div>
</div>
<p>    engine = create_engine(“sqlite:///:memory:”)</p>
<p>    metadata_obj = MetaData()</p>
<p>    employees = Table(
        “employees”,
        metadata_obj,
        Column(“employee_id”, Integer, primary_key=True),
        Column(“employee_name”, String(60), nullable=False, key=”name”),
        Column(“employee_dept”, Integer, ForeignKey(“departments.department_id”)),
    )
    employees.create(engine)
    {execsql}CREATE TABLE employees(
        employee_id SERIAL NOT NULL PRIMARY KEY,
        employee_name VARCHAR(60) NOT NULL,
        employee_dept INTEGER REFERENCES departments(department_id)
    )
    {}</p>
<p><a href="#id25"><span class="problematic" id="id26">``</span></a>drop()``方法：</p>
<div class="highlight-python+sql notranslate"><div class="highlight"><pre><span></span></pre></div>
</div>
<p>    employees.drop(engine)
    {execsql}DROP TABLE employees
    {}</p>
<p>要启用“首先检查表存在”的逻辑，请将``create()``或``drop()``的``checkfirst = True``参数添加到中：</p>
<p>    employees.create(engine，checkfirst = True)
    employees.drop(engine，checkfirst = False)</p>
</section>
<section id="migrations">
<span id="schema-migrations"></span><h2>通过Migrations修改数据库对象<a class="headerlink" href="#migrations" title="Permalink to this heading">¶</a></h2>
<p>尽管SQLAlchemy直接支持发射CREATE和DROP语句以进行模式构造，但通常通过ALTER语句以及其他特定于数据库的构造来更改这些构造的能力超出了SQLAlchemy自身的范围。尽管手动发射ALTER语句等很容易，例如通过将  <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a>  或使用  <code class="xref py py-class docutils literal notranslate"><span class="pre">DDL</span></code>  构造，但常规做法是使用模式迁移工具来自动维护数据库架构并与应用程序代码相对应。</p>
<p>SQLAlchemy项目提供了用于此目的的迁移工具 <a class="reference external" href="https://alembic.sqlalchemy.org">Alembic</a>。
Alembic具有高度自定义的环境和最简单的使用模式，支持诸如事务DDL、自动生成“候选”迁移、生成SQL脚本的“脱机”模式以及分支解决方案等功能。</p>
<p>Alembic取代了 <a class="reference external" href="https://github.com/openstack/sqlalchemy-migrate">SQLAlchemy-Migrate</a> 项目，该项目是SQLAlchemy的原始迁移工具，现在已被视为遗留程序。</p>
</section>
<section id="schema-table-schema-name">
<span id="id27"></span><h2>指定模式名称<a class="headerlink" href="#schema-table-schema-name" title="Permalink to this heading">¶</a></h2>
<p>大多数数据库支持多个“模式”的概念 - 指代备选表集和其他构造的空间。具有不同名称空间的“模式”的服务器端几何形状有许多形式，包括特定于特定数据库的“schemas”名称（例如PostgreSQL schemas），同级别命名的兄弟数据库（例如MySQL / MariaDB访问同一服务器上的其他数据库），以及其他概念，比如表由其他用户名（Oracle，SQL Server）拥有或甚至是引用替代数据库文件（SQLite ATTACH）或远程服务器（Oracle DBLINK与 synonym）的名称。</p>
<p>以上所有方法（大多数）共同使用一种方式来使用字符串名称引用此备选表集，即。SQLAlchemy将此名称称为**模式名称**。在SQLAlchemy内部，这只是与 :class:<a href="#id28"><span class="problematic" id="id29">`</span></a>_schema.Table`对象关联的字符串名称，并且随后以适合于目标数据库的方式呈现到SQL语句中，使表表现为在其远程“模式”中引用的表，无论这个机制在目标数据库上是什么。</p>
<p>“模式”名称可能直接与  <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>  参数相关联；当使用ORM时，来自 :ref:<a href="#id30"><span class="problematic" id="id31">`</span></a>orm_declarative_table_config_toplevel`配置的参数字典将传递该参数。</p>
<p>还可以使用   <a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>  对象将“模式”名称与之自动生效于未指定自己的名称的所有   <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>  对象关联。最后，SQLAlchemy还支持一种动态模式名称系统，该系统通常用于每个连接或每个语句基础上的多租户应用程序，以便单个   <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>  元数据集可以引用按每个连接或每个语句基础上动态配置的模式名称集。</p>
<p>      SQLAlchemy对数据库“模式”的支持是针对PostgreSQL样式模式具有一流支持。在这种风格中，首先有一个通常具有单个“所有者”的“数据库”。在该数据库中可以有任意数量的“模式”，然后包含实际的表对象。</p>
<p>      特定模式中的表使用“&lt;schema&gt; .&lt;tablename&gt;”语法显式引用。与这些数据库不同，如MySQL，其中仅有“数据库”，但SQL语句可以使用相同的语法引用多个数据库，该语法类似，除了是“&lt;database&gt; .&lt;tablename&gt;”。在Oracle上，“schema”名称引用了另一个概念，即表的“owner”。无论使用哪种类型的数据库，SQLAlchemy在通用语法“&lt;qualifier&gt;.&lt;tablename&gt;”中使用短语“schema”来指代限定标识符。</p>
<p>      <a class="reference internal" href="../orm/declarative_tables.html#orm-declarative-table-schema-name"><span class="std std-ref">使用 Declarative Table 的显式模式名称</span></a>  - 在ORM使用时的模式名称指定</p>
<p>      <a class="reference internal" href="../orm/declarative_tables.html"><span class="std std-ref">declarative table</span></a>  配置</p>
<p>最基本的示例是使用Core   <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> ，如下所示:</p>
<p>    metadata_obj = MetaData()</p>
<p>    financial_info = Table(
        “financial_info”,
        metadata_obj,
        Column(“id”, Integer, primary_key=True),
        Column(“value”, String(100), nullable=False),
        schema=”remote_banks”,
    )</p>
<p>使用该  <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> <cite>remote_banks``模式名称的表名称 ``financial_info`</cite>：</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span></pre></div>
</div>
<p>    &gt;&gt;&gt; print(select(financial_info))
    {printsql}SELECT remote_banks.financial_info.id, remote_banks.financial_info.value
    FROM remote_banks.financial_info</p>
<p>定义有显式模式名称的  <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> <cite>‘remote_banks.financial_info’``来在  :attr:`_schema.MetaData.tables</cite>  集合中查看它：</p>
<p>    &gt;&gt;&gt; metadata_obj.tables[“remote_banks.financial_info”]
    Table(‘financial_info’, MetaData(),
    Column(‘id’, Integer(), table=&lt;financial_info&gt;, primary_key=True, nullable=False),
    Column(‘value’, String(length=100), table=&lt;financial_info&gt;, nullable=False),
    schema=’remote_banks’)</p>
<p>这是用于引用此表的“点”名称，并且可以使用它在  <a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a>  或 :class:<a href="#id32"><span class="problematic" id="id33">`</span></a>_schema.ForeignKeyConstraint`对象中引用表，即使引用表也位于同一模式中也是如此：</p>
<p>    customer = Table(
        “customer”,
        metadata_obj,
        Column(“id”, Integer, primary_key=True),
        Column(“financial_info_id”, ForeignKey(“remote_banks.financial_info.id”)),
        schema=”remote_banks”,
    )</p>
<blockquote>
<div><p><a class="reference internal" href="#sqlalchemy.schema.Table.params.schema" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.schema</span></code></a>  参数可以与某些方言一起使用，以指示对特定表的多令牌（例如点分）路径。这在特定于Microsoft SQL Server这样的数据库上特别重要，其中常常有点号“database/owner”。这些令牌可以直接放入名称中，例如:</p>
</div></blockquote>
<p>    schema = “dbo.scott”</p>
<p>      <a class="reference internal" href="../dialects/mssql.html#multipart-schema-names"><span class="std std-ref">Multipart Schema Names</span></a>  - 描述了使用SQL Server方言的点分模式名称</p>
<p>      <span class="xref std std-ref">metadata_reflection_schemas</span></p>
<section id="schema-metadata-schema-name">
<span id="id34"></span><h3>使用MetaData指定默认模式名称<a class="headerlink" href="#schema-metadata-schema-name" title="Permalink to this heading">¶</a></h3>
<blockquote>
<div><p><a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>  参数的显式默认选项，通过将  <a class="reference internal" href="#sqlalchemy.schema.MetaData.params.schema" title="sqlalchemy.schema.MetaData"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">MetaData.schema</span></code></a>  参数传递给顶级   <a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>  构造函数：</p>
</div></blockquote>
<p>    metadata_obj = MetaData(schema=”remote_banks”)</p>
<p>    financial_info = Table(
        “financial_info”,
        metadata_obj,
        Column(“id”, Integer, primary_key=True),
        Column(“value”, String(100), nullable=False),
    )</p>
<p>在  <a class="reference internal" href="#sqlalchemy.schema.Table.params.schema" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.schema</span></code></a>  参数保持其默认值： <code class="docutils literal notranslate"><span class="pre">None``时，将使用值</span> <span class="pre">``&quot;remote_banks&quot;</span></code>。这包括，  <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>  使用模式限定的名称目录，即:</p>
<p>    metadata_obj.tables[“remote_banks.financial_info”]</p>
<p>当使用   <a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a>  或 :class:<a href="#id35"><span class="problematic" id="id36">`</span></a>_schema.ForeignKeyConstraint`对象引用此表时，可以引用其限定模式名称或非限定模式名称：</p>
<p>    # 这两个都是可以的：</p>
<p>    refers_to_financial_info = Table(
        “refers_to_financial_info”,
        metadata_obj,
        Column(“id”, Integer, primary_key=True),
        Column(“fiid”, ForeignKey(“financial_info.id”)),
    )</p>
<p>    #或者</p>
<p>    refers_to_financial_info = Table(
        “refers_to_financial_info”,
        metadata_obj,
        Column(“id”, Integer, primary_key=True),
        Column(“fiid”, ForeignKey(“remote_banks.financial_info.id”)),
    )</p>
<p>当使用设置了  <a class="reference internal" href="#sqlalchemy.schema.MetaData.params.schema" title="sqlalchemy.schema.MetaData"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">MetaData.schema</span></code></a>  参数的 <code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code>  不使用模式限定名称，请使用特殊符号  <a class="reference internal" href="#sqlalchemy.schema.sqlalchemy.schema.BLANK_SCHEMA" title="sqlalchemy.schema.sqlalchemy.schema.BLANK_SCHEMA"><code class="xref py py-data docutils literal notranslate"><span class="pre">BLANK_SCHEMA</span></code></a></p>
<p>    from sqlalchemy import BLANK_SCHEMA</p>
<p>    metadata_obj = MetaData(schema=”remote_banks”)</p>
<p>    financial_info = Table(
        “financial_info”,
        metadata_obj,
        Column(“id”, Integer, primary_key=True),
        Column(“value”, String(100), nullable=False),
        schema=BLANK_SCHEMA,  # 表示不使用 “remote_banks”
    )</p>
<p>     <a class="reference internal" href="#sqlalchemy.schema.MetaData.params.schema" title="sqlalchemy.schema.MetaData"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">MetaData.schema</span></code></a></p>
</section>
<section id="schema-dynamic-naming-convention">
<span id="id37"></span><h3>应用动态模式命名约定<a class="headerlink" href="#schema-dynamic-naming-convention" title="Permalink to this heading">¶</a></h3>
<blockquote>
<div><p><a class="reference internal" href="#sqlalchemy.schema.Table.params.schema" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.schema</span></code></a>   参数使用时，也可以基于每个连接或每个执行动态地应用于动态查找，以便例如在多租户情况下，每个事务或语句可以针对特定的模式名称集。  :ref:<a href="#id38"><span class="problematic" id="id39">`</span></a>schema_translating`部分描述了如何使用此特征。</p>
</div></blockquote>
<p>      <a class="reference internal" href="connections.html#schema-translating"><span class="std std-ref">翻译模式名称</span></a></p>
</section>
<section id="schema-set-default-connections">
<span id="id40"></span><h3>为新连接设置默认模式<a class="headerlink" href="#schema-set-default-connections" title="Permalink to this heading">¶</a></h3>
<p>以上所有方法都是涉及在SQL语句中包含显式模式名称的方法。实际上，数据库连接具有“默认”模式的概念，即如果表名没有明确指定模式限定，则该默认模式是“模式”（或数据库所有者，等等）的名称。这些名称通常在登录级别进行配置，例如连接到PostgreSQL数据库时，默认“模式”称为“Public”。</p>
<p>通常情况下，无法通过登录本身设置默认的“模式名称”，而是每次创建连接时使用诸如在PostgreSQL上“SET SEARCH_PATH”或在Oracle上“ALTER SESSION”的语句进行配置设置。这些方法可以通过使用  <code class="xref py py-meth docutils literal notranslate"><span class="pre">PoolEvents.connect()</span></code>  事件来实现，该事件允许在创建了第一个DBAPI连接时访问DBAPI连接。例如，将Oracle CURRENT_SCHEMA变量设置为替代名称：</p>
<p>    from sqlalchemy import event
    from sqlalchemy import create_engine</p>
<p>    engine = create_engine(“oracle+cx_oracle://scott:tiger&#64;tsn_name”)</p>
<p>    &#64;event.listens_for(engine, “connect”, insert=True)
    def set_current_schema(dbapi_connection, connection_record):
        cursor_obj = dbapi_connection.cursor()
        cursor_obj.execute(“ALTER SESSION SET CURRENT_SCHEMA=%s” % schema_name)
        cursor_obj.close()</p>
<p>上述“set_current_schema（）”事件处理程序将在上面的 :class:<a href="#id41"><span class="problematic" id="id42">`</span></a>_engine.Engine`首次连接时立即发生。由于事件被“插入”到处理程序列表的开头，因此它也将在dialect自己的事件处理程序运行之前运行，这主要包括将确定连接的“默认模式”的事件处理程序。</p>
<p>有关其他数据库的信息，请参见关于如何配置默认模式的数据库和/或特定于方言的文档。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4.0b2: </span>该文件现在无需建立其他事件处理程序。</p>
</div>
<p>      <a class="reference internal" href="../dialects/postgresql.html#postgresql-alternate-search-path"><span class="std std-ref">Setting Alternate Search Paths on Connect</span></a>  - 在   <a class="reference internal" href="../dialects/postgresql.html"><span class="std std-ref">PostgreSQL</span></a>  骨架文档中。</p>
</section>
<section id="id43">
<h3>模式和反射<a class="headerlink" href="#id43" title="Permalink to this heading">¶</a></h3>
<p>模式   <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>  中引入的表反射特性交互。有关此工作方式的详细信息，请参见   <span class="xref std std-ref">metadata_reflection_schemas</span> 。</p>
</section>
</section>
<section id="id44">
<h2>特定于后端的选项<a class="headerlink" href="#id44" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><p><a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> ~sqlalchemy.schema.Table`使用``mysql_engine``表示此内容：</p>
</div></blockquote>
<p>    addresses = Table(
        “engine_email_addresses”,
        metadata_obj,
        Column(“address_id”, Integer, primary_key=True),
        Column(“remote_user_id”, Integer, ForeignKey(users.c.user_id)),
        Column(“email_address”, String(20)),
        mysql_engine=”InnoDB”,
    )</p>
<p>其他后端也可能支持表级选项 - 这些将在每个方言的个别文档部分中描述。</p>
</section>
<section id="metadata-api">
<h2>列，表，MetaData API<a class="headerlink" href="#metadata-api" title="Permalink to this heading">¶</a></h2>
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.Column"><span class="sig-name descname">Column</span></a></p></td>
<td><p>Represents a column in a database table.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.insert_sentinel"><span class="sig-name descname">insert_sentinel</span></a>([name, type_], *, [default, omit_from_statements])</p></td>
<td><p>Provides a surrogate <a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> that will act as a
dedicated insert <a class="reference internal" href="../glossary.html#term-sentinel"><span class="xref std std-term">sentinel</span></a> column, allowing efficient bulk
inserts with deterministic RETURNING sorting for tables that
don’t otherwise have qualifying primary key configurations.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.MetaData"><span class="sig-name descname">MetaData</span></a></p></td>
<td><p>A collection of <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
objects and their associated schema
constructs.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.SchemaConst"><span class="sig-name descname">SchemaConst</span></a></p></td>
<td></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.SchemaItem"><span class="sig-name descname">SchemaItem</span></a></p></td>
<td><p>Base class for items that define a database schema.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.sqlalchemy.schema.BLANK_SCHEMA"><span class="sig-name descname">BLANK_SCHEMA</span></a></p></td>
<td></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.sqlalchemy.schema.RETAIN_SCHEMA"><span class="sig-name descname">RETAIN_SCHEMA</span></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.Table"><span class="sig-name descname">Table</span></a></p></td>
<td><p>Represent a table in a database.</p></td>
</tr>
</tbody>
</table>
<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.sqlalchemy.schema.BLANK_SCHEMA">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.sqlalchemy.schema"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.sqlalchemy.schema.</span></code></a><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">BLANK_SCHEMA</span></span><a class="headerlink" href="#sqlalchemy.schema.sqlalchemy.schema.BLANK_SCHEMA" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>    :noindex:</p>
<p>    引用  <code class="xref py py-attr docutils literal notranslate"><span class="pre">SchemaConst.BLANK_SCHEMA</span></code> 。</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.sqlalchemy.schema.RETAIN_SCHEMA">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.sqlalchemy.schema"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.sqlalchemy.schema.</span></code></a><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">RETAIN_SCHEMA</span></span><a class="headerlink" href="#sqlalchemy.schema.sqlalchemy.schema.RETAIN_SCHEMA" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>    :noindex:</p>
<p>    引用  <code class="xref py py-attr docutils literal notranslate"><span class="pre">SchemaConst.RETAIN_SCHEMA</span></code></p>
<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.Column">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">Column</span></span><a class="headerlink" href="#sqlalchemy.schema.Column" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a column in a database table.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.schema.Column.__init__"><span class="sig-name descname">__init__()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.Column</span></code></a> (<a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.base.DialectKWArgs</span></code></a>, <a class="reference internal" href="#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.SchemaItem</span></code></a>, <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnClause" title="sqlalchemy.sql.expression.ColumnClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.ColumnClause</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.Column.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.Column"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Column.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_Column__name_pos</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">_TypeEngineArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="events.html#sqlalchemy.events.SchemaEventTarget" title="sqlalchemy.events.SchemaEventTarget"><span class="pre">SchemaEventTarget</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_Column__type_pos</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_TypeEngineArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="events.html#sqlalchemy.events.SchemaEventTarget" title="sqlalchemy.events.SchemaEventTarget"><span class="pre">SchemaEventTarget</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="events.html#sqlalchemy.events.SchemaEventTarget" title="sqlalchemy.events.SchemaEventTarget"><span class="pre">SchemaEventTarget</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_TypeEngineArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autoincrement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_AutoIncrementType</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unique</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_InfoType</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nullable</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">SchemaConst.NULL_UNSPECIFIED</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">SchemaConst.NULL_UNSPECIFIED</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onupdate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">primary_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server_default</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ServerDefaultArgument</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server_onupdate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="defaults.html#sqlalchemy.schema.FetchedValue" title="sqlalchemy.schema.FetchedValue"><span class="pre">FetchedValue</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quote</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">system</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comment</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">insert_sentinel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_omit_from_statements</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_proxies</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dialect_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.schema.Column.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new <code class="docutils literal notranslate"><span class="pre">Column</span></code> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.Column.params.name"></span><strong>name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Column.params.name">¶</a> – <p>The name of this column as represented in the database.
This argument may be the first positional argument, or specified
via keyword.</p>
<p>Names which contain no upper case characters
will be treated as case insensitive names, and will not be quoted
unless they are a reserved word.  Names with any number of upper
case characters will be quoted and sent exactly.  Note that this
behavior applies even for databases which standardize upper
case names as case insensitive such as Oracle.</p>
<p>The name field may be omitted at construction time and applied
later, at any time before the Column is associated with a
<a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>.  This is to support convenient
usage within the <a class="reference internal" href="../orm/extensions/declarative/api.html#module-sqlalchemy.ext.declarative" title="sqlalchemy.ext.declarative"><code class="xref py py-mod docutils literal notranslate"><span class="pre">declarative</span></code></a> extension.</p>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Column.params.type_"></span><strong>type_</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Column.params.type_">¶</a> – <p>The column’s type, indicated using an instance which
subclasses <a class="reference internal" href="type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeEngine</span></code></a>.  If no arguments
are required for the type, the class of the type can be sent
as well, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># use a type with arguments</span>
<span class="n">Column</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>

<span class="c1"># use no arguments</span>
<span class="n">Column</span><span class="p">(</span><span class="s1">&#39;level&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">)</span></pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">type</span></code> argument may be the second positional argument
or specified by keyword.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code> or is omitted, it will first default to
the special type <a class="reference internal" href="type_api.html#sqlalchemy.types.NullType" title="sqlalchemy.types.NullType"><code class="xref py py-class docutils literal notranslate"><span class="pre">NullType</span></code></a>.  If and when this
<a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> is made to refer to another column using
<a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> and/or
<a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>, the type
of the remote-referenced column will be copied to this column as
well, at the moment that the foreign key is resolved against that
remote <a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> object.</p>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Column.params.*args"></span><strong>*args</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Column.params.*args">¶</a> – Additional positional arguments include various
<a class="reference internal" href="#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaItem</span></code></a> derived constructs which will be applied
as options to the column.  These include instances of
<a class="reference internal" href="constraints.html#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a>, <a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a>,
<a class="reference internal" href="defaults.html#sqlalchemy.schema.ColumnDefault" title="sqlalchemy.schema.ColumnDefault"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnDefault</span></code></a>, <a class="reference internal" href="defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>, <a class="reference internal" href="defaults.html#sqlalchemy.schema.Computed" title="sqlalchemy.schema.Computed"><code class="xref py py-class docutils literal notranslate"><span class="pre">Computed</span></code></a>
<a class="reference internal" href="defaults.html#sqlalchemy.schema.Identity" title="sqlalchemy.schema.Identity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code></a>.  In some cases an
equivalent keyword argument is available such as <code class="docutils literal notranslate"><span class="pre">server_default</span></code>,
<code class="docutils literal notranslate"><span class="pre">default</span></code> and <code class="docutils literal notranslate"><span class="pre">unique</span></code>.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Column.params.autoincrement"></span><strong>autoincrement</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Column.params.autoincrement">¶</a> – <p>Set up “auto increment” semantics for an
<strong>integer primary key column with no foreign key dependencies</strong>
(see later in this docstring for a more specific definition).
This may influence the <span class="xref std std-term">DDL</span> that will be emitted for
this column during a table create, as well as how the column
will be considered when INSERT statements are compiled and
executed.</p>
<p>The default value is the string <code class="docutils literal notranslate"><span class="pre">&quot;auto&quot;</span></code>,
which indicates that a single-column (i.e. non-composite) primary key
that is of an INTEGER type with no other client-side or server-side
default constructs indicated should receive auto increment semantics
automatically. Other values include <code class="docutils literal notranslate"><span class="pre">True</span></code> (force this column to
have auto-increment semantics for a <span class="xref std std-term">composite primary key</span> as
well), <code class="docutils literal notranslate"><span class="pre">False</span></code> (this column should never have auto-increment
semantics), and the string <code class="docutils literal notranslate"><span class="pre">&quot;ignore_fk&quot;</span></code> (special-case for foreign
key columns, see below).</p>
<p>The term “auto increment semantics” refers both to the kind of DDL
that will be emitted for the column within a CREATE TABLE statement,
when methods such as <code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code> and
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Table.create()</span></code> are invoked, as well as how the column will be
considered when an INSERT statement is compiled and emitted to the
database:</p>
<ul>
<li><p><strong>DDL rendering</strong> (i.e. <code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code>,
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Table.create()</span></code>): When used on a <a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> that has
no other
default-generating construct associated with it (such as a
<a class="reference internal" href="defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> or <a class="reference internal" href="defaults.html#sqlalchemy.schema.Identity" title="sqlalchemy.schema.Identity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code></a> construct), the parameter
will imply that database-specific keywords such as PostgreSQL
<code class="docutils literal notranslate"><span class="pre">SERIAL</span></code>, MySQL <code class="docutils literal notranslate"><span class="pre">AUTO_INCREMENT</span></code>, or <code class="docutils literal notranslate"><span class="pre">IDENTITY</span></code> on SQL Server
should also be rendered.  Not every database backend has an
“implied” default generator available; for example the Oracle
backend always needs an explicit construct such as
<a class="reference internal" href="defaults.html#sqlalchemy.schema.Identity" title="sqlalchemy.schema.Identity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code></a> to be included with a <a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> in order
for the DDL rendered to include auto-generating constructs to also
be produced in the database.</p></li>
<li><p><strong>INSERT semantics</strong> (i.e. when a <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.insert" title="sqlalchemy.sql.expression.insert"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert()</span></code></a> construct is
compiled into a SQL string and is then executed on a database using
<a class="reference internal" href="connections.html#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a> or equivalent): A single-row
INSERT statement will be known to produce a new integer primary key
value automatically for this column, which will be accessible
after the statement is invoked via the
<a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a> attribute upon the
<a class="reference internal" href="connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.   This also applies towards use of the
ORM when ORM-mapped objects are persisted to the database,
indicating that a new integer primary key will be available to
become part of the <span class="xref std std-term">identity key</span> for that object.  This
behavior takes place regardless of what DDL constructs are
associated with the <a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> and is independent
of the “DDL Rendering” behavior discussed in the previous note
above.</p></li>
</ul>
<p>The parameter may be set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to indicate that a column which
is part of a composite (i.e. multi-column) primary key should
have autoincrement semantics, though note that only one column
within a primary key may have this setting.    It can also
be set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to indicate autoincrement semantics on a
column that has a client-side or server-side default configured,
however note that not all dialects can accommodate all styles
of default as an “autoincrement”.  It can also be
set to <code class="docutils literal notranslate"><span class="pre">False</span></code> on a single-column primary key that has a
datatype of INTEGER in order to disable auto increment semantics
for that column.</p>
<p>The setting <em>only</em> has an effect for columns which are:</p>
<ul>
<li><p>Integer derived (i.e. INT, SMALLINT, BIGINT).</p></li>
<li><p>Part of the primary key</p></li>
<li><p>Not referring to another column via <a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a>,
unless
the value is specified as <code class="docutils literal notranslate"><span class="pre">'ignore_fk'</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># turn on autoincrement for this column despite</span>
<span class="c1"># the ForeignKey()</span>
<span class="n">Column</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;other.id&#39;</span><span class="p">),</span>
            <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">autoincrement</span><span class="o">=</span><span class="s1">&#39;ignore_fk&#39;</span><span class="p">)</span></pre></div>
</div>
</li>
</ul>
<p>It is typically not desirable to have “autoincrement” enabled on a
column that refers to another via foreign key, as such a column is
required to refer to a value that originates from elsewhere.</p>
<p>The setting has these effects on columns that meet the
above criteria:</p>
<ul>
<li><p>DDL issued for the column, if the column does not already include
a default generating construct supported by the backend such as
<a class="reference internal" href="defaults.html#sqlalchemy.schema.Identity" title="sqlalchemy.schema.Identity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code></a>, will include database-specific
keywords intended to signify this column as an
“autoincrement” column for specific backends.   Behavior for
primary SQLAlchemy dialects includes:</p>
<ul>
<li><p>AUTO INCREMENT on MySQL and MariaDB</p></li>
<li><p>SERIAL on PostgreSQL</p></li>
<li><p>IDENTITY on MS-SQL - this occurs even without the
<a class="reference internal" href="defaults.html#sqlalchemy.schema.Identity" title="sqlalchemy.schema.Identity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code></a> construct as the
<a class="reference internal" href="#sqlalchemy.schema.Column.params.autoincrement" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.autoincrement</span></code></a> parameter pre-dates this
construct.</p></li>
<li><p>SQLite - SQLite integer primary key columns are implicitly
“auto incrementing” and no additional keywords are rendered;
to render the special SQLite keyword <code class="docutils literal notranslate"><span class="pre">AUTOINCREMENT</span></code>
is not included as this is unnecessary and not recommended
by the database vendor.  See the section
<a class="reference internal" href="../dialects/sqlite.html#sqlite-autoincrement"><span class="std std-ref">SQLite Auto Incrementing Behavior</span></a> for more background.</p></li>
<li><p>Oracle - The Oracle dialect has no default “autoincrement”
feature available at this time, instead the <a class="reference internal" href="defaults.html#sqlalchemy.schema.Identity" title="sqlalchemy.schema.Identity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code></a>
construct is recommended to achieve this (the <a class="reference internal" href="defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>
construct may also be used).</p></li>
<li><p>Third-party dialects - consult those dialects’ documentation
for details on their specific behaviors.</p></li>
</ul>
</li>
<li><p>When a single-row <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.insert" title="sqlalchemy.sql.expression.insert"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert()</span></code></a> construct is compiled and
executed, which does not set the <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert.inline" title="sqlalchemy.sql.expression.Insert.inline"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Insert.inline()</span></code></a>
modifier, newly generated primary key values for this column
will be automatically retrieved upon statement execution
using a method specific to the database driver in use:</p>
<ul>
<li><p>MySQL, SQLite - calling upon <code class="docutils literal notranslate"><span class="pre">cursor.lastrowid()</span></code>
(see
<a class="reference external" href="https://www.python.org/dev/peps/pep-0249/#lastrowid">https://www.python.org/dev/peps/pep-0249/#lastrowid</a>)</p></li>
<li><p>PostgreSQL, SQL Server, Oracle - use RETURNING or an equivalent
construct when rendering an INSERT statement, and then retrieving
the newly generated primary key values after execution</p></li>
<li><p>PostgreSQL, Oracle for <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects that
set <a class="reference internal" href="#sqlalchemy.schema.Table.params.implicit_returning" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.implicit_returning</span></code></a> to False -
for a <a class="reference internal" href="defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> only, the <a class="reference internal" href="defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> is invoked
explicitly before the INSERT statement takes place so that the
newly generated primary key value is available to the client</p></li>
<li><p>SQL Server for <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects that
set <a class="reference internal" href="#sqlalchemy.schema.Table.params.implicit_returning" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.implicit_returning</span></code></a> to False -
the <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">scope_identity()</span></code> construct is used after the
INSERT statement is invoked to retrieve the newly generated
primary key value.</p></li>
<li><p>Third-party dialects - consult those dialects’ documentation
for details on their specific behaviors.</p></li>
</ul>
</li>
<li><p>For multiple-row <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.insert" title="sqlalchemy.sql.expression.insert"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert()</span></code></a> constructs invoked with
a list of parameters (i.e. “executemany” semantics), primary-key
retrieving behaviors are generally disabled, however there may
be special APIs that may be used to retrieve lists of new
primary key values for an “executemany”, such as the psycopg2
“fast insertmany” feature.  Such features are very new and
may not yet be well covered in documentation.</p></li>
</ul>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Column.params.default"></span><strong>default</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Column.params.default">¶</a> – <p>A scalar, Python callable, or
<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnElement" title="sqlalchemy.sql.expression.ColumnElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnElement</span></code></a> expression representing the
<em>default value</em> for this column, which will be invoked upon insert
if this column is otherwise not specified in the VALUES clause of
the insert. This is a shortcut to using <a class="reference internal" href="defaults.html#sqlalchemy.schema.ColumnDefault" title="sqlalchemy.schema.ColumnDefault"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnDefault</span></code></a> as
a positional argument; see that class for full detail on the
structure of the argument.</p>
<p>Contrast this argument to
<a class="reference internal" href="#sqlalchemy.schema.Column.params.server_default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.server_default</span></code></a>
which creates a default generator on the database side.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="defaults.html"><span class="std std-ref">列INSERT/UPDATE默认值</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Column.params.doc"></span><strong>doc</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Column.params.doc">¶</a> – optional String that can be used by the ORM or similar
to document attributes on the Python side.   This attribute does
<strong>not</strong> render SQL comments; use the
<a class="reference internal" href="#sqlalchemy.schema.Column.params.comment" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.comment</span></code></a>
parameter for this purpose.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Column.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Column.params.key">¶</a> – An optional string identifier which will identify this
<code class="docutils literal notranslate"><span class="pre">Column</span></code> object on the <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>.
When a key is provided,
this is the only identifier referencing the <code class="docutils literal notranslate"><span class="pre">Column</span></code> within the
application, including ORM attribute mapping; the <code class="docutils literal notranslate"><span class="pre">name</span></code> field
is used only when rendering SQL.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Column.params.index"></span><strong>index</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Column.params.index">¶</a> – <p>When <code class="docutils literal notranslate"><span class="pre">True</span></code>, indicates that a <a class="reference internal" href="constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>
construct will be automatically generated for this
<a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>, which will result in a “CREATE INDEX”
statement being emitted for the <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> when the DDL
create operation is invoked.</p>
<p>Using this flag is equivalent to making use of the
<a class="reference internal" href="constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> construct explicitly at the level of the
<a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> construct itself:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;some_table&quot;</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">Index</span><span class="p">(</span><span class="s2">&quot;ix_some_table_x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<p>To add the <a class="reference internal" href="constraints.html#sqlalchemy.schema.Index.params.unique" title="sqlalchemy.schema.Index"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Index.unique</span></code></a> flag to the
<a class="reference internal" href="constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>, set both the
<a class="reference internal" href="#sqlalchemy.schema.Column.params.unique" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.unique</span></code></a> and
<a class="reference internal" href="#sqlalchemy.schema.Column.params.index" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.index</span></code></a> flags to True simultaneously,
which will have the effect of rendering the “CREATE UNIQUE INDEX”
DDL instruction instead of “CREATE INDEX”.</p>
<p>The name of the index is generated using the
<a class="reference internal" href="constraints.html#constraint-default-naming-convention"><span class="std std-ref">default naming convention</span></a>
which for the <a class="reference internal" href="constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> construct is of the form
<code class="docutils literal notranslate"><span class="pre">ix_&lt;tablename&gt;_&lt;columnname&gt;</span></code>.</p>
<p>As this flag is intended only as a convenience for the common case
of adding a single-column, default configured index to a table
definition, explicit use of the <a class="reference internal" href="constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> construct
should be preferred for most use cases, including composite indexes
that encompass more than one column, indexes with SQL expressions
or ordering, backend-specific index configuration options, and
indexes that use a specific name.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Column.index</span></code> attribute on
<a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
<strong>does not indicate</strong> if this column is indexed or not, only
if this flag was explicitly set here.  To view indexes on
a column, view the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Table.indexes</span></code> collection
or use <code class="xref py py-meth docutils literal notranslate"><span class="pre">Inspector.get_indexes()</span></code>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="constraints.html#schema-indexes"><span class="std std-ref">索引</span></a></p>
<p><a class="reference internal" href="constraints.html#constraint-naming-conventions"><span class="std std-ref">配置约束命名约定</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.schema.Column.params.unique" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.unique</span></code></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Column.params.info"></span><strong>info</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Column.params.info">¶</a> – Optional data dictionary which will be populated into the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">SchemaItem.info</span></code> attribute of this object.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Column.params.nullable"></span><strong>nullable</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Column.params.nullable">¶</a> – <p>When set to <code class="docutils literal notranslate"><span class="pre">False</span></code>, will cause the “NOT NULL”
phrase to be added when generating DDL for the column.   When
<code class="docutils literal notranslate"><span class="pre">True</span></code>, will normally generate nothing (in SQL this defaults to
“NULL”), except in some very specific backend-specific edge cases
where “NULL” may render explicitly.
Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code> unless <a class="reference internal" href="#sqlalchemy.schema.Column.params.primary_key" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.primary_key</span></code></a>
is also <code class="docutils literal notranslate"><span class="pre">True</span></code> or the column specifies a <code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code>,
in which case it defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.
This parameter is only used when issuing CREATE TABLE statements.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When the column specifies a <code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code> this
parameter is in general ignored by the DDL compiler. The
PostgreSQL database allows nullable identity column by
setting this parameter to <code class="docutils literal notranslate"><span class="pre">True</span></code> explicitly.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Column.params.onupdate"></span><strong>onupdate</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Column.params.onupdate">¶</a> – <p>A scalar, Python callable, or
<a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClauseElement</span></code></a> representing a
default value to be applied to the column within UPDATE
statements, which will be invoked upon update if this column is not
present in the SET clause of the update. This is a shortcut to
using <a class="reference internal" href="defaults.html#sqlalchemy.schema.ColumnDefault" title="sqlalchemy.schema.ColumnDefault"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnDefault</span></code></a> as a positional argument with
<code class="docutils literal notranslate"><span class="pre">for_update=True</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="defaults.html#metadata-defaults"><span class="std std-ref">列INSERT/UPDATE默认值</span></a> - complete discussion of onupdate</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Column.params.primary_key"></span><strong>primary_key</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Column.params.primary_key">¶</a> – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, marks this column as a primary key
column. Multiple columns can have this flag set to specify
composite primary keys. As an alternative, the primary key of a
<a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> can be specified via an explicit
<a class="reference internal" href="constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code></a> object.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Column.params.server_default"></span><strong>server_default</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Column.params.server_default">¶</a> – <p>A <a class="reference internal" href="defaults.html#sqlalchemy.schema.FetchedValue" title="sqlalchemy.schema.FetchedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">FetchedValue</span></code></a> instance, str, Unicode
or <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a> construct representing
the DDL DEFAULT value for the column.</p>
<p>String types will be emitted as-is, surrounded by single quotes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">Text</span><span class="p">,</span> <span class="n">server_default</span><span class="o">=</span><span class="s2">&quot;val&quot;</span><span class="p">)</span>

<span class="n">x</span> <span class="n">TEXT</span> <span class="n">DEFAULT</span> <span class="s1">&#39;val&#39;</span></pre></div>
</div>
<p>A <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a> expression will be
rendered as-is, without quotes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">,</span> <span class="n">server_default</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s1">&#39;NOW()&#39;</span><span class="p">))</span>

<span class="n">y</span> <span class="n">DATETIME</span> <span class="n">DEFAULT</span> <span class="n">NOW</span><span class="p">()</span></pre></div>
</div>
<p>Strings and text() will be converted into a
<a class="reference internal" href="defaults.html#sqlalchemy.schema.DefaultClause" title="sqlalchemy.schema.DefaultClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">DefaultClause</span></code></a> object upon initialization.</p>
<p>This parameter can also accept complex combinations of contextually
valid SQLAlchemy expressions or constructs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Table</span><span class="p">,</span> <span class="n">Column</span><span class="p">,</span> <span class="n">MetaData</span><span class="p">,</span> <span class="n">ARRAY</span><span class="p">,</span> <span class="n">Text</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.dialects.postgresql</span> <span class="kn">import</span> <span class="n">array</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s1">&#39;postgresql+psycopg2://scott:tiger@localhost/mydatabase&#39;</span>
<span class="p">)</span>
<span class="n">metadata_obj</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>
<span class="n">tbl</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
        <span class="s2">&quot;foo&quot;</span><span class="p">,</span>
        <span class="n">metadata_obj</span><span class="p">,</span>
        <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span>
               <span class="n">ARRAY</span><span class="p">(</span><span class="n">Text</span><span class="p">),</span>
               <span class="n">server_default</span><span class="o">=</span><span class="n">array</span><span class="p">([</span><span class="s2">&quot;biz&quot;</span><span class="p">,</span> <span class="s2">&quot;bang&quot;</span><span class="p">,</span> <span class="s2">&quot;bash&quot;</span><span class="p">])</span>
               <span class="p">)</span>
<span class="p">)</span>
<span class="n">metadata_obj</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span></pre></div>
</div>
<p>The above results in a table created with the following SQL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">foo</span> <span class="p">(</span>
    <span class="n">bar</span> <span class="n">TEXT</span><span class="p">[]</span> <span class="n">DEFAULT</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;biz&#39;</span><span class="p">,</span> <span class="s1">&#39;bang&#39;</span><span class="p">,</span> <span class="s1">&#39;bash&#39;</span><span class="p">]</span>
<span class="p">)</span></pre></div>
</div>
<p>Use <a class="reference internal" href="defaults.html#sqlalchemy.schema.FetchedValue" title="sqlalchemy.schema.FetchedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">FetchedValue</span></code></a> to indicate that an already-existing
column will generate a default value on the database side which
will be available to SQLAlchemy for post-fetch after inserts. This
construct does not specify any DDL and the implementation is left
to the database, such as via a trigger.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">server_defaults</span> - complete discussion of server side
defaults</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Column.params.server_onupdate"></span><strong>server_onupdate</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Column.params.server_onupdate">¶</a> – <p>A <a class="reference internal" href="defaults.html#sqlalchemy.schema.FetchedValue" title="sqlalchemy.schema.FetchedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">FetchedValue</span></code></a> instance
representing a database-side default generation function,
such as a trigger. This
indicates to SQLAlchemy that a newly generated value will be
available after updates. This construct does not actually
implement any kind of generation function within the database,
which instead must be specified separately.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This directive <strong>does not</strong> currently produce MySQL’s
“ON UPDATE CURRENT_TIMESTAMP()” clause.  See
<a class="reference internal" href="../dialects/mysql.html#mysql-timestamp-onupdate"><span class="std std-ref">Rendering ON UPDATE CURRENT TIMESTAMP for MySQL / MariaDB’s explicit_defaults_for_timestamp</span></a> for background on how to
produce this clause.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">triggered_columns</span></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Column.params.quote"></span><strong>quote</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Column.params.quote">¶</a> – Force quoting of this column’s name on or off,
corresponding to <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>. When left at its default
of <code class="docutils literal notranslate"><span class="pre">None</span></code>, the column identifier will be quoted according to
whether the name is case sensitive (identifiers with at least one
upper case character are treated as case sensitive), or if it’s a
reserved word. This flag is only needed to force quoting of a
reserved word which is not known by the SQLAlchemy dialect.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Column.params.unique"></span><strong>unique</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Column.params.unique">¶</a> – <p>When <code class="docutils literal notranslate"><span class="pre">True</span></code>, and the <a class="reference internal" href="#sqlalchemy.schema.Column.params.index" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.index</span></code></a>
parameter is left at its default value of <code class="docutils literal notranslate"><span class="pre">False</span></code>,
indicates that a <a class="reference internal" href="constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniqueConstraint</span></code></a>
construct will be automatically generated for this
<a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>,
which will result in a “UNIQUE CONSTRAINT” clause referring
to this column being included
in the <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> statement emitted, when the DDL create
operation for the <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object is invoked.</p>
<p>When this flag is <code class="docutils literal notranslate"><span class="pre">True</span></code> while the
<a class="reference internal" href="#sqlalchemy.schema.Column.params.index" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.index</span></code></a> parameter is simultaneously
set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, the effect instead is that a
<a class="reference internal" href="constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> construct which includes the
<a class="reference internal" href="constraints.html#sqlalchemy.schema.Index.params.unique" title="sqlalchemy.schema.Index"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Index.unique</span></code></a> parameter set to <code class="docutils literal notranslate"><span class="pre">True</span></code>
is generated.  See the documentation for
<a class="reference internal" href="#sqlalchemy.schema.Column.params.index" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.index</span></code></a> for additional detail.</p>
<p>Using this flag is equivalent to making use of the
<a class="reference internal" href="constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniqueConstraint</span></code></a> construct explicitly at the
level of the <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> construct itself:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;some_table&quot;</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">UniqueConstraint</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<p>The <a class="reference internal" href="constraints.html#sqlalchemy.schema.UniqueConstraint.params.name" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">UniqueConstraint.name</span></code></a> parameter
of the unique constraint object is left at its default value
of <code class="docutils literal notranslate"><span class="pre">None</span></code>; in the absence of a <a class="reference internal" href="constraints.html#constraint-naming-conventions"><span class="std std-ref">naming convention</span></a>
for the enclosing <a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>, the UNIQUE CONSTRAINT
construct will be emitted as unnamed, which typically invokes
a database-specific naming convention to take place.</p>
<p>As this flag is intended only as a convenience for the common case
of adding a single-column, default configured unique constraint to a table
definition, explicit use of the <a class="reference internal" href="constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniqueConstraint</span></code></a> construct
should be preferred for most use cases, including composite constraints
that encompass more than one column, backend-specific index configuration options, and
constraints that use a specific name.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Column.unique</span></code> attribute on
<a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
<strong>does not indicate</strong> if this column has a unique constraint or
not, only if this flag was explicitly set here.  To view
indexes and unique constraints that may involve this column,
view the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Table.indexes</span></code> and/or
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Table.constraints</span></code> collections or use
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Inspector.get_indexes()</span></code> and/or
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Inspector.get_unique_constraints()</span></code></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="constraints.html#schema-unique-constraint"><span class="std std-ref">唯一约束</span></a></p>
<p><a class="reference internal" href="constraints.html#constraint-naming-conventions"><span class="std std-ref">配置约束命名约定</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.schema.Column.params.index" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.index</span></code></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Column.params.system"></span><strong>system</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Column.params.system">¶</a> – <p>When <code class="docutils literal notranslate"><span class="pre">True</span></code>, indicates this is a “system” column,
that is a column which is automatically made available by the
database, and should not be included in the columns list for a
<code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> statement.</p>
<p>For more elaborate scenarios where columns should be
conditionally rendered differently on different backends,
consider custom compilation rules for <code class="xref py py-class docutils literal notranslate"><span class="pre">CreateColumn</span></code>.</p>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Column.params.comment"></span><strong>comment</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Column.params.comment">¶</a> – <p>Optional string that will render an SQL comment on
table creation.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.2: </span>Added the
<a class="reference internal" href="#sqlalchemy.schema.Column.params.comment" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.comment</span></code></a>
parameter to <a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Column.params.insert_sentinel"></span><strong>insert_sentinel</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Column.params.insert_sentinel">¶</a> – <p>Marks this <a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> as an
<span class="xref std std-term">insert sentinel</span> used for optimizing the performance of the
<span class="xref std std-term">insertmanyvalues</span> feature for tables that don’t
otherwise have qualifying primary key configurations.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.10.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.schema.insert_sentinel" title="sqlalchemy.schema.insert_sentinel"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert_sentinel()</span></code></a> - all in one helper for declaring
sentinel columns</p>
<p><span class="xref std std-ref">engine_insertmanyvalues</span></p>
<p><span class="xref std std-ref">engine_insertmanyvalues_sentinel_columns</span></p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<p>    :members:
    :inherited-members:</p>
<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.MetaData">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">MetaData</span></span><a class="headerlink" href="#sqlalchemy.schema.MetaData" title="Permalink to this definition">¶</a></dt>
<dd><p>A collection of <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
objects and their associated schema
constructs.</p>
<p>Holds a collection of <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects as well as
an optional binding to an <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> or
<a class="reference internal" href="connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.  If bound, the <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects
in the collection and their columns may participate in implicit SQL
execution.</p>
<p>The <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects themselves are stored in the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">MetaData.tables</span></code> dictionary.</p>
<p><a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> is a thread-safe object for read operations.
Construction of new tables within a single <a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>
object,
either explicitly or via reflection, may not be completely thread-safe.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">metadata_describing</span> - Introduction to database metadata</p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.schema.MetaData.__init__"><span class="sig-name descname">__init__()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.MetaData</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.HasSchemaAttr</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.MetaData.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.MetaData"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.MetaData.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quote_schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">naming_convention</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NamingSchemaParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_InfoType</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.MetaData.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new MetaData object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.MetaData.params.schema"></span><strong>schema</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.MetaData.params.schema">¶</a> – <p>The default schema to use for the <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>,
<a class="reference internal" href="defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>, and potentially other objects associated with
this <a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>. Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#schema-metadata-schema-name"><span class="std std-ref">使用MetaData指定默认模式名称</span></a> - details on how the
<a class="reference internal" href="#sqlalchemy.schema.MetaData.params.schema" title="sqlalchemy.schema.MetaData"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">MetaData.schema</span></code></a> parameter is used.</p>
<p><a class="reference internal" href="#sqlalchemy.schema.Table.params.schema" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.schema</span></code></a></p>
<p><a class="reference internal" href="defaults.html#sqlalchemy.schema.Sequence.params.schema" title="sqlalchemy.schema.Sequence"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Sequence.schema</span></code></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.MetaData.params.quote_schema"></span><strong>quote_schema</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.MetaData.params.quote_schema">¶</a> – Sets the <code class="docutils literal notranslate"><span class="pre">quote_schema</span></code> flag for those <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>,
<a class="reference internal" href="defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>, and other objects which make usage of the
local <code class="docutils literal notranslate"><span class="pre">schema</span></code> name.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.MetaData.params.info"></span><strong>info</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.MetaData.params.info">¶</a> – Optional data dictionary which will be populated into the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">SchemaItem.info</span></code> attribute of this object.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.MetaData.params.naming_convention"></span><strong>naming_convention</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.MetaData.params.naming_convention">¶</a> – <p>a dictionary referring to values which
will establish default naming conventions for <a class="reference internal" href="constraints.html#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a>
and <a class="reference internal" href="constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> objects, for those objects which are not given
a name explicitly.</p>
<p>The keys of this dictionary may be:</p>
<ul>
<li><p>a constraint or Index class, e.g. the <a class="reference internal" href="constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniqueConstraint</span></code></a>,
<a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a> class, the <a class="reference internal" href="constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>
class</p></li>
<li><p>a string mnemonic for one of the known constraint classes;
<code class="docutils literal notranslate"><span class="pre">&quot;fk&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;pk&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;ix&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;ck&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;uq&quot;</span></code> for foreign key,
primary key, index, check, and unique constraint, respectively.</p></li>
<li><p>the string name of a user-defined “token” that can be used
to define new naming tokens.</p></li>
</ul>
<p>The values associated with each “constraint class” or “constraint
mnemonic” key are string naming templates, such as
<code class="docutils literal notranslate"><span class="pre">&quot;uq_%(table_name)s_%(column_0_name)s&quot;</span></code>,
which describe how the name should be composed.  The values
associated with user-defined “token” keys should be callables of the
form <code class="docutils literal notranslate"><span class="pre">fn(constraint,</span> <span class="pre">table)</span></code>, which accepts the constraint/index
object and <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> as arguments, returning a string
result.</p>
<p>The built-in names are as follows, some of which may only be
available for certain types of constraint:</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">%(table_name)s</span></code> - the name of the <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
object
associated with the constraint.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%(referred_table_name)s</span></code> - the name of the
<a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
object associated with the referencing target of a
<a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%(column_0_name)s</span></code> - the name of the <a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
at
index position “0” within the constraint.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%(column_0N_name)s</span></code> - the name of all <a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
objects in order within the constraint, joined without a
separator.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%(column_0_N_name)s</span></code> - the name of all
<a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
objects in order within the constraint, joined with an
underscore as a separator.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%(column_0_label)s</span></code>, <code class="docutils literal notranslate"><span class="pre">%(column_0N_label)s</span></code>,
<code class="docutils literal notranslate"><span class="pre">%(column_0_N_label)s</span></code> - the label of either the zeroth
<a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> or all <code class="xref py py-class docutils literal notranslate"><span class="pre">Columns</span></code>, separated with
or without an underscore</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%(column_0_key)s</span></code>, <code class="docutils literal notranslate"><span class="pre">%(column_0N_key)s</span></code>,
<code class="docutils literal notranslate"><span class="pre">%(column_0_N_key)s</span></code> - the key of either the zeroth
<a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> or all <code class="xref py py-class docutils literal notranslate"><span class="pre">Columns</span></code>, separated with
or without an underscore</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%(referred_column_0_name)s</span></code>, <code class="docutils literal notranslate"><span class="pre">%(referred_column_0N_name)s</span></code>
<code class="docutils literal notranslate"><span class="pre">%(referred_column_0_N_name)s</span></code>,  <code class="docutils literal notranslate"><span class="pre">%(referred_column_0_key)s</span></code>,
<code class="docutils literal notranslate"><span class="pre">%(referred_column_0N_key)s</span></code>, …  column tokens which
render the names/keys/labels of columns that are referenced
by a  <a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%(constraint_name)s</span></code> - a special key that refers to the
existing name given to the constraint.  When this key is
present, the <a class="reference internal" href="constraints.html#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a> object’s existing name will be
replaced with one that is composed from template string that
uses this token. When this token is present, it is required that
the <a class="reference internal" href="constraints.html#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a> is given an explicit name ahead of time.</p></li>
<li><p>user-defined: any additional token may be implemented by passing
it along with a <code class="docutils literal notranslate"><span class="pre">fn(constraint,</span> <span class="pre">table)</span></code> callable to the
naming_convention dictionary.</p></li>
</ul>
</div></blockquote>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.0: </span>- added new <code class="docutils literal notranslate"><span class="pre">%(column_0N_name)s</span></code>,
<code class="docutils literal notranslate"><span class="pre">%(column_0_N_name)s</span></code>, and related tokens that produce
concatenations of names, keys, or labels for all columns referred
to by a given constraint.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="constraints.html#constraint-naming-conventions"><span class="std std-ref">配置约束命名约定</span></a> - for detailed usage
examples.</p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<p>    :members:</p>
<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.SchemaConst">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">SchemaConst</span></span><a class="headerlink" href="#sqlalchemy.schema.SchemaConst" title="Permalink to this definition">¶</a></dt>
<dd><div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.schema.SchemaConst" title="sqlalchemy.schema.SchemaConst"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.SchemaConst</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code>)</p>
</div>
</dd></dl>

<p>    :members:</p>
<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.SchemaItem">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">SchemaItem</span></span><a class="headerlink" href="#sqlalchemy.schema.SchemaItem" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for items that define a database schema.</p>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.SchemaItem</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.SchemaEventTarget</span></code>, <a class="reference internal" href="visitors.html#sqlalchemy.sql.visitors.Visitable" title="sqlalchemy.sql.visitors.Visitable"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.Visitable</span></code></a>)</p>
</div>
</dd></dl>

<p>    :members:</p>
<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.schema.insert_sentinel">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">insert_sentinel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_TypeEngineArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">omit_from_statements</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><span class="pre">Column</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.schema.insert_sentinel" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a surrogate <a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> that will act as a
dedicated insert <a class="reference internal" href="../glossary.html#term-sentinel"><span class="xref std std-term">sentinel</span></a> column, allowing efficient bulk
inserts with deterministic RETURNING sorting for tables that
don’t otherwise have qualifying primary key configurations.</p>
<p>Adding this column to a <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object requires that a
corresponding database table actually has this column present, so if adding
it to an existing model, existing database tables would need to be migrated
(e.g. using ALTER TABLE or similar) to include this column.</p>
<p>For background on how this object is used, see the section
<span class="xref std std-ref">engine_insertmanyvalues_sentinel_columns</span> as part of the
section <span class="xref std std-ref">engine_insertmanyvalues</span>.</p>
<p>The <a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> returned will be a nullable integer column by
default and make use of a sentinel-specific default generator used only in
“insertmanyvalues” operations.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">orm_insert_sentinel()</span></code></p>
<p><a class="reference internal" href="#sqlalchemy.schema.Column.params.insert_sentinel" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.insert_sentinel</span></code></a></p>
<p><span class="xref std std-ref">engine_insertmanyvalues</span></p>
<p><span class="xref std std-ref">engine_insertmanyvalues_sentinel_columns</span></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.10.</span></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.Table">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">Table</span></span><a class="headerlink" href="#sqlalchemy.schema.Table" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent a table in a database.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mytable</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;mytable&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;mytable_id&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
<span class="p">)</span></pre></div>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
object constructs a unique instance of itself based
on its name and optional schema name within the given
<a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> object. Calling the <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
constructor with the same name and same <a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> argument
a second time will return the <em>same</em> <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
object - in this way
the <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> constructor acts as a registry function.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">metadata_describing</span> - Introduction to database metadata</p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.schema.Table.__init__"><span class="sig-name descname">__init__()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.Table</span></code></a> (<a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.base.DialectKWArgs</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.HasSchemaAttr</span></code>, <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.TableClause" title="sqlalchemy.sql.expression.TableClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.TableClause</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.inspection.Inspectable</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.Table.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.Table"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Table.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><span class="pre">MetaData</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><span class="pre">SchemaItem</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">SchemaConst.BLANK_SCHEMA</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quote</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quote_schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autoload_with</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><span class="pre">Engine</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><span class="pre">Connection</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autoload_replace</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_existing</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extend_existing</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolve_fks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Collection</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">implicit_returning</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comment</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">listeners</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_typing_Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.Tuple" title="sqlalchemy.sql.expression.Tuple"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefixes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_typing_Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_extend_on</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><span class="pre">Table</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_no_init</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.Table.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.Table.params.name"></span><strong>name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Table.params.name">¶</a> – <p>The name of this table as represented in the database.</p>
<p>The table name, along with the value of the <code class="docutils literal notranslate"><span class="pre">schema</span></code> parameter,
forms a key which uniquely identifies this <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
within
the owning <a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> collection.
Additional calls to <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> with the same name,
metadata,
and schema name will return the same <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object.</p>
<p>Names which contain no upper case characters
will be treated as case insensitive names, and will not be quoted
unless they are a reserved word or contain special characters.
A name with any number of upper case characters is considered
to be case sensitive, and will be sent as quoted.</p>
<p>To enable unconditional quoting for the table name, specify the flag
<code class="docutils literal notranslate"><span class="pre">quote=True</span></code> to the constructor, or use the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.quoted_name" title="sqlalchemy.sql.expression.quoted_name"><code class="xref py py-class docutils literal notranslate"><span class="pre">quoted_name</span></code></a>
construct to specify the name.</p>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Table.params.metadata"></span><strong>metadata</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Table.params.metadata">¶</a> – a <a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>
object which will contain this
table.  The metadata is used as a point of association of this table
with other tables which are referenced via foreign key.  It also
may be used to associate this table with a particular
<a class="reference internal" href="connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> or <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Table.params.*args"></span><strong>*args</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Table.params.*args">¶</a> – Additional positional arguments are used primarily
to add the list of <a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
objects contained within this
table. Similar to the style of a CREATE TABLE statement, other
<a class="reference internal" href="#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaItem</span></code></a> constructs may be added here, including
<a class="reference internal" href="constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code></a>, and
<a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Table.params.autoload_replace"></span><strong>autoload_replace</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Table.params.autoload_replace">¶</a> – <p>Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>; when using
<a class="reference internal" href="#sqlalchemy.schema.Table.params.autoload_with" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.autoload_with</span></code></a>
in conjunction with <a class="reference internal" href="#sqlalchemy.schema.Table.params.extend_existing" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.extend_existing</span></code></a>,
indicates
that <a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects present in the already-existing
<a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
object should be replaced with columns of the same
name retrieved from the autoload process.   When <code class="docutils literal notranslate"><span class="pre">False</span></code>, columns
already present under existing names will be omitted from the
reflection process.</p>
<p>Note that this setting does not impact <a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects
specified programmatically within the call to <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
that
also is autoloading; those <a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects will always
replace existing columns of the same name when
<a class="reference internal" href="#sqlalchemy.schema.Table.params.extend_existing" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.extend_existing</span></code></a> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.schema.Table.params.autoload_with" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.autoload_with</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.schema.Table.params.extend_existing" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.extend_existing</span></code></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Table.params.autoload_with"></span><strong>autoload_with</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Table.params.autoload_with">¶</a> – <p>An <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> or
<a class="reference internal" href="connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object,
or a <code class="xref py py-class docutils literal notranslate"><span class="pre">Inspector</span></code> object as returned by
<a class="reference internal" href="inspection.html#sqlalchemy.inspect" title="sqlalchemy.inspect"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect()</span></code></a>
against one, with which this <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
object will be reflected.
When set to a non-None value, the autoload process will take place
for this table against the given engine or connection.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">metadata_reflection_toplevel</span></p>
<p><a class="reference internal" href="events.html#sqlalchemy.events.DDLEvents.column_reflect" title="sqlalchemy.events.DDLEvents.column_reflect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DDLEvents.column_reflect()</span></code></a></p>
<p><span class="xref std std-ref">metadata_reflection_dbagnostic_types</span></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Table.params.extend_existing"></span><strong>extend_existing</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Table.params.extend_existing">¶</a> – <p>When <code class="docutils literal notranslate"><span class="pre">True</span></code>, indicates that if this
<a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> is already present in the given
<a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>,
apply further arguments within the constructor to the existing
<a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>.</p>
<p>If <a class="reference internal" href="#sqlalchemy.schema.Table.params.extend_existing" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.extend_existing</span></code></a> or
<a class="reference internal" href="#sqlalchemy.schema.Table.params.keep_existing" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.keep_existing</span></code></a> are not set,
and the given name
of the new <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> refers to a <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
that is
already present in the target <a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> collection,
and
this <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
specifies additional columns or other constructs
or flags that modify the table’s state, an
error is raised.  The purpose of these two mutually-exclusive flags
is to specify what action should be taken when a
<a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
is specified that matches an existing <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>,
yet specifies
additional constructs.</p>
<p><a class="reference internal" href="#sqlalchemy.schema.Table.params.extend_existing" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.extend_existing</span></code></a>
will also work in conjunction
with <a class="reference internal" href="#sqlalchemy.schema.Table.params.autoload_with" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.autoload_with</span></code></a> to run a new reflection
operation against the database, even if a <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
of the same name is already present in the target
<a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>; newly reflected <a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
objects
and other options will be added into the state of the
<a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>, potentially overwriting existing columns
and options of the same name.</p>
<p>As is always the case with <a class="reference internal" href="#sqlalchemy.schema.Table.params.autoload_with" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.autoload_with</span></code></a>,
<a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects can be specified in the same
<a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
constructor, which will take precedence.  Below, the existing
table <code class="docutils literal notranslate"><span class="pre">mytable</span></code> will be augmented with <a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
objects
both reflected from the database, as well as the given
<a class="reference internal" href="#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
named “y”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Table</span><span class="p">(</span><span class="s2">&quot;mytable&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span>
            <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
            <span class="n">extend_existing</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">autoload_with</span><span class="o">=</span><span class="n">engine</span>
        <span class="p">)</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.schema.Table.params.autoload_with" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.autoload_with</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.schema.Table.params.autoload_replace" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.autoload_replace</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.schema.Table.params.keep_existing" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.keep_existing</span></code></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Table.params.implicit_returning"></span><strong>implicit_returning</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Table.params.implicit_returning">¶</a> – <p>True by default - indicates that
RETURNING can be used, typically by the ORM, in order to fetch
server-generated values such as primary key values and
server side defaults, on those backends which support RETURNING.</p>
<p>In modern SQLAlchemy there is generally no reason to alter this
setting, except for some backend specific cases
(see <a class="reference internal" href="../dialects/mssql.html#mssql-triggers"><span class="std std-ref">Triggers</span></a> in the SQL Server dialect documentation
for one such example).</p>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Table.params.include_columns"></span><strong>include_columns</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Table.params.include_columns">¶</a> – A list of strings indicating a subset of
columns to be loaded via the <code class="docutils literal notranslate"><span class="pre">autoload</span></code> operation; table columns who
aren’t present in this list will not be represented on the resulting
<code class="docutils literal notranslate"><span class="pre">Table</span></code> object. Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code> which indicates all columns
should be reflected.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Table.params.resolve_fks"></span><strong>resolve_fks</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Table.params.resolve_fks">¶</a> – <p>Whether or not to reflect <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
objects
related to this one via <a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> objects, when
<a class="reference internal" href="#sqlalchemy.schema.Table.params.autoload_with" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.autoload_with</span></code></a> is
specified.   Defaults to True.  Set to False to disable reflection of
related tables as <a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a>
objects are encountered; may be
used either to save on SQL calls or to avoid issues with related tables
that can’t be accessed. Note that if a related table is already present
in the <a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> collection, or becomes present later,
a
<a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> object associated with this
<a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> will
resolve to that table normally.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-paramref docutils literal notranslate"><span class="pre">MetaData.reflect.resolve_fks</span></code></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Table.params.info"></span><strong>info</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Table.params.info">¶</a> – Optional data dictionary which will be populated into the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">SchemaItem.info</span></code> attribute of this object.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Table.params.keep_existing"></span><strong>keep_existing</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Table.params.keep_existing">¶</a> – <p>When <code class="docutils literal notranslate"><span class="pre">True</span></code>, indicates that if this Table
is already present in the given <a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>, ignore
further arguments within the constructor to the existing
<a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>, and return the <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
object as
originally created. This is to allow a function that wishes
to define a new <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> on first call, but on
subsequent calls will return the same <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>,
without any of the declarations (particularly constraints)
being applied a second time.</p>
<p>If <a class="reference internal" href="#sqlalchemy.schema.Table.params.extend_existing" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.extend_existing</span></code></a> or
<a class="reference internal" href="#sqlalchemy.schema.Table.params.keep_existing" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.keep_existing</span></code></a> are not set,
and the given name
of the new <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> refers to a <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
that is
already present in the target <a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> collection,
and
this <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
specifies additional columns or other constructs
or flags that modify the table’s state, an
error is raised.  The purpose of these two mutually-exclusive flags
is to specify what action should be taken when a
<a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
is specified that matches an existing <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>,
yet specifies
additional constructs.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.schema.Table.params.extend_existing" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.extend_existing</span></code></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Table.params.listeners"></span><strong>listeners</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Table.params.listeners">¶</a> – <p>A list of tuples of the form <code class="docutils literal notranslate"><span class="pre">(&lt;eventname&gt;,</span> <span class="pre">&lt;fn&gt;)</span></code>
which will be passed to <a class="reference internal" href="event.html#sqlalchemy.event.listen" title="sqlalchemy.event.listen"><code class="xref py py-func docutils literal notranslate"><span class="pre">listen()</span></code></a> upon construction.
This alternate hook to <a class="reference internal" href="event.html#sqlalchemy.event.listen" title="sqlalchemy.event.listen"><code class="xref py py-func docutils literal notranslate"><span class="pre">listen()</span></code></a> allows the establishment
of a listener function specific to this <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> before
the “autoload” process begins.  Historically this has been intended
for use with the <a class="reference internal" href="events.html#sqlalchemy.events.DDLEvents.column_reflect" title="sqlalchemy.events.DDLEvents.column_reflect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DDLEvents.column_reflect()</span></code></a> event, however
note that this event hook may now be associated with the
<a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> object directly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">listen_for_reflect</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">column_info</span><span class="p">):</span>
    <span class="s2">&quot;handle the column reflection event&quot;</span>
    <span class="c1"># ...</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s1">&#39;sometable&#39;</span><span class="p">,</span>
    <span class="n">autoload_with</span><span class="o">=</span><span class="n">engine</span><span class="p">,</span>
    <span class="n">listeners</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;column_reflect&#39;</span><span class="p">,</span> <span class="n">listen_for_reflect</span><span class="p">)</span>
    <span class="p">])</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="events.html#sqlalchemy.events.DDLEvents.column_reflect" title="sqlalchemy.events.DDLEvents.column_reflect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DDLEvents.column_reflect()</span></code></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Table.params.must_exist"></span><strong>must_exist</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Table.params.must_exist">¶</a> – When <code class="docutils literal notranslate"><span class="pre">True</span></code>, indicates that this Table must already
be present in the given <a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> collection, else
an exception is raised.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Table.params.prefixes"></span><strong>prefixes</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Table.params.prefixes">¶</a> – A list of strings to insert after CREATE in the CREATE TABLE
statement.  They will be separated by spaces.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Table.params.quote"></span><strong>quote</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Table.params.quote">¶</a> – <p>Force quoting of this table’s name on or off, corresponding
to <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>.  When left at its default of <code class="docutils literal notranslate"><span class="pre">None</span></code>,
the column identifier will be quoted according to whether the name is
case sensitive (identifiers with at least one upper case character are
treated as case sensitive), or if it’s a reserved word.  This flag
is only needed to force quoting of a reserved word which is not known
by the SQLAlchemy dialect.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>setting this flag to <code class="docutils literal notranslate"><span class="pre">False</span></code> will not provide
case-insensitive behavior for table reflection; table reflection
will always search for a mixed-case name in a case sensitive
fashion.  Case insensitive names are specified in SQLAlchemy only
by stating the name with all lower case characters.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Table.params.quote_schema"></span><strong>quote_schema</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Table.params.quote_schema">¶</a> – same as ‘quote’ but applies to the schema identifier.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Table.params.schema"></span><strong>schema</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Table.params.schema">¶</a> – <p>The schema name for this table, which is required if
the table resides in a schema other than the default selected schema
for the engine’s database connection.  Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>If the owning <a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> of this <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
specifies its
own <a class="reference internal" href="#sqlalchemy.schema.MetaData.params.schema" title="sqlalchemy.schema.MetaData"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">MetaData.schema</span></code></a> parameter,
then that schema name will
be applied to this <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
if the schema parameter here is set
to <code class="docutils literal notranslate"><span class="pre">None</span></code>.  To set a blank schema name on a <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
that
would otherwise use the schema set on the owning
<a class="reference internal" href="#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>,
specify the special symbol <a class="reference internal" href="#sqlalchemy.schema.sqlalchemy.schema.BLANK_SCHEMA" title="sqlalchemy.schema.sqlalchemy.schema.BLANK_SCHEMA"><code class="xref py py-attr docutils literal notranslate"><span class="pre">BLANK_SCHEMA</span></code></a>.</p>
<p>The quoting rules for the schema name are the same as those for the
<code class="docutils literal notranslate"><span class="pre">name</span></code> parameter, in that quoting is applied for reserved words or
case-sensitive names; to enable unconditional quoting for the schema
name, specify the flag <code class="docutils literal notranslate"><span class="pre">quote_schema=True</span></code> to the constructor, or use
the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.quoted_name" title="sqlalchemy.sql.expression.quoted_name"><code class="xref py py-class docutils literal notranslate"><span class="pre">quoted_name</span></code></a> construct to specify the name.</p>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Table.params.comment"></span><strong>comment</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Table.params.comment">¶</a> – <p>Optional string that will render an SQL comment on table
creation.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.2: </span>Added the <a class="reference internal" href="#sqlalchemy.schema.Table.params.comment" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.comment</span></code></a>
parameter
to <a class="reference internal" href="#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Table.params.**kw"></span><strong>**kw</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Table.params.**kw">¶</a> – Additional keyword arguments not mentioned above are
dialect specific, and passed in the form <code class="docutils literal notranslate"><span class="pre">&lt;dialectname&gt;_&lt;argname&gt;</span></code>.
See the documentation regarding an individual dialect at
<a class="reference internal" href="../dialects/index.html"><span class="std std-ref">方言</span></a> for detail on documented arguments.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<p>    :members:
    :inherited-members:</p>
</section>
</section>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="schema.html" title="previous chapter">模式定义语言 (Schema Definition Language)</a>
        Next:
        <a href="reflection.html" title="next chapter">从数据库反射对象</a>

    <div id="docs-copyright">
        &copy; <a href="../copyright.html">Copyright</a> 2007-2023, the SQLAlchemy authors and contributors.


    <p><b>flambé!</b> the dragon and <b><i>The Alchemist</i></b> image designs created and generously donated by <a href="https://github.com/vmalloc">Rotem Yaari</a>.</p>

        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 7.0.1.

    Documentation last generated: 2023/8/18 18:43:47

    </div>
</div>

</div>



        
        

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '2.0.19',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>

    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script type="text/javascript" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/sphinx_highlight.js"></script>
        <script type="text/javascript" src="../_static/clipboard.min.js"></script>
        <script type="text/javascript" src="../_static/copybutton.js"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../_static/init.js"></script>


    </body>
</html>


