<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>
            
    
    列载入选项
 &mdash;
    SQLAlchemy 2.0 Documentation

        </title>

        
            <!-- begin iterate through site-imported + sphinx environment css_files -->
                <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/sphinx_paramlinks.css" type="text/css" />
            <!-- end iterate through site-imported + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
        <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="top" title="SQLAlchemy 2.0 Documentation" href="../../index.html" />
        <link rel="up" title="ORM查询指南" href="index.html" />
        <link rel="next" title="关系属性加载技术" href="relationships.html" />
        <link rel="prev" title="支持 ORM 的 INSERT、UPDATE 和 DELETE 语句" href="dml.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">2.0.19</span>


        | Release Date: July 15, 2023

    </div>

    <h1><a href="../../index.html">SQLAlchemy 2.0 Documentation</a></h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">



        <div id="docs-sidebar-popout">
            <h3><a href="../../index.html">SQLAlchemy 2.0 Documentation</a></h3>
            <p id="sidebar-topnav">
                <a href="../../index.html">Home</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../../search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12" />
                  </label>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="../index.html" title="SQLAlchemy ORM">SQLAlchemy ORM</a>
        </h3>

        <ul>
<li><span class="link-container"><a class="reference external" href="../quickstart.html">ORM快速入门</a></span></li>
<li><span class="link-container"><a class="reference external" href="../mapper_config.html">ORM映射类配置</a></span></li>
<li><span class="link-container"><a class="reference external" href="../relationships.html">关系配置</a></span></li>
<li><span class="link-container"><a class="reference external" href="index.html">ORM查询指南</a></span><ul>
<li><span class="link-container"><a class="reference external" href="select.html">用ORM Mapper类编写SELECT语句</a></span></li>
<li><span class="link-container"><a class="reference external" href="inheritance.html">编写继承映射的SELECT语句</a></span></li>
<li><span class="link-container"><a class="reference external" href="dml.html">支持 ORM 的 INSERT、UPDATE 和 DELETE 语句</a></span></li>
<li class="selected"><span class="link-container"><strong>列载入选项</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#load-only">使用``load_only()``来减少载入的列</a></span></li>
<li><span class="link-container"><a class="reference external" href="#id16">使用``load_only()``作用于多个实体</a></span></li>
<li><span class="link-container"><a class="reference external" href="#orm-queryguide-load-only-related">对相关对象和集合使用``load_only()``</a></span></li>
<li><span class="link-container"><a class="reference external" href="#defer">使用``defer()``省略特定列</a></span></li>
<li><span class="link-container"><a class="reference external" href="#raiseload">使用 raiseload 防止延迟列载入</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#deferral">在映射中配置列 Deferral</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#deferred-sql">使用``deferred()` `对命令式映射器，映射SQL表达式</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#ref-orm-queryguide-select-columns-select-sql-sql">如 : ref:<cite>orm_queryguide_select_columns</cite></a></span></li>
<li><span class="link-container"><a class="reference external" href="#api">列加载API</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.defer"><code class="docutils literal notranslate"><span class="pre">defer()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.deferred"><code class="docutils literal notranslate"><span class="pre">deferred()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.query_expression"><code class="docutils literal notranslate"><span class="pre">query_expression()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.load_only"><code class="docutils literal notranslate"><span class="pre">load_only()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.undefer"><code class="docutils literal notranslate"><span class="pre">undefer()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.undefer_group"><code class="docutils literal notranslate"><span class="pre">undefer_group()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.with_expression"><code class="docutils literal notranslate"><span class="pre">with_expression()</span></code></a></span></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="relationships.html">关系属性加载技术</a></span></li>
<li><span class="link-container"><a class="reference external" href="api.html">用于查询的ORM API特性</a></span></li>
<li><span class="link-container"><a class="reference external" href="query.html">旧版查询API</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="../session.html">使用Session</a></span></li>
<li><span class="link-container"><a class="reference external" href="../extending.html">事件和内部实现</a></span></li>
<li><span class="link-container"><a class="reference external" href="../extensions/index.html">ORM扩展</a></span></li>
<li><span class="link-container"><a class="reference external" href="../examples.html">ORM Examples</a></span></li>
</ul>



        </div>

        </div>

    </div>

    <div id="narrow-index-nav">
        <form class="search" action="../../search.html" method="get">
            <label>
                Search terms:
            <input type="text" placeholder="search..." name="q" size="12" />
            </label>
            <input type="submit" value="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>

        <p>
        <a href="../../index.html">Home</a>
        </p>

    </div>


        <div id="docs-narrow-top-navigation">
            <ul>
                <li><b>Previous:</b>
                <a href="dml.html" title="previous chapter">支持 ORM 的 INSERT、UPDATE 和 DELETE 语句</a></li>
                <li><b>Next:</b>
                <a href="relationships.html" title="next chapter">关系属性加载技术</a></li>

            <li><b>Up:</b> <a href="../../index.html">Home</a></li>
                    <ul><li><a href="../index.html" title="SQLAlchemy ORM">SQLAlchemy ORM</a></li>
                    <ul><li><a href="index.html" title="ORM查询指南">ORM查询指南</a></li>
                </ul>
                </ul>



            <li><b>On this page:</b></li>
            <ul>
<li><a class="reference internal" href="#loading-columns">列载入选项</a><ul>
<li><a class="reference internal" href="#load-only">使用``load_only()``来减少载入的列</a></li>
<li><a class="reference internal" href="#id16">使用``load_only()``作用于多个实体</a></li>
<li><a class="reference internal" href="#orm-queryguide-load-only-related">对相关对象和集合使用``load_only()``</a></li>
<li><a class="reference internal" href="#defer">使用``defer()``省略特定列</a></li>
<li><a class="reference internal" href="#raiseload">使用 raiseload 防止延迟列载入</a><ul>
<li><a class="reference internal" href="#deferral">在映射中配置列 Deferral</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deferred-sql">使用``deferred()` `对命令式映射器，映射SQL表达式</a><ul>
<li><a class="reference internal" href="#ref-orm-queryguide-select-columns-select-sql-sql">如 : ref:<cite>orm_queryguide_select_columns</cite> 和其他地方所述，可以使用 <code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code> 结构来加载任意 SQL 表达式结果集中使用计数和其他SQL表达式的添加</a></li>
<li><a class="reference internal" href="#api">列加载API</a><ul>
<li><a class="reference internal" href="#sqlalchemy.orm.defer"><code class="docutils literal notranslate"><span class="pre">defer()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.deferred"><code class="docutils literal notranslate"><span class="pre">deferred()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.query_expression"><code class="docutils literal notranslate"><span class="pre">query_expression()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.load_only"><code class="docutils literal notranslate"><span class="pre">load_only()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.undefer"><code class="docutils literal notranslate"><span class="pre">undefer()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.undefer_group"><code class="docutils literal notranslate"><span class="pre">undefer_group()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.with_expression"><code class="docutils literal notranslate"><span class="pre">with_expression()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


            </ul>

        </div>



    <div id="docs-body" role="main" class="withsidebar orm-queryguide-columns" >
        
<section id="loading-columns">
<span id="id1"></span><h1>列载入选项<a class="headerlink" href="#loading-columns" title="Permalink to this heading">¶</a></h1>
<div class="admonition- admonition">
<p class="admonition-title">关于本文档</p>
<p>本节介绍有关列载入的其他选项。使用的映射包括用于存储大字符串值的列，我们可能希望限制它们何时被载入。</p>
<p><a class="reference internal" href="_deferred_setup.html"><span class="doc">查看本页的ORM设置</span></a>。以下示例中，将重新定义“Book”映射器以修改某些列定义。</p>
</div>
<p id="orm-queryguide-column-deferral">通过延迟列来限制载入哪些列
————————————————– ——</p>
<p><strong>列延迟</strong> 是指在查询类型的对象时忽略的ORM映射列。这里的一般基本原则是性能，或者当表存在很少使用的可能具有大量数据的列时，每个查询完全加载这些列可能是时间和/或内存密集型的。 SQLAlchemy ORM提供了各种方式来控制在加载实体时控制列的载入。</p>
<p>本节中的大多数示例都说明了**ORM加载程序选项**。这些是小的结构，它们传递给:class:<a href="#id2"><span class="problematic" id="id3">`</span></a>_sql.Select`对象的:meth:<a href="#id4"><span class="problematic" id="id5">`</span></a>_sql.Select.options`方法，然后在将对象编译为SQL字符串时由ORM使用。</p>
<section id="load-only">
<span id="orm-queryguide-load-only"></span><h2>使用``load_only()``来减少载入的列<a class="headerlink" href="#load-only" title="Permalink to this heading">¶</a></h2>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">load_only()</span></code>，我们可以指示ORM仅在开始时加载“ title”和“ summary”列：</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">load_only</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">Book</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">load_only</span><span class="p">(</span><span class="n">Book</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="n">Book</span><span class="o">.</span><span class="n">summary</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">books</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">{execsql}SELECT book.id, book.title, book.summary</span>
<span class="go">FROM book</span>
<span class="go">[...] ()</span>
<span class="go">{stop}&gt;&gt;&gt; for book in books:</span>
<span class="go">...     print(f&quot;{book.title}  {book.summary}&quot;)</span>
<span class="go">100 Years of Krabby Patties  some long summary</span>
<span class="go">Sea Catch 22  another long summary</span>
<span class="go">The Sea Grapes of Wrath  yet another summary</span>
<span class="go">A Nut Like No Other  some long summary</span>
<span class="go">Geodesic Domes: A Retrospective  another long summary</span>
<span class="go">Rocketry for Squirrels  yet another summary</span></pre></div>
</div>
<p>上面，SELECT语句省略了“ cover_photo”列，仅包括“ title”和“ summary”，以及主键列“.id”；ORM通常会始终获取主键列，因为这些列对于建立行的标识是必需的。</p>
<p>一旦加载，对象通常会在其余未加载的属性上应用：term：’lazy loading’行为，这意味着在首次访问任何属性时，当前事务中会发出一个SQL语句以加载值。下面，访问“ cover_photo”会发出SELECT语句以加载其值：</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">img_data</span> <span class="o">=</span> <span class="n">books</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">cover_photo</span>
<span class="go">{execsql}SELECT book.cover_photo AS book_cover_photo</span>
<span class="go">FROM book</span>
<span class="go">WHERE book.id = ?</span>
<span class="go">[...] (1,)</span></pre></div>
</div>
<p>懒惰加载始终使用对象处于：term：’persistent’状态的:class:<a href="#id6"><span class="problematic" id="id7">`</span></a>_orm。会话`发出。如果对象处于任何：class：<a href="#id8"><span class="problematic" id="id9">`</span></a>_orm。会话`中：term：’detached’，则操作失败，引发异常。</p>
<p>与懒惰加载不同，延迟列也可以配置为在访问时引发有关其附加状态的信息性异常。当使用：func:<a href="#id10"><span class="problematic" id="id11">`</span></a>_orm.load_only`构造时，可以使用：paramref:<a href="#id12"><span class="problematic" id="id13">`</span></a>_orm.load_only.raiseload`参数指示。有关背景和示例，请参见:ref：<a href="#id14"><span class="problematic" id="id15">`</span></a>orm_queryguide_deferred_raiseload`部分。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>如其他地方所述，协同错误时不可使用懒惰加载。 :ref：<cite>asyncio_toplevel</cite>。</p>
</div>
</section>
<section id="id16">
<h2>使用``load_only()``作用于多个实体<a class="headerlink" href="#id16" title="Permalink to this heading">¶</a></h2>
<p>:func:<a href="#id17"><span class="problematic" id="id18">`</span></a>_orm.load_only`仅限于在其属性列表中所引用的单个实体（尚未允许跨越多个实体跨度的属性列表）。在下面的示例中，给定的：func:<a href="#id19"><span class="problematic" id="id20">`</span></a>_orm.load_only`选项仅适用于“书籍”实体。未受影响的“用户”实体具有所有“user_account”列；在生成的SELECT语句中，“book”表只有“id”和“ title”列：</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">Book</span><span class="p">)</span><span class="o">.</span><span class="n">join_from</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">Book</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">load_only</span><span class="p">(</span><span class="n">Book</span><span class="o">.</span><span class="n">title</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>
<span class="go">{printsql}SELECT user_account.id, user_account.name, user_account.fullname,</span>
<span class="go">book.id AS id_1, book.title</span>
<span class="go">FROM user_account JOIN book ON user_account.id = book.owner_id</span></pre></div>
</div>
<p>如果要将：func:<a href="#id21"><span class="problematic" id="id22">`</span></a>_orm.load_only`选项应用于“用户”和“书籍”，则应使用两个单独的选项：</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">Book</span><span class="p">)</span>
<span class="gp">... </span>    <span class="o">.</span><span class="n">join_from</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">Book</span><span class="p">)</span>
<span class="gp">... </span>    <span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">load_only</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">name</span><span class="p">),</span> <span class="n">load_only</span><span class="p">(</span><span class="n">Book</span><span class="o">.</span><span class="n">title</span><span class="p">))</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>
<span class="go">{printsql}SELECT user_account.id, user_account.name, book.id AS id_1, book.title</span>
<span class="go">FROM user_account JOIN book ON user_account.id = book.owner_id</span></pre></div>
</div>
</section>
<section id="orm-queryguide-load-only-related">
<span id="id23"></span><h2>对相关对象和集合使用``load_only()``<a class="headerlink" href="#orm-queryguide-load-only-related" title="Permalink to this heading">¶</a></h2>
<p>在使用关系加载器 <span class="xref std std-ref">loading_toplevel</span> 时，任何关系加载器的对象都可以使用:meth:<cite>.Load.load_only`来应用 :func:`_orm.load_only`规则，以控制子实体上的列。在下面的示例中，使用：func:`_orm.selectinload`来加载每个“用户”对象上的相关“books”集合。通过:meth:</cite>.Load.load_only`应用下文中的 <a class="reference internal" href="#sqlalchemy.orm.load_only" title="sqlalchemy.orm.load_only"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_only()</span></code></a>，当加载关系的对象时，发出的SELECT将仅涉及“title”列，以及主键列：</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">selectinload</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">selectinload</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">books</span><span class="p">)</span><span class="o">.</span><span class="n">load_only</span><span class="p">(</span><span class="n">Book</span><span class="o">.</span><span class="n">title</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">stmt</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">fullname</span><span class="si">}</span><span class="s2">   </span><span class="si">{</span><span class="p">[</span><span class="n">b</span><span class="o">.</span><span class="n">title</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">user</span><span class="o">.</span><span class="n">books</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">{execsql}SELECT user_account.id, user_account.name, user_account.fullname</span>
<span class="go">FROM user_account</span>
<span class="go">[...] ()</span>
<span class="go">SELECT book.owner_id AS book_owner_id, book.id AS book_id, book.title AS book_title</span>
<span class="go">FROM book</span>
<span class="go">WHERE book.owner_id IN (?, ?)</span>
<span class="go">[...] (1, 2)</span>
<span class="go">{stop}Spongebob Squarepants   [&#39;100 Years of Krabby Patties&#39;, &#39;Sea Catch 22&#39;, &#39;The Sea Grapes of Wrath&#39;]</span>
<span class="go">Sandy Cheeks   [&#39;A Nut Like No Other&#39;, &#39;Geodesic Domes: A Retrospective&#39;, &#39;Rocketry for Squirrels&#39;]</span></pre></div>
</div>
<p>如上所述，在不需要指定要使用的加载样式的情况下，也可以将：func:<a href="#id24"><span class="problematic" id="id25">`</span></a>_orm.load_only`应用于子实体，例如，使用：func:<a href="#id26"><span class="problematic" id="id27">`</span></a>_orm.defaultload`选项进行链接，该选项在本例中将保留关系加载样式“ lazy”，并将自定义：func:适用于本例的`_orm.load_only`规则SELECT语句发出：</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">defaultload</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">defaultload</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">books</span><span class="p">)</span><span class="o">.</span><span class="n">load_only</span><span class="p">(</span><span class="n">Book</span><span class="o">.</span><span class="n">title</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">stmt</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">fullname</span><span class="si">}</span><span class="s2">   </span><span class="si">{</span><span class="p">[</span><span class="n">b</span><span class="o">.</span><span class="n">title</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">user</span><span class="o">.</span><span class="n">books</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">{execsql}SELECT user_account.id, user_account.name, user_account.fullname</span>
<span class="go">FROM user_account</span>
<span class="go">[...] ()</span>
<span class="go">SELECT book.id AS book_id, book.title AS book_title</span>
<span class="go">FROM book</span>
<span class="go">WHERE ? = book.owner_id</span>
<span class="go">[...] (1,)</span>
<span class="go">{stop}Spongebob Squarepants   [&#39;100 Years of Krabby Patties&#39;, &#39;Sea Catch 22&#39;, &#39;The Sea Grapes of Wrath&#39;]</span>
<span class="go">{execsql}SELECT book.id AS book_id, book.title AS book_title</span>
<span class="go">FROM book</span>
<span class="go">WHERE ? = book.owner_id</span>
<span class="go">[...] (2,)</span>
<span class="go">{stop}Sandy Cheeks   [&#39;A Nut Like No Other&#39;, &#39;Geodesic Domes: A Retrospective&#39;, &#39;Rocketry for Squirrels&#39;]</span></pre></div>
</div>
</section>
<section id="defer">
<span id="orm-queryguide-defer"></span><h2>使用``defer()``省略特定列<a class="headerlink" href="#defer" title="Permalink to this heading">¶</a></h2>
<p>:func:<a href="#id28"><span class="problematic" id="id29">`</span></a>_orm.defer`加载程序选项是比：func:<a href="#id30"><span class="problematic" id="id31">`</span></a>_orm.load_only`更细的选择，允许标记单个特定列为“不要加载”。在下面的示例中，直接应用：func:<a href="#id32"><span class="problematic" id="id33">`</span></a>_orm.defer`到“.cover_photo”列，保留所有其他列的行为：</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">defer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">Book</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">Book</span><span class="o">.</span><span class="n">owner_id</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">defer</span><span class="p">(</span><span class="n">Book</span><span class="o">.</span><span class="n">cover_photo</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">books</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">{execsql}SELECT book.id, book.owner_id, book.title, book.summary</span>
<span class="go">FROM book</span>
<span class="go">WHERE book.owner_id = ?</span>
<span class="go">[...] (2,)</span>
<span class="go">{stop}&gt;&gt;&gt; for book in books:</span>
<span class="go">...     print(f&quot;{book.title}: {book.summary}&quot;)</span>
<span class="go">A Nut Like No Other: some long summary</span>
<span class="go">Geodesic Domes: A Retrospective: another long summary</span>
<span class="go">Rocketry for Squirrels: yet another summary</span></pre></div>
</div>
<p>在默认情况下，与：func:<a href="#id34"><span class="problematic" id="id35">`</span></a>_orm.load_only`一样，未加载的列将在访问时 :term：’ lazy loading’其值：</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">img_data</span> <span class="o">=</span> <span class="n">books</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">cover_photo</span>
<span class="go">{execsql}SELECT book.cover_photo AS book_cover_photo</span>
<span class="go">FROM book</span>
<span class="go">WHERE book.id = ?</span>
<span class="go">[...] (4,)</span></pre></div>
</div>
<p>在一个语句中使用多个：func:<a href="#id36"><span class="problematic" id="id37">`</span></a>_orm.defer`选项，以将多个列标记为延迟。</p>
<p>与: func:<cite>_orm.load_only`和: func:`_orm.defer`加载程序选项一样，: func</cite>:` _orm.defer选项也包括在属性访问时引发有关其附加状态的信息性异常。当使用：func:<a href="#id38"><span class="problematic" id="id39">`</span></a>_orm.load_only`构造来命名一组特定的非延迟列时，可以使用：paramref：<a href="#id40"><span class="problematic" id="id41">`</span></a>_orm.load_only.raiseload`参数指示该行为。 有关如何配置和使用这种行为的背景，请参见:ref：<a href="#id42"><span class="problematic" id="id43">`</span></a>orm_queryguide_deferred_raiseload`部分。</p>
</section>
<section id="raiseload">
<span id="orm-queryguide-deferred-raiseload"></span><h2>使用 raiseload 防止延迟列载入<a class="headerlink" href="#raiseload" title="Permalink to this heading">¶</a></h2>
<p>使用：func:<a href="#id44"><span class="problematic" id="id45">`</span></a>_orm.load_only`或：func:<a href="#id46"><span class="problematic" id="id47">`</span></a>_orm.defer`加载程序选项时，当对一个对象上标记为延迟的属性进行访问时，默认行为是发出一个SQL语句以加载其值。通常需要防止此加载发生，并且在访问属性时引发异常，指示未预计在访问该列的数据库进行查询。典型的场景是使用所有已知所需进行操作的列来加载对象，然后将其传递到视图层。视图层发出的任何其他SQL操作都应该被捕获，以便可以用于调整初始加载操作以适应该附加数据，而不是在附加信息时再次进行延迟加载。</p>
<p>对于此用例，：func:<cite>_orm.defer`和：func:`_orm.load_only`加载程序选项包括布尔参数：paramref:`_orm.defer.raiseload</cite>，当设置为``True``时，受影响的属性将在访问时引发。在下面的示例中，延迟列“.cover_photo”将禁止属性访问：</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">select</span><span class="p">(</span><span class="n">Book</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">defer</span><span class="p">(</span><span class="n">Book</span><span class="o">.</span><span class="n">cover_photo</span><span class="p">,</span> <span class="n">raiseload</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">Book</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">{execsql}SELECT book.id, book.owner_id, book.title, book.summary</span>
<span class="go">FROM book</span>
<span class="go">WHERE book.id = ?</span>
<span class="go">[...] (4,)</span>
<span class="go">{stop}&gt;&gt;&gt; book.cover_photo</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">sqlalchemy.exc.InvalidRequestError</span>: <span class="n">&#39;Book.cover_photo&#39; is not available due to raiseload=True</span></pre></div>
</div>
<p>当使用：func:<cite>_orm.load_only`来命名一组非延迟列时，可以使用：paramref:`_orm.load_only.raiseload`参数将``raiseload``行为应用于所有延迟的属性。请参见 :ref：`orm_queryguide_deferred_raiseload</cite> 部分了解详细信息。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>目前尚不能将引用相同实体的：func:<a href="#id48"><span class="problematic" id="id49">`</span></a>_orm.load_only`和：func:<a href="#id50"><span class="problematic" id="id51">`</span></a>_orm.defer`选项混合在一个语句中，以更改某些属性的“ raiseload”行为；目前，这样做将在属性的不确定加载行为中产生未定义的加载行为。</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>:paramref:<a href="#id52"><span class="problematic" id="id53">`</span></a>_orm.defer.raiseload`功能是适用于关系的相同的顶级功能</p>
</div>
<p>    可用于”raiseload”特性。对于关系中的”raiseload”，请参见
    这个指南的 <span class="xref std std-ref">loading_toplevel</span> 部分中的 <a class="reference internal" href="relationships.html#prevent-lazy-with-raiseload"><span class="std std-ref">使用 raiseload 来防止不必要的惰性加载</span></a>。</p>
<section id="deferral">
<span id="orm-queryguide-deferred-declarative"></span><h3>在映射中配置列 Deferral<a class="headerlink" href="#deferral" title="Permalink to this heading">¶</a></h3>
<p>映射器的默认行为是让执行默认延迟。该默认延迟设置适用于应延迟的列，并且非常适合不希望在每个查询中无条件加载的列。要配置，请使用：paramref:<a href="#id54"><span class="problematic" id="id55">`</span></a>_orm.mapped_column.deferred`参数。下面的示例说明了适用于“.summary”和“.cover_photo”列的默认列 deferral 的映射：</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;book&quot;</span>
<span class="gp">... </span>    <span class="n">id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">owner_id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;user_account.id&quot;</span><span class="p">))</span>
<span class="gp">... </span>    <span class="n">title</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">str</span><span class="p">]</span>
<span class="gp">... </span>    <span class="n">summary</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">Text</span><span class="p">,</span> <span class="n">deferred</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">cover_photo</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">LargeBinary</span><span class="p">,</span> <span class="n">deferred</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">str</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Book(id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">!r}</span><span class="s2">, title=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">!r}</span><span class="s2">)&quot;</span></pre><div class="code-annotations-key"></div></div>
</div>
<p>使用上述映射，对“ Book”进行的查询将自动不包括“.summary”和“.cover_photo”列：</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">Book</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">Book</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">2</span><span class="p">))</span>
<span class="go">{execsql}SELECT book.id, book.owner_id, book.title</span>
<span class="go">FROM book</span>
<span class="go">WHERE book.id = ?</span>
<span class="go">[...] (2,)</span></pre></div>
</div>
<p>与所有延迟一样，默认情况下，查询状态下未加载的属性的默认行为是懒惰加载其值：</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">img_data</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">cover_photo</span>
<span class="go">{execsql}SELECT book.cover_photo AS book_cover_photo</span>
<span class="go">FROM book</span>
<span class="go">WHERE book.id = ?</span>
<span class="go">[...] (2,)</span></pre></div>
</div>
<p>如前所述，映射器级的deferral也包括具有在属性访问时引发具有关键信息的异常的能力，而不管它们的附加状态如何。当使用：func:<cite>_orm.load_only`构造时，这可以使用：paramref:`_orm.load_only.raiseload`参数来指示。请参见 :ref：`orm_queryguide_deferred_raiseload</cite> 部分，了解如何配置和使用此选项。</p>
</section>
</section>
<section id="deferred-sql">
<span id="orm-queryguide-deferred-imperative"></span><h2>使用``deferred()` <a href="#id56"><span class="problematic" id="id57">`</span></a>对命令式映射器，映射SQL表达式<a class="headerlink" href="#deferred-sql" title="Permalink to this heading">¶</a></h2>
<p>在SQLAlchemy引入：func：<a href="#id58"><span class="problematic" id="id59">`</span></a>_orm.mapped_column`构造之前，：func：<a href="#id60"><span class="problematic" id="id61">`</span></a>_orm.deferred`函数是早期的、更通用的”deferred列”映射指令。</p>
<p>在配置ORM映射器时使用：func:<cite>_orm.deferred</cite>，并接受任意SQL表达式或：class:<a href="#id62"><span class="problematic" id="id63">`</span></a>_schema.Column`对象。因此，它适合用于非声明性：ref：<a href="#id64"><span class="problematic" id="id65">`</span></a>orm_imperative_mapping`映射，将其传递给：paramref:<a href="#id66"><span class="problematic" id="id67">`</span></a>_orm.registry。<a href="#id68"><span class="problematic" id="id69">`</span></a>以：func:<a href="#id70"><span class="problematic" id="id71">`</span></a>_orm.registry.map_imperatively.properties`字典为键：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span></pre></div>
</div>
<p>    from sqlalchemy import Blob
    from sqlalchemy import Column
    from sqlalchemy import ForeignKey
    from sqlalchemy import Integer
    from sqlalchemy import String
    from sqlalchemy import Table
    from sqlalchemy import Text
    from sqlalchemy.orm import registry</p>
<p>    mapper_registry = registry()</p>
<p>    book_table = Table(
        “book”,
        mapper_registry.metadata,
        Column(“id”, Integer, primary_key=True),
        Column(“title”, String(50)),
        Column(“summary”, Text),
        Column(“cover_image”, Blob),
    )</p>
<p>    class Book:
        pass</p>
<p>    mapper_registry.map_imperatively(
        Book,
        book_table,
        properties={
            “summary”: deferred(book_table.c.summary),
            “cover_image”: deferred(book_table.c.cover_image),
        },
    )</p>
<section id="ref-orm-queryguide-select-columns-select-sql-sql">
<h3>如 : ref:<cite>orm_queryguide_select_columns</cite> 和其他地方所述，可以使用 <a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a> 结构来加载任意 SQL 表达式结果集中使用计数和其他SQL表达式的添加<a class="headerlink" href="#ref-orm-queryguide-select-columns-select-sql-sql" title="Permalink to this heading">¶</a></h3>
<p>例如，如果我们想要发出一个查询以加载“User”对象，但是也包括每个“User”拥有的书籍数量的计数，我们可以使用“func.count（Book.id）”将“计数”列添加到查询中，该查询包括连接到“Book”，以及按所有者ID分组的GROUP BY 。这将产生:class:<a href="#id72"><span class="problematic" id="id73">`</span></a>.Row`对象，每个对象都包含两个条目，一个条目是“User”，另一个条目是“func.count（Book.id）”：</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">func</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">func</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">Book</span><span class="o">.</span><span class="n">id</span><span class="p">))</span><span class="o">.</span><span class="n">join_from</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">Book</span><span class="p">)</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="n">Book</span><span class="o">.</span><span class="n">owner_id</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">user</span><span class="p">,</span> <span class="n">book_count</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;用户名：</span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">  书籍数量：</span><span class="si">{</span><span class="n">book_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">{execsql}SELECT user_account.id, user_account.name, user_account.fullname,</span>
<span class="go">count(book.id) AS count_1</span>
<span class="go">FROM user_account JOIN book ON user_account.id = book.owner_id</span>
<span class="go">GROUP BY book.owner_id</span>
<span class="go">[...] ()</span>
<span class="go">{stop}用户名：海绵宝宝  书籍数量：3</span>
<span class="go">用户名：松鼠先生  书籍数量：3</span></pre></div>
</div>
<p>在上面的示例中，“User”实体和“book count” SQL表达式是分别返回的。但是，一个常见的用例是生成一个查询，该查询将仅返回“User”对象，例如使用:meth:<a href="#id74"><span class="problematic" id="id75">`</span></a>_orm.Session.scalars`进行迭代，其中“func.count（Book.id）”的查询结果应用动态地到每个“User”实体。最终的结果将类似于使用:func:<a href="#id76"><span class="problematic" id="id77">`</span></a>_orm.column_property`将任意SQL表达式映射到类的情况，但是SQL表达式可以在查询时进行修改。对于这种用例，SQLAlchemy提供了:func:<a href="#id78"><span class="problematic" id="id79">`</span></a>_orm.with_expression`加载器选项，当与映射器级别的:func:<a href="#id80"><span class="problematic" id="id81">`</span></a>_orm.query_expression`指令结合使用时，可以产生此结果。</p>
<p>要在查询中应用:func:<cite>_orm.with_expression</cite>，映射类必须具有先前使用:func:<a href="#id82"><span class="problematic" id="id83">`</span></a>_orm.query_expression`指令配置的ORM映射属性。该指令将在OR映射类上生成一个属性，该属性适合接收查询时SQL表达式。以下是将“User.book_count”添加到“User”的新属性。这个ORM映射属性只读，没有默认值；在加载的实例上访问它通常会产生“None”：</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">query_expression</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;user_account&quot;</span>
<span class="gp">... </span>    <span class="n">id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">name</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">str</span><span class="p">]</span>
<span class="gp">... </span>    <span class="n">fullname</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">str</span><span class="p">]]</span>
<span class="gp">... </span>    <span class="n">book_count</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">query_expression</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">str</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;User(id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">!r}</span><span class="s2">, name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">!r}</span><span class="s2">, fullname=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">fullname</span><span class="si">!r}</span><span class="s2">)&quot;</span></pre><div class="code-annotations-key"></div></div>
</div>
<p>通过在映射中配置“User.book_count”属性，我们可以使用:func:<a href="#id84"><span class="problematic" id="id85">`</span></a>_orm.with_expression`加载器选项，在每次加载其时将自定义SQL表达式应用于每个“User”对象:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">with_expression</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="p">(</span>
<span class="go">...     select(User)</span>
<span class="go">...     .join_from(User, Book)</span>
<span class="go">...     .group_by(Book.owner_id)</span>
<span class="go">...     .options(with_expression(User.book_count, func.count(Book.id)))</span>
<span class="go">... )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">stmt</span><span class="p">):</span>
<span class="go">...     print(f&quot;用户名：{user.name}  书籍数量：{user.book_count}&quot;)</span>
<div class='show_sql'><span class="k">SELECT</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">book</span><span class="p">.</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">count_1</span><span class="p">,</span><span class="w"> </span><span class="n">user_account</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">user_account</span><span class="p">.</span><span class="n">name</span><span class="p">,</span>
<span class="n">user_account</span><span class="p">.</span><span class="n">fullname</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">user_account</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">book</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">user_account</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">book</span><span class="p">.</span><span class="n">owner_id</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">book</span><span class="p">.</span><span class="n">owner_id</span>
<span class="p">[...]</span><span class="w"> </span><span class="p">()</span>
</div><span class="go">用户名：海绵宝宝  书籍数量：3</span>
<span class="go">用户名：松鼠先生  书籍数量：3</span></pre></div>
</div>
<p>以上，我们将“func.count（Book.id）”表达式从:func:<a href="#id86"><span class="problematic" id="id87">`</span></a>_sql.select`构造函数的列参数中移除，并将其移动到:func:<a href="#id88"><span class="problematic" id="id89">`</span></a>_orm.with_expression`加载器选项中。ORM然后将其视为特殊的列加载选项，该选项在语句上动态应用。</p>
<p>:func:<a href="#id90"><span class="problematic" id="id91">`</span></a>.query_expression`映射有以下注意事项：</p>
<ul>
<li><p>在未使用:func:<a href="#id92"><span class="problematic" id="id93">`</span></a>_orm.with_expression`为属性填充值的对象上，对象实例上的属性将具有值“None”，除非在映射上将:paramref:<a href="#id94"><span class="problematic" id="id95">`</span></a>_orm.query_expression.default_expr`参数设置为默认的SQL表达式。</p></li>
<li><p>除非使用:ref:<cite>orm_queryguide_populate_existing</cite>，否则:func:<a href="#id96"><span class="problematic" id="id97">`</span></a>_orm.with_expression`值**不会填充已加载的对象**。下面的示例**不起作用**，因为“obj”对象已经加载：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 加载第一个A</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">id</span><span class="p">))</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

<span class="c1"># 使用选项加载相同的A；该表达式**不会**应用于已加载的对象</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">with_expression</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">expr</span><span class="p">,</span> <span class="n">some_expr</span><span class="p">)))</span><span class="o">.</span><span class="n">first</span><span class="p">()</span></pre></div>
</div>
<p>要确保属性在现有对象上重新加载，请使用:ref:<a href="#id98"><span class="problematic" id="id99">`</span></a>orm_queryguide_populate_existing`执行选项以确保重新填充所有列：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">obj</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span>
    <span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
    <span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">with_expression</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">expr</span><span class="p">,</span> <span class="n">some_expr</span><span class="p">))</span>
    <span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">populate_existing</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span></pre></div>
</div>
</li>
<li><p>当对象过期时，<a class="reference internal" href="#sqlalchemy.orm.with_expression" title="sqlalchemy.orm.with_expression"><code class="xref py py-func docutils literal notranslate"><span class="pre">with_expression()</span></code></a> SQL表达式**将丢失**。一旦对象过期，无论是通过:meth:<cite>.Session.expire`还是通过:meth:</cite>.Session.commit`的expire_on_commit行为，SQL表达式及其值都不再与属性关联，并且在随后的访问中将返回“None”。</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">with_expression`作为对象加载选项，仅在查询完整实体时对查询的**最外层部分**生效，而不是在任意列选择、子查询或复合语句（如UNION）的元素中生效。请参见下一节：ref:`orm_queryguide_with_expression_unions()</span></code>。</p></li>
<li><p>所映射的属性**不能**应用于查询的其他部分，比如WHERE子句、ORDER BY子句，并且使用自定义的宣传表达式；也就是说，这不能使用：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 无法在查询中引用A.expr</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
    <span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">with_expression</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">expr</span><span class="p">,</span> <span class="n">A</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">A</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
    <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">expr</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span>
    <span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">expr</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<p>在上面的WHERE子句和ORDERBY子句中，<a href="#id100"><span class="problematic" id="id101">``</span></a>A.expr``表达式将解析为NULL。要在整个查询中使用表达式，请对变量进行赋值并使用它：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 首先分配所需表达式，然后引用该查询</span>
<span class="n">a_expr</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">A</span><span class="o">.</span><span class="n">y</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
    <span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">with_expression</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">expr</span><span class="p">,</span> <span class="n">a_expr</span><span class="p">))</span>
    <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">a_expr</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span>
    <span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">a_expr</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
</li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>:func:<a href="#id102"><span class="problematic" id="id103">`</span></a>_orm.with_expression`选项是用于在查询时间动态地应用SQL表达式的ORM加载器选项。对于映射器上配置的普通SQL表达式，请参见:ref:<a href="#id104"><span class="problematic" id="id105">`</span></a>mapper_sql_expressions`一节。</p>
</div>
</section>
<section id="api">
<h3>列加载API<a class="headerlink" href="#api" title="Permalink to this heading">¶</a></h3>
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.defer"><span class="sig-name descname">defer</span></a>(key, *addl_attrs, [raiseload])</p></td>
<td><p>Indicate that the given column-oriented attribute should be
deferred, e.g. not loaded until accessed.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.deferred"><span class="sig-name descname">deferred</span></a>(column, *additional_columns, [group, raiseload, comparator_factory, init, repr, default, default_factory, compare, kw_only, active_history, expire_on_flush, info, doc])</p></td>
<td><p>Indicate a column-based mapped attribute that by default will
not load unless accessed.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.load_only"><span class="sig-name descname">load_only</span></a>(*attrs, [raiseload])</p></td>
<td><p>Indicate that for a particular entity, only the given list
of column-based attribute names should be loaded; all others will be
deferred.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.query_expression"><span class="sig-name descname">query_expression</span></a>([default_expr], *, [repr, compare, expire_on_flush, info, doc])</p></td>
<td><p>Indicate an attribute that populates from a query-time SQL expression.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.undefer"><span class="sig-name descname">undefer</span></a>(key, *addl_attrs)</p></td>
<td><p>Indicate that the given column-oriented attribute should be
undeferred, e.g. specified within the SELECT statement of the entity
as a whole.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.undefer_group"><span class="sig-name descname">undefer_group</span></a>(name)</p></td>
<td><p>Indicate that columns within the given deferred group name should be
undeferred.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.with_expression"><span class="sig-name descname">with_expression</span></a>(key, expression)</p></td>
<td><p>Apply an ad-hoc SQL expression to a “deferred expression”
attribute.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.defer">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">defer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../internals.html#sqlalchemy.orm.QueryableAttribute" title="sqlalchemy.orm.attributes.QueryableAttribute"><span class="pre">QueryableAttribute</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">addl_attrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../internals.html#sqlalchemy.orm.QueryableAttribute" title="sqlalchemy.orm.attributes.QueryableAttribute"><span class="pre">QueryableAttribute</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raiseload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_AbstractLoad</span></span></span><a class="headerlink" href="#sqlalchemy.orm.defer" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicate that the given column-oriented attribute should be
deferred, e.g. not loaded until accessed.</p>
<p>This function is part of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code> interface and supports
both method-chained and standalone operation.</p>
<p>e.g.:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="go">from sqlalchemy.orm import defer</span>

<span class="go">session.query(MyClass).options(</span>
<span class="go">    defer(MyClass.attribute_one),</span>
<span class="go">    defer(MyClass.attribute_two)</span>
<span class="go">)</span></pre></div>
</div>
<p>To specify a deferred load of an attribute on a related class,
the path can be specified one token at a time, specifying the loading
style for each link along the chain.  To leave the loading style
for a link unchanged, use <code class="xref py py-func docutils literal notranslate"><span class="pre">defaultload()</span></code>:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="go">session.query(MyClass).options(</span>
<span class="go">    defaultload(MyClass.someattr).defer(RelatedClass.some_column)</span>
<span class="go">)</span></pre></div>
</div>
<p>Multiple deferral options related to a relationship can be bundled
at once using <code class="xref py py-meth docutils literal notranslate"><span class="pre">Load.options()</span></code>:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="go">session.query(MyClass).options(</span>
<span class="go">    defaultload(MyClass.someattr).options(</span>
<span class="go">        defer(RelatedClass.some_column),</span>
<span class="go">        defer(RelatedClass.some_other_column),</span>
<span class="go">        defer(RelatedClass.another_column)</span>
<span class="go">    )</span>
<span class="go">)</span></pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.defer.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.defer.params.key">¶</a> – Attribute to be deferred.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.defer.params.raiseload"></span><strong>raiseload</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.defer.params.raiseload">¶</a> – raise <a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> rather than
lazy loading a value when the deferred attribute is accessed. Used
to prevent unwanted SQL from being emitted.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">orm_queryguide_column_deferral</span> - in the
<span class="xref std std-ref">queryguide_toplevel</span></p>
<p><a class="reference internal" href="#sqlalchemy.orm.load_only" title="sqlalchemy.orm.load_only"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_only()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.undefer" title="sqlalchemy.orm.undefer"><code class="xref py py-func docutils literal notranslate"><span class="pre">undefer()</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.deferred">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">deferred</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ORMColumnExprArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">additional_columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ORMColumnExprArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raiseload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comparator_factory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../internals.html#sqlalchemy.orm.PropComparator" title="sqlalchemy.orm.PropComparator"><span class="pre">PropComparator</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">repr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_factory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compare</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kw_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active_history</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expire_on_flush</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_InfoType</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../internals.html#sqlalchemy.orm.MappedSQLExpression" title="sqlalchemy.orm.MappedSQLExpression"><span class="pre">MappedSQLExpression</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.deferred" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicate a column-based mapped attribute that by default will
not load unless accessed.</p>
<p>When using <code class="xref py py-func docutils literal notranslate"><span class="pre">mapped_column()</span></code>, the same functionality as
that of <a class="reference internal" href="#sqlalchemy.orm.deferred" title="sqlalchemy.orm.deferred"><code class="xref py py-func docutils literal notranslate"><span class="pre">deferred()</span></code></a> construct is provided by using the
<code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapped_column.deferred</span></code> parameter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.deferred.params.*columns"></span><strong>*columns</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.deferred.params.*columns">¶</a> – columns to be mapped.  This is typically a single
<a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> object,
however a collection is supported in order
to support multiple columns mapped under the same attribute.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.deferred.params.raiseload"></span><strong>raiseload</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.deferred.params.raiseload">¶</a> – <p>boolean, if True, indicates an exception should be raised
if the load operation is to take place.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
</p></li>
</ul>
</dd>
</dl>
<p>Additional arguments are the same as that of <code class="xref py py-func docutils literal notranslate"><span class="pre">column_property()</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#orm-queryguide-deferred-imperative"><span class="std std-ref">使用``deferred()` `对命令式映射器，映射SQL表达式</span></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.query_expression">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">query_expression</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">default_expr:</span> <span class="pre">_ORMColumnExprArgument[_T]</span> <span class="pre">=</span> <span class="pre">&lt;sqlalchemy.sql.elements.Null</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">repr:</span> <span class="pre">Union[_NoArg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool]</span> <span class="pre">=</span> <span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compare:</span> <span class="pre">Union[_NoArg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool]</span> <span class="pre">=</span> <span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expire_on_flush:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info:</span> <span class="pre">Optional[_InfoType]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doc:</span> <span class="pre">Optional[str]</span> <span class="pre">=</span> <span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../internals.html#sqlalchemy.orm.MappedSQLExpression" title="sqlalchemy.orm.MappedSQLExpression"><span class="pre">MappedSQLExpression</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.query_expression" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicate an attribute that populates from a query-time SQL expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.orm.query_expression.params.default_expr"></span><strong>default_expr</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.query_expression.params.default_expr">¶</a> – Optional SQL expression object that will be used in
all cases if not assigned later with <a class="reference internal" href="#sqlalchemy.orm.with_expression" title="sqlalchemy.orm.with_expression"><code class="xref py py-func docutils literal notranslate"><span class="pre">with_expression()</span></code></a>.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.2.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">orm_queryguide_with_expression</span> - background and usage examples</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.load_only">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">load_only</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">attrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../internals.html#sqlalchemy.orm.QueryableAttribute" title="sqlalchemy.orm.attributes.QueryableAttribute"><span class="pre">QueryableAttribute</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raiseload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_AbstractLoad</span></span></span><a class="headerlink" href="#sqlalchemy.orm.load_only" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicate that for a particular entity, only the given list
of column-based attribute names should be loaded; all others will be
deferred.</p>
<p>This function is part of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code> interface and supports
both method-chained and standalone operation.</p>
<p>Example - given a class <code class="docutils literal notranslate"><span class="pre">User</span></code>, load only the <code class="docutils literal notranslate"><span class="pre">name</span></code> and
<code class="docutils literal notranslate"><span class="pre">fullname</span></code> attributes:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="go">session.query(User).options(load_only(User.name, User.fullname))</span></pre></div>
</div>
<p>Example - given a relationship <code class="docutils literal notranslate"><span class="pre">User.addresses</span> <span class="pre">-&gt;</span> <span class="pre">Address</span></code>, specify
subquery loading for the <code class="docutils literal notranslate"><span class="pre">User.addresses</span></code> collection, but on each
<code class="docutils literal notranslate"><span class="pre">Address</span></code> object load only the <code class="docutils literal notranslate"><span class="pre">email_address</span></code> attribute:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="go">session.query(User).options(</span>
<span class="go">    subqueryload(User.addresses).load_only(Address.email_address)</span>
<span class="go">)</span></pre></div>
</div>
<p>For a statement that has multiple entities,
the lead entity can be
specifically referred to using the <code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code> constructor:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="go">stmt = select(User, Address).join(User.addresses).options(</span>
<span class="go">            Load(User).load_only(User.name, User.fullname),</span>
<span class="go">            Load(Address).load_only(Address.email_address)</span>
<span class="go">        )</span></pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.load_only.params.*attrs"></span><strong>*attrs</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.load_only.params.*attrs">¶</a> – Attributes to be loaded, all others will be deferred.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.load_only.params.raiseload"></span><strong>raiseload</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.load_only.params.raiseload">¶</a> – <p>raise <a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> rather than
lazy loading a value when a deferred attribute is accessed. Used
to prevent unwanted SQL from being emitted.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.</span></p>
</div>
</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">orm_queryguide_column_deferral</span> - in the
<span class="xref std std-ref">queryguide_toplevel</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.load_only.params.*attrs"></span><strong>*attrs</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.load_only.params.*attrs">¶</a> – Attributes to be loaded, all others will be deferred.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.load_only.params.raiseload"></span><strong>raiseload</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.load_only.params.raiseload">¶</a> – <p>raise <a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> rather than
lazy loading a value when a deferred attribute is accessed. Used
to prevent unwanted SQL from being emitted.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.</span></p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.undefer">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">undefer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../internals.html#sqlalchemy.orm.QueryableAttribute" title="sqlalchemy.orm.attributes.QueryableAttribute"><span class="pre">QueryableAttribute</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">addl_attrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../internals.html#sqlalchemy.orm.QueryableAttribute" title="sqlalchemy.orm.attributes.QueryableAttribute"><span class="pre">QueryableAttribute</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_AbstractLoad</span></span></span><a class="headerlink" href="#sqlalchemy.orm.undefer" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicate that the given column-oriented attribute should be
undeferred, e.g. specified within the SELECT statement of the entity
as a whole.</p>
<p>The column being undeferred is typically set up on the mapping as a
<a class="reference internal" href="#sqlalchemy.orm.deferred" title="sqlalchemy.orm.deferred"><code class="xref py py-func docutils literal notranslate"><span class="pre">deferred()</span></code></a> attribute.</p>
<p>This function is part of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code> interface and supports
both method-chained and standalone operation.</p>
<p>Examples:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="go"># undefer two columns</span>
<span class="go">session.query(MyClass).options(</span>
<span class="go">    undefer(MyClass.col1), undefer(MyClass.col2)</span>
<span class="go">)</span>

<span class="go"># undefer all columns specific to a single class using Load + *</span>
<span class="go">session.query(MyClass, MyOtherClass).options(</span>
<span class="go">    Load(MyClass).undefer(&quot;*&quot;))</span>

<span class="go"># undefer a column on a related object</span>
<span class="go">session.query(MyClass).options(</span>
<span class="go">    defaultload(MyClass.items).undefer(MyClass.text))</span></pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.orm.undefer.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.undefer.params.key">¶</a> – Attribute to be undeferred.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">orm_queryguide_column_deferral</span> - in the
<span class="xref std std-ref">queryguide_toplevel</span></p>
<p><a class="reference internal" href="#sqlalchemy.orm.defer" title="sqlalchemy.orm.defer"><code class="xref py py-func docutils literal notranslate"><span class="pre">defer()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.undefer_group" title="sqlalchemy.orm.undefer_group"><code class="xref py py-func docutils literal notranslate"><span class="pre">undefer_group()</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.undefer_group">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">undefer_group</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_AbstractLoad</span></span></span><a class="headerlink" href="#sqlalchemy.orm.undefer_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicate that columns within the given deferred group name should be
undeferred.</p>
<p>The columns being undeferred are set up on the mapping as
<a class="reference internal" href="#sqlalchemy.orm.deferred" title="sqlalchemy.orm.deferred"><code class="xref py py-func docutils literal notranslate"><span class="pre">deferred()</span></code></a> attributes and include a “group” name.</p>
<p>E.g:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="go">session.query(MyClass).options(undefer_group(&quot;large_attrs&quot;))</span></pre></div>
</div>
<p>To undefer a group of attributes on a related entity, the path can be
spelled out using relationship loader options, such as
<code class="xref py py-func docutils literal notranslate"><span class="pre">defaultload()</span></code>:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="go">session.query(MyClass).options(</span>
<span class="go">    defaultload(&quot;someattr&quot;).undefer_group(&quot;large_attrs&quot;))</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">orm_queryguide_column_deferral</span> - in the
<span class="xref std std-ref">queryguide_toplevel</span></p>
<p><a class="reference internal" href="#sqlalchemy.orm.defer" title="sqlalchemy.orm.defer"><code class="xref py py-func docutils literal notranslate"><span class="pre">defer()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.undefer" title="sqlalchemy.orm.undefer"><code class="xref py py-func docutils literal notranslate"><span class="pre">undefer()</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.with_expression">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">with_expression</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_AttrType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expression</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ColumnExpressionArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_AbstractLoad</span></span></span><a class="headerlink" href="#sqlalchemy.orm.with_expression" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply an ad-hoc SQL expression to a “deferred expression”
attribute.</p>
<p>This option is used in conjunction with the
<a class="reference internal" href="#sqlalchemy.orm.query_expression" title="sqlalchemy.orm.query_expression"><code class="xref py py-func docutils literal notranslate"><span class="pre">query_expression()</span></code></a> mapper-level construct that indicates an
attribute which should be the target of an ad-hoc SQL expression.</p>
<p>E.g.:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="go">stmt = select(SomeClass).options(</span>
<span class="go">    with_expression(SomeClass.x_y_expr, SomeClass.x + SomeClass.y)</span>
<span class="go">)</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.2.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.with_expression.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.with_expression.params.key">¶</a> – Attribute to be populated</p></li>
<li><p><span class="target" id="sqlalchemy.orm.with_expression.params.expr"></span><strong>expr</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.with_expression.params.expr">¶</a> – SQL expression to be applied to the attribute.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">orm_queryguide_with_expression</span> - background and usage
examples</p>
</div>
</dd></dl>

</section>
</section>
</section>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="dml.html" title="previous chapter">支持 ORM 的 INSERT、UPDATE 和 DELETE 语句</a>
        Next:
        <a href="relationships.html" title="next chapter">关系属性加载技术</a>

    <div id="docs-copyright">
        &copy; <a href="../../copyright.html">Copyright</a> 2007-2023, the SQLAlchemy authors and contributors.


    <p><b>flambé!</b> the dragon and <b><i>The Alchemist</i></b> image designs created and generously donated by <a href="https://github.com/vmalloc">Rotem Yaari</a>.</p>

        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 7.0.1.

    Documentation last generated: 2023/8/18 10:07:16

    </div>
</div>

</div>



        
        

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../../',
          VERSION:     '2.0.19',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>

    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script type="text/javascript" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/sphinx_highlight.js"></script>
        <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
        <script type="text/javascript" src="../../_static/copybutton.js"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../../_static/init.js"></script>


    </body>
</html>


