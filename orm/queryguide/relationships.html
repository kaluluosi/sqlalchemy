<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>
            
    
    关系加载技术
 &mdash;
    SQLAlchemy 2.0 Documentation

        </title>

        
            <!-- begin iterate through site-imported + sphinx environment css_files -->
                <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/sphinx_paramlinks.css" type="text/css" />
            <!-- end iterate through site-imported + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
        <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="top" title="SQLAlchemy 2.0 Documentation" href="../../index.html" />
        <link rel="up" title="ORM 查询指南" href="index.html" />
        <link rel="next" title="查询时使用的ORM API功能" href="api.html" />
        <link rel="prev" title="列加载选项" href="columns.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">2.0.19</span>


        | Release Date: July 15, 2023

    </div>

    <h1><a href="../../index.html">SQLAlchemy 2.0 Documentation</a></h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">



        <div id="docs-sidebar-popout">
            <h3><a href="../../index.html">SQLAlchemy 2.0 Documentation</a></h3>
            <p id="sidebar-topnav">
                <a href="../../index.html">Home</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../../search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12" />
                  </label>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="../index.html" title="SQLAlchemy ORM">SQLAlchemy ORM</a>
        </h3>

        <ul>
<li><span class="link-container"><a class="reference external" href="../quickstart.html">ORM快速入门</a></span></li>
<li><span class="link-container"><a class="reference external" href="../mapper_config.html">ORM映射类配置</a></span></li>
<li><span class="link-container"><a class="reference external" href="../relationships.html">关系配置</a></span></li>
<li><span class="link-container"><a class="reference external" href="index.html">ORM 查询指南</a></span><ul>
<li><span class="link-container"><a class="reference external" href="select.html">使用ORM映射类编写SELECT语句</a></span></li>
<li><span class="link-container"><a class="reference external" href="inheritance.html">继承映射中编写SELECT语句</a></span></li>
<li><span class="link-container"><a class="reference external" href="dml.html">ORM-启用的INSERT、UPDATE和DELETE语句</a></span></li>
<li><span class="link-container"><a class="reference external" href="columns.html">列加载选项</a></span></li>
<li class="selected"><span class="link-container"><strong>关系加载技术</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#id6">关系加载类型的概述</a></span></li>
<li><span class="link-container"><a class="reference external" href="#id7">使用加载器选项加载关系</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#id8">加载器选项添加筛选条件</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#lazy-loading">惰性加载</a></span></li>
<li><span class="link-container"><a class="reference external" href="#joined-eager-loading">连接的及早加载</a></span></li>
<li><span class="link-container"><a class="reference external" href="#in">选择 IN 的加载</a></span></li>
<li><span class="link-container"><a class="reference external" href="#subquery-eager-loading">子查询急加载</a></span></li>
<li><span class="link-container"><a class="reference external" href="#relationship-loader-api">Relationship Loader API</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">Load</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.Load.contains_eager"><code class="docutils literal notranslate"><span class="pre">Load.contains_eager()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.Load.defaultload"><code class="docutils literal notranslate"><span class="pre">Load.defaultload()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.Load.defer"><code class="docutils literal notranslate"><span class="pre">Load.defer()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.Load.get_children"><code class="docutils literal notranslate"><span class="pre">Load.get_children()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.Load.immediateload"><code class="docutils literal notranslate"><span class="pre">Load.immediateload()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.Load.inherit_cache"><code class="docutils literal notranslate"><span class="pre">Load.inherit_cache</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.Load.joinedload"><code class="docutils literal notranslate"><span class="pre">Load.joinedload()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.Load.lazyload"><code class="docutils literal notranslate"><span class="pre">Load.lazyload()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.Load.load_only"><code class="docutils literal notranslate"><span class="pre">Load.load_only()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.Load.noload"><code class="docutils literal notranslate"><span class="pre">Load.noload()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.Load.options"><code class="docutils literal notranslate"><span class="pre">Load.options()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.Load.process_compile_state"><code class="docutils literal notranslate"><span class="pre">Load.process_compile_state()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.Load.process_compile_state_replaced_entities"><code class="docutils literal notranslate"><span class="pre">Load.process_compile_state_replaced_entities()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.Load.propagate_to_loaders"><code class="docutils literal notranslate"><span class="pre">Load.propagate_to_loaders</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.Load.raiseload"><code class="docutils literal notranslate"><span class="pre">Load.raiseload()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.Load.selectin_polymorphic"><code class="docutils literal notranslate"><span class="pre">Load.selectin_polymorphic()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.Load.selectinload"><code class="docutils literal notranslate"><span class="pre">Load.selectinload()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.Load.subqueryload"><code class="docutils literal notranslate"><span class="pre">Load.subqueryload()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.Load.undefer"><code class="docutils literal notranslate"><span class="pre">Load.undefer()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.Load.undefer_group"><code class="docutils literal notranslate"><span class="pre">Load.undefer_group()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.Load.with_expression"><code class="docutils literal notranslate"><span class="pre">Load.with_expression()</span></code></a></span></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="api.html">查询时使用的ORM API功能</a></span></li>
<li><span class="link-container"><a class="reference external" href="query.html">Legacy查询API</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="../session.html">用 Session</a></span></li>
<li><span class="link-container"><a class="reference external" href="../extending.html">事件和内部机制</a></span></li>
<li><span class="link-container"><a class="reference external" href="../extensions/index.html">ORM扩展</a></span></li>
<li><span class="link-container"><a class="reference external" href="../examples.html">ORM 示例</a></span></li>
</ul>



        </div>

        </div>

    </div>

    <div id="narrow-index-nav">
        <form class="search" action="../../search.html" method="get">
            <label>
                Search terms:
            <input type="text" placeholder="search..." name="q" size="12" />
            </label>
            <input type="submit" value="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>

        <p>
        <a href="../../index.html">Home</a>
        </p>

    </div>


        <div id="docs-narrow-top-navigation">
            <ul>
                <li><b>Previous:</b>
                <a href="columns.html" title="previous chapter">列加载选项</a></li>
                <li><b>Next:</b>
                <a href="api.html" title="next chapter">查询时使用的ORM API功能</a></li>

            <li><b>Up:</b> <a href="../../index.html">Home</a></li>
                    <ul><li><a href="../index.html" title="SQLAlchemy ORM">SQLAlchemy ORM</a></li>
                    <ul><li><a href="index.html" title="ORM 查询指南">ORM 查询指南</a></li>
                </ul>
                </ul>



            <li><b>On this page:</b></li>
            <ul>
<li><a class="reference internal" href="#id1">关系加载技术</a><ul>
<li><a class="reference internal" href="#id6">关系加载类型的概述</a></li>
<li><a class="reference internal" href="#id7">使用加载器选项加载关系</a><ul>
<li><a class="reference internal" href="#id8">加载器选项添加筛选条件</a></li>
</ul>
</li>
<li><a class="reference internal" href="#lazy-loading">惰性加载</a></li>
<li><a class="reference internal" href="#joined-eager-loading">连接的及早加载</a></li>
<li><a class="reference internal" href="#in">选择 IN 的加载</a></li>
<li><a class="reference internal" href="#subquery-eager-loading">子查询急加载</a></li>
<li><a class="reference internal" href="#relationship-loader-api">Relationship Loader API</a><ul>
<li><a class="reference internal" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">Load</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.orm.Load.contains_eager"><code class="docutils literal notranslate"><span class="pre">Load.contains_eager()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Load.defaultload"><code class="docutils literal notranslate"><span class="pre">Load.defaultload()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Load.defer"><code class="docutils literal notranslate"><span class="pre">Load.defer()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Load.get_children"><code class="docutils literal notranslate"><span class="pre">Load.get_children()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Load.immediateload"><code class="docutils literal notranslate"><span class="pre">Load.immediateload()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Load.inherit_cache"><code class="docutils literal notranslate"><span class="pre">Load.inherit_cache</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Load.joinedload"><code class="docutils literal notranslate"><span class="pre">Load.joinedload()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Load.lazyload"><code class="docutils literal notranslate"><span class="pre">Load.lazyload()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Load.load_only"><code class="docutils literal notranslate"><span class="pre">Load.load_only()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Load.noload"><code class="docutils literal notranslate"><span class="pre">Load.noload()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Load.options"><code class="docutils literal notranslate"><span class="pre">Load.options()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Load.process_compile_state"><code class="docutils literal notranslate"><span class="pre">Load.process_compile_state()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Load.process_compile_state_replaced_entities"><code class="docutils literal notranslate"><span class="pre">Load.process_compile_state_replaced_entities()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Load.propagate_to_loaders"><code class="docutils literal notranslate"><span class="pre">Load.propagate_to_loaders</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Load.raiseload"><code class="docutils literal notranslate"><span class="pre">Load.raiseload()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Load.selectin_polymorphic"><code class="docutils literal notranslate"><span class="pre">Load.selectin_polymorphic()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Load.selectinload"><code class="docutils literal notranslate"><span class="pre">Load.selectinload()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Load.subqueryload"><code class="docutils literal notranslate"><span class="pre">Load.subqueryload()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Load.undefer"><code class="docutils literal notranslate"><span class="pre">Load.undefer()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Load.undefer_group"><code class="docutils literal notranslate"><span class="pre">Load.undefer_group()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Load.with_expression"><code class="docutils literal notranslate"><span class="pre">Load.with_expression()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


            </ul>

        </div>



    <div id="docs-body" role="main" class="withsidebar orm-queryguide-relationships" >
        
<section id="id1">
<h1>关系加载技术<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h1>
<div class="admonition- admonition">
<p class="admonition-title">关于本文档</p>
<dl class="simple">
<dt>本节介绍了在查询中如何加载相关对象的详细信息。读者应该熟悉</dt><dd><p><span class="xref std std-ref">relationship_config_toplevel</span>  和基本用法。</p>
</dd>
</dl>
<p>这里的大多数示例假定 “User/Address” 映射设置类似于 <a class="reference internal" href="_plain_setup.html"><span class="doc">selects
的设置</span></a>。</p>
</div>
<dl class="simple">
<dt>SQLAlchemy 中的一个重要组成部分是在查询相关对象时提供了广泛的控制方式。所谓“相关对象”是指在映射器上使用</dt><dd><p><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code>  配置的集合或标量关联。可以在映射器构造时使用
<code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code>  函数中的  :paramref:` _orm.relationship.lazy`</p>
</dd>
</dl>
<p>参数，或使用   <a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal notranslate"><span class="pre">Select</span></code></a>  构造函数的 <strong>ORM loader 选项</strong> 来配置此行为。</p>
<p>关系的加载分为三种类型：<a href="#id2"><span class="problematic" id="id3">**</span></a>惰性**（lazy）加载，<a href="#id4"><span class="problematic" id="id5">**</span></a>急切**（eager）加载和**未**（no）加载。惰性加载是指从查询返回对象时首先
不加载相关对象，当在特定对象上第一次访问给定的集合或引用时，会发出另一个 SELECT 语句，以便加载所请求的集合。急切加载是
指从查询返回已加载的相关集合或标量引用。ORM 通过在 SELECT 语句之后发出额外的 SELECT 语句以一次加载集合或标量引用，或
通过向 JOIN 结构添加行来实现这一点。</p>
<p>“未”加载指禁用给定关系的加载，即该属性为空且永远不被加载，或者在访问它时引发错误，以防止不需要的惰性加载。</p>
<section id="id6">
<h2>关系加载类型的概述<a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h2>
<p>关系加载的主要形式包括：</p>
<ul>
<li><p><strong>惰性加载</strong> - 可通过 <code class="docutils literal notranslate"><span class="pre">lazy='select'</span></code> 或   <code class="xref py py-func docutils literal notranslate"><span class="pre">lazyload()</span></code>  选项获得，这种加载方式在属性访问时会发出一个 SELECT
语句，以每次惰性加载单个对象的相关引用。　惰性加载是所有不另外明确指示</p>
<blockquote>
<div><p><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.lazy</span></code>  选项的   :func:` _orm.relationship`  构造函数的 <strong>默认加载方式</strong>。有关惰性加载的详细信息</p>
</div></blockquote>
<p>请参见   <a class="reference internal" href="#lazy-loading"><span class="std std-ref">惰性加载</span></a> 。</p>
</li>
<li><p><strong>select IN 加载</strong> - 可通过 <code class="docutils literal notranslate"><span class="pre">lazy='selectin'</span></code> 或   <code class="xref py py-func docutils literal notranslate"><span class="pre">selectinload()</span></code>  选项获得，该加载方式发出第二个（或更多）SELECT
语句，将父对象的主键标识符组装成 IN 子句，因此通过主键同时加载所有相关集合 / 标量引用的成员。关于　select　IN 加载的详细信息
请参见   <a class="reference internal" href="#selectin-eager-loading"><span class="std std-ref">选择 IN 的加载</span></a> 。</p></li>
<li><p><strong>连接加载</strong> - 可通过 <code class="docutils literal notranslate"><span class="pre">lazy='joined'</span></code> 或   <code class="xref py py-func docutils literal notranslate"><span class="pre">joinedload()</span></code>  选项获得，此加载方式对指定的 SELECT 语句应用 JOIN
，以便在同一结果集中加载相关行。连接急切加载的详细信息请参阅   <a class="reference internal" href="#joined-eager-loading"><span class="std std-ref">连接的及早加载</span></a> 。</p></li>
<li><p><strong>极限加载</strong> - 可通过 <code class="docutils literal notranslate"><span class="pre">lazy='raise'</span></code>, <code class="docutils literal notranslate"><span class="pre">lazy='raise_on_sql'</span></code>,
或   <code class="xref py py-func docutils literal notranslate"><span class="pre">raiseload()</span></code>  选项获得，该加载方式在通常会发生惰性加载的同时触发，但它会引发 ORM 提示以防止应用程序进行不必要的惰性
加载。关于提高加载的概述请参阅：　  <span class="xref std std-ref">prevent_lazy_with_raiseload</span> 。</p></li>
<li><p><strong>子查询加载</strong> - 可通过 <code class="docutils literal notranslate"><span class="pre">lazy='subquery'</span></code> 或   <code class="xref py py-func docutils literal notranslate"><span class="pre">subqueryload()</span></code>  选项获得，此加载方式发出第二个 SELECT 语句，
该语句在子查询中将原始查询重新表述，然后将该子查询连接到要加载的相关表以一次加载所有相关集合 / 标量引用的成员。有关子
查询急切加载的详细信息，请参见   <a class="reference internal" href="#subquery-eager-loading"><span class="std std-ref">子查询急加载</span></a> 。</p></li>
<li><p><strong>只写加载</strong> - 可通过 <code class="docutils literal notranslate"><span class="pre">lazy='write_only'</span></code> 或通过使用   <code class="xref py py-class docutils literal notranslate"><span class="pre">WriteOnlyMapped</span></code>  注释来注释   :class:` _orm.Relationship`
对象的左侧获得。该仅限集合加载方式生成一种替代的属性标记，从不隐式从数据库加载记录，而仅允许  <code class="xref py py-meth docutils literal notranslate"><span class="pre">WriteOnlyCollection.add()</span></code> ,</p>
<blockquote>
<div><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">WriteOnlyCollection.add_all()</span></code>  和  :meth:` .WriteOnlyCollection.remove`  方法。通过调用使用  <code class="xref py py-meth docutils literal notranslate"><span class="pre">WriteOnlyCollection.select()</span></code></p>
</div></blockquote>
<p>方法构造的 SELECT 语句来查询集合。有关只写加载的讨论，请参见   <a class="reference internal" href="../large_collections.html#write-only-relationship"><span class="std std-ref">只写关系</span></a> 。</p>
</li>
<li><p><strong>动态加载</strong> - 可通过 <code class="docutils literal notranslate"><span class="pre">lazy='dynamic'</span></code> 或通过使用   <code class="xref py py-class docutils literal notranslate"><span class="pre">DynamicMapped</span></code>  注释来注释   :class:` _orm.Relationship`
对象的左侧。这是一个遗留的仅限集合加载方式。配置映射时的加载策略</p></li>
</ul>
<hr class="docutils" />
<p>可以在映射时配置特定关系的加载策略，使其在加载特定映射类型对象时发挥作用，
即在没有任何修改的查询级别选项的情况下。这是通过将  <code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.lazy</span></code>
参数传递给   <code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code>  来配置的。该参数的常用值包括` <cite>select`</cite>、
<code class="docutils literal notranslate"><span class="pre">selectin</span></code> 和 <code class="docutils literal notranslate"><span class="pre">joined</span></code>。</p>
<p>下面的示例示例了   <a class="reference internal" href="../basic_relationships.html#relationship-patterns-o2m"><span class="std std-ref">一对多</span></a>  中的关系实例，该示例配置了
<code class="docutils literal notranslate"><span class="pre">Parent.children</span></code> 关系，在发出针对 <code class="docutils literal notranslate"><span class="pre">Parent</span></code> 对象的 SELECT 语句时使用</p>
<blockquote>
<div><p><a class="reference internal" href="#selectin-eager-loading"><span class="std std-ref">选择 IN 的加载</span></a> ：</p>
<blockquote>
<div><p>from typing import List</p>
<p>from sqlalchemy import ForeignKey
from sqlalchemy.orm import DeclarativeBase
from sqlalchemy.orm import Mapped
from sqlalchemy.orm import mapped_column
from sqlalchemy.orm import relationship</p>
<dl>
<dt>class Base(DeclarativeBase):</dt><dd><p>pass</p>
</dd>
<dt>class Parent(Base):</dt><dd><p>__tablename__ = “parent”</p>
<p>id: Mapped[int] = mapped_column(primary_key=True)
children: Mapped[List[“Child”]] = relationship(lazy=”selectin”)</p>
</dd>
<dt>class Child(Base):</dt><dd><p>__tablename__ = “child”</p>
<p>id: Mapped[int] = mapped_column(primary_key=True)
parent_id: Mapped[int] = mapped_column(ForeignKey(“parent.id”))</p>
</dd>
</dl>
</div></blockquote>
</div></blockquote>
<p>在上述示例中，每当加载 <code class="docutils literal notranslate"><span class="pre">Parent</span></code> 对象集合时，每个 <code class="docutils literal notranslate"><span class="pre">Parent</span></code> 对象都将使用
<code class="docutils literal notranslate"><span class="pre">&quot;selectin&quot;</span></code> 加载器策略填充其 <code class="docutils literal notranslate"><span class="pre">children</span></code> 集合。</p>
<blockquote>
<div><p><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.lazy</span></code>   参数的默认值为` <cite>“select”`</cite>，即实现
<a class="reference internal" href="#lazy-loading"><span class="std std-ref">惰性加载</span></a> 。</p>
</div></blockquote>
</section>
<section id="id7">
<h2>使用加载器选项加载关系<a class="headerlink" href="#id7" title="Permalink to this heading">¶</a></h2>
<dl class="simple">
<dt>另一种可能更常见的配置加载策略的方法是对特定属性在每个查询中使用</dt><dd><p><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Select.options" title="sqlalchemy.sql.expression.Select.options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Select.options()</span></code></a>   方法进行设置。使用加载器选项可以非常详细地控制</p>
</dd>
</dl>
<p>关系加载，最常用的选项包括   <code class="xref py py-func docutils literal notranslate"><span class="pre">joinedload()</span></code> 、  :func:` _orm.selectinload`
和   <code class="xref py py-func docutils literal notranslate"><span class="pre">lazyload()</span></code> 。这些选项接受指向应针对的特定类/属性的绑定属性类引用。</p>
<p>下面的示例集中介绍：</p>
<blockquote>
<div><p>from sqlalchemy import select
from sqlalchemy.orm import lazyload</p>
<p># 将子项设置为懒加载
stmt = select(Parent).options(lazyload(Parent.children))</p>
<p>from sqlalchemy.orm import joinedload</p>
<p># 将子项配置为使用 join 技术进行急加载
stmt = select(Parent).options(joinedload(Parent.children))</p>
</div></blockquote>
<p>也可以使用 <strong>方法链接</strong> 进一步的指定如何在更深一层次上进行加载：</p>
<blockquote>
<div><p>from sqlalchemy import select
from sqlalchemy.orm import joinedload</p>
<dl class="simple">
<dt>stmt = select(Parent).options(</dt><dd><p>joinedload(Parent.children).subqueryload(Child.subelements)</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
<p>可以将链接加载器选项应用于“懒”加载的集合。这意味着延迟加载在访问时，将采用指定的选项：</p>
<blockquote>
<div><p>from sqlalchemy import select
from sqlalchemy.orm import lazyload</p>
<p>stmt = select(Parent).options(lazyload(Parent.children).subqueryload(Child.subelements))</p>
</div></blockquote>
<p>在上述示例中，查询将返回未加载 <code class="docutils literal notranslate"><span class="pre">children</span></code> 集合的 <code class="docutils literal notranslate"><span class="pre">Parent</span></code> 对象。
当首次访问某个特定 <code class="docutils literal notranslate"><span class="pre">Parent</span></code> 对象的 <code class="docutils literal notranslate"><span class="pre">children</span></code> 集合时，将延迟加载相关对象，
但对于 <code class="docutils literal notranslate"><span class="pre">children</span></code> 的每个成员都将同时应用快速的 <code class="docutils literal notranslate"><span class="pre">subelements</span></code> 加载。</p>
<section id="id8">
<h3>加载器选项添加筛选条件<a class="headerlink" href="#id8" title="Permalink to this heading">¶</a></h3>
<p>用于指示加载器选项的关系属性具有向创建的 join 的 ON 子句中添加附加筛选条件或
涉及 WHERE 条件的能力，这取决于加载器策略。这可以通过使用  <code class="xref py py-meth docutils literal notranslate"><span class="pre">PropComparator.and_()</span></code>
方法来实现，传递一个选项，以便仅限于给定的过滤条件在加载结果时生效：</p>
<blockquote>
<div><p>from sqlalchemy import select
from sqlalchemy.orm import lazyload</p>
<p>stmt = select(A).options(lazyload(A.bs.and_(B.id &gt; 5)))</p>
</div></blockquote>
<p>使用限制条件时，如果已加载特定的集合，则不会刷新该集合；为确保新条件生效，
应用   <a class="reference internal" href="api.html#orm-queryguide-populate-existing"><span class="std std-ref">填充现有的实例</span></a>  执行选项：</p>
<blockquote>
<div><p>from sqlalchemy import select
from sqlalchemy.orm import lazyload</p>
<dl class="simple">
<dt>stmt = (</dt><dd><p>select(A)
.options(lazyload(A.bs.and_(B.id &gt; 5)))
.execution_options(populate_existing=True)</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
<p>要在查询中的实体所有出现的地方添加筛选条件，请参见   <a class="reference internal" href="api.html#sqlalchemy.orm.with_loader_criteria" title="sqlalchemy.orm.with_loader_criteria"><code class="xref py py-func docutils literal notranslate"><span class="pre">with_loader_criteria()</span></code></a>  函数。</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<blockquote>
<div><p>from sqlalchemy import select
from sqlalchemy.orm import defaultload</p>
<p>stmt = select(A).options(defaultload(A.atob).joinedload(B.btoc))</p>
</div></blockquote>
<p>类似的方法可以用于一次指定多个子选项，使用  <a class="reference internal" href="#sqlalchemy.orm.Load.options" title="sqlalchemy.orm.Load.options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Load.options()</span></code></a>  方法：</p>
<blockquote>
<div><p>from sqlalchemy import select
from sqlalchemy.orm import defaultload
from sqlalchemy.orm import joinedload</p>
<dl class="simple">
<dt>stmt = select(A).options(</dt><dd><p>defaultload(A.atob).options(joinedload(B.btoc), joinedload(B.btod))</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="columns.html#orm-queryguide-load-only-related"><span class="std std-ref">在相关对象和集合上使用 load_only()</span></a>  - 演示了结合关系和面向列的加载器选项的示例。</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>应用于对象的惰性加载集合的加载器选项是特定对象实例的**”粘性”<a href="#id9"><span class="problematic" id="id10">**</span></a>，这意味着它们将持续存在于该特定对象加载的集合中，只要它在内存中存在。
例如，给定上面的例子：</p>
<blockquote>
<div><p>stmt = select(Parent).options(lazyload(Parent.children).subqueryload(Child.subelements))</p>
</div></blockquote>
<p>如果通过上述查询加载的特定 <code class="docutils literal notranslate"><span class="pre">Parent</span></code> 对象的 <code class="docutils literal notranslate"><span class="pre">children</span></code> 集合过期了（例如当事务被提交或回滚时，或使用  <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire_all()</span></code>  时），当再次访问 ` <cite>Parent.children`</cite> 集合以重新加载时， <code class="docutils literal notranslate"><span class="pre">Child.subelements</span></code> 集合将再次使用子查询急加载。即使从指定了不同的一组选项的后续查询中访问了上述 <code class="docutils literal notranslate"><span class="pre">Parent</span></code> 对象，情况也是如此。要在不清除对象并重新加载的情况下更改现有对象上的选项，必须同时使用   <a class="reference internal" href="api.html#orm-queryguide-populate-existing"><span class="std std-ref">填充现有的实例</span></a>  执行选项显式地设置它们：</p>
<blockquote>
<div><p># 更改已加载的 Parent 对象上的选项
stmt = (</p>
<blockquote>
<div><p>select(Parent)
.execution_options(populate_existing=True)
.options(lazyload(Parent.children).lazyload(Child.subelements))
.all()</p>
</div></blockquote>
<p>)</p>
</div></blockquote>
<p>如果加载的对象完全从   <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>  中清除，例如由于垃圾收集或使用  :meth:` .Session.expunge_all` ，则“粘性”选项也会消失，如果重新加载，则新创建的对象将使用新选项。</p>
<p>未来 SQLAlchemy 的版本可能会添加更多操作已加载对象上的加载器选项的替代方法。</p>
</div>
</section>
</section>
<section id="lazy-loading">
<span id="id11"></span><h2>惰性加载<a class="headerlink" href="#lazy-loading" title="Permalink to this heading">¶</a></h2>
<p>默认情况下，所有对象之间的关系都是**惰性加载**的。与   <code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code>  相关联的标量或集合属性包含一个触发器，
该触发器首次访问属性时触发。此触发器通常在访问点发出 SQL 调用，以加载相关对象或对象：</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spongebob</span><span class="o">.</span><span class="n">addresses</span>
<div class='show_sql'><span class="k">SELECT</span>
<span class="w">    </span><span class="n">addresses</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">addresses</span><span class="p">.</span><span class="n">email_address</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_email_address</span><span class="p">,</span>
<span class="w">    </span><span class="n">addresses</span><span class="p">.</span><span class="n">user_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_user_id</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">addresses</span>
<span class="k">WHERE</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">addresses</span><span class="p">.</span><span class="n">user_id</span>
<span class="p">[</span><span class="mi">5</span><span class="p">]</span>
</div><span class="go">[&lt;Address(u&#39;spongebob@google.com&#39;)&gt;, &lt;Address(u&#39;j25@yahoo.com&#39;)&gt;]</span></pre></div>
</div>
<p>唯一不发出 SQL 的情况是在一个简单的多对一关系中，当只使用主键即可识别相关对象并且该对象已经存在于当前的   <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>  时。因此，
尽管对相关集合进行惰性加载可能很费时，但在加载大量对象并对一组相对较小的可能目标对象进行简单多对一加载的情况下，
惰性加载可能能够在不发出与父对象数量相同的 SELECT 语句的情况下引用这些对象。</p>
<p>“load upon attribute access” 的默认行为被称为“lazy”或“select”加载 - 名称“select”是因为在首次访问属性时通常会发出“SELECT”的语句。</p>
<p>可以使用   <code class="xref py py-func docutils literal notranslate"><span class="pre">lazyload()</span></code>  加载器选项为通常以某种方式配置的给定属性启用惰性加载：</p>
<blockquote>
<div><p>from sqlalchemy import select
from sqlalchemy.orm import lazyload</p>
<p># 强制一个属性的惰性加载，该属性通常以其他方式加载
stmt = select(User).options(lazyload(User.addresses))</p>
</div></blockquote>
<blockquote id="prevent-lazy-with-raiseload">
<div><p><code class="xref py py-func docutils literal notranslate"><span class="pre">lazyload()</span></code>  策略产生了一种最常见的 object relational mapping (对象关系映射) 问题之一；即 N+1 问题，</p>
</div></blockquote>
<p>该问题表明，对于任何 N 个加载的对象，访问它们的惰性加载属性意味着将发出 N+1 个 SELECT 语句。
在 SQLAlchemy 中，解决 N+1 问题的常规方法是使用其功能非常强大的急加载系统。但是，急加载需要事先通过   <a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal notranslate"><span class="pre">Select</span></code></a>
指定要加载的属性。对于可能访问其他未极速加载的属性的代码，不希望进行惰性加载的问题，可以使用   <code class="xref py py-func docutils literal notranslate"><span class="pre">raiseload()</span></code>  策略解决；
这个加载器策略将惰性加载的行为替换为引发信息型错误：从上面的查询中加载的 <code class="docutils literal notranslate"><span class="pre">User</span></code> 对象将不会加载 <code class="docutils literal notranslate"><span class="pre">.addresses</span></code> 集合； 如果稍后的某些代码尝试访问此属性，则会引发 ORM 异常。</p>
<p>可以使用所谓的“通配符”指示符与   <code class="xref py py-func docutils literal notranslate"><span class="pre">raiseload()</span></code>  一起使用，以指示所有关系都应使用此策略。例如，要设置仅将一个属性设置为及早加载，而将其余所有属性都设置为 ` <cite>raise`</cite>：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">joinedload</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">raiseload</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">Order</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">joinedload</span><span class="p">(</span><span class="n">Order</span><span class="o">.</span><span class="n">items</span><span class="p">),</span> <span class="n">raiseload</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">))</span></pre></div>
</div>
<p>上述通配符将适用于**所有**不仅在 <code class="docutils literal notranslate"><span class="pre">Order</span></code> 上的关系，而且也适用于 <code class="docutils literal notranslate"><span class="pre">Item</span></code> 对象上的所有关系。要为仅 <code class="docutils literal notranslate"><span class="pre">Order</span></code> 对象设置   <code class="xref py py-func docutils literal notranslate"><span class="pre">raiseload()</span></code> ，请使用   :class:` _orm.Load`  带有完整路径的指定：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">joinedload</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">Load</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">Order</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">joinedload</span><span class="p">(</span><span class="n">Order</span><span class="o">.</span><span class="n">items</span><span class="p">),</span> <span class="n">Load</span><span class="p">(</span><span class="n">Order</span><span class="p">)</span><span class="o">.</span><span class="n">raiseload</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">))</span></pre></div>
</div>
<p>反之，要将提高设置为仅用于 <code class="docutils literal notranslate"><span class="pre">Item</span></code> 对象：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>  <span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">Order</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">joinedload</span><span class="p">(</span><span class="n">Order</span><span class="o">.</span><span class="n">items</span><span class="p">)</span><span class="o">.</span><span class="n">raiseload</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">))</span>

<span class="p">:</span><span class="n">func</span><span class="p">:</span><span class="err">`</span><span class="o">.</span><span class="n">raiseload</span><span class="err">`</span>  <span class="n">选项仅适用于关系属性</span><span class="err">。</span><span class="n">对于定向列属性</span><span class="err">，</span>  <span class="p">:</span><span class="n">func</span><span class="p">:</span><span class="err">`</span> <span class="o">.</span><span class="n">defer</span><span class="err">`</span>  <span class="n">选项支持工作相同的</span>  <span class="p">:</span><span class="n">paramref</span><span class="p">:</span><span class="err">`</span><span class="o">.</span><span class="n">orm</span><span class="o">.</span><span class="n">defer</span><span class="o">.</span><span class="n">raiseload</span><span class="err">`</span>  <span class="n">选项</span><span class="err">。</span></pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>“raiseload” 策略 <strong>不适用</strong> 在  <span class="xref std std-term">unit of work</span>  刷新过程中。这意味着如果  :meth:` _orm.Session.flush`  过程需要加载集合以完成其工作，则会在绕过任何   <code class="xref py py-func docutils literal notranslate"><span class="pre">raiseload()</span></code>  指令的情况下执行此操作。</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">wildcard_loader_strategies</span></p>
<p><a class="reference internal" href="columns.html#orm-queryguide-deferred-raiseload"><span class="std std-ref">使用raiseload防止延迟列加载</span></a></p>
</div>
</section>
<section id="joined-eager-loading">
<span id="id12"></span><h2>连接的及早加载<a class="headerlink" href="#joined-eager-loading" title="Permalink to this heading">¶</a></h2>
<p>连接的及早加载是 SQLAlchemy ORM 中包含的最旧式的及早加载样式。它的工作原理是将连接 (默认情况下为 LEFT OUTER join) 连接到发出的 SELECT 语句，并将目标标量/集合从与父项相同的结果集中填充。</p>
<p>在映射级别，它看起来像是这样的：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Address</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="c1"># ...</span>

    <span class="n">user</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">User</span><span class="p">]</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="n">lazy</span><span class="o">=</span><span class="s2">&quot;joined&quot;</span><span class="p">)</span></pre><div class="code-annotations-key"></div></div>
</div>
<p>通常将连接的及早加载作为查询的选项应用，而不是作为映射的默认加载选项，特别是在处理集合而不是 many-to-one 引用时。可以使用   <code class="xref py py-func docutils literal notranslate"><span class="pre">joinedload()</span></code>  加载程序选项来实现这一点：</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">joinedload</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">joinedload</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">addresses</span><span class="p">))</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;spongebob&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spongebob</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<div class='show_sql'><span class="k">SELECT</span>
<span class="w">    </span><span class="n">addresses_1</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_1_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">addresses_1</span><span class="p">.</span><span class="n">email_address</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_1_email_address</span><span class="p">,</span>
<span class="w">    </span><span class="n">addresses_1</span><span class="p">.</span><span class="n">user_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_1_user_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_id</span><span class="p">,</span><span class="w"> </span><span class="n">users</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_name</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">fullname</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_fullname</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">nickname</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_nickname</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">users</span>
<span class="k">LEFT</span><span class="w"> </span><span class="k">OUTER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">addresses</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_1</span>
<span class="w">    </span><span class="k">ON</span><span class="w"> </span><span class="n">users</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">addresses_1</span><span class="p">.</span><span class="n">user_id</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">users</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span>
<span class="p">[</span><span class="s1">&#39;spongebob&#39;</span><span class="p">]</span>
</div></pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>当引用到 one-to-many 或者 many-to-many 集合时，并且使用   <code class="xref py py-func docutils literal notranslate"><span class="pre">joinedload()</span></code>  时，必须应用  :meth:` _result.Result.unique`  方法到返回结果上，它会通过主键将传入的行进行唯一化，否则就会由 join 进行相应的放大。如果不这样做，ORM 就会引发错误。</p>
</div>
<p>在现代 SQLAlchemy 中，这不是自动的，因为它会改变结果集的行为，返回少于语句中返回的 ORM 对象数量的结果行数。因此，SQLAlchemy 使得使用  <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result.unique" title="sqlalchemy.engine.Result.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.unique()</span></code></a>  显式，所以在主键上进行唯一处理的对象被返回。</p>
<p>默认发出的 JOIN 是 LEFT OUTER JOIN，以允许不引用相关行的前导对象。对于保证具有元素的属性，例如 many-to-one 引用到引用外键不为 NULL 的相关对象的引用，可以通过使用内部 join 使查询更有效率；在映射级别通过  <code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.innerjoin</span></code>  标志实现：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Address</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="c1"># ...</span>

    <span class="n">user_id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;users.id&quot;</span><span class="p">))</span>
    <span class="n">user</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">User</span><span class="p">]</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="n">lazy</span><span class="o">=</span><span class="s2">&quot;joined&quot;</span><span class="p">,</span> <span class="n">innerjoin</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></pre><div class="code-annotations-key"></div></div>
</div>
<p>在查询选项级别通过  <code class="xref py py-paramref docutils literal notranslate"><span class="pre">joinedload.innerjoin</span></code>  标志实现：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">joinedload</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">Address</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">joinedload</span><span class="p">(</span><span class="n">Address</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="n">innerjoin</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span></pre></div>
</div>
<p>当应用于包括 OUTER JOIN 的链时，JOIN 将右嵌套自身：</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">joinedload</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">joinedload</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">orders</span><span class="p">,</span> <span class="n">Order</span><span class="o">.</span><span class="n">items</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span><span class="o">.</span><span class="n">scalars</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">..</span> <span class="n">tip</span><span class="p">::</span> <span class="n">如果在发出SELECT语句时使用了数据库行锁定技术</span><span class="err">，</span><span class="n">这意味着</span>  <span class="p">:</span><span class="n">meth</span><span class="p">:</span><span class="err">`</span><span class="n">_sql</span><span class="o">.</span><span class="n">Select</span><span class="o">.</span><span class="n">with_for_update</span><span class="err">`</span>  <span class="n">方法正在用于发出SELECT</span><span class="o">..</span><span class="n">FOR</span> <span class="n">UPDATE</span><span class="err">，</span><span class="n">则取决于使用的后端的行为</span><span class="err">，</span><span class="n">连接表也可能被锁定</span><span class="err">。</span><span class="n">不建议同时使用连接式预加载和SELECT</span><span class="o">..</span><span class="n">FOR</span> <span class="n">UPDATE</span><span class="err">，</span><span class="n">因为这个原因</span><span class="err">。</span></pre></div>
</div>
<p id="zen-of-eager-loading">由于连接预加载似乎与使用  <a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Select.join" title="sqlalchemy.sql.expression.Select.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Select.join()</span></code></a>  方法具有许多相似之处，因此经常产生混淆，不清楚何时以及如何使用它。关键在于理解以下区别：  :meth:` _sql.Select.join`  用于更改查询的结果，而 <code class="xref py py-func docutils literal notranslate"><span class="pre">joinedload()</span></code> 则极力**不要**更改查询结果，而是隐藏渲染连接的效果，只允许相关对象存在。</p>
<p>后代策略背后的哲学是，任何一组加载方案都可以应用于特定查询，并且*结果不会改变*——只有发出SQL语句以完全加载相关对象和集合所需的数量发生了变化。特定查询可能是使用所有惰性加载。在上下文中使用它之后，可能发现特定属性或集合始终被访问，更改这些内容的加载程序策略将更有效。该策略可以在不对查询进行其他修改的情况下更改，结果将保持相同，但会发出更少的SQL语句。理论上（实际上基本上是如此），您可以对 <a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal notranslate"><span class="pre">Select</span></code></a> 执行的所有操作都不能使其根据加载程序策略的变化而加载不同的主要或相关对象集。</p>
<p>特别是，为了不以任何方式影响返回的实体行，  <code class="xref py py-func docutils literal notranslate"><span class="pre">joinedload()</span></code> ` users``到``addresses``的左外连接，但是添加到``Address.email_address`` 的``ORDER BY``是无效的-<a href="#id13"><span class="problematic" id="id14">``</span></a>Address``实体没有在查询中命名：</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">joinedload</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="p">(</span>
<span class="go">...     select(User)</span>
<span class="go">...     .options(joinedload(User.addresses))</span>
<span class="go">...     .filter(User.name == &quot;spongebob&quot;)</span>
<span class="go">...     .order_by(Address.email_address)</span>
<span class="go">... )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<div class='show_sql'><span class="k">SELECT</span>
<span class="w">    </span><span class="n">addresses_1</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_1_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">addresses_1</span><span class="p">.</span><span class="n">email_address</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_1_email_address</span><span class="p">,</span>
<span class="w">    </span><span class="n">addresses_1</span><span class="p">.</span><span class="n">user_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_1_user_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_name</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">fullname</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_fullname</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">nickname</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_nickname</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">users</span>
<span class="k">LEFT</span><span class="w"> </span><span class="k">OUTER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">addresses</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_1</span>
<span class="w">    </span><span class="k">ON</span><span class="w"> </span><span class="n">users</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">addresses_1</span><span class="p">.</span><span class="n">user_id</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">users</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">addresses</span><span class="p">.</span><span class="n">email_address</span><span class="w">   </span><span class="o">&lt;</span><span class="c1">-- 这部分是错误的！</span>
<span class="p">[</span><span class="s1">&#39;spongebob&#39;</span><span class="p">]</span>
</div></pre></div>
</div>
<p>上面的``ORDER BY addresses.email_address``是无效的，因为``addresses``不在FROM列表中。加载``User``记录并按电子邮件地址排序的正确方法是使用  <a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Select.join" title="sqlalchemy.sql.expression.Select.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Select.join()</span></code></a>  ：</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="p">(</span>
<span class="go">...     select(User)</span>
<span class="go">...     .join(User.addresses)</span>
<span class="go">...     .filter(User.name == &quot;spongebob&quot;)</span>
<span class="go">...     .order_by(Address.email_address)</span>
<span class="go">... )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<div class='show_sql'><span class="k">SELECT</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_name</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">fullname</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_fullname</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">nickname</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_nickname</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">users</span>
<span class="k">JOIN</span><span class="w"> </span><span class="n">addresses</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">users</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">addresses</span><span class="p">.</span><span class="n">user_id</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">users</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">addresses</span><span class="p">.</span><span class="n">email_address</span>
<span class="p">[</span><span class="s1">&#39;spongebob&#39;</span><span class="p">]</span>
</div></pre></div>
</div>
<p>上面的语句当然不同于以前的语句，因为``addresses``的列根本没有包含在结果中。我们可以再次添加  <code class="xref py py-func docutils literal notranslate"><span class="pre">joinedload()</span></code> ，使得有两个连接——一个是我们正在其中排序的连接，另一个是匿名使用的连接，以加载` <a href="#id15"><span class="problematic" id="id16">`</span></a>User.addresses``集合的内容：</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="p">(</span>
<span class="go">...     select(User)</span>
<span class="go">...     .join(User.addresses)</span>
<span class="go">...     .options(joinedload(User.addresses))</span>
<span class="go">...     .filter(User.name == &quot;spongebob&quot;)</span>
<span class="go">...     .order_by(Address.email_address)</span>
<span class="go">... )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<div class='show_sql'><span class="k">SELECT</span>
<span class="w">    </span><span class="n">addresses_1</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_1_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">addresses_1</span><span class="p">.</span><span class="n">email_address</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_1_email_address</span><span class="p">,</span>
<span class="w">    </span><span class="n">addresses_1</span><span class="p">.</span><span class="n">user_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_1_user_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_id</span><span class="p">,</span><span class="w"> </span><span class="n">users</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_name</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">fullname</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_fullname</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">nickname</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_nickname上面我们看到了我们使用</span><span class="w">  </span><span class="p">:</span><span class="n">meth</span><span class="p">:</span><span class="o">`</span><span class="n">_sql</span><span class="p">.</span><span class="k">Select</span><span class="p">.</span><span class="k">join</span><span class="o">`</span><span class="w">  </span><span class="err">是为了提供我们想在后续查询条件中使用的</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="err">子句，而我们使用</span><span class="w">   </span><span class="p">:</span><span class="n">func</span><span class="p">:</span><span class="o">`</span><span class="w"> </span><span class="n">_orm</span><span class="p">.</span><span class="n">joinedload</span><span class="o">`</span><span class="w">  </span><span class="err">只关心加在每个</span><span class="w"> </span><span class="o">``</span><span class="k">User</span><span class="o">``</span><span class="w"> </span><span class="err">对象的</span><span class="w"> </span><span class="o">``</span><span class="k">User</span><span class="p">.</span><span class="n">addresses</span><span class="o">``</span><span class="w"> </span><span class="err">集合上的加载。在这种情况下，这两个</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="err">看起来可能是冗余的——它们就是冗余的。如果我们想要仅使用一个</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="err">用于集合加载以及排序，我们可以使用</span><span class="w">   </span><span class="p">:</span><span class="n">func</span><span class="p">:</span><span class="o">`</span><span class="p">.</span><span class="n">contains_eager</span><span class="o">`</span><span class="w">  </span><span class="err">选项，在下面的</span><span class="w">   </span><span class="p">:</span><span class="k">ref</span><span class="p">:</span><span class="o">`</span><span class="w"> </span><span class="n">contains_eager</span><span class="o">`</span><span class="w">  </span><span class="err">中进行了描述。但是为了看到</span><span class="w">   </span><span class="p">:</span><span class="n">func</span><span class="p">:</span><span class="o">`</span><span class="n">joinedload</span><span class="o">`</span><span class="w">  </span><span class="err">做了什么，考虑我们是否在过滤特定的</span><span class="w"> </span><span class="o">`</span><span class="w"> </span><span class="o">`</span><span class="n">Address</span><span class="o">``</span><span class="err">：</span>
</div></pre></div>
</div>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="p">(</span>
<span class="go">...     select(User)</span>
<span class="go">...     .join(User.addresses)</span>
<span class="go">...     .options(joinedload(User.addresses))</span>
<span class="go">...     .filter(User.name == &quot;spongebob&quot;)</span>
<span class="go">...     .filter(Address.email_address == &quot;someaddress@foo.com&quot;)</span>
<span class="go">... )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<div class='show_sql'><span class="k">SELECT</span>
<span class="w">    </span><span class="n">addresses_1</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_1_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">addresses_1</span><span class="p">.</span><span class="n">email_address</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_1_email_address</span><span class="p">,</span>
<span class="w">    </span><span class="n">addresses_1</span><span class="p">.</span><span class="n">user_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_1_user_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_id</span><span class="p">,</span><span class="w"> </span><span class="n">users</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_name</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">fullname</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_fullname</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">nickname</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_nickname</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">addresses</span>
<span class="w">    </span><span class="k">ON</span><span class="w"> </span><span class="n">users</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">addresses</span><span class="p">.</span><span class="n">user_id</span>
<span class="k">LEFT</span><span class="w"> </span><span class="k">OUTER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">addresses</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_1</span>
<span class="w">    </span><span class="k">ON</span><span class="w"> </span><span class="n">users</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">addresses_1</span><span class="p">.</span><span class="n">user_id</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">users</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">addresses</span><span class="p">.</span><span class="n">email_address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span>
<span class="p">[</span><span class="s1">&#39;spongebob&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;someaddress@foo.com&#39;</span><span class="p">]</span>
</div></pre></div>
</div>
<p>上面，我们可以看到这两个 JOIN 所起的作用有很大的不同。其中一个JOIN将精确匹配一行，即 <code class="docutils literal notranslate"><span class="pre">User</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Address</span></code> 的联接，其中 <code class="docutils literal notranslate"><span class="pre">Address.email_address</span> <span class="pre">==</span> <span class="pre">'someaddress&#64;foo.com'</span></code>。另一个左外部 JOIN 将匹配 <em>所有</em> 与 <code class="docutils literal notranslate"><span class="pre">User</span></code> 相关的 <code class="docutils literal notranslate"><span class="pre">Address</span></code> 行，并且仅用于填充 <code class="docutils literal notranslate"><span class="pre">User</span></code> 对象中返回的 <code class="docutils literal notranslate"><span class="pre">User.addresses</span></code> 集合。</p>
<p>通过将   <code class="xref py py-func docutils literal notranslate"><span class="pre">joinedload()</span></code>  的使用方式更改为另一种加载样式，我们可以完全独立于用于检索所需 ` <cite>User`</cite> 行的 SQL 更改如何加载集合。下面我们将   <code class="xref py py-func docutils literal notranslate"><span class="pre">joinedload()</span></code>  改为   :func:` .selectinload` ：</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="p">(</span>
<span class="go">...     select(User)</span>
<span class="go">...     .join(User.addresses)</span>
<span class="go">...     .options(selectinload(User.addresses))</span>
<span class="go">...     .filter(User.name == &quot;spongebob&quot;)</span>
<span class="go">...     .filter(Address.email_address == &quot;someaddress@foo.com&quot;)</span>
<span class="go">... )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<div class='show_sql'><span class="k">SELECT</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_name</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">fullname</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_fullname</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">nickname</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_nickname</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">users</span>
<span class="k">JOIN</span><span class="w"> </span><span class="n">addresses</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">users</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">addresses</span><span class="p">.</span><span class="n">user_id</span>
<span class="k">WHERE</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span>
<span class="w">    </span><span class="k">AND</span><span class="w"> </span><span class="n">addresses</span><span class="p">.</span><span class="n">email_address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span>
<span class="p">[</span><span class="s1">&#39;spongebob&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;someaddress@foo.com&#39;</span><span class="p">]</span>
<span class="o">#</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="n">selectinload</span><span class="p">()</span><span class="w"> </span><span class="n">emits</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">order</span>
<span class="o">#</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">load</span><span class="w"> </span><span class="k">all</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="n">records</span><span class="w"> </span><span class="p">...</span>
</div></pre></div>
</div>
<p>在使用连接的 eager 加载时，如果查询包含影响到连接外部返回的行的修改器，例如使用 DISTINCT、LIMIT、OFFSET 或等效的修改器时，完成的语句首先包装在一个子查询中，并将专门用于连接的 eager 加载应用于子查询。SQLAlchemy 的连接的 eager 加载走出了不一般的距离，甚至还走了十英里之远，以确保它绝不会影响查询的最终结果，仅影响加载集合和相关对象的方式，无论查询的格式如何。</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">contains_eager</span> ——使用   :func:` .contains_eager`</p>
</div>
</section>
<section id="in">
<span id="selectin-eager-loading"></span><h2>选择 IN 的加载<a class="headerlink" href="#in" title="Permalink to this heading">¶</a></h2>
<p>在大多数情况下，选择 IN 的加载是最简单和高效的急切地加载对象集合的方法。唯一不能使用 selectin 急切加载的情形是，当模型使用复合主键，并且后端数据库不支持包含元组的 IN 时，目前包括 SQL Server。</p>
<p>使用  <code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.lazy</span></code>  的 ` <cite>“selectin”`</cite> 参数，或使用   <code class="xref py py-func docutils literal notranslate"><span class="pre">selectinload()</span></code>  加载器选项，提供了“选择 IN”急切加载。这种加载方式发出一个 SELECT，该 SELECT 引用父对象的主键值，或者在一对多关系的情况下，引用子对象的主键值，内部包含 IN 子句，以便加载相关联的对象：</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">selectinload</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="p">(</span>
<span class="go">...     select(User)</span>
<span class="go">...     .options(selectinload(User.addresses))</span>
<span class="go">...     .filter(or_(User.name == &quot;spongebob&quot;, User.name == &quot;ed&quot;))</span>
<span class="go">... )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<div class='show_sql'><span class="k">SELECT</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_name</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">fullname</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_fullname</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">nickname</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_nickname</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">users</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">users</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="n">users</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span>
<span class="p">(</span><span class="s1">&#39;spongebob&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;ed&#39;</span><span class="p">)</span>
<span class="k">SELECT</span>
<span class="w">    </span><span class="n">addresses</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">addresses</span><span class="p">.</span><span class="n">email_address</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_email_address</span><span class="p">,</span>
<span class="w">    </span><span class="n">addresses</span><span class="p">.</span><span class="n">user_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_user_id</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">addresses</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">addresses</span><span class="p">.</span><span class="n">user_id</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">)</span>
<span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span><span class="err">上面的第二个</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="err">引用了</span><span class="w"> </span><span class="o">``</span><span class="n">addresses</span><span class="p">.</span><span class="n">user_id</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span><span class="o">``</span><span class="err">，其中的“</span><span class="mi">5</span><span class="err">”和“</span><span class="mi">7</span><span class="err">”是先前加载的两个</span><span class="w"> </span><span class="o">``</span><span class="k">User</span><span class="o">``</span><span class="w"> </span><span class="err">对象的主键值；当一个对象批量完全加载后，它们的主键值会注入到第二个</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="err">的</span><span class="w"> </span><span class="o">``</span><span class="k">IN</span><span class="o">``</span><span class="w"> </span><span class="err">子句中。由于</span><span class="w"> </span><span class="o">``</span><span class="k">User</span><span class="o">``</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="o">``</span><span class="n">Address</span><span class="o">``</span><span class="w"> </span><span class="err">之间的关系具有简单的主键联接条件并提供了从</span><span class="w"> </span><span class="o">``</span><span class="n">Address</span><span class="p">.</span><span class="n">user_id</span><span class="o">``</span><span class="w"> </span><span class="err">可以派生出</span><span class="w"> </span><span class="o">``</span><span class="k">User</span><span class="o">``</span><span class="w"> </span><span class="err">的主键值，因此该语句没有任何联接或子查询。</span>
</div></pre></div>
</div>
<p>对于简单的一对多加载，也不需要使用 JOIN，而是使用父对象的外键值：</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">selectinload</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">Address</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">selectinload</span><span class="p">(</span><span class="n">Address</span><span class="o">.</span><span class="n">user</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<div class='show_sql'><span class="k">SELECT</span>
<span class="w">    </span><span class="n">addresses</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">addresses</span><span class="p">.</span><span class="n">email_address</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_email_address</span><span class="p">,</span>
<span class="w">    </span><span class="n">addresses</span><span class="p">.</span><span class="n">user_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_user_id</span>
<span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">addresses</span>
<span class="k">SELECT</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_name</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">fullname</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_fullname</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">nickname</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_nickname</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">users</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">users</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
</div></pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>这里所说的“简单”是指  <code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.primaryjoin</span></code>  条件在“一”侧的主键和“多”侧的直接外键之间表达了等式比较，没有任何其他条件。</p>
</div>
<p>选择 IN 加载也支持多对多关系，在这种情况下它将跨越所有三个表进行 JOIN，以将一侧的行匹配到另一侧。</p>
<p>有关这种类型的加载需要注意以下事项：</p>
<ul class="simple">
<li><p>该策略一次会针对多达 500 个父主键值发出 SELECT，因为这些主键值在 SQL 语句中被渲染成一个大的 IN 表达式。一些数据库（如 Oracle）对 IN 表达式的大小有一个硬性限制，而且总体上 SQL 字符串的大小不应该是任意大小的。</p></li>
<li><p>由于“selectin”加载依赖于 IN，对于具有复合主键的映射，它必须使用 IN 的“元组”形式，它的形式看起来像 <code class="docutils literal notranslate"><span class="pre">WHERE</span> <span class="pre">(table.column_a,</span> <span class="pre">table.column_b)</span> <span class="pre">IN</span> <span class="pre">((?,</span> <span class="pre">?),</span> <span class="pre">(?,</span> <span class="pre">?),</span> <span class="pre">(?,</span> <span class="pre">?))</span></code>。目前这种语法在 SQL Server 上不被支持，在 SQLite 上需要至少 3.15 版本。 SQLAlchemy 中没有特殊的逻辑来提前检查这些平台是否支持此语法；如果针对不支持此语法的平台运行，数据库将立即返回错误。SQLAlchemy 只是直接运行 SQL 来失败的一个好处是，如果某个特定的数据库确实开始支持这种语法，它将在不需要对 SQLAlchemy 进行任何更改的情况下工作（这就是 SQLite 的情况）。</p></li>
</ul>
</section>
<section id="subquery-eager-loading">
<span id="id17"></span><h2>子查询急加载<a class="headerlink" href="#subquery-eager-loading" title="Permalink to this heading">¶</a></h2>
<div class="admonition legacy">
<p class="admonition-title">Legacy Feature</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">subqueryload()</span></code>  急加载器在大多数情况下都是遗留的，已被   :func:` _orm.selectinload`  策略代替，后者具有更简单的设计，更灵活的功能，例如   <a class="reference internal" href="api.html#orm-queryguide-yield-per"><span class="std std-ref">分批</span></a>  和在大多数情况下发出更高效的 SQL 语句。由于   :func:` _orm.subqueryload`  依赖于重新解释原始 SELECT 语句，因此当给定非常复杂的源查询时，它可能无法有效地工作。</p>
<p>对于具有复合主键的对象的急加载集合，特定情况下   <code class="xref py py-func docutils literal notranslate"><span class="pre">subqueryload()</span></code>  仍可能有用，特别是在仍然不支持“元组 IN”语法的 Microsoft SQL Server 后端的情况下。</p>
</div>
<p>子查询加载的操作与 selectin 急加载类似，不过所发出的 SELECT 语句是从原始语句派生出来的，并且具有比 selectin 急加载更复杂的查询结构。</p>
<p>子查询急加载是使用  <code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.lazy</span></code>  的 ` <cite>“subquery”`</cite> 参数或使用   <code class="xref py py-func docutils literal notranslate"><span class="pre">subqueryload()</span></code>  加载器选项来提供的。</p>
<p>子查询急加载的操作是为了对要加载的每个关系发出第二个 SELECT 语句，一次跨所有结果对象。该 SELECT 语句引用原始 SELECT 语句，在一个子查询中包装起来，以便我们检索返回的主对象的相同主键列表，然后将其链接到所有要加载的集合成员的总和：</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">subqueryload</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">subqueryload</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">addresses</span><span class="p">))</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;spongebob&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<div class='show_sql'><span class="k">SELECT</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_name</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">fullname</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_fullname</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">nickname</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_nickname</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">users</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">users</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span>
<span class="p">(</span><span class="s1">&#39;spongebob&#39;</span><span class="p">,)</span>
<span class="k">SELECT</span>
<span class="w">    </span><span class="n">addresses</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">addresses</span><span class="p">.</span><span class="n">email_address</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_email_address</span><span class="p">,</span>
<span class="w">    </span><span class="n">addresses</span><span class="p">.</span><span class="n">user_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">addresses_user_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">anon_1</span><span class="p">.</span><span class="n">users_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">anon_1_users_id</span>
<span class="k">FROM</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="n">users</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_id</span>
<span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">users</span>
<span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="n">users</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">anon_1</span>
<span class="k">JOIN</span><span class="w"> </span><span class="n">addresses</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">anon_1</span><span class="p">.</span><span class="n">users_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">addresses</span><span class="p">.</span><span class="n">user_id</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">anon_1</span><span class="p">.</span><span class="n">users_id</span><span class="p">,</span><span class="w"> </span><span class="n">addresses</span><span class="p">.</span><span class="n">id</span>
<span class="p">(</span><span class="s1">&#39;spongebob&#39;</span><span class="p">,)</span>
</div></pre></div>
</div>
<p>有关这种类型的加载需要注意以下事项：</p>
<ul class="simple">
<li><p>“子查询”加载策略所发出的 SELECT 语句与原始的 SELECT 语句不同，因此对于较大的结果集，这可能意味着大幅增加的总 SQL 执行时间和大量的网络数据流量。</p></li>
<li><p>在使用“子查询”加载程序时，无法使用   <a class="reference internal" href="api.html#orm-queryguide-yield-per"><span class="std std-ref">挂起加载</span></a> ，因为在这个过程中我们必须立即将所有集合加载到内存中才能继续进行。</p></li>
<li><p>因为 SELECT 语句通过“包装”原始查询派生，所以在使用   <code class="xref py py-func docutils literal notranslate"><span class="pre">subqueryload()</span></code>  加载时更改原始查询多少，也就是 SELECT 列表，仅会反映于加载的对象集合之上，而不是原始查询中的满足条件的行数。</p></li>
<li><p>同样地，由于此特定的 SELECT 语句实际上是在另一个内部查询中执行的，因此无法使用   <code class="xref py py-func docutils literal notranslate"><span class="pre">options()</span></code>  中的大多数 ORM 上下文选项，例如   :func:` .with_for_update`  或   <code class="xref py py-func docutils literal notranslate"><span class="pre">add_columns()</span></code> 。何种类型的加载方法？</p></li>
</ul>
<p>选择何种类型的加载方法通常取决于优化SQL执行次数、发射的SQL的复杂性和获取的数据量之间的平衡。</p>
<p>对于“one-to-many”和“many-to-many collection”类型</p>
<blockquote>
<div><p><code class="xref py py-func docutils literal notranslate"><span class="pre">selectinload()</span></code> 是一般最好的加载策略。它会产生一个额外的SELECT，使用尽可能少的表，使原始声明毫不受影响，并且在任何种类的源查询中都是最灵活的。它的唯一主要限制是当使用一个带有组合主键的表并且使用的后端不支持“tuple IN”时，目前包括SQL Server和旧版SQLite；所有其他包括的后端都支持它。</p>
</div></blockquote>
<p>对于“many-to-one”类型</p>
<blockquote>
<div><p><code class="xref py py-func docutils literal notranslate"><span class="pre">joinedload()</span></code>  获取对象，如果相关对象已存在，则不会发出任何SQL。</p>
</div></blockquote>
<p>多态贪婪加载</p>
<p>支持根据每个贪婪加载基础规范的多态选项。请参阅   <a class="reference internal" href="inheritance.html#eagerloading-polymorphic-subtypes"><span class="std std-ref">多态子类型的急加载</span></a>  部分，其中包含使用   :func:` _orm.with_polymorphic`  函数的  <a class="reference internal" href="../internals.html#sqlalchemy.orm.PropComparator.of_type" title="sqlalchemy.orm.PropComparator.of_type"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PropComparator.of_type()</span></code></a>  方法示例。</p>
<p>通配符加载策略</p>
<p>每个   <code class="xref py py-func docutils literal notranslate"><span class="pre">joinedload()</span></code> ，  :func:` .subqueryload` ，  <code class="xref py py-func docutils literal notranslate"><span class="pre">lazyload()</span></code> ，  :func:` .selectinload` ，  <code class="xref py py-func docutils literal notranslate"><span class="pre">noload()</span></code>  和   :func:` .raiseload`  默认加载方式，影响所有   <code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code>  的映射的属性，如果在语句中没有另外指定。通过将字符串 ` <cite>‘*’`</cite> 作为这些选项中任何一个的参数进行传递即可使用此功能:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">lazyload</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">MyClass</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">lazyload</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">))</span></pre></div>
</div>
<p>在上述示例中， <code class="docutils literal notranslate"><span class="pre">lazyload('*')</span></code> 选项将取代该查询中所有   <code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code>  构造的 ` <cite>lazy`</cite> 设置，但不包括使用 <code class="docutils literal notranslate"><span class="pre">lazy='write_only'</span></code> 或 <code class="docutils literal notranslate"><span class="pre">lazy='dynamic'</span></code> 的关系。如果一些关系指定了``lazy=’joined’`` 或 <code class="docutils literal notranslate"><span class="pre">lazy='selectin'</span></code>，例如，使用 <code class="docutils literal notranslate"><span class="pre">lazyload('*')</span></code> 将单方面导致所有这些关系使用 <code class="docutils literal notranslate"><span class="pre">'select'</span></code> 加载，例如在访问每个属性时发出SELECT语句.</p>
<p>该选项不会取代查询中声明的加载程序选项，例如   <code class="xref py py-func docutils literal notranslate"><span class="pre">joinedload()</span></code> ，  :func:` .selectinload`  等。下面的查询仍将使用joined加载来处理“widget”关系:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">lazyload</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">joinedload</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">MyClass</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">lazyload</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">),</span> <span class="n">joinedload</span><span class="p">(</span><span class="n">MyClass</span><span class="o">.</span><span class="n">widget</span><span class="p">))</span></pre></div>
</div>
<p>在上述声明   <code class="xref py py-func docutils literal notranslate"><span class="pre">joinedload()</span></code>  的指令中，无论   :func:` .lazyload` <cite>选项位于该指令之前还是之后，都将执行.如果传入了多个包含 `</cite>”*”`` 的选项，则最后一个选项将生效。</p>
<p id="orm-queryguide-relationship-per-entity-wildcard">通配符加载策略的一个变种是能够在每个实体上设置策略。例如，如果查询“User”和“Address”，可以指示“Address”上的所有关系都使用惰性加载，同时让“User”的加载策略保持不变，方法是先应用   <a class="reference internal" href="#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code></a>  对象，然后将 ` <cite>*`</cite> 指定为链式选项:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">Load</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">Address</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">Load</span><span class="p">(</span><span class="n">Address</span><span class="p">)</span><span class="o">.</span><span class="n">lazyload</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">))</span></pre></div>
</div>
<p>上面，<code class="docutils literal notranslate"><span class="pre">Address</span></code> 上的所有关系都将设为惰性加载。</p>
<p id="contains-eager"><span id="joinedload-and-join"></span>将显式连接/语句路由到急加载集合中
————————————————– ——————-</p>
<blockquote>
<div><p><code class="xref py py-func docutils literal notranslate"><span class="pre">joinedload()</span></code>  的行为是自动创建连接，使用匿名别名作为目标，其结果被路由到集合和</p>
</div></blockquote>
<p>已加载对象的标量引用。通常情况下，查询已包含表示特定集合或标量引用的必要连接，并且连接加入了要求加入的集合/引用，但已加入的加载特性是冗余的。
然而你仍希望填充集合/引用。</p>
<p>为此，SQLAlchemy 提供了   <code class="xref py py-func docutils literal notranslate"><span class="pre">contains_eager()</span></code>  选项。使用方法与   :func:` _orm.joinedload()`  选项相同，除了它默认假定   <a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal notranslate"><span class="pre">Select</span></code></a>  对象会显式包含适当的联接，通常使用像  :meth:` _sql.Select.join`  这样的方法。下面，我们在 <code class="docutils literal notranslate"><span class="pre">User</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Address</span></code> 之间指定了一个连接，并进一步将其作为急加载 <code class="docutils literal notranslate"><span class="pre">User.addresses</span></code> 的基础来建立：：</p>
<blockquote>
<div><p>from sqlalchemy.orm import contains_eager</p>
<p>stmt = select(User).join(User.addresses).options(contains_eager(User.addresses))</p>
</div></blockquote>
<p>如果语句的“急”部分是“别名化”的，则路径应该使用  <a class="reference internal" href="../internals.html#sqlalchemy.orm.PropComparator.of_type" title="sqlalchemy.orm.PropComparator.of_type"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PropComparator.of_type()</span></code></a>  指定，允许传递特定   :func:` _orm.aliased`  建构：：</p>
<div class="highlight-python+sql notranslate"><div class="highlight"><pre><span></span><span class="c1"># 使用一个 Address 实体的别名</span>
<span class="n">adalias</span> <span class="o">=</span> <span class="n">aliased</span><span class="p">(</span><span class="n">Address</span><span class="p">)</span>

<span class="c1"># 构造一个期望“地址”结果的语句</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">)</span>
    <span class="o">.</span><span class="n">outerjoin</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">addresses</span><span class="o">.</span><span class="n">of_type</span><span class="p">(</span><span class="n">adalias</span><span class="p">))</span>
    <span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">contains_eager</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">addresses</span><span class="o">.</span><span class="n">of_type</span><span class="p">(</span><span class="n">adalias</span><span class="p">)))</span>
<span class="p">)</span>

<span class="c1"># 正常获取结果</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<div class='show_sql'><span class="k">SELECT</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">user_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_user_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">users</span><span class="p">.</span><span class="n">user_name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">users_user_name</span><span class="p">,</span>
<span class="w">    </span><span class="n">adalias</span><span class="p">.</span><span class="n">address_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">adalias_address_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">adalias</span><span class="p">.</span><span class="n">user_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">adalias_user_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">adalias</span><span class="p">.</span><span class="n">email_address</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">adalias_email_address</span><span class="p">,</span>
<span class="w">    </span><span class="p">(...</span><span class="n">other</span><span class="w"> </span><span class="n">columns</span><span class="p">...)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">users</span>
<span class="k">LEFT</span><span class="w"> </span><span class="k">OUTER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">email_addresses</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">email_addresses_1</span>
<span class="k">ON</span><span class="w"> </span><span class="n">users</span><span class="p">.</span><span class="n">user_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">email_addresses_1</span><span class="p">.</span><span class="n">user_id</span>
</div></pre></div>
</div>
<p>作为参数传递给  <code class="xref py py-func docutils literal notranslate"><span class="pre">contains_eager()</span></code> 的路径需要是从起始实体开始的完整路径。例如，如果我们正在加载 ` <cite>Users-&gt;orders-&gt;Order-&gt;items-&gt;Item`</cite>，则选项应该这样使用：：</p>
<blockquote>
<div><p>stmt = select(User).options(contains_eager(User.orders).contains_eager(Order.items))</p>
</div></blockquote>
<p>使用 contains_eager() 加载自定义过滤的集合结果
—————————————————— ———-</p>
<p>当我们使用   <code class="xref py py-func docutils literal notranslate"><span class="pre">contains_eager()</span></code>  时，<em>我们*自己构造将用于填充集合的 SQL。因此，自然地我们可以选择通过加载一小部分元素来 **修改*</em> 集合的目标值，通过编写 SQL 来过滤连接的数据，并将其路由到   :func:` _orm.contains_eager` 。同时使用   <a class="reference internal" href="api.html#orm-queryguide-populate-existing"><span class="std std-ref">填充现有的实例</span></a>  来确保任何已加载的集合被覆盖：：</p>
<blockquote>
<div><dl class="simple">
<dt>stmt = (</dt><dd><p>select(User)
.join(User.addresses)
.filter(Address.email_address.like(”<a class="reference external" href="mailto:%&#37;&#52;&#48;aol&#46;com">%<span>&#64;</span>aol<span>&#46;</span>com</a>”))
.options(contains_eager(User.addresses))
.execution_options(populate_existing=True)</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
<p>以上查询将仅加载包含至少一个包含子字符串 <code class="docutils literal notranslate"><span class="pre">'aol.com'</span></code> 的地址字段的 <code class="docutils literal notranslate"><span class="pre">User</span></code> 对象； <code class="docutils literal notranslate"><span class="pre">User.addresses</span></code> 集合仅包含这些 <code class="docutils literal notranslate"><span class="pre">Address</span></code> 条目，而不包含与集合关联的所有其他 <code class="docutils literal notranslate"><span class="pre">Address</span></code> 条目。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>在所有情况下，SQLAlchemy ORM 都不会覆盖已加载的属性和集合，除非告诉它这样做。</p>
</div>
<p>当一个`.ORM`查询正在使用`identity map`时，通常情况下该查询返回的对象实际上已经存在并且已经在内存中加载。因此，在使用`_orm.contains_eager`以另一种方式填充集合时，通常最好使用如上所示的`orm_queryguide_populate_existing`。这样，一个已经加载的集合将用新数据刷新。<a href="#id18"><span class="problematic" id="id19">`</span></a>populate_existing`选项将重置已经存在的**所有**属性，包括挂起的更改，因此在使用它之前请确保所有数据已被清除。使用`_orm.Session`及其默认行为`autoflush`就足够了。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>我们使用`_orm.contains_eager`加载的自定义集合不是“固定不变的”；也就是说，下一次加载该集合时，它将以其通常的默认内容加载。如果对象过期，该集合可能会被重新加载，这发生在使用: meth:<cite>.Session.commit</cite>，: meth:<cite>.Session.rollback`方法（假定默认会话设置），或使用`meth</cite>：<cite>.Session.expire_all`或`meth</cite>：<a href="#id20"><span class="problematic" id="id21">`</span></a>.Session.expire`方法时。</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<blockquote>
<div><p><span class="xref std std-ref">loader_option_criteria</span>  - modern API allowing WHERE criteria directly</p>
</div></blockquote>
<p>within any relationship loader option</p>
</div>
</section>
<section id="relationship-loader-api">
<h2>Relationship Loader API<a class="headerlink" href="#relationship-loader-api" title="Permalink to this heading">¶</a></h2>
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.Load"><span class="sig-name descname">Load</span></a></p></td>
<td><p>Represents loader options which modify the state of a
ORM-enabled <a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal notranslate"><span class="pre">Select</span></code></a> or a legacy <a class="reference internal" href="query.html#sqlalchemy.orm.Query" title="sqlalchemy.orm.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> in
order to affect how various mapped attributes are loaded.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.orm.Load">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">Load</span></span><a class="headerlink" href="#sqlalchemy.orm.Load" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents loader options which modify the state of a
ORM-enabled <a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal notranslate"><span class="pre">Select</span></code></a> or a legacy <a class="reference internal" href="query.html#sqlalchemy.orm.Query" title="sqlalchemy.orm.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> in
order to affect how various mapped attributes are loaded.</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code></a> object is in most cases used implicitly behind the
scenes when one makes use of a query option like <code class="xref py py-func docutils literal notranslate"><span class="pre">joinedload()</span></code>,
<a class="reference internal" href="columns.html#sqlalchemy.orm.defer" title="sqlalchemy.orm.defer"><code class="xref py py-func docutils literal notranslate"><span class="pre">defer()</span></code></a>, or similar.   It typically is not instantiated directly
except for in some very specific cases.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">orm_queryguide_relationship_per_entity_wildcard</span> - illustrates an
example where direct use of <a class="reference internal" href="#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code></a> may be useful</p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Load.contains_eager"><span class="sig-name descname">contains_eager()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Load.defaultload"><span class="sig-name descname">defaultload()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Load.defer"><span class="sig-name descname">defer()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Load.get_children"><span class="sig-name descname">get_children()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Load.immediateload"><span class="sig-name descname">immediateload()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Load.inherit_cache"><span class="sig-name descname">inherit_cache</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Load.joinedload"><span class="sig-name descname">joinedload()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Load.lazyload"><span class="sig-name descname">lazyload()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Load.load_only"><span class="sig-name descname">load_only()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Load.noload"><span class="sig-name descname">noload()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Load.options"><span class="sig-name descname">options()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Load.process_compile_state"><span class="sig-name descname">process_compile_state()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Load.process_compile_state_replaced_entities"><span class="sig-name descname">process_compile_state_replaced_entities()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Load.propagate_to_loaders"><span class="sig-name descname">propagate_to_loaders</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Load.raiseload"><span class="sig-name descname">raiseload()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Load.selectin_polymorphic"><span class="sig-name descname">selectin_polymorphic()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Load.selectinload"><span class="sig-name descname">selectinload()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Load.subqueryload"><span class="sig-name descname">subqueryload()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Load.undefer"><span class="sig-name descname">undefer()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Load.undefer_group"><span class="sig-name descname">undefer_group()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Load.with_expression"><span class="sig-name descname">with_expression()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.Load</span></code></a> (<code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Load.contains_eager">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Load.</span></code></a><span class="sig-name descname"><span class="pre">contains_eager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_AttrType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alias</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_FromClauseArgument</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_is_chain</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Load.contains_eager" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad.contains_eager</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad</span></code></p>
</div>
<p>Produce a new <a class="reference internal" href="#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code></a> object with the
<code class="xref py py-func docutils literal notranslate"><span class="pre">contains_eager()</span></code> option applied.</p>
<p>See <code class="xref py py-func docutils literal notranslate"><span class="pre">contains_eager()</span></code> for usage examples.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Load.defaultload">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Load.</span></code></a><span class="sig-name descname"><span class="pre">defaultload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../internals.html#sqlalchemy.orm.QueryableAttribute" title="sqlalchemy.orm.attributes.QueryableAttribute"><span class="pre">QueryableAttribute</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Load.defaultload" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad.defaultload</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad</span></code></p>
</div>
<p>Produce a new <a class="reference internal" href="#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code></a> object with the
<code class="xref py py-func docutils literal notranslate"><span class="pre">defaultload()</span></code> option applied.</p>
<p>See <code class="xref py py-func docutils literal notranslate"><span class="pre">defaultload()</span></code> for usage examples.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Load.defer">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Load.</span></code></a><span class="sig-name descname"><span class="pre">defer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../internals.html#sqlalchemy.orm.QueryableAttribute" title="sqlalchemy.orm.attributes.QueryableAttribute"><span class="pre">QueryableAttribute</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raiseload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Load.defer" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad.defer</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad</span></code></p>
</div>
<p>Produce a new <a class="reference internal" href="#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code></a> object with the
<a class="reference internal" href="columns.html#sqlalchemy.orm.defer" title="sqlalchemy.orm.defer"><code class="xref py py-func docutils literal notranslate"><span class="pre">defer()</span></code></a> option applied.</p>
<p>See <a class="reference internal" href="columns.html#sqlalchemy.orm.defer" title="sqlalchemy.orm.defer"><code class="xref py py-func docutils literal notranslate"><span class="pre">defer()</span></code></a> for usage examples.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Load.get_children">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Load.</span></code></a><span class="sig-name descname"><span class="pre">get_children</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">omit_attrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">HasTraverseInternals</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.Load.get_children" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">HasTraverseInternals.get_children()</span></code> <em>method of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">HasTraverseInternals</span></code></p>
</div>
<p>Return immediate child <code class="xref py py-class docutils literal notranslate"><span class="pre">HasTraverseInternals</span></code>
elements of this <code class="xref py py-class docutils literal notranslate"><span class="pre">HasTraverseInternals</span></code>.</p>
<p>This is used for visit traversal.</p>
<p>**kw may contain flags that change the collection that is
returned, for example to return a subset of items in order to
cut down on larger traversals, or to return child items from a
different context (such as schema-level collections instead of
clause-level).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Load.immediateload">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Load.</span></code></a><span class="sig-name descname"><span class="pre">immediateload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../internals.html#sqlalchemy.orm.QueryableAttribute" title="sqlalchemy.orm.attributes.QueryableAttribute"><span class="pre">QueryableAttribute</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursion_depth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Load.immediateload" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad.immediateload</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad</span></code></p>
</div>
<p>Produce a new <a class="reference internal" href="#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code></a> object with the
<code class="xref py py-func docutils literal notranslate"><span class="pre">immediateload()</span></code> option applied.</p>
<p>See <code class="xref py py-func docutils literal notranslate"><span class="pre">immediateload()</span></code> for usage examples.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Load.inherit_cache">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Load.</span></code></a><span class="sig-name descname"><span class="pre">inherit_cache</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.orm.Load.inherit_cache" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-attr docutils literal notranslate"><span class="pre">HasCacheKey.inherit_cache</span></code> <em>attribute of</em> <a class="reference internal" href="../../core/foundation.html#sqlalchemy.sql.traversals.HasCacheKey" title="sqlalchemy.sql.cache_key.HasCacheKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasCacheKey</span></code></a></p>
</div>
<p>Indicate if this <a class="reference internal" href="../../core/foundation.html#sqlalchemy.sql.traversals.HasCacheKey" title="sqlalchemy.sql.traversals.HasCacheKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasCacheKey</span></code></a> instance should make use of the
cache key generation scheme used by its immediate superclass.</p>
<p>The attribute defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>, which indicates that a construct has
not yet taken into account whether or not its appropriate for it to
participate in caching; this is functionally equivalent to setting the
value to <code class="docutils literal notranslate"><span class="pre">False</span></code>, except that a warning is also emitted.</p>
<p>This flag can be set to <code class="docutils literal notranslate"><span class="pre">True</span></code> on a particular class, if the SQL that
corresponds to the object does not change based on attributes which
are local to this class, and not its superclass.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../core/compiler.html#compilerext-caching"><span class="std std-ref">Enabling Caching Support for Custom Constructs</span></a> - General guideslines for setting the
<a class="reference internal" href="../../core/foundation.html#sqlalchemy.sql.traversals.HasCacheKey.inherit_cache" title="sqlalchemy.sql.traversals.HasCacheKey.inherit_cache"><code class="xref py py-attr docutils literal notranslate"><span class="pre">HasCacheKey.inherit_cache</span></code></a> attribute for third-party or user
defined SQL constructs.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Load.joinedload">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Load.</span></code></a><span class="sig-name descname"><span class="pre">joinedload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../internals.html#sqlalchemy.orm.QueryableAttribute" title="sqlalchemy.orm.attributes.QueryableAttribute"><span class="pre">QueryableAttribute</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">innerjoin</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Load.joinedload" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad.joinedload</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad</span></code></p>
</div>
<p>Produce a new <a class="reference internal" href="#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code></a> object with the
<code class="xref py py-func docutils literal notranslate"><span class="pre">joinedload()</span></code> option applied.</p>
<p>See <code class="xref py py-func docutils literal notranslate"><span class="pre">joinedload()</span></code> for usage examples.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Load.lazyload">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Load.</span></code></a><span class="sig-name descname"><span class="pre">lazyload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../internals.html#sqlalchemy.orm.QueryableAttribute" title="sqlalchemy.orm.attributes.QueryableAttribute"><span class="pre">QueryableAttribute</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Load.lazyload" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad.lazyload</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad</span></code></p>
</div>
<p>Produce a new <a class="reference internal" href="#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code></a> object with the
<code class="xref py py-func docutils literal notranslate"><span class="pre">lazyload()</span></code> option applied.</p>
<p>See <code class="xref py py-func docutils literal notranslate"><span class="pre">lazyload()</span></code> for usage examples.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Load.load_only">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Load.</span></code></a><span class="sig-name descname"><span class="pre">load_only</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">attrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../internals.html#sqlalchemy.orm.QueryableAttribute" title="sqlalchemy.orm.attributes.QueryableAttribute"><span class="pre">QueryableAttribute</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raiseload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Load.load_only" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad.load_only</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad</span></code></p>
</div>
<p>Produce a new <a class="reference internal" href="#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code></a> object with the
<a class="reference internal" href="columns.html#sqlalchemy.orm.load_only" title="sqlalchemy.orm.load_only"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_only()</span></code></a> option applied.</p>
<p>See <a class="reference internal" href="columns.html#sqlalchemy.orm.load_only" title="sqlalchemy.orm.load_only"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_only()</span></code></a> for usage examples.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Load.noload">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Load.</span></code></a><span class="sig-name descname"><span class="pre">noload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../internals.html#sqlalchemy.orm.QueryableAttribute" title="sqlalchemy.orm.attributes.QueryableAttribute"><span class="pre">QueryableAttribute</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Load.noload" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad.noload</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad</span></code></p>
</div>
<p>Produce a new <a class="reference internal" href="#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code></a> object with the
<code class="xref py py-func docutils literal notranslate"><span class="pre">noload()</span></code> option applied.</p>
<p>See <code class="xref py py-func docutils literal notranslate"><span class="pre">noload()</span></code> for usage examples.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Load.options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Load.</span></code></a><span class="sig-name descname"><span class="pre">options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">opts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_AbstractLoad</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Load.options" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a series of options as sub-options to this
<a class="reference internal" href="#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code></a>
object.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">query</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Author</span><span class="p">)</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">options</span><span class="p">(</span>
            <span class="n">joinedload</span><span class="p">(</span><span class="n">Author</span><span class="o">.</span><span class="n">book</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span>
                <span class="n">load_only</span><span class="p">(</span><span class="n">Book</span><span class="o">.</span><span class="n">summary</span><span class="p">,</span> <span class="n">Book</span><span class="o">.</span><span class="n">excerpt</span><span class="p">),</span>
                <span class="n">joinedload</span><span class="p">(</span><span class="n">Book</span><span class="o">.</span><span class="n">citations</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span>
                    <span class="n">joinedload</span><span class="p">(</span><span class="n">Citation</span><span class="o">.</span><span class="n">author</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span></pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.orm.Load.options.params.*opts"></span><strong>*opts</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Load.options.params.*opts">¶</a> – A series of loader option objects (ultimately
<a class="reference internal" href="#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code></a> objects) which should be applied to the path
specified by this <a class="reference internal" href="#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code></a> object.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.6.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">defaultload()</span></code></p>
<p><span class="xref std std-ref">orm_queryguide_relationship_sub_options</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Load.process_compile_state">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Load.</span></code></a><span class="sig-name descname"><span class="pre">process_compile_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">compile_state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ORMCompileState</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Load.process_compile_state" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad.process_compile_state</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad</span></code></p>
</div>
<p>Apply a modification to a given <code class="xref py py-class docutils literal notranslate"><span class="pre">ORMCompileState</span></code>.</p>
<p>This method is part of the implementation of a particular
<code class="xref py py-class docutils literal notranslate"><span class="pre">CompileStateOption</span></code> and is only invoked internally
when an ORM query is compiled.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Load.process_compile_state_replaced_entities">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Load.</span></code></a><span class="sig-name descname"><span class="pre">process_compile_state_replaced_entities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">compile_state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ORMCompileState</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mapper_entities</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_MapperEntity</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Load.process_compile_state_replaced_entities" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad.process_compile_state_replaced_entities</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad</span></code></p>
</div>
<p>Apply a modification to a given <code class="xref py py-class docutils literal notranslate"><span class="pre">ORMCompileState</span></code>,
given entities that were replaced by with_only_columns() or
with_entities().</p>
<p>This method is part of the implementation of a particular
<code class="xref py py-class docutils literal notranslate"><span class="pre">CompileStateOption</span></code> and is only invoked internally
when an ORM query is compiled.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.19.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Load.propagate_to_loaders">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Load.</span></code></a><span class="sig-name descname"><span class="pre">propagate_to_loaders</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#sqlalchemy.orm.Load.propagate_to_loaders" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad.propagate_to_loaders</span></code> <em>attribute of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad</span></code></p>
</div>
<p>if True, indicate this option should be carried along
to “secondary” SELECT statements that occur for relationship
lazy loaders as well as attribute load / refresh operations.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Load.raiseload">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Load.</span></code></a><span class="sig-name descname"><span class="pre">raiseload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../internals.html#sqlalchemy.orm.QueryableAttribute" title="sqlalchemy.orm.attributes.QueryableAttribute"><span class="pre">QueryableAttribute</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sql_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Load.raiseload" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad.raiseload</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad</span></code></p>
</div>
<p>Produce a new <a class="reference internal" href="#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code></a> object with the
<code class="xref py py-func docutils literal notranslate"><span class="pre">raiseload()</span></code> option applied.</p>
<p>See <code class="xref py py-func docutils literal notranslate"><span class="pre">raiseload()</span></code> for usage examples.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Load.selectin_polymorphic">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Load.</span></code></a><span class="sig-name descname"><span class="pre">selectin_polymorphic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">classes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Load.selectin_polymorphic" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad.selectin_polymorphic</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad</span></code></p>
</div>
<p>Produce a new <a class="reference internal" href="#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code></a> object with the
<a class="reference internal" href="inheritance.html#sqlalchemy.orm.selectin_polymorphic" title="sqlalchemy.orm.selectin_polymorphic"><code class="xref py py-func docutils literal notranslate"><span class="pre">selectin_polymorphic()</span></code></a> option applied.</p>
<p>See <a class="reference internal" href="inheritance.html#sqlalchemy.orm.selectin_polymorphic" title="sqlalchemy.orm.selectin_polymorphic"><code class="xref py py-func docutils literal notranslate"><span class="pre">selectin_polymorphic()</span></code></a> for usage examples.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Load.selectinload">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Load.</span></code></a><span class="sig-name descname"><span class="pre">selectinload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../internals.html#sqlalchemy.orm.QueryableAttribute" title="sqlalchemy.orm.attributes.QueryableAttribute"><span class="pre">QueryableAttribute</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursion_depth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Load.selectinload" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad.selectinload</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad</span></code></p>
</div>
<p>Produce a new <a class="reference internal" href="#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code></a> object with the
<code class="xref py py-func docutils literal notranslate"><span class="pre">selectinload()</span></code> option applied.</p>
<p>See <code class="xref py py-func docutils literal notranslate"><span class="pre">selectinload()</span></code> for usage examples.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Load.subqueryload">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Load.</span></code></a><span class="sig-name descname"><span class="pre">subqueryload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../internals.html#sqlalchemy.orm.QueryableAttribute" title="sqlalchemy.orm.attributes.QueryableAttribute"><span class="pre">QueryableAttribute</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Load.subqueryload" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad.subqueryload</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad</span></code></p>
</div>
<p>Produce a new <a class="reference internal" href="#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code></a> object with the
<code class="xref py py-func docutils literal notranslate"><span class="pre">subqueryload()</span></code> option applied.</p>
<p>See <code class="xref py py-func docutils literal notranslate"><span class="pre">subqueryload()</span></code> for usage examples.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Load.undefer">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Load.</span></code></a><span class="sig-name descname"><span class="pre">undefer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../internals.html#sqlalchemy.orm.QueryableAttribute" title="sqlalchemy.orm.attributes.QueryableAttribute"><span class="pre">QueryableAttribute</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Load.undefer" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad.undefer</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad</span></code></p>
</div>
<p>Produce a new <a class="reference internal" href="#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code></a> object with the
<a class="reference internal" href="columns.html#sqlalchemy.orm.undefer" title="sqlalchemy.orm.undefer"><code class="xref py py-func docutils literal notranslate"><span class="pre">undefer()</span></code></a> option applied.</p>
<p>See <a class="reference internal" href="columns.html#sqlalchemy.orm.undefer" title="sqlalchemy.orm.undefer"><code class="xref py py-func docutils literal notranslate"><span class="pre">undefer()</span></code></a> for usage examples.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Load.undefer_group">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Load.</span></code></a><span class="sig-name descname"><span class="pre">undefer_group</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Load.undefer_group" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad.undefer_group</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad</span></code></p>
</div>
<p>Produce a new <a class="reference internal" href="#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code></a> object with the
<a class="reference internal" href="columns.html#sqlalchemy.orm.undefer_group" title="sqlalchemy.orm.undefer_group"><code class="xref py py-func docutils literal notranslate"><span class="pre">undefer_group()</span></code></a> option applied.</p>
<p>See <a class="reference internal" href="columns.html#sqlalchemy.orm.undefer_group" title="sqlalchemy.orm.undefer_group"><code class="xref py py-func docutils literal notranslate"><span class="pre">undefer_group()</span></code></a> for usage examples.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Load.with_expression">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Load"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Load.</span></code></a><span class="sig-name descname"><span class="pre">with_expression</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_AttrType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expression</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ColumnExpressionArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Load.with_expression" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad.with_expression</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.strategy_options._AbstractLoad</span></code></p>
</div>
<p>Produce a new <a class="reference internal" href="#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code></a> object with the
<a class="reference internal" href="columns.html#sqlalchemy.orm.with_expression" title="sqlalchemy.orm.with_expression"><code class="xref py py-func docutils literal notranslate"><span class="pre">with_expression()</span></code></a> option applied.</p>
<p>See <a class="reference internal" href="columns.html#sqlalchemy.orm.with_expression" title="sqlalchemy.orm.with_expression"><code class="xref py py-func docutils literal notranslate"><span class="pre">with_expression()</span></code></a> for usage examples.</p>
</dd></dl>

</dd></dl>

</section>
</section>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="columns.html" title="previous chapter">列加载选项</a>
        Next:
        <a href="api.html" title="next chapter">查询时使用的ORM API功能</a>

    <div id="docs-copyright">
        &copy; <a href="../../copyright.html">Copyright</a> 2007-2023, the SQLAlchemy authors and contributors.


    <p><b>flambé!</b> the dragon and <b><i>The Alchemist</i></b> image designs created and generously donated by <a href="https://github.com/vmalloc">Rotem Yaari</a>.</p>

        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 7.0.1.

    Documentation last generated: 2023/8/18 18:59:03

    </div>
</div>

</div>



        
        

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../../',
          VERSION:     '2.0.19',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>

    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script type="text/javascript" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/sphinx_highlight.js"></script>
        <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
        <script type="text/javascript" src="../../_static/copybutton.js"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../../_static/init.js"></script>


    </body>
</html>


