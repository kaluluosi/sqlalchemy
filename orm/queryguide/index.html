<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>
            
    
    ORM查询指南
 &mdash;
    SQLAlchemy 2.0 Documentation

        </title>

        
            <!-- begin iterate through site-imported + sphinx environment css_files -->
                <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/sphinx_paramlinks.css" type="text/css" />
            <!-- end iterate through site-imported + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
        <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="top" title="SQLAlchemy 2.0 Documentation" href="../../index.html" />
        <link rel="up" title="SQLAlchemy ORM" href="../index.html" />
        <link rel="next" title="用ORM Mapper类编写SELECT语句" href="select.html" />
        <link rel="prev" title="关系 API" href="../relationship_api.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">2.0.19</span>


        | Release Date: July 15, 2023

    </div>

    <h1><a href="../../index.html">SQLAlchemy 2.0 Documentation</a></h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">



        <div id="docs-sidebar-popout">
            <h3><a href="../../index.html">SQLAlchemy 2.0 Documentation</a></h3>
            <p id="sidebar-topnav">
                <a href="../../index.html">Home</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../../search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12" />
                  </label>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="../index.html" title="SQLAlchemy ORM">SQLAlchemy ORM</a>
        </h3>

        <ul>
<li><span class="link-container"><a class="reference external" href="../quickstart.html">ORM快速入门</a></span></li>
<li><span class="link-container"><a class="reference external" href="../mapper_config.html">ORM映射类配置</a></span></li>
<li><span class="link-container"><a class="reference external" href="../relationships.html">关系配置</a></span></li>
<li class="selected"><span class="link-container"><strong>ORM查询指南</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span><ul>
<li><span class="link-container"><a class="reference external" href="select.html">用ORM Mapper类编写SELECT语句</a></span></li>
<li><span class="link-container"><a class="reference external" href="inheritance.html">编写继承映射的SELECT语句</a></span></li>
<li><span class="link-container"><a class="reference external" href="dml.html">支持 ORM 的 INSERT、UPDATE 和 DELETE 语句</a></span></li>
<li><span class="link-container"><a class="reference external" href="columns.html">列载入选项</a></span></li>
<li><span class="link-container"><a class="reference external" href="relationships.html">关系属性加载技术</a></span></li>
<li><span class="link-container"><a class="reference external" href="api.html">用于查询的ORM API特性</a></span></li>
<li><span class="link-container"><a class="reference external" href="query.html">旧版查询API</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="../session.html">使用Session</a></span></li>
<li><span class="link-container"><a class="reference external" href="../extending.html">事件和内部实现</a></span></li>
<li><span class="link-container"><a class="reference external" href="../extensions/index.html">ORM扩展</a></span></li>
<li><span class="link-container"><a class="reference external" href="../examples.html">ORM Examples</a></span></li>
</ul>



        </div>

        </div>

    </div>

    <div id="narrow-index-nav">
        <form class="search" action="../../search.html" method="get">
            <label>
                Search terms:
            <input type="text" placeholder="search..." name="q" size="12" />
            </label>
            <input type="submit" value="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>

        <p>
        <a href="../../index.html">Home</a>
        </p>

    </div>


        <div id="docs-narrow-top-navigation">
            <ul>
                <li><b>Previous:</b>
                <a href="../relationship_api.html" title="previous chapter">关系 API</a></li>
                <li><b>Next:</b>
                <a href="select.html" title="next chapter">用ORM Mapper类编写SELECT语句</a></li>

            <li><b>Up:</b> <a href="../../index.html">Home</a></li>
                    <ul><li><a href="../index.html" title="SQLAlchemy ORM">SQLAlchemy ORM</a></li>
                </ul>



            <li><b>On this page:</b></li>
            <ul>
<li><a class="reference internal" href="#orm">ORM查询指南</a></li>
</ul>


            </ul>

        </div>



    <div id="docs-body" role="main" class="withsidebar orm-queryguide-index" >
        
<section id="orm">
<span id="id1"></span><h1>ORM查询指南<a class="headerlink" href="#orm" title="Permalink to this heading">¶</a></h1>
<p>本节概述使用SQLAlchemy ORM使用:term:<a href="#id2"><span class="problematic" id="id3">`</span></a>2.0 style`语法来发出查询。</p>
<p>本节的读者应该熟悉:ref:<a href="#id4"><span class="problematic" id="id5">`</span></a>unified_tutorial`中的SQLAlchemy概述，特别是本节的大部分内容是在扩展:ref:<a href="#id6"><span class="problematic" id="id7">`</span></a>tutorial_selecting_data`中的内容。</p>
<div class="admonition-sqlalchemy-1-x admonition">
<p class="admonition-title">对于SQLAlchemy 1.x的用户</p>
<p>在SQLAlchemy 2.x系列中，ORM的SQL SELECT语句是使用与Core相同的:func:<a href="#id8"><span class="problematic" id="id9">`</span></a>_sql.select`构造构建的，然后在:class:<a href="#id10"><span class="problematic" id="id11">`</span></a>_orm.Session`中使用:meth:<a href="#id12"><span class="problematic" id="id13">`</span></a>_orm.Session.execute`方法调用（与现在用于:ref:<a href="#id14"><span class="problematic" id="id15">`</span></a>orm_expression_update_delete`特性的:func:<a href="#id16"><span class="problematic" id="id17">`</span></a>_sql.update`和:func:<a href="#id18"><span class="problematic" id="id19">`</span></a>_sql.delete`构造相同）。然而，旧版的:class:<a href="#id20"><span class="problematic" id="id21">`</span></a>_query.Query`对象在这个新系统上执行这些相同的步骤，作为更多”一体化”对象的一种，仍然保持可用，以支持在1.x系列上构建的应用程序，而无需全面替换所有的查询。有关此对象的参考，请参阅:ref:<a href="#id22"><span class="problematic" id="id23">`</span></a>query_api_toplevel`章节。</p>
</div>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="select.html">用ORM Mapper类编写SELECT语句</a><ul>
<li class="toctree-l2"><a class="reference internal" href="select.html#orm">选择ORM实体和属性</a></li>
<li class="toctree-l2"><a class="reference internal" href="select.html#bundles">总结选定的属性（Bundles）</a></li>
<li class="toctree-l2"><a class="reference internal" href="select.html#orm-queryguide-orm-aliases">ORM别名</a></li>
<li class="toctree-l2"><a class="reference internal" href="select.html#orm-queryguide-join-subqueries">在子查询中进行ORM联接</a></li>
<li class="toctree-l2"><a class="reference internal" href="select.html#orm-queryguide-joining-relationships-aliased">用别名进行关系联接</a></li>
<li class="toctree-l2"><a class="reference internal" href="select.html#on">指定ON从句的目标实体</a></li>
<li class="toctree-l2"><a class="reference internal" href="select.html#tutorial-joining-relationships-explicit-on">用显式ON从句关联实体和文本时的问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="select.html#id6">参见</a><ul>
<li class="toctree-l3"><a class="reference internal" href="select.html#id13">)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="inheritance.html">编写继承映射的SELECT语句</a><ul>
<li class="toctree-l2"><a class="reference internal" href="inheritance.html#id1">从基类或特定子类中进行查询</a></li>
<li class="toctree-l2"><a class="reference internal" href="inheritance.html#selectin-polymorphic">使用 selectin_polymorphic()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="inheritance.html#polymorphic-selectin-w-loader-options">将其他加载器选项与 selectin_polymorphic() 子类加载项结合使用</a></li>
<li class="toctree-l3"><a class="reference internal" href="inheritance.html#polymorphic-selectin-as-loader-option-target">将 selectin_polymorphic() 应用于现有急切加载</a></li>
<li class="toctree-l3"><a class="reference internal" href="inheritance.html#id6">将选择 selectin_polymorphic() 工具配置到映射器上</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="inheritance.html#api">继承加载API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="inheritance.html#sqlalchemy.orm.with_polymorphic"><code class="docutils literal notranslate"><span class="pre">with_polymorphic()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="inheritance.html#sqlalchemy.orm.selectin_polymorphic"><code class="docutils literal notranslate"><span class="pre">selectin_polymorphic()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dml.html">支持 ORM 的 INSERT、UPDATE 和 DELETE 语句</a><ul>
<li class="toctree-l2"><a class="reference internal" href="dml.html#orm-insert">ORM 批量 INSERT 语句</a><ul>
<li class="toctree-l3"><a class="reference internal" href="dml.html#returning">使用 RETURNING 获取新对象</a></li>
<li class="toctree-l3"><a class="reference internal" href="dml.html#orm-queryguide-insert-heterogeneous-params">使用异构参数字典</a></li>
<li class="toctree-l3"><a class="reference internal" href="dml.html#joined-table-inheritance-insert">Joined Table Inheritance 批量 INSERT</a></li>
<li class="toctree-l3"><a class="reference internal" href="dml.html#sql-orm">使用 SQL 表达式进行 ORM 批量插入</a></li>
<li class="toctree-l3"><a class="reference internal" href="dml.html#session">旧版 Session 批量插入方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="dml.html#orm-upsert">ORM “upsert” 语句</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="dml.html#orm">ORM自定义更新和删除条件</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="columns.html">列载入选项</a><ul>
<li class="toctree-l2"><a class="reference internal" href="columns.html#load-only">使用``load_only()``来减少载入的列</a></li>
<li class="toctree-l2"><a class="reference internal" href="columns.html#id16">使用``load_only()``作用于多个实体</a></li>
<li class="toctree-l2"><a class="reference internal" href="columns.html#orm-queryguide-load-only-related">对相关对象和集合使用``load_only()``</a></li>
<li class="toctree-l2"><a class="reference internal" href="columns.html#defer">使用``defer()``省略特定列</a></li>
<li class="toctree-l2"><a class="reference internal" href="columns.html#raiseload">使用 raiseload 防止延迟列载入</a><ul>
<li class="toctree-l3"><a class="reference internal" href="columns.html#deferral">在映射中配置列 Deferral</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="columns.html#deferred-sql">使用``deferred()` `对命令式映射器，映射SQL表达式</a><ul>
<li class="toctree-l3"><a class="reference internal" href="columns.html#ref-orm-queryguide-select-columns-select-sql-sql">如 : ref:<cite>orm_queryguide_select_columns</cite> 和其他地方所述，可以使用 <code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code> 结构来加载任意 SQL 表达式结果集中使用计数和其他SQL表达式的添加</a></li>
<li class="toctree-l3"><a class="reference internal" href="columns.html#api">列加载API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="relationships.html">关系属性加载技术</a><ul>
<li class="toctree-l2"><a class="reference internal" href="relationships.html#id8">关系加载风格总结</a></li>
<li class="toctree-l2"><a class="reference internal" href="relationships.html#relationship-lazy-option">在映射时配置加载器策略</a></li>
<li class="toctree-l2"><a class="reference internal" href="relationships.html#relationship-loader-options">使用加载程序选项加载关系</a><ul>
<li class="toctree-l3"><a class="reference internal" href="relationships.html#loader-option-criteria">加载程序选项添加筛选条件</a></li>
<li class="toctree-l3"><a class="reference internal" href="relationships.html#load-options">使用 Load.options() 指定子选项</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="relationships.html#lazy-loading">延迟加载</a><ul>
<li class="toctree-l3"><a class="reference internal" href="relationships.html#raiseload">使用 raiseload 来防止不必要的惰性加载</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="relationships.html#joined-eager-loading">连接式“通常负载”</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">用于查询的ORM API特性</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.html#orm-loader">ORM Loader选项</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#orm">ORM执行选项</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api.html#orm-queryguide-populate-existing">现有数据充填</a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#orm-queryguide-autoflush">自动刷新</a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#yield-per">使用Yield Per抓取大量结果集</a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#queryguide-identity-token">Identity Token</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="query.html">旧版查询API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="query.html#id5">查询对象</a><ul>
<li class="toctree-l3"><a class="reference internal" href="query.html#sqlalchemy.orm.Query"><code class="docutils literal notranslate"><span class="pre">Query</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="query.html#orm">ORM特定的查询构造函数</a></li>
</ul>
</li>
</ul>
</div>
</section>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="../relationship_api.html" title="previous chapter">关系 API</a>
        Next:
        <a href="select.html" title="next chapter">用ORM Mapper类编写SELECT语句</a>

    <div id="docs-copyright">
        &copy; <a href="../../copyright.html">Copyright</a> 2007-2023, the SQLAlchemy authors and contributors.


    <p><b>flambé!</b> the dragon and <b><i>The Alchemist</i></b> image designs created and generously donated by <a href="https://github.com/vmalloc">Rotem Yaari</a>.</p>

        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 7.0.1.

    Documentation last generated: 2023/8/18 9:31:16

    </div>
</div>

</div>



        
        

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../../',
          VERSION:     '2.0.19',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>

    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script type="text/javascript" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/sphinx_highlight.js"></script>
        <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
        <script type="text/javascript" src="../../_static/copybutton.js"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../../_static/init.js"></script>


    </body>
</html>


