<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>
            
    
    异步 I/O (asyncio)
 &mdash;
    SQLAlchemy 2.0 Documentation

        </title>

        
            <!-- begin iterate through site-imported + sphinx environment css_files -->
                <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/sphinx_paramlinks.css" type="text/css" />
            <!-- end iterate through site-imported + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
        <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="top" title="SQLAlchemy 2.0 Documentation" href="../../index.html" />
        <link rel="up" title="ORM扩展" href="index.html" />
        <link rel="next" title="关联代理" href="associationproxy.html" />
        <link rel="prev" title="ORM扩展" href="index.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">2.0.19</span>


        | Release Date: July 15, 2023

    </div>

    <h1><a href="../../index.html">SQLAlchemy 2.0 Documentation</a></h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">



        <div id="docs-sidebar-popout">
            <h3><a href="../../index.html">SQLAlchemy 2.0 Documentation</a></h3>
            <p id="sidebar-topnav">
                <a href="../../index.html">Home</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../../search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12" />
                  </label>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="../index.html" title="SQLAlchemy ORM">SQLAlchemy ORM</a>
        </h3>

        <ul>
<li><span class="link-container"><a class="reference external" href="../quickstart.html">ORM快速入门</a></span></li>
<li><span class="link-container"><a class="reference external" href="../mapper_config.html">ORM映射类配置</a></span></li>
<li><span class="link-container"><a class="reference external" href="../relationships.html">关系配置</a></span></li>
<li><span class="link-container"><a class="reference external" href="../queryguide/index.html">ORM查询指南</a></span></li>
<li><span class="link-container"><a class="reference external" href="../session.html">使用Session</a></span></li>
<li><span class="link-container"><a class="reference external" href="../extending.html">事件和内部实现</a></span></li>
<li><span class="link-container"><a class="reference external" href="index.html">ORM扩展</a></span><ul>
<li class="selected"><span class="link-container"><strong>异步 I/O (asyncio)</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#i-o-apple-m1">异步 I/O 平台安装注意事项（包括 Apple M1）</a></span></li>
<li><span class="link-container"><a class="reference external" href="#core">概述 - Core</a></span></li>
<li><span class="link-container"><a class="reference external" href="#orm">概述 - ORM</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#asyncsession">使用 AsyncSession 与并发任务</a></span></li>
<li><span class="link-container"><a class="reference external" href="#asyncsession-i-o">在使用 AsyncSession 时避免隐式 I/O</a></span></li>
<li><span class="link-container"><a class="reference external" href="#asyncio-events-run-async">在连接池和其他事件中使用仅可等待的驱动方法</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#asyncio">使用多个 asyncio 事件循环</a></span></li>
<li><span class="link-container"><a class="reference external" href="#asyncio-scoped-session-asyncio-scoped-session">使用 asyncio scoped session（使用 asyncio scoped session）</a></span></li>
<li><span class="link-container"><a class="reference external" href="#inspector">使用 Inspector 检查模式对象</a></span></li>
<li><span class="link-container"><a class="reference external" href="#api">引擎 API 文档</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.create_async_engine"><code class="docutils literal notranslate"><span class="pre">create_async_engine()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_engine_from_config"><code class="docutils literal notranslate"><span class="pre">async_engine_from_config()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.create_async_pool_from_url"><code class="docutils literal notranslate"><span class="pre">create_async_pool_from_url()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.begin"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.begin()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.clear_compiled_cache"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.clear_compiled_cache()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.connect"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.connect()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.dialect"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.dialect</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.dispose"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.dispose()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.driver"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.driver</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.echo"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.echo</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.engine"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.engine</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.execution_options"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.execution_options()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.get_execution_options"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.get_execution_options()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.name"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.name</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.pool"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.pool</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.raw_connection"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.raw_connection()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.sync_engine"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.sync_engine</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.update_execution_options"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.update_execution_options()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.url"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.url</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.aclose"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.aclose()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.begin"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.begin()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.begin_nested"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.begin_nested()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.close"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.closed"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.closed</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.commit"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.commit()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.connection"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.connection</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.default_isolation_level"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.default_isolation_level</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.dialect"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.dialect</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.exec_driver_sql"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.exec_driver_sql()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.execute"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.execute()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.execution_options"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.execution_options()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_nested_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.get_nested_transaction()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_raw_connection"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.get_raw_connection()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.get_transaction()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.in_nested_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.in_nested_transaction()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.in_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.in_transaction()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.info"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.info</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.invalidate"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.invalidate()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.invalidated"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.invalidated</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.rollback"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.rollback()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.run_sync"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.run_sync()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.scalar"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.scalar()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.scalars"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.scalars()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.start"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.start()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.stream()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream_scalars"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.stream_scalars()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.sync_connection"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.sync_connection</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.sync_engine"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.sync_engine</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncTransaction"><code class="docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncTransaction.close"><code class="docutils literal notranslate"><span class="pre">AsyncTransaction.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncTransaction.commit"><code class="docutils literal notranslate"><span class="pre">AsyncTransaction.commit()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncTransaction.rollback"><code class="docutils literal notranslate"><span class="pre">AsyncTransaction.rollback()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncTransaction.start"><code class="docutils literal notranslate"><span class="pre">AsyncTransaction.start()</span></code></a></span></li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#id8">结果集 API 文档</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">AsyncResult</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.all"><code class="docutils literal notranslate"><span class="pre">AsyncResult.all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.close"><code class="docutils literal notranslate"><span class="pre">AsyncResult.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.closed"><code class="docutils literal notranslate"><span class="pre">AsyncResult.closed</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.columns"><code class="docutils literal notranslate"><span class="pre">AsyncResult.columns()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchall"><code class="docutils literal notranslate"><span class="pre">AsyncResult.fetchall()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchmany"><code class="docutils literal notranslate"><span class="pre">AsyncResult.fetchmany()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchone"><code class="docutils literal notranslate"><span class="pre">AsyncResult.fetchone()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.first"><code class="docutils literal notranslate"><span class="pre">AsyncResult.first()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.freeze"><code class="docutils literal notranslate"><span class="pre">AsyncResult.freeze()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.keys"><code class="docutils literal notranslate"><span class="pre">AsyncResult.keys()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.mappings"><code class="docutils literal notranslate"><span class="pre">AsyncResult.mappings()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.one"><code class="docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none"><code class="docutils literal notranslate"><span class="pre">AsyncResult.one_or_none()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.partitions"><code class="docutils literal notranslate"><span class="pre">AsyncResult.partitions()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar"><code class="docutils literal notranslate"><span class="pre">AsyncResult.scalar()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one"><code class="docutils literal notranslate"><span class="pre">AsyncResult.scalar_one()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one_or_none"><code class="docutils literal notranslate"><span class="pre">AsyncResult.scalar_one_or_none()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.t"><code class="docutils literal notranslate"><span class="pre">AsyncResult.t</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.tuples"><code class="docutils literal notranslate"><span class="pre">AsyncResult.tuples()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.unique"><code class="docutils literal notranslate"><span class="pre">AsyncResult.unique()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.yield_per"><code class="docutils literal notranslate"><span class="pre">AsyncResult.yield_per()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.all"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.close"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.closed"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.closed</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.fetchall"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.fetchall()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.fetchmany"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.fetchmany()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.first"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.first()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.one"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.one()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.one_or_none"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.one_or_none()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.partitions"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.partitions()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.unique"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.unique()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.yield_per"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.yield_per()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.all"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.close"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.closed"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.closed</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.columns"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.columns()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchall"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.fetchall()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchmany"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.fetchmany()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchone"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.fetchone()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.first"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.first()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.keys"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.keys()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.one"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.one()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.one_or_none"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.one_or_none()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.partitions"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.partitions()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.unique"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.unique()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.yield_per"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.yield_per()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncTupleResult"><code class="docutils literal notranslate"><span class="pre">AsyncTupleResult</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#orm-session-api">ORM Session API 文档</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_object_session"><code class="docutils literal notranslate"><span class="pre">async_object_session()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_session"><code class="docutils literal notranslate"><span class="pre">async_session()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_sessionmaker"><code class="docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_sessionmaker.__call__"><code class="docutils literal notranslate"><span class="pre">async_sessionmaker.__call__()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_sessionmaker.__init__"><code class="docutils literal notranslate"><span class="pre">async_sessionmaker.__init__()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_sessionmaker.begin"><code class="docutils literal notranslate"><span class="pre">async_sessionmaker.begin()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_sessionmaker.configure"><code class="docutils literal notranslate"><span class="pre">async_sessionmaker.configure()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.__call__"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.__call__()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.__init__"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.__init__()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.aclose"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.aclose()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.add"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.add()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.add_all"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.add_all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.autoflush"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.autoflush</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.begin"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.begin()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.begin_nested"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.begin_nested()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.bind"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.bind</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.close"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.close_all"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.close_all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.commit"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.commit()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.configure"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.configure()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.connection"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.connection()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.delete"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.delete()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.deleted"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.deleted</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.dirty"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.dirty</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.execute"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.execute()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.expire()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire_all"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.expire_all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.expunge"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.expunge()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.expunge_all"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.expunge_all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.flush"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.flush()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.get"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.get()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.get_bind"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.get_bind()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.identity_key"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.identity_key()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.identity_map"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.identity_map</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.info"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.info</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.invalidate"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.invalidate()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_active"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.is_active</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_modified"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.is_modified()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.merge"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.merge()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.new"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.new</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.no_autoflush"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.no_autoflush</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.object_session"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.object_session()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.refresh"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.refresh()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.remove"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.remove()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.rollback"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.rollback()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.scalar"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.scalar()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.scalars"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.scalars()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.session_factory"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.session_factory</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.stream"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.stream()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.stream_scalars"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.stream_scalars()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncAttrs"><code class="docutils literal notranslate"><span class="pre">AsyncAttrs</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs"><code class="docutils literal notranslate"><span class="pre">AsyncAttrs.awaitable_attrs</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">AsyncSession</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.sync_session_class"><code class="docutils literal notranslate"><span class="pre">AsyncSession.sync_session_class</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.__init__"><code class="docutils literal notranslate"><span class="pre">AsyncSession.__init__()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.aclose"><code class="docutils literal notranslate"><span class="pre">AsyncSession.aclose()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.add"><code class="docutils literal notranslate"><span class="pre">AsyncSession.add()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.add_all"><code class="docutils literal notranslate"><span class="pre">AsyncSession.add_all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.autoflush"><code class="docutils literal notranslate"><span class="pre">AsyncSession.autoflush</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.begin"><code class="docutils literal notranslate"><span class="pre">AsyncSession.begin()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.begin_nested"><code class="docutils literal notranslate"><span class="pre">AsyncSession.begin_nested()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.close"><code class="docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.close_all"><code class="docutils literal notranslate"><span class="pre">AsyncSession.close_all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.commit"><code class="docutils literal notranslate"><span class="pre">AsyncSession.commit()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.connection"><code class="docutils literal notranslate"><span class="pre">AsyncSession.connection()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.delete"><code class="docutils literal notranslate"><span class="pre">AsyncSession.delete()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.deleted"><code class="docutils literal notranslate"><span class="pre">AsyncSession.deleted</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.dirty"><code class="docutils literal notranslate"><span class="pre">AsyncSession.dirty</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.execute"><code class="docutils literal notranslate"><span class="pre">AsyncSession.execute()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.expire"><code class="docutils literal notranslate"><span class="pre">AsyncSession.expire()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.expire_all"><code class="docutils literal notranslate"><span class="pre">AsyncSession.expire_all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.expunge"><code class="docutils literal notranslate"><span class="pre">AsyncSession.expunge()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.expunge_all"><code class="docutils literal notranslate"><span class="pre">AsyncSession.expunge_all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.flush"><code class="docutils literal notranslate"><span class="pre">AsyncSession.flush()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.get"><code class="docutils literal notranslate"><span class="pre">AsyncSession.get()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.get_bind"><code class="docutils literal notranslate"><span class="pre">AsyncSession.get_bind()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.get_nested_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncSession.get_nested_transaction()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.get_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncSession.get_transaction()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.identity_key"><code class="docutils literal notranslate"><span class="pre">AsyncSession.identity_key()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.identity_map"><code class="docutils literal notranslate"><span class="pre">AsyncSession.identity_map</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.in_nested_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncSession.in_nested_transaction()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.in_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncSession.in_transaction()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.info"><code class="docutils literal notranslate"><span class="pre">AsyncSession.info</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.invalidate"><code class="docutils literal notranslate"><span class="pre">AsyncSession.invalidate()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.is_active"><code class="docutils literal notranslate"><span class="pre">AsyncSession.is_active</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.is_modified"><code class="docutils literal notranslate"><span class="pre">AsyncSession.is_modified()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.merge"><code class="docutils literal notranslate"><span class="pre">AsyncSession.merge()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.new"><code class="docutils literal notranslate"><span class="pre">AsyncSession.new</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.no_autoflush"><code class="docutils literal notranslate"><span class="pre">AsyncSession.no_autoflush</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.object_session"><code class="docutils literal notranslate"><span class="pre">AsyncSession.object_session()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.refresh"><code class="docutils literal notranslate"><span class="pre">AsyncSession.refresh()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.rollback"><code class="docutils literal notranslate"><span class="pre">AsyncSession.rollback()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync"><code class="docutils literal notranslate"><span class="pre">AsyncSession.run_sync()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.scalar"><code class="docutils literal notranslate"><span class="pre">AsyncSession.scalar()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.scalars"><code class="docutils literal notranslate"><span class="pre">AsyncSession.scalars()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.stream"><code class="docutils literal notranslate"><span class="pre">AsyncSession.stream()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.stream_scalars"><code class="docutils literal notranslate"><span class="pre">AsyncSession.stream_scalars()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.sync_session"><code class="docutils literal notranslate"><span class="pre">AsyncSession.sync_session</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.commit"><code class="docutils literal notranslate"><span class="pre">AsyncSessionTransaction.commit()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.rollback"><code class="docutils literal notranslate"><span class="pre">AsyncSessionTransaction.rollback()</span></code></a></span></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="associationproxy.html">关联代理</a></span></li>
<li><span class="link-container"><a class="reference external" href="automap.html">自动映射</a></span></li>
<li><span class="link-container"><a class="reference external" href="baked.html">摘要</a></span></li>
<li><span class="link-container"><a class="reference external" href="declarative/index.html">声明式扩展</a></span></li>
<li><span class="link-container"><a class="reference external" href="mypy.html">Mypy / Pep-484的ORM映射支持</a></span></li>
<li><span class="link-container"><a class="reference external" href="mutable.html">变异跟踪</a></span></li>
<li><span class="link-container"><a class="reference external" href="orderinglist.html">排序列表</a></span></li>
<li><span class="link-container"><a class="reference external" href="horizontal_shard.html">水平分片</a></span></li>
<li><span class="link-container"><a class="reference external" href="hybrid.html">混合属性</a></span></li>
<li><span class="link-container"><a class="reference external" href="indexable.html">可索引对象</a></span></li>
<li><span class="link-container"><a class="reference external" href="instrumentation.html">备选类仪器</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="../examples.html">ORM Examples</a></span></li>
</ul>



        </div>

        </div>

    </div>

    <div id="narrow-index-nav">
        <form class="search" action="../../search.html" method="get">
            <label>
                Search terms:
            <input type="text" placeholder="search..." name="q" size="12" />
            </label>
            <input type="submit" value="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>

        <p>
        <a href="../../index.html">Home</a>
        </p>

    </div>


        <div id="docs-narrow-top-navigation">
            <ul>
                <li><b>Previous:</b>
                <a href="index.html" title="previous chapter">ORM扩展</a></li>
                <li><b>Next:</b>
                <a href="associationproxy.html" title="next chapter">关联代理</a></li>

            <li><b>Up:</b> <a href="../../index.html">Home</a></li>
                    <ul><li><a href="../index.html" title="SQLAlchemy ORM">SQLAlchemy ORM</a></li>
                    <ul><li><a href="index.html" title="ORM扩展">ORM扩展</a></li>
                </ul>
                </ul>



            <li><b>On this page:</b></li>
            <ul>
<li><a class="reference internal" href="#i-o-asyncio">异步 I/O (asyncio)</a><ul>
<li><a class="reference internal" href="#i-o-apple-m1">异步 I/O 平台安装注意事项（包括 Apple M1）</a></li>
<li><a class="reference internal" href="#core">概述 - Core</a></li>
<li><a class="reference internal" href="#orm">概述 - ORM</a><ul>
<li><a class="reference internal" href="#asyncsession">使用 AsyncSession 与并发任务</a></li>
<li><a class="reference internal" href="#asyncsession-i-o">在使用 AsyncSession 时避免隐式 I/O</a></li>
<li><a class="reference internal" href="#asyncio-events-run-async">在连接池和其他事件中使用仅可等待的驱动方法</a></li>
</ul>
</li>
<li><a class="reference internal" href="#asyncio">使用多个 asyncio 事件循环</a></li>
<li><a class="reference internal" href="#asyncio-scoped-session-asyncio-scoped-session">使用 asyncio scoped session（使用 asyncio scoped session）</a></li>
<li><a class="reference internal" href="#inspector">使用 Inspector 检查模式对象</a></li>
<li><a class="reference internal" href="#api">引擎 API 文档</a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.create_async_engine"><code class="docutils literal notranslate"><span class="pre">create_async_engine()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_engine_from_config"><code class="docutils literal notranslate"><span class="pre">async_engine_from_config()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.create_async_pool_from_url"><code class="docutils literal notranslate"><span class="pre">create_async_pool_from_url()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.begin"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.begin()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.clear_compiled_cache"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.clear_compiled_cache()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.connect"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.connect()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.dialect"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.dialect</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.dispose"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.dispose()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.driver"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.driver</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.echo"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.echo</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.engine"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.engine</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.execution_options"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.execution_options()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.get_execution_options"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.get_execution_options()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.name"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.name</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.pool"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.pool</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.raw_connection"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.raw_connection()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.sync_engine"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.sync_engine</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.update_execution_options"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.update_execution_options()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.url"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.url</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.aclose"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.aclose()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.begin"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.begin()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.begin_nested"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.begin_nested()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.close"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.closed"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.closed</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.commit"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.commit()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.connection"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.connection</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.default_isolation_level"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.default_isolation_level</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.dialect"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.dialect</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.exec_driver_sql"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.exec_driver_sql()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.execute"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.execute()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.execution_options"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.execution_options()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_nested_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.get_nested_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_raw_connection"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.get_raw_connection()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.get_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.in_nested_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.in_nested_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.in_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.in_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.info"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.info</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.invalidate"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.invalidate()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.invalidated"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.invalidated</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.rollback"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.rollback()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.run_sync"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.run_sync()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.scalar"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.scalar()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.scalars"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.scalars()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.start"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.start()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.stream()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream_scalars"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.stream_scalars()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.sync_connection"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.sync_connection</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.sync_engine"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.sync_engine</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction"><code class="docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction.close"><code class="docutils literal notranslate"><span class="pre">AsyncTransaction.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction.commit"><code class="docutils literal notranslate"><span class="pre">AsyncTransaction.commit()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction.rollback"><code class="docutils literal notranslate"><span class="pre">AsyncTransaction.rollback()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction.start"><code class="docutils literal notranslate"><span class="pre">AsyncTransaction.start()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id8">结果集 API 文档</a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">AsyncResult</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.all"><code class="docutils literal notranslate"><span class="pre">AsyncResult.all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.close"><code class="docutils literal notranslate"><span class="pre">AsyncResult.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.closed"><code class="docutils literal notranslate"><span class="pre">AsyncResult.closed</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.columns"><code class="docutils literal notranslate"><span class="pre">AsyncResult.columns()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchall"><code class="docutils literal notranslate"><span class="pre">AsyncResult.fetchall()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchmany"><code class="docutils literal notranslate"><span class="pre">AsyncResult.fetchmany()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchone"><code class="docutils literal notranslate"><span class="pre">AsyncResult.fetchone()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.first"><code class="docutils literal notranslate"><span class="pre">AsyncResult.first()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.freeze"><code class="docutils literal notranslate"><span class="pre">AsyncResult.freeze()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.keys"><code class="docutils literal notranslate"><span class="pre">AsyncResult.keys()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.mappings"><code class="docutils literal notranslate"><span class="pre">AsyncResult.mappings()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one"><code class="docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none"><code class="docutils literal notranslate"><span class="pre">AsyncResult.one_or_none()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.partitions"><code class="docutils literal notranslate"><span class="pre">AsyncResult.partitions()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar"><code class="docutils literal notranslate"><span class="pre">AsyncResult.scalar()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one"><code class="docutils literal notranslate"><span class="pre">AsyncResult.scalar_one()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one_or_none"><code class="docutils literal notranslate"><span class="pre">AsyncResult.scalar_one_or_none()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.t"><code class="docutils literal notranslate"><span class="pre">AsyncResult.t</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.tuples"><code class="docutils literal notranslate"><span class="pre">AsyncResult.tuples()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.unique"><code class="docutils literal notranslate"><span class="pre">AsyncResult.unique()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.yield_per"><code class="docutils literal notranslate"><span class="pre">AsyncResult.yield_per()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.all"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.close"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.closed"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.closed</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.fetchall"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.fetchall()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.fetchmany"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.fetchmany()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.first"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.first()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.one"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.one()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.one_or_none"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.one_or_none()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.partitions"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.partitions()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.unique"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.unique()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.yield_per"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.yield_per()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.all"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.close"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.closed"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.closed</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.columns"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.columns()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchall"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.fetchall()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchmany"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.fetchmany()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchone"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.fetchone()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.first"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.first()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.keys"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.keys()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.one"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.one()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.one_or_none"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.one_or_none()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.partitions"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.partitions()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.unique"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.unique()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.yield_per"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.yield_per()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTupleResult"><code class="docutils literal notranslate"><span class="pre">AsyncTupleResult</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#orm-session-api">ORM Session API 文档</a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_object_session"><code class="docutils literal notranslate"><span class="pre">async_object_session()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_session"><code class="docutils literal notranslate"><span class="pre">async_session()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker"><code class="docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker.__call__"><code class="docutils literal notranslate"><span class="pre">async_sessionmaker.__call__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker.__init__"><code class="docutils literal notranslate"><span class="pre">async_sessionmaker.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker.begin"><code class="docutils literal notranslate"><span class="pre">async_sessionmaker.begin()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker.configure"><code class="docutils literal notranslate"><span class="pre">async_sessionmaker.configure()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.__call__"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.__call__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.__init__"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.aclose"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.aclose()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.add"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.add()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.add_all"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.add_all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.autoflush"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.autoflush</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.begin"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.begin()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.begin_nested"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.begin_nested()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.bind"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.bind</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.close"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.close_all"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.close_all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.commit"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.commit()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.configure"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.configure()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.connection"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.connection()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.delete"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.delete()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.deleted"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.deleted</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.dirty"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.dirty</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.execute"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.execute()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.expire()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire_all"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.expire_all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.expunge"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.expunge()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.expunge_all"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.expunge_all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.flush"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.flush()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.get"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.get()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.get_bind"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.get_bind()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.identity_key"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.identity_key()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.identity_map"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.identity_map</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.info"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.info</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.invalidate"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.invalidate()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_active"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.is_active</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_modified"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.is_modified()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.merge"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.merge()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.new"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.new</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.no_autoflush"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.no_autoflush</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.object_session"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.object_session()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.refresh"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.refresh()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.remove"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.remove()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.rollback"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.rollback()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.scalar"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.scalar()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.scalars"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.scalars()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.session_factory"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.session_factory</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.stream"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.stream()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.stream_scalars"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.stream_scalars()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs"><code class="docutils literal notranslate"><span class="pre">AsyncAttrs</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs"><code class="docutils literal notranslate"><span class="pre">AsyncAttrs.awaitable_attrs</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">AsyncSession</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.sync_session_class"><code class="docutils literal notranslate"><span class="pre">AsyncSession.sync_session_class</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.__init__"><code class="docutils literal notranslate"><span class="pre">AsyncSession.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.aclose"><code class="docutils literal notranslate"><span class="pre">AsyncSession.aclose()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.add"><code class="docutils literal notranslate"><span class="pre">AsyncSession.add()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.add_all"><code class="docutils literal notranslate"><span class="pre">AsyncSession.add_all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.autoflush"><code class="docutils literal notranslate"><span class="pre">AsyncSession.autoflush</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.begin"><code class="docutils literal notranslate"><span class="pre">AsyncSession.begin()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.begin_nested"><code class="docutils literal notranslate"><span class="pre">AsyncSession.begin_nested()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close"><code class="docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close_all"><code class="docutils literal notranslate"><span class="pre">AsyncSession.close_all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.commit"><code class="docutils literal notranslate"><span class="pre">AsyncSession.commit()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.connection"><code class="docutils literal notranslate"><span class="pre">AsyncSession.connection()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.delete"><code class="docutils literal notranslate"><span class="pre">AsyncSession.delete()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.deleted"><code class="docutils literal notranslate"><span class="pre">AsyncSession.deleted</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.dirty"><code class="docutils literal notranslate"><span class="pre">AsyncSession.dirty</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.execute"><code class="docutils literal notranslate"><span class="pre">AsyncSession.execute()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expire"><code class="docutils literal notranslate"><span class="pre">AsyncSession.expire()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expire_all"><code class="docutils literal notranslate"><span class="pre">AsyncSession.expire_all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expunge"><code class="docutils literal notranslate"><span class="pre">AsyncSession.expunge()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expunge_all"><code class="docutils literal notranslate"><span class="pre">AsyncSession.expunge_all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.flush"><code class="docutils literal notranslate"><span class="pre">AsyncSession.flush()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.get"><code class="docutils literal notranslate"><span class="pre">AsyncSession.get()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.get_bind"><code class="docutils literal notranslate"><span class="pre">AsyncSession.get_bind()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.get_nested_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncSession.get_nested_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.get_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncSession.get_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.identity_key"><code class="docutils literal notranslate"><span class="pre">AsyncSession.identity_key()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.identity_map"><code class="docutils literal notranslate"><span class="pre">AsyncSession.identity_map</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.in_nested_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncSession.in_nested_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.in_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncSession.in_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.info"><code class="docutils literal notranslate"><span class="pre">AsyncSession.info</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.invalidate"><code class="docutils literal notranslate"><span class="pre">AsyncSession.invalidate()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.is_active"><code class="docutils literal notranslate"><span class="pre">AsyncSession.is_active</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.is_modified"><code class="docutils literal notranslate"><span class="pre">AsyncSession.is_modified()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.merge"><code class="docutils literal notranslate"><span class="pre">AsyncSession.merge()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.new"><code class="docutils literal notranslate"><span class="pre">AsyncSession.new</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.no_autoflush"><code class="docutils literal notranslate"><span class="pre">AsyncSession.no_autoflush</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.object_session"><code class="docutils literal notranslate"><span class="pre">AsyncSession.object_session()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.refresh"><code class="docutils literal notranslate"><span class="pre">AsyncSession.refresh()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.rollback"><code class="docutils literal notranslate"><span class="pre">AsyncSession.rollback()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync"><code class="docutils literal notranslate"><span class="pre">AsyncSession.run_sync()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.scalar"><code class="docutils literal notranslate"><span class="pre">AsyncSession.scalar()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.scalars"><code class="docutils literal notranslate"><span class="pre">AsyncSession.scalars()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.stream"><code class="docutils literal notranslate"><span class="pre">AsyncSession.stream()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.stream_scalars"><code class="docutils literal notranslate"><span class="pre">AsyncSession.stream_scalars()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.sync_session"><code class="docutils literal notranslate"><span class="pre">AsyncSession.sync_session</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.commit"><code class="docutils literal notranslate"><span class="pre">AsyncSessionTransaction.commit()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.rollback"><code class="docutils literal notranslate"><span class="pre">AsyncSessionTransaction.rollback()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


            </ul>

        </div>



    <div id="docs-body" role="main" class="withsidebar orm-extensions-asyncio" >
        
<section id="i-o-asyncio">
<span id="asyncio-toplevel"></span><h1>异步 I/O (asyncio)<a class="headerlink" href="#i-o-asyncio" title="Permalink to this heading">¶</a></h1>
<p>支持 Python asyncio。支持使用 asyncio 兼容方言，包括 Core 和 ORM。</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>请阅读 <a class="reference internal" href="#asyncio-install"><span class="std std-ref">异步 I/O 平台安装注意事项（包括 Apple M1）</span></a>，以获取包括 Apple M1 架构在内的重要平台安装注意事项。</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../changelog/migration_14.html#change-3414"><span class="std std-ref">Core和ORM现在支持异步IO</span></a> - 初始功能公告</p>
<p><a class="reference internal" href="../examples.html#examples-asyncio"><span class="std std-ref">Asyncio集成</span></a> - 例子脚本说明了在 asyncio 扩展中使用 Core 和 ORM 的使用范例。</p>
</div>
<section id="i-o-apple-m1">
<span id="asyncio-install"></span><h2>异步 I/O 平台安装注意事项（包括 Apple M1）<a class="headerlink" href="#i-o-apple-m1" title="Permalink to this heading">¶</a></h2>
<p>异步 io 扩展仅支持 Python 3。它还依赖于 <a class="reference external" href="https://pypi.org/project/greenlet/">greenlet</a> 库。这
一依赖关系默认安装在包括以下常见机器平台：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>x86_64 aarch64 ppc64le amd64 win32</pre></div>
</div>
<p>对于上述平台，“greenlet”已知提供预构建的轮文件。对于其他平台，“greenlet”不会默认安装;
“greenlet”的当前文件清单可以在 <a class="reference external" href="https://pypi.org/project/greenlet/#files">Greenlet - Download Files</a> 中查看。
请注意，其中有许多架构被省略，包括 Apple M1。</p>
<p>要在确保存在“greenlet”依赖关系的情况下安装 SQLAlchemy，请使用
下面的“[asyncio]”’setuptools extra’  &lt;<a class="reference external" href="https://packaging.python.org/en/latest/tutorials/installing-packages/#installing-setuptools-extras">https://packaging.python.org/en/latest/tutorials/installing-packages/#installing-setuptools-extras</a>&gt;`_ 安装，这也将指示“pip”安装“greenlet”:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>pip install sqlalchemy[asyncio]</pre></div>
</div>
<p>请注意，在没有预构建轮文件的平台上安装“greenlet”意味着必须构建“greenlet”，这需要
Python 的开发库也要存在。</p>
</section>
<section id="core">
<h2>概述 - Core<a class="headerlink" href="#core" title="Permalink to this heading">¶</a></h2>
<p>对于 Core 使用，<a class="reference internal" href="#sqlalchemy.ext.asyncio.create_async_engine" title="sqlalchemy.ext.asyncio.create_async_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_async_engine()</span></code></a> 函数创建
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> 的实例，它然后提供传统的 <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code>
API 的异步版本。<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> 通过其
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.connect" title="sqlalchemy.ext.asyncio.AsyncEngine.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncEngine.connect()</span></code></a> 和 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.begin" title="sqlalchemy.ext.asyncio.AsyncEngine.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncEngine.begin()</span></code></a>
方法都会提供一个异步上下文管理器的形式，从而提供一个 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a>。
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> 然后可以使用 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.execute" title="sqlalchemy.ext.asyncio.AsyncConnection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.execute()</span></code></a> 方法来提供一个缓冲的 <code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code>，
或使用 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream" title="sqlalchemy.ext.asyncio.AsyncConnection.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.stream()</span></code></a> 方法来提供一个流式服务器端的 :class:<a href="#id1"><span class="problematic" id="id2">`</span></a>_asyncio.AsyncResult`来调用语句:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Column</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">MetaData</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">String</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Table</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>

<span class="n">meta</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>
<span class="n">t1</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s2">&quot;t1&quot;</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span> <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">async_main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span>
        <span class="s2">&quot;postgresql+asyncpg://scott:tiger@localhost/test&quot;</span><span class="p">,</span>
        <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">meta</span><span class="o">.</span><span class="n">create_all</span><span class="p">)</span>

        <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="n">t1</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;some name 1&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;some name 2&quot;</span><span class="p">}]</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
        <span class="c1"># select a Result, which will be delivered with buffered</span>
        <span class="c1"># results</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">t1</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;some name 1&quot;</span><span class="p">))</span>

        <span class="n">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">fetchall</span><span class="p">())</span>

    <span class="c1"># for AsyncEngine created in function scope, close and</span>
    <span class="c1"># clean-up pooled connections</span>
    <span class="k">await</span> <span class="n">engine</span><span class="o">.</span><span class="n">dispose</span><span class="p">()</span>


<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">async_main</span><span class="p">())</span></pre></div>
</div>
<p>上面的 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.run_sync" title="sqlalchemy.ext.asyncio.AsyncConnection.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.run_sync()</span></code></a> 可以用于调用特殊的DDL函数，例如 <a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.MetaData.create_all" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code></a>，这些函数不包括 awaitable 钩子。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>建议在使用 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> 对象的上下文范围将要超出范围并被垃圾回收的作用域中使用 <code class="docutils literal notranslate"><span class="pre">await</span></code> 调用 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.dispose" title="sqlalchemy.ext.asyncio.AsyncEngine.dispose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncEngine.dispose()</span></code></a> 方法，如上面例子中的 <code class="docutils literal notranslate"><span class="pre">async_main</span></code>
函数所示。这将确保由连接池保持打开的任何连接都在可等待上下文中正确地释放。与使用阻塞IO不同，由于没有机会调用``await``，所以 SQLAlchemy 无法在这些方法中适当地处理这些连接，如``__del__``或弱引用终结者中没有机会调用。未显式处理引擎超出作用域时可能会导致发出类似于运行时错误：事件循环已关闭的警告。</p>
</div>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> 也通过 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream" title="sqlalchemy.ext.asyncio.AsyncConnection.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.stream()</span></code></a> 方法特性提供了“流式”API。该结果对象使用服务器端光标，并提供一个异步/ await API，例如异步迭代器:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">async_result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">t1</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">async_result</span><span class="p">:</span>
        <span class="n">print</span><span class="p">(</span><span class="s2">&quot;row: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">row</span><span class="p">,))</span></pre></div>
</div>
</section>
<section id="orm">
<span id="asyncio-orm"></span><h2>概述 - ORM<a class="headerlink" href="#orm" title="Permalink to this heading">¶</a></h2>
<p>使用 <a class="reference internal" href="../../glossary.html#term-2.0-style"><span class="xref std std-term">2.0 style</span></a>，<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> 类提供了完整的 ORM 功能。</p>
<p>在使用的默认模式下，必须小心避免关于ORM关系和列属性的 <span class="xref std std-term">lazy loading</span> 或其他过期属性访问;以下一章 <a class="reference internal" href="#asyncio-orm-avoid-lazyloads"><span class="std std-ref">在使用 AsyncSession 时避免隐式 I/O</span></a> 详细说明了这一点。</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>单个 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> 实例**不能安全地在多个并发任务中使用**。请参阅 <a class="reference internal" href="#asyncio-concurrency"><span class="std std-ref">使用 AsyncSession 与并发任务</span></a> 和 <a class="reference internal" href="../session_basics.html#session-faq-threadsafe"><span class="std std-ref">Session 是线程安全的吗？_asyncio.AsyncSession 在并发任务中共享安全吗？</span></a> 讨论背景知识。</p>
</div>
<p>下面的示例演示了一个完整的示例，包括映射器和会话配置:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>

<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">ForeignKey</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">func</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">AsyncAttrs</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">async_sessionmaker</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">AsyncSession</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">DeclarativeBase</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">Mapped</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">mapped_column</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">relationship</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">selectinload</span>


<span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="n">AsyncAttrs</span><span class="p">,</span> <span class="n">DeclarativeBase</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span>

    <span class="n">id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">str</span><span class="p">]</span>
    <span class="n">create_date</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">server_default</span><span class="o">=</span><span class="n">func</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>
    <span class="n">bs</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">B</span><span class="p">]]</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;b&quot;</span>
    <span class="n">id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">a_id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;a.id&quot;</span><span class="p">))</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">str</span><span class="p">]</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">insert_objects</span><span class="p">(</span><span class="n">async_session</span><span class="p">:</span> <span class="n">async_sessionmaker</span><span class="p">[</span><span class="n">AsyncSession</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">async_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
            <span class="n">session</span><span class="o">.</span><span class="n">add_all</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">A</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="p">[</span><span class="n">B</span><span class="p">(),</span> <span class="n">B</span><span class="p">()],</span> <span class="n">data</span><span class="o">=</span><span class="s2">&quot;a1&quot;</span><span class="p">),</span>
                    <span class="n">A</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="p">[],</span> <span class="n">data</span><span class="o">=</span><span class="s2">&quot;a2&quot;</span><span class="p">),</span>
                    <span class="n">A</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="p">[</span><span class="n">B</span><span class="p">(),</span> <span class="n">B</span><span class="p">()],</span> <span class="n">data</span><span class="o">=</span><span class="s2">&quot;a3&quot;</span><span class="p">),</span>
                <span class="p">]</span>
            <span class="p">)</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">select_and_update_objects</span><span class="p">(</span>
    <span class="n">async_session</span><span class="p">:</span> <span class="n">async_sessionmaker</span><span class="p">[</span><span class="n">AsyncSession</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">async_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">selectinload</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">bs</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">a1</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">scalars</span><span class="p">():</span>
            <span class="n">print</span><span class="p">(</span><span class="n">a1</span><span class="p">)</span>
            <span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;created at: </span><span class="si">{</span><span class="n">a1</span><span class="o">.</span><span class="n">create_date</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">b1</span> <span class="ow">in</span> <span class="n">a1</span><span class="o">.</span><span class="n">bs</span><span class="p">:</span>
                <span class="n">print</span><span class="p">(</span><span class="n">b1</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

        <span class="n">a1</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">scalars</span><span class="p">()</span><span class="o">.</span><span class="n">one</span><span class="p">()</span>

        <span class="n">a1</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;new data&quot;</span>

        <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="c1"># access attribute subsequent to commit; this is what</span>
        <span class="c1"># expire_on_commit=False allows</span>
        <span class="n">print</span><span class="p">(</span><span class="n">a1</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

        <span class="c1"># alternatively, AsyncAttrs may be used to access any attribute</span>
        <span class="c1"># as an awaitable (new in 2.0.13)</span>
        <span class="k">for</span> <span class="n">b1</span> <span class="ow">in</span> <span class="k">await</span> <span class="n">a1</span><span class="o">.</span><span class="n">awaitable_attrs</span><span class="o">.</span><span class="n">bs</span><span class="p">:</span>
            <span class="n">print</span><span class="p">(</span><span class="n">b1</span><span class="p">)</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">async_main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span>
        <span class="s2">&quot;postgresql+asyncpg://scott:tiger@localhost/test&quot;</span><span class="p">,</span>
        <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># async_sessionmaker: a factory for new AsyncSession objects.</span>
    <span class="c1"># expire_on_commit - don&#39;t expire objects after transaction commit</span>
    <span class="n">async_session</span> <span class="o">=</span> <span class="n">async_sessionmaker</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="n">expire_on_commit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">)</span>

    <span class="k">await</span> <span class="n">insert_objects</span><span class="p">(</span><span class="n">async_session</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">select_and_update_objects</span><span class="p">(</span><span class="n">async_session</span><span class="p">)</span>

    <span class="c1"># for AsyncEngine created in function scope, close and</span>
    <span class="c1"># clean-up pooled connections</span>
    <span class="k">await</span> <span class="n">engine</span><span class="o">.</span><span class="n">dispose</span><span class="p">()</span>


<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">async_main</span><span class="p">())</span></pre><div class="code-annotations-key"></div></div>
</div>
<p>在上面的示例中，使用 <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a> 辅助程序来实例化 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>
对象，它提供了一组固定参数的 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> 对象的工厂，这些参数在这里包括将其与特定的数据库 URL 相关联的 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>。
然后将它传递给其他方法，在这些方法中，它可以在 Python 异步上下文管理器中使用 (即 <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with:</span></code> 语句)，以便在块结束时自动关闭；
这与调用 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close" title="sqlalchemy.ext.asyncio.AsyncSession.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a> 方法是相当的。</p>
<section id="asyncsession">
<span id="asyncio-concurrency"></span><h3>使用 AsyncSession 与并发任务<a class="headerlink" href="#asyncsession" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> 对象是一个**可变的、有状态的对象**，它表示一个**单独的处于状态的数据库事务**。使用 asyncio 与 Python 中的 API，例如 <code class="docutils literal notranslate"><span class="pre">asyncio.gather()</span></code>，
应该使用**每个单独任务一个单独的 <a href="#id3"><span class="problematic" id="id4">``</span></a>_asyncio.AsyncSession``**。</p>
<p>关于 <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> 和 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> 如何在并发工作负载中使用它们的一般描述，请参阅 <a class="reference internal" href="../session_basics.html#session-faq-threadsafe"><span class="std std-ref">Session 是线程安全的吗？_asyncio.AsyncSession 在并发任务中共享安全吗？</span></a>。</p>
</section>
<section id="asyncsession-i-o">
<span id="asyncio-orm-avoid-lazyloads"></span><h3>在使用 AsyncSession 时避免隐式 I/O<a class="headerlink" href="#asyncsession-i-o" title="Permalink to this heading">¶</a></h3>
<p>在传统的 asyncio 中，应用程序需要避免可以发生 I/O 的属性访问点。以下是可用于帮助此事的技术，其中许多在上面的示例中进行了说明。</p>
<ul class="simple">
<li><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs" title="sqlalchemy.ext.asyncio.AsyncAttrs"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncAttrs</span></code></a> 混入的属性（如懒加载关系、延迟列或表达式或过期属性访问）可以利用。当将其添加到特定类中或更一般地添加到 Declarative <code class="docutils literal notranslate"><span class="pre">Base</span></code> 超类中时，</p></li>
</ul>
<p>它提供了一个访问器 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs" title="sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncAttrs.awaitable_attrs</span></code></a>，该访问器以任何属性作为等待:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>

  <span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>

  <span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">AsyncAttrs</span>
  <span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">DeclarativeBase</span>
  <span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">Mapped</span>
  <span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">relationship</span>


  <span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="n">AsyncAttrs</span><span class="p">,</span> <span class="n">DeclarativeBase</span><span class="p">):</span>
      <span class="k">pass</span>


  <span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
      <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span>

      <span class="c1"># ... rest of mapping ...</span>

      <span class="n">bs</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">B</span><span class="p">]]</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">()</span>


  <span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
      <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;b&quot;</span>

      <span class="c1"># ... rest of mapping ...</span>

<span class="n">当懒加载未使用时</span><span class="err">，</span><span class="n">新加载的</span><span class="err">“</span> <span class="n">A</span><span class="err">”</span><span class="n">实例上的</span><span class="err">``</span><span class="n">A</span><span class="o">.</span><span class="n">bs</span><span class="err">``</span><span class="n">集合通常会使用</span> <span class="p">:</span><span class="n">term</span><span class="p">:</span><span class="err">`</span><span class="n">懒加载</span><span class="err">`，</span><span class="n">为了成功</span><span class="err">，</span><span class="n">通常需要向数据库发出</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span><span class="err">，</span><span class="n">这在</span> <span class="n">asyncio</span> <span class="n">下会失败</span><span class="err">，</span><span class="n">因为不允许隐式</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span><span class="err">。</span>
<span class="n">为了在</span> <span class="n">asyncio</span> <span class="n">下直接访问此属性而不需要任何预加载操作</span><span class="err">，</span><span class="n">可以将其作为</span> <span class="n">awaitable</span> <span class="n">访问</span><span class="err">，</span><span class="n">方法是在</span> <span class="p">:</span><span class="n">attr</span><span class="p">:</span><span class="err">`</span><span class="n">_asyncio</span><span class="o">.</span><span class="n">AsyncAttrs</span><span class="o">.</span><span class="n">awaitable_attrs</span><span class="err">`</span> <span class="n">前缀中命名</span><span class="p">::</span>

  <span class="n">a1</span> <span class="o">=</span> <span class="p">(</span><span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)))</span><span class="o">.</span><span class="n">one</span><span class="p">()</span>
  <span class="k">for</span> <span class="n">b1</span> <span class="ow">in</span> <span class="k">await</span> <span class="n">a1</span><span class="o">.</span><span class="n">awaitable_attrs</span><span class="o">.</span><span class="n">bs</span><span class="p">:</span>
      <span class="n">print</span><span class="p">(</span><span class="n">b1</span><span class="p">)</span>

<span class="p">:</span><span class="n">class</span><span class="p">:</span><span class="err">`</span><span class="n">_asyncio</span><span class="o">.</span><span class="n">AsyncAttrs</span><span class="err">`</span> <span class="n">混入为</span> <span class="p">:</span><span class="n">meth</span><span class="p">:</span><span class="err">`</span><span class="n">_asyncio</span><span class="o">.</span><span class="n">AsyncSession</span><span class="o">.</span><span class="n">run_sync</span><span class="err">`</span> <span class="n">方法所用的内部方法提供了一个简洁的外观</span><span class="err">。</span>

<span class="o">..</span> <span class="n">versionadded</span><span class="p">::</span> <span class="mf">2.0.13</span>

<span class="o">..</span> <span class="n">seealso</span><span class="p">::</span>

    <span class="p">:</span><span class="n">class</span><span class="p">:</span><span class="err">`</span><span class="n">_asyncio</span><span class="o">.</span><span class="n">AsyncAttrs</span><span class="err">`</span></pre><div class="code-annotations-key"></div></div>
</div>
<ul>
<li><p>集合可以替换为**仅写集合**，它们永远不会隐式地发出 I/O，方法是使用 SQLAlchemy 2.0 中的 <a class="reference internal" href="../large_collections.html#write-only-relationship"><span class="std std-ref">只写关系</span></a> 功能。使用此功能，永远不会从集合中读取数据，只能使用显式的查询语句来查询。请查看 <a class="reference internal" href="../examples.html#examples-asyncio"><span class="std std-ref">Asyncio集成</span></a> 中的 <code class="docutils literal notranslate"><span class="pre">async_orm_writeonly.py</span></code> 示例，以获取使用 asyncio 相关的写入仅集合的示例。使用写入仅集合，程序的行为简单并易于预测。然而，缺点是没有用于一次加载许多这些集合的内置系统，默认情况下必须手动执行。因此，很多点下面的小圆点针对的是在使用 asyncio 的传统懒加载关系时的具体技术，这需要更多的小心。</p></li>
<li><p>如果不使用 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs" title="sqlalchemy.ext.asyncio.AsyncAttrs"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncAttrs</span></code></a>，则应将关系声明为 <code class="docutils literal notranslate"><span class="pre">lazy=&quot;raise&quot;</span></code>，以便默认情况下不会尝试发出 SQL。为了加载集合，会使用 <span class="xref std std-term">eager loading</span> 代替。</p></li>
<li><p>最有用的 eager loading 策略是 <code class="xref py py-func docutils literal notranslate"><span class="pre">selectinload()</span></code> eager loader，在 <code class="xref py py-func docutils literal notranslate"><span class="pre">selectinload()</span></code> 的作用域内，它用于 eager
加载 <code class="docutils literal notranslate"><span class="pre">A.bs</span></code> 集合:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">selectinload</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">bs</span><span class="p">))</span></pre></div>
</div>
</li>
<li><p>在构建新对象时，<strong>集合始终分配一个默认的、空的集合</strong>，例如在上面的示例中的列表 <code class="docutils literal notranslate"><span class="pre">A(bs=[],</span> <span class="pre">data=&quot;a2&quot;)</span></code>：
这使得在刷新 <code class="docutils literal notranslate"><span class="pre">A</span></code> 时，该对象上的 <code class="docutils literal notranslate"><span class="pre">.bs</span></code> 集合可以存在并且可读；否则，当刷新 <code class="docutils literal notranslate"><span class="pre">A</span></code> 时，<code class="docutils literal notranslate"><span class="pre">.bs</span></code> 将不会加载并且访问将引发错误。</p></li>
<li><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> 配置为使用 <code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.expire_on_commit</span></code> 设置为 False，以便我们可以在调用 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.commit" title="sqlalchemy.ext.asyncio.AsyncSession.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.commit()</span></code></a> 后访问对象上的属性，例如下面的一行，其中我们访问一个属性:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">async_session</span> <span class="o">=</span> <span class="n">AsyncSession</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="n">expire_on_commit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># sessionmaker version</span>
<span class="n">async_session</span> <span class="o">=</span> <span class="n">async_sessionmaker</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="n">expire_on_commit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="k">async</span> <span class="k">with</span> <span class="n">async_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>

    <span class="n">a1</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">scalars</span><span class="p">()</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

    <span class="c1"># commit would normally expire all attributes</span>
    <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="c1"># access attribute subsequent to commit; this is what</span>
    <span class="c1"># expire_on_commit=False allows</span>
    <span class="n">print</span><span class="p">(</span><span class="n">a1</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></pre></div>
</div>
</li>
</ul>
<p>其他准则包括：</p>
<ul>
<li><p>应该避免使用 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expire" title="sqlalchemy.ext.asyncio.AsyncSession.expire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.expire()</span></code></a> 方法，而应该使用 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.refresh" title="sqlalchemy.ext.asyncio.AsyncSession.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.refresh()</span></code></a>；<strong>如果</strong> 确实需要到期。通常情况下不应需要到期，应该将 <code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.expire_on_commit</span></code> 正确设置为 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p></li>
<li><p>懒加载的关系可以使用 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.refresh" title="sqlalchemy.ext.asyncio.AsyncSession.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.refresh()</span></code></a> 在 asyncio 中加载 <a href="#id5"><span class="problematic" id="id6">**</span></a>如果**在:paramref:<cite>_orm.Session.refresh.attribute_names</cite> 参数中显式命名了要访问的属性名。</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.4: </span>Added support for
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.refresh" title="sqlalchemy.ext.asyncio.AsyncSession.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.refresh()</span></code></a> and the underlying
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code> method to force lazy-loaded relationships
to load, if they are named explicitly in the
<code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.refresh.attribute_names</span></code> parameter.
In previous versions, the relationship would be silently skipped even
if named in the parameter.</p>
</div>
</li>
<li><p>应该避免使用 <span class="xref std std-ref">unitofwork_cascades</span> 中的 <code class="docutils literal notranslate"><span class="pre">all</span></code> 级联选项，而应该显式列出所需的级联特性。`` all`` 级联选项意味着包括 <a class="reference internal" href="../cascades.html#cascade-refresh-expire"><span class="std std-ref">刷新-过期</span></a> 设置在内，这意味着 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.refresh" title="sqlalchemy.ext.asyncio.AsyncSession.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.refresh()</span></code></a> 方法将对相关对象上的属性到期，但不一定会在假定未配置饥饿加载的情况下刷新这些相关对象，即使它们已经到期了。</p></li>
<li><p><a class="reference internal" href="../queryguide/columns.html#sqlalchemy.orm.deferred" title="sqlalchemy.orm.deferred"><code class="xref py py-func docutils literal notranslate"><span class="pre">deferred()</span></code></a> 列，如果使用的话，应该使用适当的加载程序选项，除了在  <code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code> 构造中注明的以外。请参阅 <span class="xref std std-ref">orm_queryguide_column_deferral</span>，了解关于延迟列加载的背景知识。</p></li>
</ul>
<ul class="simple" id="dynamic-asyncio">
<li><p>描述在 <a class="reference internal" href="../large_collections.html#dynamic-relationship"><span class="std std-ref">动态关系加载器</span></a> 中的“dynamic”关系加载程序策略默认情况下不与为 asyncio 而生的方法兼容。只有在 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync" title="sqlalchemy.ext.asyncio.AsyncSession.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.run_sync()</span></code></a> 方法被描述的异步上下文中调用时，或者使用其“<cite>.statement`</cite> ”属性获取常规选择时，它才能直接使用。
<code class="docutils literal notranslate"><span class="pre">_asyncio.AsyncSession.run_sync</span></code>。此方法，例如.，异步 ORM 内容的应用程序可以将数据库相关方法打包到功能中，该功能使用 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync" title="sqlalchemy.ext.asyncio.AsyncSession.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.run_sync()</span></code></a> 调用。</p></li>
</ul>
<p>修改上面的例子，如果我们没有使用 <code class="xref py py-func docutils literal notranslate"><span class="pre">selectinload()</span></code> 来处理 <code class="docutils literal notranslate"><span class="pre">A.bs</span></code> 集合，我们可以在不同函数的分离函数中完成具体的访问:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">AsyncSession</span><span class="p">,</span> <span class="n">create_async_engine</span>


<span class="k">def</span> <span class="nf">fetch_and_update_objects</span><span class="p">(</span><span class="n">session</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;run traditional sync-style ORM code in a function that will be</span>
<span class="sd">    invoked within an awaitable.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># the session object here is a traditional ORM Session.</span>
    <span class="c1"># all features are available here including legacy Query use.</span>

    <span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">a1</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">scalars</span><span class="p">():</span>
        <span class="n">print</span><span class="p">(</span><span class="n">a1</span><span class="p">)</span>

        <span class="c1"># lazy loads</span>
        <span class="k">for</span> <span class="n">b1</span> <span class="ow">in</span> <span class="n">a1</span><span class="o">.</span><span class="n">bs</span><span class="p">:</span>
            <span class="n">print</span><span class="p">(</span><span class="n">b1</span><span class="p">)</span>

    <span class="c1"># legacy Query use</span>
    <span class="n">a1</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

    <span class="n">a1</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;new data&quot;</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">async_main</span><span class="p">():</span>
    <span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span>
        <span class="s2">&quot;postgresql+asyncpg://scott:tiger@localhost/test&quot;</span><span class="p">,</span>
        <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">drop_all</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">AsyncSession</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
            <span class="n">session</span><span class="o">.</span><span class="n">add_all</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">A</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="p">[</span><span class="n">B</span><span class="p">(),</span> <span class="n">B</span><span class="p">()],</span> <span class="n">data</span><span class="o">=</span><span class="s2">&quot;a1&quot;</span><span class="p">),</span>
                    <span class="n">A</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="p">[</span><span class="n">B</span><span class="p">()],</span> <span class="n">data</span><span class="o">=</span><span class="s2">&quot;a2&quot;</span><span class="p">),</span>
                    <span class="n">A</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="p">[</span><span class="n">B</span><span class="p">(),</span> <span class="n">B</span><span class="p">()],</span> <span class="n">data</span><span class="o">=</span><span class="s2">&quot;a3&quot;</span><span class="p">),</span>
                <span class="p">]</span>
            <span class="p">)</span>

        <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">fetch_and_update_objects</span><span class="p">)</span>

        <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="c1"># for AsyncEngine created in function scope, close and</span>
    <span class="c1"># clean-up pooled connections</span>
    <span class="k">await</span> <span class="n">engine</span><span class="o">.</span><span class="n">dispose</span><span class="p">()</span>


<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">async_main</span><span class="p">())</span></pre></div>
</div>
<p>在上面的示例中，用 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> 代替 <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> 以实现异步任务。使用 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.params.run_sync" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">AsyncSession.run_sync</span></code></a> 包装处理使用 ORM 功能，使 ORM 功能为异步可用。</p>
<dl>
<dt>使用 Session 退出异步模式，创建新的运行时 numpy 的异步环境    def my_after_commit(session):</dt><dd><blockquote>
<div><blockquote>
<div><p>print(“after commit!”)</p>
</div></blockquote>
<dl>
<dt>async def go():</dt><dd><p>await session.execute(text(“select 1”))
await session.commit()</p>
<p>await session.close()
await engine.dispose()</p>
</dd>
</dl>
<p>asyncio.run(go())</p>
</div></blockquote>
<p>输出：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>before commit!
execute from event
after commit!</pre></div>
</div>
</dd>
</dl>
<ul>
<li><p><strong>ORM Events on async_sessionmaker（async_sessionmaker 上的 ORM 事件）</strong></p>
<p>对于这种情况，我们将 <code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code> 作为事件目标，然后将它赋给 <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a>，
并使用 <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker.params.sync_session_class" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">async_sessionmaker.sync_session_class</span></code></a> 参数来指定对应的同步 session 类：：</p>
<blockquote>
<div><p>import asyncio</p>
<p>from sqlalchemy import event
from sqlalchemy.ext.asyncio import async_sessionmaker
from sqlalchemy.orm import sessionmaker</p>
<p>sync_maker = sessionmaker()
maker = async_sessionmaker(sync_session_class=sync_maker)</p>
<p>&#64;event.listens_for(sync_maker, “before_commit”)
def before_commit(session):</p>
<blockquote>
<div><p>print(“before commit”)</p>
</div></blockquote>
<dl>
<dt>async def main():</dt><dd><p>async_session = maker()</p>
<p>await async_session.commit()</p>
</dd>
</dl>
<p>asyncio.run(main())</p>
</div></blockquote>
<p>输出：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>before commit</pre></div>
</div>
</li>
</ul>
<aside class="topic">
<p class="topic-title">asyncio 和事件，两个对立面</p>
<p>根据其特性，SQLAlchemy 事件将在特定的 SQLAlchemy 进程**内部**发生，
也就是说，事件总会在用户端代码调用某个特定的 SQLAlchemy API 之后、这个 API 的某个内部部分之前发生。</p>
<p>而 asyncio 扩展的体系结构与此相反，它发生在 SQLAlchemy 的常规从用户端 API 到DBAPI函数的流程**外部**。</p>
<p>消息流可以视为如下：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span> SQLAlchemy    SQLAlchemy        SQLAlchemy          SQLAlchemy   plain
  asyncio      asyncio           ORM/Core            asyncio      asyncio
  (public      (internal)                            (internal)
  facing)
-------------|------------|------------------------|-----------|------------
asyncio API  |            |                        |           |
call  -&gt;     |            |                        |           |
             |  -&gt;  -&gt;    |                        |  -&gt;  -&gt;   |
             |~~~~~~~~~~~~| sync API call -&gt;       |~~~~~~~~~~~|
             | asyncio    |  event hooks -&gt;        | sync      |
             | to         |   invoke action -&gt;     | to        |
             | sync       |    event hooks -&gt;      | asyncio   |
             | (greenlet) |     dialect -&gt;         | (leave    |
             |~~~~~~~~~~~~|      event hooks -&gt;    | greenlet) |
             |  -&gt;  -&gt;    |       sync adapted     |~~~~~~~~~~~|
             |            |               DBAPI -&gt; |  -&gt;  -&gt;   | asyncio
             |            |                        |           | driver -&gt; database</pre></div>
</div>
<p>在上面的流程中，API 调用总是从 asyncio 开始，流经同步 API，最后以 asyncio 结束，然后结果通过相反的方式传播回来。
在这之间，首先将消息转换为同步类型 API 使用，然后再转换回来成为异步类型。
然后事件钩子位于“同步类型 API 使用”的中间位置。
由此得出的结论是，在事件钩子中呈现的 API 发生在由 asyncio API 请求适配为同步后的过程中，
而向数据库 API 发送的输出消息将被透明地转换为 asyncio。</p>
</aside>
</section>
<section id="asyncio-events-run-async">
<span id="id7"></span><h3>在连接池和其他事件中使用仅可等待的驱动方法<a class="headerlink" href="#asyncio-events-run-async" title="Permalink to this heading">¶</a></h3>
<p>正如在上一节中所讨论的那样，事件处理程序（例如那些面向 <a class="reference internal" href="../../core/events.html#sqlalchemy.events.PoolEvents" title="sqlalchemy.events.PoolEvents"><code class="xref py py-class docutils literal notranslate"><span class="pre">PoolEvents</span></code></a> 事件处理程序）接收到一个同步类型的“DBAPI”连接，
该连接是 SQLAlchemy asyncio dialects 提供的包装对象，用于将底层的 asyncio“driver”连接转换为可以被 SQLAlchemy 内部使用的连接。
当用户定义的实现需要直接使用终极“driver”连接来使用其可等待方法（即在该驱动程序连接上使用仅可等待方法）时，就会出现一种特殊情况。举个例子，
asyncpg 驱动程序提供了 <code class="docutils literal notranslate"><span class="pre">.set_type_codec()</span></code> 方法。</p>
<p>为了应对这种情况，SQLAlchemy 的 <a class="reference internal" href="../../core/internals.html#sqlalchemy.engine.AdaptedConnection" title="sqlalchemy.engine.AdaptedConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AdaptedConnection</span></code></a> 类提供了一个方法 <a class="reference internal" href="../../core/internals.html#sqlalchemy.engine.AdaptedConnection.run_async" title="sqlalchemy.engine.AdaptedConnection.run_async"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AdaptedConnection.run_async()</span></code></a>，
该方法允许在事件处理程序或其他 SQLAlchemy 内部的“同步”上下文中调用可等待的函数。该方法直接类比于 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.run_sync" title="sqlalchemy.ext.asyncio.AsyncConnection.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.run_sync()</span></code></a>，
后者允许同步风格的方法在异步环境下运行。</p>
<p>应将 <a class="reference internal" href="../../core/internals.html#sqlalchemy.engine.AdaptedConnection.run_async" title="sqlalchemy.engine.AdaptedConnection.run_async"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AdaptedConnection.run_async()</span></code></a> 传递一个函数作为参数，
该函数将接受最内部的“driver”连接作为单个参数，并返回一个可等待对象，
该对象将由 <a class="reference internal" href="../../core/internals.html#sqlalchemy.engine.AdaptedConnection.run_async" title="sqlalchemy.engine.AdaptedConnection.run_async"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AdaptedConnection.run_async()</span></code></a> 方法调用。给定函数本身不需要声明为 <code class="docutils literal notranslate"><span class="pre">async</span></code>；
它可以是 Python <code class="docutils literal notranslate"><span class="pre">lambda:</span></code>，因为返回的可等待值将在返回后被调用。:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">event</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>


<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">engine</span><span class="o">.</span><span class="n">sync_engine</span><span class="p">,</span> <span class="s2">&quot;connect&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">register_custom_types</span><span class="p">(</span><span class="n">dbapi_connection</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="n">dbapi_connection</span><span class="o">.</span><span class="n">run_async</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">connection</span><span class="p">:</span> <span class="n">connection</span><span class="o">.</span><span class="n">set_type_codec</span><span class="p">(</span>
            <span class="s2">&quot;MyCustomType&quot;</span><span class="p">,</span>
            <span class="n">encoder</span><span class="p">,</span>
            <span class="n">decoder</span><span class="p">,</span>  <span class="c1"># ...</span>
        <span class="p">)</span>
    <span class="p">)</span></pre></div>
</div>
<p>以上，传递给“register_custom_types”事件处理程序的对象是 <a class="reference internal" href="../../core/internals.html#sqlalchemy.engine.AdaptedConnection" title="sqlalchemy.engine.AdaptedConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AdaptedConnection</span></code></a> 的一个实例，
后者为基础的异步类型驱动程级连接对象提供了类似于 DBAPI 的接口。然后，<a class="reference internal" href="../../core/internals.html#sqlalchemy.engine.AdaptedConnection.run_async" title="sqlalchemy.engine.AdaptedConnection.run_async"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AdaptedConnection.run_async()</span></code></a> 方法
提供了一个可等待环境，其中底层的驱动程序级连接可能会被操作。</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.30.</span></p>
</div>
</section>
</section>
<section id="asyncio">
<h2>使用多个 asyncio 事件循环<a class="headerlink" href="#asyncio" title="Permalink to this heading">¶</a></h2>
<p>一个使用了多个事件循环的应用程序（例如将 asyncio 与多线程结合使用的非常不寻常的情况），
在使用默认池实现时，不应在不同的事件循环之间共享同一个 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>。</p>
<p>如果必须将 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> 从一个事件循环传递到另一个事件循环，
则应该在它被重用在一个新事件循环上之前调用 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.dispose" title="sqlalchemy.ext.asyncio.AsyncEngine.dispose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncEngine.dispose()</span></code></a> 方法。
如果不这样做，可能会导致类似于“Task &lt;Task pending …&gt; got Future attached to a different loop”的运行时错误。</p>
<p>如果必须在不同的循环之间共享相同的引擎，那么应该将它配置为使用 <a class="reference internal" href="../../core/pooling.html#sqlalchemy.pool.NullPool" title="sqlalchemy.pool.NullPool"><code class="xref py py-class docutils literal notranslate"><span class="pre">NullPool</span></code></a> 来禁用池，
以防止引擎使用任何一个连接多次：</p>
<blockquote>
<div><p>from sqlalchemy.ext.asyncio import create_async_engine
from sqlalchemy.pool import NullPool</p>
<dl class="simple">
<dt>engine = create_async_engine(</dt><dd><p>“postgresql+asyncpg://user:pass&#64;host/dbname”,
poolclass=NullPool,</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
</section>
<section id="asyncio-scoped-session-asyncio-scoped-session">
<span id="asyncio-scoped-session"></span><h2>使用 asyncio scoped session（使用 asyncio scoped session）<a class="headerlink" href="#asyncio-scoped-session-asyncio-scoped-session" title="Permalink to this heading">¶</a></h2>
<p>“scoped session” 模式在 SQLAlchemy 中的使用方式是 <a class="reference internal" href="../contextual.html#sqlalchemy.orm.scoped_session" title="sqlalchemy.orm.scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">scoped_session</span></code></a> 对象，在 asyncio 中也有相应的版本，称为使用了适配器的 <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a>。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>SQLAlchemy 通常不推荐使用“scoped”模式进行新开发，因为它依赖于一个可以被修改的全局状态，在线程或任务完成后必须在显式地被拆除。
特别是在使用 asyncio 时，将 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> 直接传递给需要它的可等待函数，很可能是一个更好的想法。</p>
</div>
<p>当使用 <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> 时，由于在 asyncio 上下文中不存在“线程本地”概念，
所以必须在构造函数中提供“scopefunc”参数。下面的示例说明了使用 <code class="docutils literal notranslate"><span class="pre">asyncio.current_task()</span></code> 函数的情况：</p>
<blockquote>
<div><p>from asyncio import current_task</p>
<dl class="simple">
<dt>from sqlalchemy.ext.asyncio import (</dt><dd><p>async_scoped_session,
async_sessionmaker,</p>
</dd>
</dl>
<p>)</p>
<dl class="simple">
<dt>async_session_factory = async_sessionmaker(</dt><dd><p>some_async_engine,
expire_on_commit=False,</p>
</dd>
</dl>
<p>)
AsyncScopedSession = async_scoped_session(</p>
<blockquote>
<div><p>async_session_factory,
scopefunc=current_task,</p>
</div></blockquote>
<p>)
some_async_session = AsyncScopedSession()</p>
</div></blockquote>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>由 <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> 使用的“scopefunc”会在任务中**任意多次调用**，
每次访问底层 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> 时都会调用一次。因此，函数必须是**幂等**和轻量级的，
不得尝试创建或更改任何状态（例如建立回调等）。</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>使用“当前任务”作为作为上下文的“关键字”需要从最外层可等待对象中调用 <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.remove" title="sqlalchemy.ext.asyncio.async_scoped_session.remove"><code class="xref py py-meth docutils literal notranslate"><span class="pre">async_scoped_session.remove()</span></code></a> 方法，
以确保在任务完成时从注册表中删除该键，否则，任务句柄以及 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> 将留在内存中，从而实际上创建了内存泄漏。
参见下面的示例，展示了正确使用 <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.remove" title="sqlalchemy.ext.asyncio.async_scoped_session.remove"><code class="xref py py-meth docutils literal notranslate"><span class="pre">async_scoped_session.remove()</span></code></a> 方法的方法。</p>
</div>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> 包括了相似于 <a class="reference internal" href="../contextual.html#sqlalchemy.orm.scoped_session" title="sqlalchemy.orm.scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">scoped_session</span></code></a> 的**代理行为**，因此它可以直接被视为 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>，
需要注意的是，对于方法（包括 <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.remove" title="sqlalchemy.ext.asyncio.async_scoped_session.remove"><code class="xref py py-meth docutils literal notranslate"><span class="pre">async_scoped_session.remove()</span></code></a> 方法）来说，通常需要使用一般的 <code class="docutils literal notranslate"><span class="pre">await</span></code> 关键字。</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.19.</span></p>
</div>
</section>
<section id="inspector">
<span id="asyncio-inspector"></span><h2>使用 Inspector 检查模式对象<a class="headerlink" href="#inspector" title="Permalink to this heading">¶</a></h2>
<p>SQLAlchemy 尚未提供 asyncio 版本的 <code class="xref py py-class docutils literal notranslate"><span class="pre">Inspector`（介绍参见</span> <span class="pre">:ref:`metadata_reflection_inspector</span></code>），
但是，现有的接口可以在 asyncio 上下文中使用，方法是利用 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> 的 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.run_sync" title="sqlalchemy.ext.asyncio.AsyncConnection.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.run_sync()</span></code></a> 方法：</p>
<blockquote>
<div><p>import asyncio</p>
<p>from sqlalchemy import inspect
from sqlalchemy.ext.asyncio import create_async_engine</p>
<p>engine = create_async_engine(“postgresql+asyncpg://scott:tiger&#64;localhost/test”)</p>
<dl class="simple">
<dt>def use_inspector(conn):</dt><dd><p>inspector = inspect(conn)
# use the inspector
print(inspector.get_view_names())
# return any value to the caller
return inspector.get_table_names()</p>
</dd>
<dt>async def async_main():</dt><dd><dl class="simple">
<dt>async with engine.connect() as conn:</dt><dd><p>tables = await conn.run_sync(use_inspector)</p>
</dd>
</dl>
</dd>
</dl>
<p>asyncio.run(async_main())</p>
</div></blockquote>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../core/reflection.html#metadata-reflection"><span class="std std-ref">反射数据库对象</span></a></p>
<p><span class="xref std std-ref">inspection_toplevel</span></p>
</div>
</section>
<section id="api">
<h2>引擎 API 文档<a class="headerlink" href="#api" title="Permalink to this heading">¶</a></h2>
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_engine_from_config"><span class="sig-name descname">async_engine_from_config</span></a>(configuration[, prefix], **kwargs)</p></td>
<td><p>Create a new AsyncEngine instance using a configuration dictionary.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><span class="sig-name descname">AsyncConnection</span></a></p></td>
<td><p>An asyncio proxy for a <code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><span class="sig-name descname">AsyncEngine</span></a></p></td>
<td><p>An asyncio proxy for a <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction"><span class="sig-name descname">AsyncTransaction</span></a></p></td>
<td><p>An asyncio proxy for a <code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.create_async_engine"><span class="sig-name descname">create_async_engine</span></a>(url, **kw)</p></td>
<td><p>Create a new async engine instance.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.create_async_pool_from_url"><span class="sig-name descname">create_async_pool_from_url</span></a>(url, **kwargs)</p></td>
<td><p>Create a new async engine instance.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.create_async_engine">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">create_async_engine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">URL</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><span class="pre">AsyncEngine</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.create_async_engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new async engine instance.</p>
<p>Arguments passed to <a class="reference internal" href="#sqlalchemy.ext.asyncio.create_async_engine" title="sqlalchemy.ext.asyncio.create_async_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_async_engine()</span></code></a> are mostly
identical to those passed to the <code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code> function.
The specified dialect must be an asyncio-compatible dialect
such as <a class="reference internal" href="../../dialects/postgresql.html#dialect-postgresql-asyncpg"><span class="std std-ref">asyncpg</span></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.ext.asyncio.create_async_engine.params.async_creator"></span><strong>async_creator</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.create_async_engine.params.async_creator">¶</a> – <p>an async callable which returns a driver-level
asyncio connection. If given, the function should take no arguments,
and return a new asyncio connection from the underlying asyncio
database driver; the connection will be wrapped in the appropriate
structures to be used with the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>.   Note that the
parameters specified in the URL are not applied here, and the creator
function should use its own connection parameters.</p>
<p>This parameter is the asyncio equivalent of the
<code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.creator</span></code> parameter of the
<code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code> function.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.16.</span></p>
</div>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_engine_from_config">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">async_engine_from_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'sqlalchemy.'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.engine.AsyncEngine"><span class="pre">AsyncEngine</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_engine_from_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new AsyncEngine instance using a configuration dictionary.</p>
<p>This function is analogous to the <code class="xref py py-func docutils literal notranslate"><span class="pre">engine_from_config()</span></code> function
in SQLAlchemy Core, except that the requested dialect must be an
asyncio-compatible dialect such as <a class="reference internal" href="../../dialects/postgresql.html#dialect-postgresql-asyncpg"><span class="std std-ref">asyncpg</span></a>.
The argument signature of the function is identical to that
of <code class="xref py py-func docutils literal notranslate"><span class="pre">engine_from_config()</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.29.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.create_async_pool_from_url">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">create_async_pool_from_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">URL</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><span class="pre">Pool</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.create_async_pool_from_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new async engine instance.</p>
<p>Arguments passed to <a class="reference internal" href="#sqlalchemy.ext.asyncio.create_async_pool_from_url" title="sqlalchemy.ext.asyncio.create_async_pool_from_url"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_async_pool_from_url()</span></code></a> are mostly
identical to those passed to the <code class="xref py py-func docutils literal notranslate"><span class="pre">create_pool_from_url()</span></code> function.
The specified dialect must be an asyncio-compatible dialect
such as <a class="reference internal" href="../../dialects/postgresql.html#dialect-postgresql-asyncpg"><span class="std std-ref">asyncpg</span></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.10.</span></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncEngine</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="Permalink to this definition">¶</a></dt>
<dd><p>An asyncio proxy for a <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code>.</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> is acquired using the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.create_async_engine" title="sqlalchemy.ext.asyncio.create_async_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_async_engine()</span></code></a> function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+asyncpg://user:pass@host/dbname&quot;</span><span class="p">)</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.begin"><span class="sig-name descname">begin()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.clear_compiled_cache"><span class="sig-name descname">clear_compiled_cache()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.connect"><span class="sig-name descname">connect()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.dialect"><span class="sig-name descname">dialect</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.dispose"><span class="sig-name descname">dispose()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.driver"><span class="sig-name descname">driver</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.echo"><span class="sig-name descname">echo</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.engine"><span class="sig-name descname">engine</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.execution_options"><span class="sig-name descname">execution_options()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.get_execution_options"><span class="sig-name descname">get_execution_options()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.name"><span class="sig-name descname">name</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.pool"><span class="sig-name descname">pool</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.raw_connection"><span class="sig-name descname">raw_connection()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.sync_engine"><span class="sig-name descname">sync_engine</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.update_execution_options"><span class="sig-name descname">update_execution_options()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.url"><span class="sig-name descname">url</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.ProxyComparable</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnectable</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.begin">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">begin</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">AsyncIterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.engine.AsyncConnection"><span class="pre">AsyncConnection</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a context manager which when entered will deliver an
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> with an
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a> established.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">async_engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">text</span><span class="p">(</span><span class="s2">&quot;insert into table (x, y, z) values (1, 2, 3)&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;my_special_procedure(5)&quot;</span><span class="p">))</span></pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.clear_compiled_cache">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">clear_compiled_cache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.clear_compiled_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the compiled cache associated with the dialect.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</div>
<p>This applies <strong>only</strong> to the built-in cache that is established
via the <code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.query_cache_size</span></code> parameter.
It will not impact any dictionary caches that were passed via the
<code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.query_cache</span></code> parameter.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.connect">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.engine.AsyncConnection"><span class="pre">AsyncConnection</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> object.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> will procure a database
connection from the underlying connection pool when it is entered
as an async context manager:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">async_engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">user_table</span><span class="p">))</span></pre></div>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> may also be started outside of a
context manager by invoking its <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.start" title="sqlalchemy.ext.asyncio.AsyncConnection.start"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.start()</span></code></a>
method.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.dialect">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">dialect</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.dialect" title="Permalink to this definition">¶</a></dt>
<dd><p>Proxy for the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Engine.dialect</span></code> attribute
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.dispose">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dispose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">close</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.dispose" title="Permalink to this definition">¶</a></dt>
<dd><p>Dispose of the connection pool used by this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncEngine.dispose.params.close"></span><strong>close</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.dispose.params.close">¶</a> – <p>if left at its default of <code class="docutils literal notranslate"><span class="pre">True</span></code>, has the
effect of fully closing all <strong>currently checked in</strong>
database connections.  Connections that are still checked out
will <strong>not</strong> be closed, however they will no longer be associated
with this <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code>,
so when they are closed individually, eventually the
<a class="reference internal" href="../../core/pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> which they are associated with will
be garbage collected and they will be closed out fully, if
not already closed on checkin.</p>
<p>If set to <code class="docutils literal notranslate"><span class="pre">False</span></code>, the previous connection pool is de-referenced,
and otherwise not touched in any way.</p>
</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.dispose()</span></code></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.driver">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">driver</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.driver" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver name of the <a class="reference internal" href="../../core/internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.interfaces.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a>
in use by this <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.echo">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">echo</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.echo" title="Permalink to this definition">¶</a></dt>
<dd><p>When <code class="docutils literal notranslate"><span class="pre">True</span></code>, enable log output for this element.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</div>
<p>This has the effect of setting the Python logging level for the namespace
of this element’s class and object reference.  A value of boolean <code class="docutils literal notranslate"><span class="pre">True</span></code>
indicates that the loglevel <code class="docutils literal notranslate"><span class="pre">logging.INFO</span></code> will be set for the logger,
whereas the string value <code class="docutils literal notranslate"><span class="pre">debug</span></code> will set the loglevel to
<code class="docutils literal notranslate"><span class="pre">logging.DEBUG</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.engine">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">engine</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns this <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</div>
<p>Used for legacy schemes that accept <code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code> /
<code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code> objects within the same variable.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.execution_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">execution_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.engine.AsyncEngine"><span class="pre">AsyncEngine</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.execution_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> that will provide
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> objects with the given execution
options.</p>
<p>Proxied from <code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code>.  See that
method for details.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.get_execution_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">get_execution_options</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_ExecuteOptions</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.get_execution_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the non-SQL options which will take effect during execution.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.name">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.name" title="Permalink to this definition">¶</a></dt>
<dd><p>String name of the <a class="reference internal" href="../../core/internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.interfaces.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a>
in use by this <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.pool">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">pool</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Proxy for the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Engine.pool</span></code> attribute
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.raw_connection">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">raw_connection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/pooling.html#sqlalchemy.pool.PoolProxiedConnection" title="sqlalchemy.pool.PoolProxiedConnection"><span class="pre">PoolProxiedConnection</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.raw_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a “raw” DBAPI connection from the connection pool.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../core/connections.html#dbapi-connections"><span class="std std-ref">使用驱动程序 SQL 和原始 DBAPI 连接</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.sync_engine">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">sync_engine</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Engine</span></em><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.sync_engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Reference to the sync-style <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code> this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> proxies requests towards.</p>
<p>This instance can be used as an event target.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">asyncio_events</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.update_execution_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">update_execution_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.update_execution_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the default execution_options dictionary
of this <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</div>
<p>The given keys/values in **opt are added to the
default execution options that will be used for
all connections.  The initial contents of this dictionary
can be sent via the <code class="docutils literal notranslate"><span class="pre">execution_options</span></code> parameter
to <code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.url">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">url</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.url" title="Permalink to this definition">¶</a></dt>
<dd><p>Proxy for the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Engine.url</span></code> attribute
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncConnection</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="Permalink to this definition">¶</a></dt>
<dd><p>An asyncio proxy for a <code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code>.</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> is acquired using the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.connect" title="sqlalchemy.ext.asyncio.AsyncEngine.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncEngine.connect()</span></code></a>
method of <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+asyncpg://user:pass@host/dbname&quot;</span><span class="p">)</span>

<span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">table</span><span class="p">))</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.aclose"><span class="sig-name descname">aclose()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.begin"><span class="sig-name descname">begin()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.begin_nested"><span class="sig-name descname">begin_nested()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.closed"><span class="sig-name descname">closed</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.commit"><span class="sig-name descname">commit()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.connection"><span class="sig-name descname">connection</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.default_isolation_level"><span class="sig-name descname">default_isolation_level</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.dialect"><span class="sig-name descname">dialect</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.exec_driver_sql"><span class="sig-name descname">exec_driver_sql()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.execute"><span class="sig-name descname">execute()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.execution_options"><span class="sig-name descname">execution_options()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_nested_transaction"><span class="sig-name descname">get_nested_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_raw_connection"><span class="sig-name descname">get_raw_connection()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_transaction"><span class="sig-name descname">get_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.in_nested_transaction"><span class="sig-name descname">in_nested_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.in_transaction"><span class="sig-name descname">in_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.info"><span class="sig-name descname">info</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.invalidate"><span class="sig-name descname">invalidate()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.invalidated"><span class="sig-name descname">invalidated</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.rollback"><span class="sig-name descname">rollback()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.run_sync"><span class="sig-name descname">run_sync()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.scalar"><span class="sig-name descname">scalar()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.scalars"><span class="sig-name descname">scalars()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.start"><span class="sig-name descname">start()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream"><span class="sig-name descname">stream()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream_scalars"><span class="sig-name descname">stream_scalars()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.sync_connection"><span class="sig-name descname">sync_connection</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.sync_engine"><span class="sig-name descname">sync_engine</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.ProxyComparable</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.StartableContext</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnectable</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.aclose">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aclose</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.aclose" title="Permalink to this definition">¶</a></dt>
<dd><p>A synonym for <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.close" title="sqlalchemy.ext.asyncio.AsyncConnection.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.close()</span></code></a>.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.aclose" title="sqlalchemy.ext.asyncio.AsyncConnection.aclose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.aclose()</span></code></a> name is specifically
to support the Python standard library <code class="docutils literal notranslate"><span class="pre">&#64;contextlib.aclosing</span></code>
context manager function.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.20.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.begin">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">begin</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.engine.AsyncTransaction"><span class="pre">AsyncTransaction</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin a transaction prior to autobegin occurring.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.begin_nested">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">begin_nested</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.engine.AsyncTransaction"><span class="pre">AsyncTransaction</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.begin_nested" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin a nested transaction and return a transaction handle.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a>.</p>
<p>This has the effect of also rolling back the transaction if one
is in place.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.closed">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">closed</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.closed" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if this connection is closed.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.commit">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit the transaction that is currently in progress.</p>
<p>This method commits the current transaction if one has been started.
If no transaction was started, the method has no effect, assuming
the connection is in a non-invalidated state.</p>
<p>A transaction is begun on a <code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code> automatically
whenever a statement is first executed, or when the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code> method is called.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.connection">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">connection</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Not implemented for async; call
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_raw_connection" title="sqlalchemy.ext.asyncio.AsyncConnection.get_raw_connection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.get_raw_connection()</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.default_isolation_level">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">default_isolation_level</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.default_isolation_level" title="Permalink to this definition">¶</a></dt>
<dd><p>The initial-connection time isolation level associated with the
<a class="reference internal" href="../../core/internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> in use.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> class.</p>
</div>
<p>This value is independent of the
<code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.isolation_level</span></code> and
<code class="xref py py-paramref docutils literal notranslate"><span class="pre">Engine.execution_options.isolation_level</span></code> execution
options, and is determined by the <a class="reference internal" href="../../core/internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> when the
first connection is created, by performing a SQL query against the
database for the current isolation level before any additional commands
have been emitted.</p>
<p>Calling this accessor does not invoke any new SQL queries.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_isolation_level()</span></code>
- view current actual isolation level</p>
<p><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.isolation_level</span></code>
- set per <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code> isolation level</p>
<p><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.isolation_level</span></code>
- set per <code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code> isolation level</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.dialect">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">dialect</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.dialect" title="Permalink to this definition">¶</a></dt>
<dd><p>Proxy for the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Connection.dialect</span></code> attribute
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.exec_driver_sql">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">exec_driver_sql</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_DBAPIAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoreExecuteOptionsParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CursorResult</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.exec_driver_sql" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a driver-level SQL string and return buffered
<code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.execute">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoreExecuteOptionsParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CursorResult</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a SQL statement construct and return a buffered
<code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncConnection.execute.params.object"></span><strong>object</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.execute.params.object">¶</a> – <p>The statement to be executed.  This is always
an object that is in both the <a class="reference internal" href="../../core/foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClauseElement</span></code></a> and
<a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Executable</span></code></a> hierarchies, including:</p>
<ul>
<li><p><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal notranslate"><span class="pre">Select</span></code></a></p></li>
<li><p><a class="reference internal" href="../../core/dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a>, <a class="reference internal" href="../../core/dml.html#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a>,
<a class="reference internal" href="../../core/dml.html#sqlalchemy.sql.expression.Delete" title="sqlalchemy.sql.expression.Delete"><code class="xref py py-class docutils literal notranslate"><span class="pre">Delete</span></code></a></p></li>
<li><p><a class="reference internal" href="../../core/sqlelement.html#sqlalchemy.sql.expression.TextClause" title="sqlalchemy.sql.expression.TextClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextClause</span></code></a> and
<a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.TextualSelect" title="sqlalchemy.sql.expression.TextualSelect"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextualSelect</span></code></a></p></li>
<li><p><a class="reference internal" href="../../core/ddl.html#sqlalchemy.schema.DDL" title="sqlalchemy.schema.DDL"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDL</span></code></a> and objects which inherit from
<a class="reference internal" href="../../core/ddl.html#sqlalchemy.schema.ExecutableDDLElement" title="sqlalchemy.schema.ExecutableDDLElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutableDDLElement</span></code></a></p></li>
</ul>
</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncConnection.execute.params.parameters"></span><strong>parameters</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.execute.params.parameters">¶</a> – parameters which will be bound into the statement.
This may be either a dictionary of parameter names to values,
or a mutable sequence (e.g. a list) of dictionaries.  When a
list of dictionaries is passed, the underlying statement execution
will make use of the DBAPI <code class="docutils literal notranslate"><span class="pre">cursor.executemany()</span></code> method.
When a single dictionary is passed, the DBAPI <code class="docutils literal notranslate"><span class="pre">cursor.execute()</span></code>
method will be used.</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncConnection.execute.params.execution_options"></span><strong>execution_options</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.execute.params.execution_options">¶</a> – optional dictionary of execution options,
which will be associated with the statement execution.  This
dictionary can provide a subset of the options that are accepted
by <code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a <code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.execution_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">execution_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.engine.AsyncConnection"><span class="pre">AsyncConnection</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.execution_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Set non-SQL options for the connection which take effect
during execution.</p>
<p>This returns this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> object with
the new options added.</p>
<p>See <code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code> for full details
on this method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.get_nested_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">get_nested_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.engine.AsyncTransaction"><span class="pre">AsyncTransaction</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_nested_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a> representing the current
nested (savepoint) transaction, if any.</p>
<p>This makes use of the underlying synchronous connection’s
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_nested_transaction()</span></code> method to get the
current <code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code>, which is then proxied in a new
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a> object.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0b2.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.get_raw_connection">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_raw_connection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/pooling.html#sqlalchemy.pool.PoolProxiedConnection" title="sqlalchemy.pool.PoolProxiedConnection"><span class="pre">PoolProxiedConnection</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_raw_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the pooled DBAPI-level connection in use by this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a>.</p>
<p>This is a SQLAlchemy connection-pool proxied connection
which then has the attribute
<code class="xref py py-attr docutils literal notranslate"><span class="pre">_ConnectionFairy.driver_connection</span></code> that refers to the
actual driver connection. Its
<code class="xref py py-attr docutils literal notranslate"><span class="pre">_ConnectionFairy.dbapi_connection</span></code> refers instead
to an <a class="reference internal" href="../../core/internals.html#sqlalchemy.engine.AdaptedConnection" title="sqlalchemy.engine.AdaptedConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AdaptedConnection</span></code></a> instance that
adapts the driver connection to the DBAPI protocol.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.get_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">get_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.engine.AsyncTransaction"><span class="pre">AsyncTransaction</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a> representing the current
transaction, if any.</p>
<p>This makes use of the underlying synchronous connection’s
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_transaction()</span></code> method to get the current
<code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code>, which is then proxied in a new
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a> object.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0b2.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.in_nested_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">in_nested_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.in_nested_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if a transaction is in progress.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0b2.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.in_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">in_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.in_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if a transaction is in progress.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.info">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">info</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Connection.info</span></code> dictionary of the
underlying <code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code>.</p>
<p>This dictionary is freely writable for user-defined state to be
associated with the database connection.</p>
<p>This attribute is only available if the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> is
currently connected.   If the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.closed" title="sqlalchemy.ext.asyncio.AsyncConnection.closed"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncConnection.closed</span></code></a> attribute
is <code class="docutils literal notranslate"><span class="pre">True</span></code>, then accessing this attribute will raise
<a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.ResourceClosedError" title="sqlalchemy.exc.ResourceClosedError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceClosedError</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0b2.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.invalidate">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">invalidate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exception</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BaseException</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.invalidate" title="Permalink to this definition">¶</a></dt>
<dd><p>Invalidate the underlying DBAPI connection associated with
this <code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code>.</p>
<p>See the method <code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.invalidate()</span></code> for full
detail on this method.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.invalidated">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">invalidated</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.invalidated" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if this connection was invalidated.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> class.</p>
</div>
<p>This does not indicate whether or not the connection was
invalidated at the pool level, however</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.rollback">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Roll back the transaction that is currently in progress.</p>
<p>This method rolls back the current transaction if one has been started.
If no transaction was started, the method has no effect.  If a
transaction was started and the connection is in an invalidated state,
the transaction is cleared using this method.</p>
<p>A transaction is begun on a <code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code> automatically
whenever a statement is first executed, or when the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code> method is called.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.run_sync">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run_sync</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">arg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_T</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.run_sync" title="Permalink to this definition">¶</a></dt>
<dd><p>Invoke the given synchronous (i.e. not async) callable,
passing a synchronous-style <code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code> as the first
argument.</p>
<p>This method allows traditional synchronous SQLAlchemy functions to
run within the context of an asyncio application.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">do_something_with_core</span><span class="p">(</span><span class="n">conn</span><span class="p">:</span> <span class="n">Connection</span><span class="p">,</span> <span class="n">arg1</span><span class="p">:</span> <span class="n">int</span><span class="p">,</span> <span class="n">arg2</span><span class="p">:</span> <span class="n">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;A synchronous function that does not require awaiting</span>

<span class="sd">    :param conn: a Core SQLAlchemy Connection, used synchronously</span>

<span class="sd">    :return: an optional return value is supported</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">some_table</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">int_col</span><span class="o">=</span><span class="n">arg1</span><span class="p">,</span> <span class="n">str_col</span><span class="o">=</span><span class="n">arg2</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;success&quot;</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">do_something_async</span><span class="p">(</span><span class="n">async_engine</span><span class="p">:</span> <span class="n">AsyncEngine</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;an async function that uses awaiting&#39;&#39;&#39;</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">async_engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">async_conn</span><span class="p">:</span>
        <span class="c1"># run do_something_with_core() with a sync-style</span>
        <span class="c1"># Connection, proxied into an awaitable</span>
        <span class="n">return_code</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_conn</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">do_something_with_core</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;strval&quot;</span><span class="p">)</span>
        <span class="n">print</span><span class="p">(</span><span class="n">return_code</span><span class="p">)</span></pre></div>
</div>
<p>This method maintains the asyncio event loop all the way through
to the database connection by running the given callable in a
specially instrumented greenlet.</p>
<p>The most rudimentary use of <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.run_sync" title="sqlalchemy.ext.asyncio.AsyncConnection.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.run_sync()</span></code></a> is to
invoke methods such as <a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.MetaData.create_all" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code></a>, given
an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> that needs to be provided to
<a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.MetaData.create_all" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code></a> as a <code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code>
object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># run metadata.create_all(conn) with a sync-style Connection,</span>
<span class="c1"># proxied into an awaitable</span>
<span class="k">with</span> <span class="n">async_engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">)</span></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The provided callable is invoked inline within the asyncio event
loop, and will block on traditional IO calls.  IO within this
callable should only call into SQLAlchemy’s asyncio database
APIs which will be properly adapted to the greenlet context.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync" title="sqlalchemy.ext.asyncio.AsyncSession.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.run_sync()</span></code></a></p>
<p><span class="xref std std-ref">session_run_sync</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.scalar">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scalar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreSingleExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoreExecuteOptionsParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.scalar" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a SQL statement construct and returns a scalar object.</p>
<p>This method is shorthand for invoking the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar()</span></code> method after invoking the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code> method.  Parameters are equivalent.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a scalar Python value representing the first column of the
first row returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.scalars">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scalars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoreExecuteOptionsParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ScalarResult</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.scalars" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a SQL statement construct and returns a scalar objects.</p>
<p>This method is shorthand for invoking the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code> method after invoking the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code> method.  Parameters are equivalent.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a <code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code> object.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.24.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.start">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">is_ctxmanager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.engine.AsyncConnection"><span class="pre">AsyncConnection</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> object’s context
outside of using a Python <code class="docutils literal notranslate"><span class="pre">with:</span></code> block.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.stream">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">stream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoreExecuteOptionsParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">AsyncIterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><span class="pre">AsyncResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return an awaitable yielding a
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> object.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">stmt</span><span class="p">):</span>
<span class="k">async</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
    <span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">row</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></pre></div>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream" title="sqlalchemy.ext.asyncio.AsyncConnection.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.stream()</span></code></a>
method supports optional context manager use against the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> object, as in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">conn</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span> <span class="k">as</span> <span class="n">result</span><span class="p">:</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
        <span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">row</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></pre></div>
</div>
<p>In the above pattern, the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.close" title="sqlalchemy.ext.asyncio.AsyncResult.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.close()</span></code></a> method is
invoked unconditionally, even if the iterator is interrupted by an
exception throw.   Context manager use remains optional, however,
and the function may be called in either an <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span> <span class="pre">fn():</span></code> or
<code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">fn()</span></code> style.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0b3: </span>added context manager support</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>an awaitable object that will yield an
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> object.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream_scalars" title="sqlalchemy.ext.asyncio.AsyncConnection.stream_scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.stream_scalars()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.stream_scalars">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">stream_scalars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreSingleExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoreExecuteOptionsParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">AsyncIterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><span class="pre">AsyncScalarResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream_scalars" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return an awaitable yielding a
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a> object.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">stream_scalars</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>
<span class="k">async</span> <span class="k">for</span> <span class="n">scalar</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
    <span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">scalar</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></pre></div>
</div>
<p>This method is shorthand for invoking the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code> method after invoking the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.stream()</span></code> method.  Parameters are equivalent.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream_scalars" title="sqlalchemy.ext.asyncio.AsyncConnection.stream_scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.stream_scalars()</span></code></a>
method supports optional context manager use against the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a> object, as in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">conn</span><span class="o">.</span><span class="n">stream_scalars</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span> <span class="k">as</span> <span class="n">result</span><span class="p">:</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">scalar</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
        <span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">scalar</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></pre></div>
</div>
<p>In the above pattern, the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.close" title="sqlalchemy.ext.asyncio.AsyncScalarResult.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncScalarResult.close()</span></code></a> method is
invoked unconditionally, even if the iterator is interrupted by an
exception throw.  Context manager use remains optional, however,
and the function may be called in either an <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span> <span class="pre">fn():</span></code> or
<code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">fn()</span></code> style.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0b3: </span>added context manager support</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>an awaitable object that will yield an
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a> object.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.24.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream" title="sqlalchemy.ext.asyncio.AsyncConnection.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.stream()</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.sync_connection">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">sync_connection</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Connection</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.sync_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Reference to the sync-style <code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code> this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> proxies requests towards.</p>
<p>This instance can be used as an event target.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">asyncio_events</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.sync_engine">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">sync_engine</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Engine</span></em><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.sync_engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Reference to the sync-style <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code> this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> is associated with via its underlying
<code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code>.</p>
<p>This instance can be used as an event target.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">asyncio_events</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncTransaction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncTransaction</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="Permalink to this definition">¶</a></dt>
<dd><p>An asyncio proxy for a <code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code>.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction.commit"><span class="sig-name descname">commit()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction.rollback"><span class="sig-name descname">rollback()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction.start"><span class="sig-name descname">start()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncTransaction</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.ProxyComparable</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.StartableContext</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncTransaction.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncTransaction.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncTransaction.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a>.</p>
<p>If this transaction is the base transaction in a begin/commit
nesting, the transaction will rollback().  Otherwise, the
method returns.</p>
<p>This is used to cancel a Transaction without affecting the scope of
an enclosing transaction.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncTransaction.commit">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncTransaction.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncTransaction.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncTransaction.rollback">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncTransaction.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncTransaction.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Roll back this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncTransaction.start">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncTransaction.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">is_ctxmanager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.engine.AsyncTransaction"><span class="pre">AsyncTransaction</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncTransaction.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a> object’s context
outside of using a Python <code class="docutils literal notranslate"><span class="pre">with:</span></code> block.</p>
</dd></dl>

</dd></dl>

</section>
<section id="id8">
<h2>结果集 API 文档<a class="headerlink" href="#id8" title="Permalink to this heading">¶</a></h2>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> 对象是 <code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code> 对象的适配异步版本的对象。
只有当使用 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream" title="sqlalchemy.ext.asyncio.AsyncConnection.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.stream()</span></code></a> 或 <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.stream" title="sqlalchemy.ext.asyncio.AsyncSession.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.stream()</span></code></a> 方法时，
才会返回一个结果对象，该对象在一个活动的数据库游标上。</p>
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><span class="sig-name descname">AsyncMappingResult</span></a></p></td>
<td><p>A wrapper for a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> that returns dictionary
values rather than <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code> values.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><span class="sig-name descname">AsyncResult</span></a></p></td>
<td><p>An asyncio wrapper around a <code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code> object.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><span class="sig-name descname">AsyncScalarResult</span></a></p></td>
<td><p>A wrapper for a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> that returns scalar values
rather than <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code> values.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTupleResult"><span class="sig-name descname">AsyncTupleResult</span></a></p></td>
<td><p>A <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> that’s typed as returning plain
Python tuples instead of rows.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncResult</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult" title="Permalink to this definition">¶</a></dt>
<dd><p>An asyncio wrapper around a <code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code> object.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> only applies to statement executions that
use a server-side cursor.  It is returned only from the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream" title="sqlalchemy.ext.asyncio.AsyncConnection.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.stream()</span></code></a> and
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.stream" title="sqlalchemy.ext.asyncio.AsyncSession.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.stream()</span></code></a> methods.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As is the case with <code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code>, this object is
used for ORM results returned by <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.execute" title="sqlalchemy.ext.asyncio.AsyncSession.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.execute()</span></code></a>,
which can yield instances of ORM mapped objects either individually or
within tuple-like rows.  Note that these result objects do not
deduplicate instances or rows automatically as is the case with the
legacy <a class="reference internal" href="../queryguide/query.html#sqlalchemy.orm.Query" title="sqlalchemy.orm.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> object. For in-Python de-duplication of
instances or rows, use the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.unique" title="sqlalchemy.ext.asyncio.AsyncResult.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.unique()</span></code></a> modifier
method.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.all"><span class="sig-name descname">all()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.closed"><span class="sig-name descname">closed</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.columns"><span class="sig-name descname">columns()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchall"><span class="sig-name descname">fetchall()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchmany"><span class="sig-name descname">fetchmany()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchone"><span class="sig-name descname">fetchone()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.first"><span class="sig-name descname">first()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.freeze"><span class="sig-name descname">freeze()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.keys"><span class="sig-name descname">keys()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.mappings"><span class="sig-name descname">mappings()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one"><span class="sig-name descname">one()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none"><span class="sig-name descname">one_or_none()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.partitions"><span class="sig-name descname">partitions()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar"><span class="sig-name descname">scalar()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one"><span class="sig-name descname">scalar_one()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one_or_none"><span class="sig-name descname">scalar_one_or_none()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars"><span class="sig-name descname">scalars()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.t"><span class="sig-name descname">t</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.tuples"><span class="sig-name descname">tuples()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.unique"><span class="sig-name descname">unique()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.yield_per"><span class="sig-name descname">yield_per()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult</span></code></a> (<code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncCommon</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Row</span><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all rows in a list.</p>
<p>Closes the result set after invocation.   Subsequent invocations
will return an empty list.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a list of <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code> objects.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.close" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncCommon.close()</span></code> <em>method of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncCommon</span></code></p>
</div>
<p>Close this result.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.closed">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">closed</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.closed" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncCommon.closed</span></code> <em>attribute of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncCommon</span></code></p>
</div>
<p>proxies the .closed attribute of the underlying result object,
if any, else raises <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0b3.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.columns">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">col_expressions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_KeyIndexType</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Establish the columns that should be returned in each row.</p>
<p>Refer to <code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.columns()</span></code> in the synchronous
SQLAlchemy API for a complete behavioral description.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.fetchall">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fetchall</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Row</span><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchall" title="Permalink to this definition">¶</a></dt>
<dd><p>A synonym for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.all" title="sqlalchemy.ext.asyncio.AsyncResult.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.all()</span></code></a> method.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.fetchmany">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fetchmany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Row</span><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchmany" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch many rows.</p>
<p>When all rows are exhausted, returns an empty list.</p>
<p>This method is provided for backwards compatibility with
SQLAlchemy 1.x.x.</p>
<p>To fetch rows in groups, use the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.partitions" title="sqlalchemy.ext.asyncio.AsyncResult.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.partitions()</span></code></a> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a list of <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code> objects.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.partitions" title="sqlalchemy.ext.asyncio.AsyncResult.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.partitions()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.fetchone">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fetchone</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Row</span><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchone" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch one row.</p>
<p>When all rows are exhausted, returns None.</p>
<p>This method is provided for backwards compatibility with
SQLAlchemy 1.x.x.</p>
<p>To fetch the first row of a result only, use the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.first" title="sqlalchemy.ext.asyncio.AsyncResult.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.first()</span></code></a> method.  To iterate through all
rows, iterate the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> object directly.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code> object if no filters are applied,
or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no rows remain.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.first">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">first</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Row</span><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.first" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the first row or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no row is present.</p>
<p>Closes the result set and discards remaining rows.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method returns one <strong>row</strong>, e.g. tuple, by default.
To return exactly one single scalar value, that is, the first
column of the first row, use the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar" title="sqlalchemy.ext.asyncio.AsyncResult.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalar()</span></code></a> method,
or combine <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a> and
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.first" title="sqlalchemy.ext.asyncio.AsyncResult.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.first()</span></code></a>.</p>
<p>Additionally, in contrast to the behavior of the legacy  ORM
<a class="reference internal" href="../queryguide/query.html#sqlalchemy.orm.Query.first" title="sqlalchemy.orm.Query.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.first()</span></code></a> method, <strong>no limit is applied</strong> to the
SQL query which was invoked to produce this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a>;
for a DBAPI driver that buffers results in memory before yielding
rows, all rows will be sent to the Python process and all but
the first row will be discarded.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../changelog/migration_20.html#migration-20-unify-select"><span class="std std-ref">ORM查询与核心选择器统一</span></a></p>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code> object, or None
if no rows remain.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar" title="sqlalchemy.ext.asyncio.AsyncResult.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalar()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="sqlalchemy.ext.asyncio.AsyncResult.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.freeze">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">freeze</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">FrozenResult</span><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.freeze" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a callable object that will produce copies of this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> when invoked.</p>
<p>The callable object returned is an instance of
<code class="xref py py-class docutils literal notranslate"><span class="pre">FrozenResult</span></code>.</p>
<p>This is used for result set caching.  The method must be called
on the result when it has been unconsumed, and calling the method
will consume the result fully.   When the <code class="xref py py-class docutils literal notranslate"><span class="pre">FrozenResult</span></code>
is retrieved from a cache, it can be called any number of times where
it will produce a new <code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code> object each time
against its stored set of rows.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../session_events.html#do-orm-execute-re-executing"><span class="std std-ref">重新执行语句</span></a> - example usage within the
ORM to implement a result-set cache.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.keys">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RMKeyView</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.keys" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys.keys</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys</span></code></p>
</div>
<p>Return an iterable view which yields the string keys that would
be represented by each <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code>.</p>
<p>The keys can represent the labels of the columns returned by a core
statement or the names of the orm classes returned by an orm
execution.</p>
<p>The view also can be tested for key containment using the Python
<code class="docutils literal notranslate"><span class="pre">in</span></code> operator, which will test both for the string keys represented
in the view, as well as for alternate keys such as column objects.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>a key view object is returned rather than a
plain list.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.mappings">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">mappings</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult" title="sqlalchemy.ext.asyncio.result.AsyncMappingResult"><span class="pre">AsyncMappingResult</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.mappings" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a mappings filter to returned rows, returning an instance of
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult" title="sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncMappingResult</span></code></a>.</p>
<p>When this filter is applied, fetching rows will return
<code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code> objects instead of <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code>
objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a new <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult" title="sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncMappingResult</span></code></a> filtering object
referring to the underlying <code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.one">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Row</span><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="Permalink to this definition">¶</a></dt>
<dd><p>Return exactly one row or raise an exception.</p>
<p>Raises <a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.NoResultFound" title="sqlalchemy.exc.NoResultFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoResultFound</span></code></a> if the result returns no
rows, or <a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a> if multiple rows
would be returned.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method returns one <strong>row</strong>, e.g. tuple, by default.
To return exactly one single scalar value, that is, the first
column of the first row, use the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one" title="sqlalchemy.ext.asyncio.AsyncResult.scalar_one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalar_one()</span></code></a> method, or combine
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a> and
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="sqlalchemy.ext.asyncio.AsyncResult.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a>.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The first <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code>.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a>, <a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.NoResultFound" title="sqlalchemy.exc.NoResultFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoResultFound</span></code></a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.first" title="sqlalchemy.ext.asyncio.AsyncResult.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.first()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none" title="sqlalchemy.ext.asyncio.AsyncResult.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one_or_none()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one" title="sqlalchemy.ext.asyncio.AsyncResult.scalar_one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalar_one()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.one_or_none">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Row</span><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Return at most one result or raise an exception.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">None</span></code> if the result has no rows.
Raises <a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a>
if multiple rows are returned.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The first <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code> or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no row
is available.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.first" title="sqlalchemy.ext.asyncio.AsyncResult.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.first()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="sqlalchemy.ext.asyncio.AsyncResult.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.partitions">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">partitions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">AsyncIterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Row</span><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.partitions" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate through sub-lists of rows of the size given.</p>
<p>An async iterator is returned:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">scroll_results</span><span class="p">(</span><span class="n">connection</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">connection</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">users_table</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">for</span> <span class="n">partition</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">partitions</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
        <span class="n">print</span><span class="p">(</span><span class="s2">&quot;list of rows: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">partition</span><span class="p">)</span></pre></div>
</div>
<p>Refer to <code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code> in the synchronous
SQLAlchemy API for a complete behavioral description.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.scalar">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scalar</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the first column of the first row, and close the result set.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">None</span></code> if there are no rows to fetch.</p>
<p>No validation is performed to test if additional rows remain.</p>
<p>After calling this method, the object is fully closed,
e.g. the <code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.close()</span></code>
method will have been called.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a Python scalar value, or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no rows remain.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.scalar_one">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scalar_one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Return exactly one scalar result or raise an exception.</p>
<p>This is equivalent to calling <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a> and
then <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="sqlalchemy.ext.asyncio.AsyncResult.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="sqlalchemy.ext.asyncio.AsyncResult.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.scalar_one_or_none">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scalar_one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one_or_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Return exactly one scalar result or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>This is equivalent to calling <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a> and
then <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none" title="sqlalchemy.ext.asyncio.AsyncResult.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one_or_none()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none" title="sqlalchemy.ext.asyncio.AsyncResult.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one_or_none()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.scalars">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">scalars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_KeyIndexType</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><span class="pre">AsyncScalarResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a> filtering object which
will return single elements rather than <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code> objects.</p>
<p>Refer to <code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code> in the synchronous
SQLAlchemy API for a complete behavioral description.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncResult.scalars.params.index"></span><strong>index</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars.params.index">¶</a> – integer or row key indicating the column to be fetched
from each row, defaults to <code class="docutils literal notranslate"><span class="pre">0</span></code> indicating the first column.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a new <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a> filtering object
referring to this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.t">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">t</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.t" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a “typed tuple” typing filter to returned rows.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.t" title="sqlalchemy.ext.asyncio.AsyncResult.t"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncResult.t</span></code></a> attribute is a synonym for
calling the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.tuples" title="sqlalchemy.ext.asyncio.AsyncResult.tuples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.tuples()</span></code></a> method.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.tuples">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">tuples</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTupleResult" title="sqlalchemy.ext.asyncio.result.AsyncTupleResult"><span class="pre">AsyncTupleResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.tuples" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a “typed tuple” typing filter to returned rows.</p>
<p>This method returns the same <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> object
at runtime,
however annotates as returning a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTupleResult" title="sqlalchemy.ext.asyncio.AsyncTupleResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTupleResult</span></code></a>
object that will indicate to <span class="target" id="index-0"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/"><strong>PEP 484</strong></a> typing tools that plain typed
<code class="docutils literal notranslate"><span class="pre">Tuple</span></code> instances are returned rather than rows.  This allows
tuple unpacking and <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> access of <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code>
objects to by typed, for those cases where the statement invoked
itself included typing information.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the <code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTupleResult</span></code> type at typing time.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.t" title="sqlalchemy.ext.asyncio.AsyncResult.t"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncResult.t</span></code></a> - shorter synonym</p>
<p><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row.t</span></code> - <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code> version</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.unique">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">unique</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_UniqueFilterType</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply unique filtering to the objects returned by this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a>.</p>
<p>Refer to <code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.unique()</span></code> in the synchronous
SQLAlchemy API for a complete behavioral description.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.yield_per">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">yield_per</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.yield_per" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code> <em>method of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">FilterResult</span></code></p>
</div>
<p>Configure the row-fetching strategy to fetch <code class="docutils literal notranslate"><span class="pre">num</span></code> rows at a time.</p>
<p>The <code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code> method is a pass through
to the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code> method.  See that method’s
documentation for usage notes.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.40: </span>- added <code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code>
so that the method is available on all result set implementations</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">engine_stream_results</span> - describes Core behavior for
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></p>
<p><a class="reference internal" href="../queryguide/api.html#orm-queryguide-yield-per"><span class="std std-ref">使用Yield Per抓取大量结果集</span></a> - in the <span class="xref std std-ref">queryguide_toplevel</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncScalarResult</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> that returns scalar values
rather than <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code> values.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a> object is acquired by calling the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a> method.</p>
<p>Refer to the <code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code> object in the synchronous
SQLAlchemy API for a complete behavioral description.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.all"><span class="sig-name descname">all()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.closed"><span class="sig-name descname">closed</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.fetchall"><span class="sig-name descname">fetchall()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.fetchmany"><span class="sig-name descname">fetchmany()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.first"><span class="sig-name descname">first()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.one"><span class="sig-name descname">one()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.one_or_none"><span class="sig-name descname">one_or_none()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.partitions"><span class="sig-name descname">partitions()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.unique"><span class="sig-name descname">unique()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.yield_per"><span class="sig-name descname">yield_per()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncCommon</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">_R</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all scalar values in a list.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.all" title="sqlalchemy.ext.asyncio.AsyncResult.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.all()</span></code></a> except that
scalar values, rather than <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.close" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncCommon.close()</span></code> <em>method of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncCommon</span></code></p>
</div>
<p>Close this result.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.closed">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">closed</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.closed" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncCommon.closed</span></code> <em>attribute of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncCommon</span></code></p>
</div>
<p>proxies the .closed attribute of the underlying result object,
if any, else raises <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0b3.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.fetchall">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fetchall</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">_R</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.fetchall" title="Permalink to this definition">¶</a></dt>
<dd><p>A synonym for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.all" title="sqlalchemy.ext.asyncio.AsyncScalarResult.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncScalarResult.all()</span></code></a> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.fetchmany">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fetchmany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">_R</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.fetchmany" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch many objects.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchmany" title="sqlalchemy.ext.asyncio.AsyncResult.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.fetchmany()</span></code></a> except that
scalar values, rather than <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.first">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">first</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_R</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.first" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the first object or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no object is present.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.first" title="sqlalchemy.ext.asyncio.AsyncResult.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.first()</span></code></a> except that
scalar values, rather than <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.one">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_R</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.one" title="Permalink to this definition">¶</a></dt>
<dd><p>Return exactly one object or raise an exception.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="sqlalchemy.ext.asyncio.AsyncResult.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a> except that
scalar values, rather than <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.one_or_none">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_R</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.one_or_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Return at most one object or raise an exception.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none" title="sqlalchemy.ext.asyncio.AsyncResult.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one_or_none()</span></code></a> except that
scalar values, rather than <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.partitions">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">partitions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">AsyncIterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">_R</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.partitions" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate through sub-lists of elements of the size given.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.partitions" title="sqlalchemy.ext.asyncio.AsyncResult.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.partitions()</span></code></a> except that
scalar values, rather than <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.unique">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">unique</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_UniqueFilterType</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply unique filtering to the objects returned by this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a>.</p>
<p>See <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.unique" title="sqlalchemy.ext.asyncio.AsyncResult.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.unique()</span></code></a> for usage details.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.yield_per">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">yield_per</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.yield_per" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code> <em>method of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">FilterResult</span></code></p>
</div>
<p>Configure the row-fetching strategy to fetch <code class="docutils literal notranslate"><span class="pre">num</span></code> rows at a time.</p>
<p>The <code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code> method is a pass through
to the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code> method.  See that method’s
documentation for usage notes.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.40: </span>- added <code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code>
so that the method is available on all result set implementations</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">engine_stream_results</span> - describes Core behavior for
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></p>
<p><a class="reference internal" href="../queryguide/api.html#orm-queryguide-yield-per"><span class="std std-ref">使用Yield Per抓取大量结果集</span></a> - in the <span class="xref std std-ref">queryguide_toplevel</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncMappingResult</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> that returns dictionary
values rather than <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code> values.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult" title="sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncMappingResult</span></code></a> object is acquired by calling the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.mappings" title="sqlalchemy.ext.asyncio.AsyncResult.mappings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.mappings()</span></code></a> method.</p>
<p>Refer to the <code class="xref py py-class docutils literal notranslate"><span class="pre">MappingResult</span></code> object in the synchronous
SQLAlchemy API for a complete behavioral description.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.all"><span class="sig-name descname">all()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.closed"><span class="sig-name descname">closed</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.columns"><span class="sig-name descname">columns()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchall"><span class="sig-name descname">fetchall()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchmany"><span class="sig-name descname">fetchmany()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchone"><span class="sig-name descname">fetchone()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.first"><span class="sig-name descname">first()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.keys"><span class="sig-name descname">keys()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.one"><span class="sig-name descname">one()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.one_or_none"><span class="sig-name descname">one_or_none()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.partitions"><span class="sig-name descname">partitions()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.unique"><span class="sig-name descname">unique()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.yield_per"><span class="sig-name descname">yield_per()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult" title="sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult</span></code></a> (<code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncCommon</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">RowMapping</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all rows in a list.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.all" title="sqlalchemy.ext.asyncio.AsyncResult.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.all()</span></code></a> except that
<code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code> values, rather than <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code>
objects, are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.close" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncCommon.close()</span></code> <em>method of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncCommon</span></code></p>
</div>
<p>Close this result.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.closed">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><span class="sig-name descname"><span class="pre">closed</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.closed" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncCommon.closed</span></code> <em>attribute of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncCommon</span></code></p>
</div>
<p>proxies the .closed attribute of the underlying result object,
if any, else raises <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0b3.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.columns">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><span class="sig-name descname"><span class="pre">columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">col_expressions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_KeyIndexType</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Establish the columns that should be returned in each row.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.fetchall">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fetchall</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">RowMapping</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchall" title="Permalink to this definition">¶</a></dt>
<dd><p>A synonym for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.all" title="sqlalchemy.ext.asyncio.AsyncMappingResult.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncMappingResult.all()</span></code></a> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.fetchmany">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fetchmany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">RowMapping</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchmany" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch many rows.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchmany" title="sqlalchemy.ext.asyncio.AsyncResult.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.fetchmany()</span></code></a> except that
<code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code> values, rather than <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code>
objects, are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.fetchone">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fetchone</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RowMapping</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchone" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch one object.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchone" title="sqlalchemy.ext.asyncio.AsyncResult.fetchone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.fetchone()</span></code></a> except that
<code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code> values, rather than <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code>
objects, are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.first">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">first</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RowMapping</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.first" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the first object or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no object is present.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.first" title="sqlalchemy.ext.asyncio.AsyncResult.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.first()</span></code></a> except that
<code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code> values, rather than <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code>
objects, are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.keys">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RMKeyView</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.keys" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys.keys</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys</span></code></p>
</div>
<p>Return an iterable view which yields the string keys that would
be represented by each <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code>.</p>
<p>The keys can represent the labels of the columns returned by a core
statement or the names of the orm classes returned by an orm
execution.</p>
<p>The view also can be tested for key containment using the Python
<code class="docutils literal notranslate"><span class="pre">in</span></code> operator, which will test both for the string keys represented
in the view, as well as for alternate keys such as column objects.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>a key view object is returned rather than a
plain list.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.one">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RowMapping</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.one" title="Permalink to this definition">¶</a></dt>
<dd><p>Return exactly one object or raise an exception.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="sqlalchemy.ext.asyncio.AsyncResult.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a> except that
<code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code> values, rather than <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code>
objects, are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.one_or_none">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RowMapping</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.one_or_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Return at most one object or raise an exception.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none" title="sqlalchemy.ext.asyncio.AsyncResult.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one_or_none()</span></code></a> except that
<code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code> values, rather than <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code>
objects, are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.partitions">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">partitions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">AsyncIterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">RowMapping</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.partitions" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate through sub-lists of elements of the size given.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.partitions" title="sqlalchemy.ext.asyncio.AsyncResult.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.partitions()</span></code></a> except that
<code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code> values, rather than <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code>
objects, are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.unique">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><span class="sig-name descname"><span class="pre">unique</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_UniqueFilterType</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply unique filtering to the objects returned by this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult" title="sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncMappingResult</span></code></a>.</p>
<p>See <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.unique" title="sqlalchemy.ext.asyncio.AsyncResult.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.unique()</span></code></a> for usage details.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.yield_per">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><span class="sig-name descname"><span class="pre">yield_per</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.yield_per" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code> <em>method of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">FilterResult</span></code></p>
</div>
<p>Configure the row-fetching strategy to fetch <code class="docutils literal notranslate"><span class="pre">num</span></code> rows at a time.</p>
<p>The <code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code> method is a pass through
to the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code> method.  See that method’s
documentation for usage notes.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.40: </span>- added <code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code>
so that the method is available on all result set implementations</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">engine_stream_results</span> - describes Core behavior for
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></p>
<p><a class="reference internal" href="../queryguide/api.html#orm-queryguide-yield-per"><span class="std std-ref">使用Yield Per抓取大量结果集</span></a> - in the <span class="xref std std-ref">queryguide_toplevel</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncTupleResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncTupleResult</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncTupleResult" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> that’s typed as returning plain
Python tuples instead of rows.</p>
<p>Since <code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code> acts like a tuple in every way already,
this class is a typing only class, regular <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> is
still used at runtime.</p>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTupleResult" title="sqlalchemy.ext.asyncio.AsyncTupleResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncTupleResult</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncCommon</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.util.langhelpers.TypingOnly</span></code>)</p>
</div>
</dd></dl>

</section>
<section id="orm-session-api">
<h2>ORM Session API 文档<a class="headerlink" href="#orm-session-api" title="Permalink to this heading">¶</a></h2>
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_object_session"><span class="sig-name descname">async_object_session</span></a>(instance)</p></td>
<td><p>Return the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> to which the given instance
belongs.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><span class="sig-name descname">async_scoped_session</span></a></p></td>
<td><p>Provides scoped management of <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> objects.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_session"><span class="sig-name descname">async_session</span></a>(session)</p></td>
<td><p>Return the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> which is proxying the given
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object, if any.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker"><span class="sig-name descname">async_sessionmaker</span></a></p></td>
<td><p>A configurable <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> factory.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs"><span class="sig-name descname">AsyncAttrs</span></a></p></td>
<td><p>Mixin class which provides an awaitable accessor for all attributes.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><span class="sig-name descname">AsyncSession</span></a></p></td>
<td><p>Asyncio version of <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction"><span class="sig-name descname">AsyncSessionTransaction</span></a></p></td>
<td><p>A wrapper for the ORM <code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code> object.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_object_session">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">async_object_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.session.AsyncSession"><span class="pre">AsyncSession</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_object_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> to which the given instance
belongs.</p>
<p>This function makes use of the sync-API function
<code class="xref py py-class docutils literal notranslate"><span class="pre">object_session</span></code> to retrieve the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> which
refers to the given instance, and from there links it to the original
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>.</p>
<p>If the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> has been garbage collected, the
return value is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>This functionality is also available from the
<a class="reference internal" href="../internals.html#sqlalchemy.orm.InstanceState.async_session" title="sqlalchemy.orm.InstanceState.async_session"><code class="xref py py-attr docutils literal notranslate"><span class="pre">InstanceState.async_session</span></code></a> accessor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.ext.asyncio.async_object_session.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_object_session.params.instance">¶</a> – an ORM mapped instance</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> object, or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.18.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_session">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">async_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.session.AsyncSession"><span class="pre">AsyncSession</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> which is proxying the given
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object, if any.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.ext.asyncio.async_session.params.session"></span><strong>session</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_session.params.session">¶</a> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> instance.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> instance, or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.18.</span></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_sessionmaker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">async_sessionmaker</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="Permalink to this definition">¶</a></dt>
<dd><p>A configurable <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> factory.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a> factory works in the same way as the
<code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code> factory, to generate new <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>
objects when called, creating them given
the configurational arguments established here.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">AsyncSession</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">async_sessionmaker</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">run_some_sql</span><span class="p">(</span><span class="n">async_session</span><span class="p">:</span> <span class="n">async_sessionmaker</span><span class="p">[</span><span class="n">AsyncSession</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">async_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">SomeObject</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s2">&quot;object&quot;</span><span class="p">))</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">SomeOtherObject</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;other object&quot;</span><span class="p">))</span>
        <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># an AsyncEngine, which the AsyncSession will use for connection</span>
    <span class="c1"># resources</span>
    <span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span><span class="s1">&#39;postgresql+asyncpg://scott:tiger@localhost/&#39;</span><span class="p">)</span>

    <span class="c1"># create a reusable factory for new AsyncSession instances</span>
    <span class="n">async_session</span> <span class="o">=</span> <span class="n">async_sessionmaker</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>

    <span class="k">await</span> <span class="n">run_some_sql</span><span class="p">(</span><span class="n">async_session</span><span class="p">)</span>

    <span class="k">await</span> <span class="n">engine</span><span class="o">.</span><span class="n">dispose</span><span class="p">()</span></pre></div>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a> is useful so that different parts
of a program can create new <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> objects with a
fixed configuration established up front.  Note that <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>
objects may also be instantiated directly when not using
<a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0: </span><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a> provides a
<code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code> class that’s dedicated to the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> object, including pep-484 typing support.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#asyncio-orm"><span class="std std-ref">概述 - ORM</span></a> - shows example use</p>
<dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code>  - general overview of the</dt><dd><p><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code> architecture</p>
</dd>
</dl>
<p><a class="reference internal" href="../session_basics.html#session-getting"><span class="std std-ref">打开和关闭会话</span></a> - introductory text on creating
sessions using <code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code>.</p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker.__call__"><span class="sig-name descname">__call__()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker.begin"><span class="sig-name descname">begin()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker.configure"><span class="sig-name descname">configure()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_sessionmaker</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Generic</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_sessionmaker.__call__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_sessionmaker.</span></code></a><span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">local_kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_AS</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_sessionmaker.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a new <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> object using the configuration
established in this <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a>.</p>
<p>In Python, the <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method is invoked on an object when
it is “called” in the same way as a function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AsyncSession</span> <span class="o">=</span> <span class="n">async_sessionmaker</span><span class="p">(</span><span class="n">async_engine</span><span class="p">,</span> <span class="n">expire_on_commit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">AsyncSession</span><span class="p">()</span>  <span class="c1"># invokes sessionmaker.__call__()</span></pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_sessionmaker.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_sessionmaker.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bind:</span> <span class="pre">Optional[_AsyncSessionBind]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_:</span> <span class="pre">Type[_AS]</span> <span class="pre">=</span> <span class="pre">&lt;class</span> <span class="pre">'sqlalchemy.ext.asyncio.session.AsyncSession'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autoflush:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expire_on_commit:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info:</span> <span class="pre">Optional[_InfoType]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kw:</span> <span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_sessionmaker.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a>.</p>
<p>All arguments here except for <code class="docutils literal notranslate"><span class="pre">class_</span></code> correspond to arguments
accepted by <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> directly. See the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.__init__" title="sqlalchemy.ext.asyncio.AsyncSession.__init__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.__init__()</span></code></a> docstring for more details on
parameters.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_sessionmaker.begin">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_sessionmaker.</span></code></a><span class="sig-name descname"><span class="pre">begin</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_AsyncSessionContextManager</span><span class="p"><span class="pre">[</span></span><span class="pre">_AS</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_sessionmaker.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a context manager that both provides a new
<code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code> as well as a transaction that commits.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">Session</span> <span class="o">=</span> <span class="n">async_sessionmaker</span><span class="p">(</span><span class="n">some_engine</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">Session</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">some_object</span><span class="p">)</span>

    <span class="c1"># commits transaction, closes session</span></pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_sessionmaker.configure">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_sessionmaker.</span></code></a><span class="sig-name descname"><span class="pre">configure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">new_kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_sessionmaker.configure" title="Permalink to this definition">¶</a></dt>
<dd><p>(Re)configure the arguments for this async_sessionmaker.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AsyncSession</span> <span class="o">=</span> <span class="n">async_sessionmaker</span><span class="p">(</span><span class="n">some_engine</span><span class="p">)</span>

<span class="n">AsyncSession</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">create_async_engine</span><span class="p">(</span><span class="s1">&#39;sqlite+aiosqlite://&#39;</span><span class="p">))</span></pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">async_scoped_session</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides scoped management of <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> objects.</p>
<p>See the section <a class="reference internal" href="#asyncio-scoped-session"><span class="std std-ref">使用 asyncio scoped session（使用 asyncio scoped session）</span></a> for usage details.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.19.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.__call__"><span class="sig-name descname">__call__()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.aclose"><span class="sig-name descname">aclose()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.add"><span class="sig-name descname">add()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.add_all"><span class="sig-name descname">add_all()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.autoflush"><span class="sig-name descname">autoflush</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.begin"><span class="sig-name descname">begin()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.begin_nested"><span class="sig-name descname">begin_nested()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.bind"><span class="sig-name descname">bind</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.close_all"><span class="sig-name descname">close_all()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.commit"><span class="sig-name descname">commit()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.configure"><span class="sig-name descname">configure()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.connection"><span class="sig-name descname">connection()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.delete"><span class="sig-name descname">delete()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.deleted"><span class="sig-name descname">deleted</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.dirty"><span class="sig-name descname">dirty</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.execute"><span class="sig-name descname">execute()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire"><span class="sig-name descname">expire()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire_all"><span class="sig-name descname">expire_all()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.expunge"><span class="sig-name descname">expunge()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.expunge_all"><span class="sig-name descname">expunge_all()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.flush"><span class="sig-name descname">flush()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.get"><span class="sig-name descname">get()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.get_bind"><span class="sig-name descname">get_bind()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.identity_key"><span class="sig-name descname">identity_key()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.identity_map"><span class="sig-name descname">identity_map</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.info"><span class="sig-name descname">info</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.invalidate"><span class="sig-name descname">invalidate()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_active"><span class="sig-name descname">is_active</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_modified"><span class="sig-name descname">is_modified()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.merge"><span class="sig-name descname">merge()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.new"><span class="sig-name descname">new</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.no_autoflush"><span class="sig-name descname">no_autoflush</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.object_session"><span class="sig-name descname">object_session()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.refresh"><span class="sig-name descname">refresh()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.remove"><span class="sig-name descname">remove()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.rollback"><span class="sig-name descname">rollback()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.scalar"><span class="sig-name descname">scalar()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.scalars"><span class="sig-name descname">scalars()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.session_factory"><span class="sig-name descname">session_factory</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.stream"><span class="sig-name descname">stream()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.stream_scalars"><span class="sig-name descname">stream_scalars()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Generic</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.__call__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_AS</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>, creating it
using the <a class="reference internal" href="../contextual.html#sqlalchemy.orm.scoped_session.session_factory" title="sqlalchemy.orm.scoped_session.session_factory"><code class="xref py py-attr docutils literal notranslate"><span class="pre">scoped_session.session_factory</span></code></a> if not present.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.__call__.params.**kw"></span><strong>**kw</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.__call__.params.**kw">¶</a> – Keyword arguments will be passed to the
<a class="reference internal" href="../contextual.html#sqlalchemy.orm.scoped_session.session_factory" title="sqlalchemy.orm.scoped_session.session_factory"><code class="xref py py-attr docutils literal notranslate"><span class="pre">scoped_session.session_factory</span></code></a> callable, if an existing
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> is not present.  If the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> is present
and keyword arguments have been passed,
<a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> is raised.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session_factory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.session.async_sessionmaker"><span class="pre">async_sessionmaker</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_AS</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scopefunc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.params.session_factory"></span><strong>session_factory</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.params.session_factory">¶</a> – a factory to create new <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>
instances. This is usually, but not necessarily, an instance
of <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.params.scopefunc"></span><strong>scopefunc</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.params.scopefunc">¶</a> – function which defines
the current scope.   A function such as <code class="docutils literal notranslate"><span class="pre">asyncio.current_task</span></code>
may be useful here.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.aclose">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aclose</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.aclose" title="Permalink to this definition">¶</a></dt>
<dd><p>A synonym for <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close" title="sqlalchemy.ext.asyncio.AsyncSession.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.aclose" title="sqlalchemy.ext.asyncio.AsyncSession.aclose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.aclose()</span></code></a> name is specifically
to support the Python standard library <code class="docutils literal notranslate"><span class="pre">&#64;contextlib.aclosing</span></code>
context manager function.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.20.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.add">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_warn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Place an object into this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>Objects that are in the <span class="xref std std-term">transient</span> state when passed to the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code> method will move to the
<span class="xref std std-term">pending</span> state, until the next flush, at which point they
will move to the <span class="xref std std-term">persistent</span> state.</p>
<p>Objects that are in the <span class="xref std std-term">detached</span> state when passed to the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code> method will move to the <span class="xref std std-term">persistent</span>
state directly.</p>
<p>If the transaction used by the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> is rolled back,
objects which were transient when they were passed to
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code> will be moved back to the
<span class="xref std std-term">transient</span> state, and will no longer be present within this
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add_all()</span></code></p>
<p><a class="reference internal" href="../session_basics.html#session-adding"><span class="std std-ref">添加新对象或现有对象</span></a> - at <a class="reference internal" href="../session_basics.html#session-basics"><span class="std std-ref">使用会话的基础知识</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.add_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">add_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instances</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">object</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.add_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the given collection of instances to this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>See the documentation for <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code> for a general
behavioral description.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code></p>
<p><a class="reference internal" href="../session_basics.html#session-adding"><span class="std std-ref">添加新对象或现有对象</span></a> - at <a class="reference internal" href="../session_basics.html#session-basics"><span class="std std-ref">使用会话的基础知识</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.autoflush">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">autoflush</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.autoflush" title="Permalink to this definition">¶</a></dt>
<dd><p>Proxy for the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.autoflush</span></code> attribute
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.begin">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">begin</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><span class="pre">AsyncSessionTransaction</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a> object.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>The underlying <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> will perform the
“begin” action when the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a>
object is entered:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">async_session</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
    <span class="c1"># .. ORM transaction is begun</span></pre></div>
</div>
<p>Note that database IO will not normally occur when the session-level
transaction is begun, as database transactions begin on an
on-demand basis.  However, the begin block is async to accommodate
for a <a class="reference internal" href="../events.html#sqlalchemy.orm.SessionEvents.after_transaction_create" title="sqlalchemy.orm.SessionEvents.after_transaction_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SessionEvents.after_transaction_create()</span></code></a>
event hook that may perform IO.</p>
<p>For a general description of ORM begin, see
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin()</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.begin_nested">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">begin_nested</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><span class="pre">AsyncSessionTransaction</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.begin_nested" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a> object
which will begin a “nested” transaction, e.g. SAVEPOINT.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>Behavior is the same as that of <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.begin" title="sqlalchemy.ext.asyncio.AsyncSession.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.begin()</span></code></a>.</p>
<p>For a general description of ORM begin nested, see
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin_nested()</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.bind">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">bind</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.bind" title="Permalink to this definition">¶</a></dt>
<dd><p>Proxy for the <code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncSession.bind</span></code> attribute
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close out the transactional resources and ORM objects used by this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>This expunges all ORM objects associated with this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>, ends any transaction in progress and
<span class="xref std std-term">releases</span> any <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> objects which
this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> itself has checked out from
associated <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> objects. The operation then
leaves the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> in a state which it may be
used again.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close" title="sqlalchemy.ext.asyncio.AsyncSession.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a> method <strong>does not prevent
the Session from being used again</strong>. The
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> itself does not actually have a
distinct “closed” state; it merely means the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> will release all database
connections and ORM objects.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../session_basics.html#session-closing"><span class="std std-ref">关闭</span></a> - detail on the semantics of
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close" title="sqlalchemy.ext.asyncio.AsyncSession.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.close_all">
<em class="property"><span class="pre">async</span><span class="w"> </span><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">close_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.close_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Close all <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> sessions.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.commit">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit the current transaction in progress.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.configure">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">configure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.configure" title="Permalink to this definition">¶</a></dt>
<dd><p>reconfigure the <code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code> used by this
<a class="reference internal" href="../contextual.html#sqlalchemy.orm.scoped_session" title="sqlalchemy.orm.scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">scoped_session</span></code></a>.</p>
<p>See <code class="xref py py-meth docutils literal notranslate"><span class="pre">sessionmaker.configure()</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.connection">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoreExecuteOptionsParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><span class="pre">AsyncConnection</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> object corresponding to
this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object’s transactional state.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>This method may also be used to establish execution options for the
database connection used by the current transaction.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.24: </span>Added **kw arguments which are passed
through to the underlying <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.connection()</span></code> method.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.connection()</span></code> - main documentation for
“connection”</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.delete">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark an instance as deleted.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>The database delete operation occurs upon <code class="docutils literal notranslate"><span class="pre">flush()</span></code>.</p>
<p>As this operation may need to cascade along unloaded relationships,
it is awaitable to allow for those queries to take place.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.delete()</span></code> - main documentation for delete</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.deleted">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">deleted</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.deleted" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all instances marked as ‘deleted’ within this <code class="docutils literal notranslate"><span class="pre">Session</span></code></p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.dirty">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">dirty</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.dirty" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all persistent instances considered dirty.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">some_mapped_object</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">dirty</span></pre></div>
</div>
<p>Instances are considered dirty when they were modified but not
deleted.</p>
<p>Note that this ‘dirty’ calculation is ‘optimistic’; most
attribute-setting or collection modification operations will
mark an instance as ‘dirty’ and place it in this set, even if
there is no net change to the attribute’s value.  At flush
time, the value of each attribute is compared to its
previously saved value, and if there’s no net change, no SQL
operation will occur (this is a more expensive operation so
it’s only done at flush time).</p>
<p>To check if an instance has actionable net changes to its
attributes, use the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.is_modified()</span></code> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.execute">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Result</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return a buffered
<code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code> object.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code> - main documentation for execute</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.expire">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">expire</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attribute_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire" title="Permalink to this definition">¶</a></dt>
<dd><p>Expire the attributes on an instance.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>Marks the attributes of an instance as out of date. When an expired
attribute is next accessed, a query will be issued to the
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object’s current transactional context in order to
load all expired attributes for the given instance.   Note that
a highly isolated transaction will return the same values as were
previously read in that same transaction, regardless of changes
in database state outside of that transaction.</p>
<p>To expire all objects in the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> simultaneously,
use <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire_all()</span></code>.</p>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object’s default behavior is to
expire all state whenever the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code>
or <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code> methods are called, so that new
state can be loaded for the new transaction.   For this reason,
calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code> only makes sense for the specific
case that a non-ORM SQL statement was emitted in the current
transaction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.expire.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire.params.instance">¶</a> – The instance to be refreshed.</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.expire.params.attribute_names"></span><strong>attribute_names</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire.params.attribute_names">¶</a> – optional list of string attribute names
indicating a subset of attributes to be expired.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">session_expire</span> - introductory material</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code></p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code></p>
<p><a class="reference internal" href="../queryguide/query.html#sqlalchemy.orm.Query.populate_existing" title="sqlalchemy.orm.Query.populate_existing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.populate_existing()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.expire_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">expire_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Expires all persistent instances within this Session.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>When any attributes on a persistent instance is next accessed,
a query will be issued using the
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object’s current transactional context in order to
load all expired attributes for the given instance.   Note that
a highly isolated transaction will return the same values as were
previously read in that same transaction, regardless of changes
in database state outside of that transaction.</p>
<p>To expire individual objects and individual attributes
on those objects, use <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code>.</p>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object’s default behavior is to
expire all state whenever the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code>
or <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code> methods are called, so that new
state can be loaded for the new transaction.   For this reason,
calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire_all()</span></code> is not usually needed,
assuming the transaction is isolated.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">session_expire</span> - introductory material</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code></p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code></p>
<p><a class="reference internal" href="../queryguide/query.html#sqlalchemy.orm.Query.populate_existing" title="sqlalchemy.orm.Query.populate_existing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.populate_existing()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.expunge">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">expunge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.expunge" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the <cite>instance</cite> from this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This will free all internal references to the instance.  Cascading
will be applied according to the <em>expunge</em> cascade rule.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.expunge_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">expunge_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.expunge_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all object instances from this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This is equivalent to calling <code class="docutils literal notranslate"><span class="pre">expunge(obj)</span></code> on all objects in this
<code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.flush">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">objects</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Flush all the object changes to the database.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.flush()</span></code> - main documentation for flush</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.get">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entity</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_EntityBindKey</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ident</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_PKIdentityArgument</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">ORMOption</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">populate_existing</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_for_update</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ForUpdateParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identity_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_O</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance based on the given primary key identifier,
or <code class="docutils literal notranslate"><span class="pre">None</span></code> if not found.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get()</span></code> - main documentation for get</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.get_bind">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">get_bind</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapper</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_EntityBindKey</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clause</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><span class="pre">ClauseElement</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_SessionBind</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Engine</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Connection</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.get_bind" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a “bind” to which the synchronous proxied <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>
is bound.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>Unlike the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> method, this method is
currently <strong>not</strong> used by this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> in any way
in order to resolve engines for requests.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method proxies directly to the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code>
method, however is currently <strong>not</strong> useful as an override target,
in contrast to that of the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> method.
The example below illustrates how to implement custom
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> schemes that work with
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> and <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>.</p>
</div>
<p>The pattern introduced at <a class="reference internal" href="../persistence_techniques.html#session-custom-partitioning"><span class="std std-ref">自定义垂直分区</span></a>
illustrates how to apply a custom bind-lookup scheme to a
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> given a set of <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code> objects.
To apply a corresponding <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> implementation
for use with a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> and <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>
objects, continue to subclass <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> and apply it to
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> using
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.params.sync_session_class" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">AsyncSession.sync_session_class</span></code></a>. The inner method must
continue to return <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code> instances, which can be
acquired from a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> using the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.sync_engine" title="sqlalchemy.ext.asyncio.AsyncEngine.sync_engine"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncEngine.sync_engine</span></code></a> attribute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># using example from &quot;Custom Vertical Partitioning&quot;</span>


<span class="kn">import</span> <span class="nn">random</span>

<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">AsyncSession</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">async_sessionmaker</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">Session</span>

<span class="c1"># construct async engines w/ async drivers</span>
<span class="n">engines</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;leader&#39;</span><span class="p">:</span><span class="n">create_async_engine</span><span class="p">(</span><span class="s2">&quot;sqlite+aiosqlite:///leader.db&quot;</span><span class="p">),</span>
    <span class="s1">&#39;other&#39;</span><span class="p">:</span><span class="n">create_async_engine</span><span class="p">(</span><span class="s2">&quot;sqlite+aiosqlite:///other.db&quot;</span><span class="p">),</span>
    <span class="s1">&#39;follower1&#39;</span><span class="p">:</span><span class="n">create_async_engine</span><span class="p">(</span><span class="s2">&quot;sqlite+aiosqlite:///follower1.db&quot;</span><span class="p">),</span>
    <span class="s1">&#39;follower2&#39;</span><span class="p">:</span><span class="n">create_async_engine</span><span class="p">(</span><span class="s2">&quot;sqlite+aiosqlite:///follower2.db&quot;</span><span class="p">),</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">RoutingSession</span><span class="p">(</span><span class="n">Session</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_bind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapper</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">clause</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="c1"># within get_bind(), return sync engines</span>
        <span class="k">if</span> <span class="n">mapper</span> <span class="ow">and</span> <span class="n">issubclass</span><span class="p">(</span><span class="n">mapper</span><span class="o">.</span><span class="n">class_</span><span class="p">,</span> <span class="n">MyOtherClass</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">engines</span><span class="p">[</span><span class="s1">&#39;other&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sync_engine</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flushing</span> <span class="ow">or</span> <span class="n">isinstance</span><span class="p">(</span><span class="n">clause</span><span class="p">,</span> <span class="p">(</span><span class="n">Update</span><span class="p">,</span> <span class="n">Delete</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">engines</span><span class="p">[</span><span class="s1">&#39;leader&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sync_engine</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">engines</span><span class="p">[</span>
                <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;follower1&#39;</span><span class="p">,</span><span class="s1">&#39;follower2&#39;</span><span class="p">])</span>
            <span class="p">]</span><span class="o">.</span><span class="n">sync_engine</span>

<span class="c1"># apply to AsyncSession using sync_session_class</span>
<span class="n">AsyncSessionMaker</span> <span class="o">=</span> <span class="n">async_sessionmaker</span><span class="p">(</span>
    <span class="n">sync_session_class</span><span class="o">=</span><span class="n">RoutingSession</span>
<span class="p">)</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<p>The <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> method is called in a non-asyncio,
implicitly non-blocking context in the same manner as ORM event hooks
and functions that are invoked via <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync" title="sqlalchemy.ext.asyncio.AsyncSession.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.run_sync()</span></code></a>, so
routines that wish to run SQL commands inside of
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> can continue to do so using
blocking-style code, which will be translated to implicitly async calls
at the point of invoking IO on the database drivers.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.identity_key">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">identity_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">class_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ident</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../../core/sqlelement.html#sqlalchemy.sql.expression.Tuple" title="sqlalchemy.sql.expression.Tuple"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Row</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">RowMapping</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identity_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_IdentityKeyType</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.identity_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an identity key.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This is an alias of <a class="reference internal" href="../mapping_api.html#sqlalchemy.orm.util.identity_key" title="sqlalchemy.orm.util.identity_key"><code class="xref py py-func docutils literal notranslate"><span class="pre">identity_key()</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.identity_map">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">identity_map</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.identity_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Proxy for the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.identity_map</span></code> attribute
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.info">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">info</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.info" title="Permalink to this definition">¶</a></dt>
<dd><p>A user-modifiable dictionary.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>The initial value of this dictionary can be populated using the
<code class="docutils literal notranslate"><span class="pre">info</span></code> argument to the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> constructor or
<code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code> constructor or factory methods.  The dictionary
here is always local to this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> and can be modified
independently of all other <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> objects.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.invalidate">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">invalidate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.invalidate" title="Permalink to this definition">¶</a></dt>
<dd><p>Close this Session, using connection invalidation.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>For a complete description, see <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.invalidate()</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.is_active">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">is_active</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_active" title="Permalink to this definition">¶</a></dt>
<dd><p>True if this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> not in “partial rollback” state.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> no longer begins
a new transaction immediately, so this attribute will be False
when the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> is first instantiated.</p>
</div>
<p>“partial rollback” state typically indicates that the flush process
of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> has failed, and that the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code> method must be emitted in order to
fully roll back the transaction.</p>
<p>If this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> is not in a transaction at all, the
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> will autobegin when it is first used, so in this
case <code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.is_active</span></code> will return True.</p>
<p>Otherwise, if this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> is within a transaction,
and that transaction has not been rolled back internally, the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.is_active</span></code> will also return True.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../faq/sessions.html#faq-session-rollback"><span class="std std-ref">此Session的事务由于刷新期间之前的异常而被回滚了。 。 （或类似的）</span></a></p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.in_transaction()</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.is_modified">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">is_modified</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_collections</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_modified" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the given instance has locally
modified attributes.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This method retrieves the history for each instrumented
attribute on the instance and performs a comparison of the current
value to its previously committed value, if any.</p>
<p>It is in effect a more expensive and accurate
version of checking for the given instance in the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code> collection; a full test for
each attribute’s net “dirty” status is performed.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="n">session</span><span class="o">.</span><span class="n">is_modified</span><span class="p">(</span><span class="n">someobject</span><span class="p">)</span></pre></div>
</div>
<p>A few caveats to this method apply:</p>
<ul>
<li><p>Instances present in the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code> collection may
report <code class="docutils literal notranslate"><span class="pre">False</span></code> when tested with this method.  This is because
the object may have received change events via attribute mutation,
thus placing it in <code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code>, but ultimately the state
is the same as that loaded from the database, resulting in no net
change here.</p></li>
<li><p>Scalar attributes may not have recorded the previously set
value when a new value was applied, if the attribute was not loaded,
or was expired, at the time the new value was received - in these
cases, the attribute is assumed to have a change, even if there is
ultimately no net change against its database value. SQLAlchemy in
most cases does not need the “old” value when a set event occurs, so
it skips the expense of a SQL call if the old value isn’t present,
based on the assumption that an UPDATE of the scalar value is
usually needed, and in those few cases where it isn’t, is less
expensive on average than issuing a defensive SELECT.</p>
<p>The “old” value is fetched unconditionally upon set only if the
attribute container has the <code class="docutils literal notranslate"><span class="pre">active_history</span></code> flag set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.
This flag is set typically for primary key attributes and scalar
object references that are not a simple many-to-one.  To set this
flag for any arbitrary mapped column, use the <code class="docutils literal notranslate"><span class="pre">active_history</span></code>
argument with <code class="xref py py-func docutils literal notranslate"><span class="pre">column_property()</span></code>.</p>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.is_modified.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_modified.params.instance">¶</a> – mapped instance to be tested for pending changes.</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.is_modified.params.include_collections"></span><strong>include_collections</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_modified.params.include_collections">¶</a> – Indicates if multivalued collections
should be included in the operation.  Setting this to <code class="docutils literal notranslate"><span class="pre">False</span></code> is a
way to detect only local-column based properties (i.e. scalar columns
or many-to-one foreign keys) that would result in an UPDATE for this
instance upon flush.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.merge">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_O</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">ORMOption</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_O</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy the state of a given instance into a corresponding instance
within this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.merge()</span></code> - main documentation for merge</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.new">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">new</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.new" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all instances marked as ‘new’ within this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.no_autoflush">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">no_autoflush</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.no_autoflush" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a context manager that disables autoflush.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">no_autoflush</span><span class="p">:</span>

    <span class="n">some_object</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">()</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">some_object</span><span class="p">)</span>
    <span class="c1"># won&#39;t autoflush</span>
    <span class="n">some_object</span><span class="o">.</span><span class="n">related_thing</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">SomeRelated</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span></pre></div>
</div>
<p>Operations that proceed within the <code class="docutils literal notranslate"><span class="pre">with:</span></code> block
will not be subject to flushes occurring upon query
access.  This is useful when initializing a series
of objects which involve existing database queries,
where the uncompleted object should not yet be flushed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.object_session">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">object_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Session</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.object_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> to which an object belongs.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This is an alias of <code class="xref py py-func docutils literal notranslate"><span class="pre">object_session()</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.refresh">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">refresh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attribute_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_for_update</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ForUpdateParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.refresh" title="Permalink to this definition">¶</a></dt>
<dd><p>Expire and refresh the attributes on the given instance.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>A query will be issued to the database and all attributes will be
refreshed with their current database value.</p>
<p>This is the async version of the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code> method.
See that method for a complete description of all options.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code> - main documentation for refresh</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.remove">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Dispose of the current <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>, if present.</p>
<p>Different from scoped_session’s remove method, this method would use
await to wait for the close method of AsyncSession.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.rollback">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Rollback the current transaction in progress.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.scalar">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scalar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.scalar" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return a scalar result.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.scalar()</span></code> - main documentation for scalar</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.scalars">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scalars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ScalarResult</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.scalars" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return scalar results.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a <code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code> object</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.24: </span>Added <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.scalars" title="sqlalchemy.ext.asyncio.AsyncSession.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.scalars()</span></code></a></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.26: </span>Added
<a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.scalars" title="sqlalchemy.ext.asyncio.async_scoped_session.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">async_scoped_session.scalars()</span></code></a></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.scalars()</span></code> - main documentation for scalars</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.stream_scalars" title="sqlalchemy.ext.asyncio.AsyncSession.stream_scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.stream_scalars()</span></code></a> - streaming version</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.session_factory">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">session_factory</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.session.async_sessionmaker"><span class="pre">async_sessionmaker</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_AS</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.session_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>The <cite>session_factory</cite> provided to <cite>__init__</cite> is stored in this
attribute and may be accessed at a later time.  This can be useful when
a new non-scoped <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> is needed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.stream">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><span class="pre">AsyncResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return a streaming
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> object.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.stream_scalars">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stream_scalars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><span class="pre">AsyncScalarResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.stream_scalars" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return a stream of scalar results.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a> object</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.24.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.scalars()</span></code> - main documentation for scalars</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.scalars" title="sqlalchemy.ext.asyncio.AsyncSession.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.scalars()</span></code></a> - non streaming version</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncAttrs">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncAttrs</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncAttrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Mixin class which provides an awaitable accessor for all attributes.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>

<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">ForeignKey</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">func</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">AsyncAttrs</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">DeclarativeBase</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">Mapped</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">mapped_column</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">relationship</span>


<span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="n">AsyncAttrs</span><span class="p">,</span> <span class="n">DeclarativeBase</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span>

    <span class="n">id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">str</span><span class="p">]</span>
    <span class="n">bs</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">B</span><span class="p">]]</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;b&quot;</span>
    <span class="n">id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">a_id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;a.id&quot;</span><span class="p">))</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">str</span><span class="p">]</span></pre><div class="code-annotations-key"></div></div>
</div>
<p>In the above example, the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs" title="sqlalchemy.ext.asyncio.AsyncAttrs"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncAttrs</span></code></a> mixin is applied to
the declarative <code class="docutils literal notranslate"><span class="pre">Base</span></code> class where it takes effect for all subclasses.
This mixin adds a single new attribute
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs" title="sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncAttrs.awaitable_attrs</span></code></a> to all classes, which will
yield the value of any attribute as an awaitable. This allows attributes
which may be subject to lazy loading or deferred / unexpiry loading to be
accessed such that IO can still be emitted:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a1</span> <span class="o">=</span> <span class="p">(</span><span class="k">await</span> <span class="n">async_session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)))</span><span class="o">.</span><span class="n">one</span><span class="p">()</span>

<span class="c1"># use the lazy loader on ``a1.bs`` via the ``.awaitable_attrs``</span>
<span class="c1"># interface, so that it may be awaited</span>
<span class="k">for</span> <span class="n">b1</span> <span class="ow">in</span> <span class="k">await</span> <span class="n">a1</span><span class="o">.</span><span class="n">awaitable_attrs</span><span class="o">.</span><span class="n">bs</span><span class="p">:</span>
    <span class="n">print</span><span class="p">(</span><span class="n">b1</span><span class="p">)</span></pre></div>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs" title="sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncAttrs.awaitable_attrs</span></code></a> performs a call against the
attribute that is approximately equivalent to using the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync" title="sqlalchemy.ext.asyncio.AsyncSession.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.run_sync()</span></code></a> method, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">b1</span> <span class="ow">in</span> <span class="k">await</span> <span class="n">async_session</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="k">lambda</span> <span class="n">sess</span><span class="p">:</span> <span class="n">a1</span><span class="o">.</span><span class="n">bs</span><span class="p">):</span>
    <span class="n">print</span><span class="p">(</span><span class="n">b1</span><span class="p">)</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.13.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs"><span class="sig-name descname">awaitable_attrs</span></a></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#asyncio-orm-avoid-lazyloads"><span class="std std-ref">在使用 AsyncSession 时避免隐式 I/O</span></a></p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncAttrs.</span></code></a><span class="sig-name descname"><span class="pre">awaitable_attrs</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs" title="Permalink to this definition">¶</a></dt>
<dd><p>provide a namespace of all attributes on this object wrapped
as awaitables.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a1</span> <span class="o">=</span> <span class="p">(</span><span class="k">await</span> <span class="n">async_session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)))</span><span class="o">.</span><span class="n">one</span><span class="p">()</span>

<span class="n">some_attribute</span> <span class="o">=</span> <span class="k">await</span> <span class="n">a1</span><span class="o">.</span><span class="n">awaitable_attrs</span><span class="o">.</span><span class="n">some_deferred_attribute</span>
<span class="n">some_collection</span> <span class="o">=</span> <span class="k">await</span> <span class="n">a1</span><span class="o">.</span><span class="n">awaitable_attrs</span><span class="o">.</span><span class="n">some_collection</span></pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncSession</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession" title="Permalink to this definition">¶</a></dt>
<dd><p>Asyncio version of <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> is a proxy for a traditional
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> instance.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> is <strong>not safe for use in concurrent
tasks.</strong>.  See <a class="reference internal" href="../session_basics.html#session-faq-threadsafe"><span class="std std-ref">Session 是线程安全的吗？_asyncio.AsyncSession 在并发任务中共享安全吗？</span></a> for background.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<p>To use an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> with custom <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>
implementations, see the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.params.sync_session_class" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">AsyncSession.sync_session_class</span></code></a> parameter.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.sync_session_class"><span class="sig-name descname">sync_session_class</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.aclose"><span class="sig-name descname">aclose()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.add"><span class="sig-name descname">add()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.add_all"><span class="sig-name descname">add_all()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.autoflush"><span class="sig-name descname">autoflush</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.begin"><span class="sig-name descname">begin()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.begin_nested"><span class="sig-name descname">begin_nested()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close_all"><span class="sig-name descname">close_all()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.commit"><span class="sig-name descname">commit()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.connection"><span class="sig-name descname">connection()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.delete"><span class="sig-name descname">delete()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.deleted"><span class="sig-name descname">deleted</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.dirty"><span class="sig-name descname">dirty</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.execute"><span class="sig-name descname">execute()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expire"><span class="sig-name descname">expire()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expire_all"><span class="sig-name descname">expire_all()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expunge"><span class="sig-name descname">expunge()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expunge_all"><span class="sig-name descname">expunge_all()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.flush"><span class="sig-name descname">flush()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.get"><span class="sig-name descname">get()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.get_bind"><span class="sig-name descname">get_bind()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.get_nested_transaction"><span class="sig-name descname">get_nested_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.get_transaction"><span class="sig-name descname">get_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.identity_key"><span class="sig-name descname">identity_key()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.identity_map"><span class="sig-name descname">identity_map</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.in_nested_transaction"><span class="sig-name descname">in_nested_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.in_transaction"><span class="sig-name descname">in_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.info"><span class="sig-name descname">info</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.invalidate"><span class="sig-name descname">invalidate()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.is_active"><span class="sig-name descname">is_active</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.is_modified"><span class="sig-name descname">is_modified()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.merge"><span class="sig-name descname">merge()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.new"><span class="sig-name descname">new</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.no_autoflush"><span class="sig-name descname">no_autoflush</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.object_session"><span class="sig-name descname">object_session()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.refresh"><span class="sig-name descname">refresh()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.rollback"><span class="sig-name descname">rollback()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync"><span class="sig-name descname">run_sync()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.scalar"><span class="sig-name descname">scalar()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.scalars"><span class="sig-name descname">scalars()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.stream"><span class="sig-name descname">stream()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.stream_scalars"><span class="sig-name descname">stream_scalars()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.sync_session"><span class="sig-name descname">sync_session</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.ReversibleProxy</span></code>)</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.sync_session_class">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">sync_session_class</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Session</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;class</span> <span class="pre">'sqlalchemy.orm.session.Session'&gt;</span></em><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.sync_session_class" title="Permalink to this definition">¶</a></dt>
<dd><p>The class or callable that provides the
underlying <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> instance for a particular
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>.</p>
<p>At the class level, this attribute is the default value for the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.params.sync_session_class" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">AsyncSession.sync_session_class</span></code></a> parameter. Custom
subclasses of <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> can override this.</p>
<p>At the instance level, this attribute indicates the current class or
callable that was used to provide the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> instance for
this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> instance.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.24.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_AsyncSessionBind</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">_SessionBindKey</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_AsyncSessionBind</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sync_session_class</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Session</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>.</p>
<p>All parameters other than <code class="docutils literal notranslate"><span class="pre">sync_session_class</span></code> are passed to the
<code class="docutils literal notranslate"><span class="pre">sync_session_class</span></code> callable directly to instantiate a new
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>. Refer to <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.__init__()</span></code> for
parameter documentation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncSession.params.sync_session_class"></span><strong>sync_session_class</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.params.sync_session_class">¶</a> – <p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> subclass or other callable which will be used
to construct the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> which will be proxied. This
parameter may be used to provide custom <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>
subclasses. Defaults to the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.sync_session_class" title="sqlalchemy.ext.asyncio.AsyncSession.sync_session_class"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncSession.sync_session_class</span></code></a> class-level
attribute.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.24.</span></p>
</div>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.aclose">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aclose</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.aclose" title="Permalink to this definition">¶</a></dt>
<dd><p>A synonym for <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close" title="sqlalchemy.ext.asyncio.AsyncSession.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a>.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.aclose" title="sqlalchemy.ext.asyncio.AsyncSession.aclose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.aclose()</span></code></a> name is specifically
to support the Python standard library <code class="docutils literal notranslate"><span class="pre">&#64;contextlib.aclosing</span></code>
context manager function.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.20.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.add">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_warn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Place an object into this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>Objects that are in the <span class="xref std std-term">transient</span> state when passed to the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code> method will move to the
<span class="xref std std-term">pending</span> state, until the next flush, at which point they
will move to the <span class="xref std std-term">persistent</span> state.</p>
<p>Objects that are in the <span class="xref std std-term">detached</span> state when passed to the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code> method will move to the <span class="xref std std-term">persistent</span>
state directly.</p>
<p>If the transaction used by the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> is rolled back,
objects which were transient when they were passed to
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code> will be moved back to the
<span class="xref std std-term">transient</span> state, and will no longer be present within this
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add_all()</span></code></p>
<p><a class="reference internal" href="../session_basics.html#session-adding"><span class="std std-ref">添加新对象或现有对象</span></a> - at <a class="reference internal" href="../session_basics.html#session-basics"><span class="std std-ref">使用会话的基础知识</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.add_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">add_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instances</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">object</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.add_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the given collection of instances to this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>See the documentation for <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code> for a general
behavioral description.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code></p>
<p><a class="reference internal" href="../session_basics.html#session-adding"><span class="std std-ref">添加新对象或现有对象</span></a> - at <a class="reference internal" href="../session_basics.html#session-basics"><span class="std std-ref">使用会话的基础知识</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.autoflush">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">autoflush</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.autoflush" title="Permalink to this definition">¶</a></dt>
<dd><p>Proxy for the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.autoflush</span></code> attribute
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.begin">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">begin</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.session.AsyncSessionTransaction"><span class="pre">AsyncSessionTransaction</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a> object.</p>
<p>The underlying <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> will perform the
“begin” action when the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a>
object is entered:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">async_session</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
    <span class="c1"># .. ORM transaction is begun</span></pre></div>
</div>
<p>Note that database IO will not normally occur when the session-level
transaction is begun, as database transactions begin on an
on-demand basis.  However, the begin block is async to accommodate
for a <a class="reference internal" href="../events.html#sqlalchemy.orm.SessionEvents.after_transaction_create" title="sqlalchemy.orm.SessionEvents.after_transaction_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SessionEvents.after_transaction_create()</span></code></a>
event hook that may perform IO.</p>
<p>For a general description of ORM begin, see
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin()</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.begin_nested">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">begin_nested</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.session.AsyncSessionTransaction"><span class="pre">AsyncSessionTransaction</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.begin_nested" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a> object
which will begin a “nested” transaction, e.g. SAVEPOINT.</p>
<p>Behavior is the same as that of <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.begin" title="sqlalchemy.ext.asyncio.AsyncSession.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.begin()</span></code></a>.</p>
<p>For a general description of ORM begin nested, see
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin_nested()</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close out the transactional resources and ORM objects used by this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>.</p>
<p>This expunges all ORM objects associated with this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>, ends any transaction in progress and
<span class="xref std std-term">releases</span> any <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> objects which
this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> itself has checked out from
associated <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> objects. The operation then
leaves the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> in a state which it may be
used again.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close" title="sqlalchemy.ext.asyncio.AsyncSession.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a> method <strong>does not prevent
the Session from being used again</strong>. The
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> itself does not actually have a
distinct “closed” state; it merely means the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> will release all database
connections and ORM objects.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../session_basics.html#session-closing"><span class="std std-ref">关闭</span></a> - detail on the semantics of
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close" title="sqlalchemy.ext.asyncio.AsyncSession.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.close_all">
<em class="property"><span class="pre">async</span><span class="w"> </span><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">close_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.close_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Close all <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> sessions.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.commit">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit the current transaction in progress.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.connection">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoreExecuteOptionsParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><span class="pre">AsyncConnection</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> object corresponding to
this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object’s transactional state.</p>
<p>This method may also be used to establish execution options for the
database connection used by the current transaction.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.24: </span>Added **kw arguments which are passed
through to the underlying <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.connection()</span></code> method.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.connection()</span></code> - main documentation for
“connection”</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.delete">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark an instance as deleted.</p>
<p>The database delete operation occurs upon <code class="docutils literal notranslate"><span class="pre">flush()</span></code>.</p>
<p>As this operation may need to cascade along unloaded relationships,
it is awaitable to allow for those queries to take place.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.delete()</span></code> - main documentation for delete</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.deleted">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">deleted</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.deleted" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all instances marked as ‘deleted’ within this <code class="docutils literal notranslate"><span class="pre">Session</span></code></p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.dirty">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">dirty</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.dirty" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all persistent instances considered dirty.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">some_mapped_object</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">dirty</span></pre></div>
</div>
<p>Instances are considered dirty when they were modified but not
deleted.</p>
<p>Note that this ‘dirty’ calculation is ‘optimistic’; most
attribute-setting or collection modification operations will
mark an instance as ‘dirty’ and place it in this set, even if
there is no net change to the attribute’s value.  At flush
time, the value of each attribute is compared to its
previously saved value, and if there’s no net change, no SQL
operation will occur (this is a more expensive operation so
it’s only done at flush time).</p>
<p>To check if an instance has actionable net changes to its
attributes, use the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.is_modified()</span></code> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.execute">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Result</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return a buffered
<code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code> object.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code> - main documentation for execute</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.expire">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">expire</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attribute_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.expire" title="Permalink to this definition">¶</a></dt>
<dd><p>Expire the attributes on an instance.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>Marks the attributes of an instance as out of date. When an expired
attribute is next accessed, a query will be issued to the
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object’s current transactional context in order to
load all expired attributes for the given instance.   Note that
a highly isolated transaction will return the same values as were
previously read in that same transaction, regardless of changes
in database state outside of that transaction.</p>
<p>To expire all objects in the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> simultaneously,
use <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire_all()</span></code>.</p>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object’s default behavior is to
expire all state whenever the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code>
or <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code> methods are called, so that new
state can be loaded for the new transaction.   For this reason,
calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code> only makes sense for the specific
case that a non-ORM SQL statement was emitted in the current
transaction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncSession.expire.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expire.params.instance">¶</a> – The instance to be refreshed.</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncSession.expire.params.attribute_names"></span><strong>attribute_names</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expire.params.attribute_names">¶</a> – optional list of string attribute names
indicating a subset of attributes to be expired.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">session_expire</span> - introductory material</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code></p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code></p>
<p><a class="reference internal" href="../queryguide/query.html#sqlalchemy.orm.Query.populate_existing" title="sqlalchemy.orm.Query.populate_existing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.populate_existing()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.expire_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">expire_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.expire_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Expires all persistent instances within this Session.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>When any attributes on a persistent instance is next accessed,
a query will be issued using the
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object’s current transactional context in order to
load all expired attributes for the given instance.   Note that
a highly isolated transaction will return the same values as were
previously read in that same transaction, regardless of changes
in database state outside of that transaction.</p>
<p>To expire individual objects and individual attributes
on those objects, use <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code>.</p>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object’s default behavior is to
expire all state whenever the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code>
or <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code> methods are called, so that new
state can be loaded for the new transaction.   For this reason,
calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire_all()</span></code> is not usually needed,
assuming the transaction is isolated.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">session_expire</span> - introductory material</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code></p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code></p>
<p><a class="reference internal" href="../queryguide/query.html#sqlalchemy.orm.Query.populate_existing" title="sqlalchemy.orm.Query.populate_existing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.populate_existing()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.expunge">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">expunge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.expunge" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the <cite>instance</cite> from this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This will free all internal references to the instance.  Cascading
will be applied according to the <em>expunge</em> cascade rule.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.expunge_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">expunge_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.expunge_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all object instances from this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This is equivalent to calling <code class="docutils literal notranslate"><span class="pre">expunge(obj)</span></code> on all objects in this
<code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.flush">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">objects</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Flush all the object changes to the database.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.flush()</span></code> - main documentation for flush</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.get">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entity</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_EntityBindKey</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ident</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_PKIdentityArgument</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">ORMOption</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">populate_existing</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_for_update</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ForUpdateParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identity_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_O</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance based on the given primary key identifier,
or <code class="docutils literal notranslate"><span class="pre">None</span></code> if not found.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get()</span></code> - main documentation for get</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.get_bind">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">get_bind</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapper</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_EntityBindKey</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clause</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><span class="pre">ClauseElement</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_SessionBind</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Engine</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Connection</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.get_bind" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a “bind” to which the synchronous proxied <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>
is bound.</p>
<p>Unlike the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> method, this method is
currently <strong>not</strong> used by this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> in any way
in order to resolve engines for requests.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method proxies directly to the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code>
method, however is currently <strong>not</strong> useful as an override target,
in contrast to that of the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> method.
The example below illustrates how to implement custom
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> schemes that work with
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> and <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>.</p>
</div>
<p>The pattern introduced at <a class="reference internal" href="../persistence_techniques.html#session-custom-partitioning"><span class="std std-ref">自定义垂直分区</span></a>
illustrates how to apply a custom bind-lookup scheme to a
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> given a set of <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code> objects.
To apply a corresponding <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> implementation
for use with a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> and <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>
objects, continue to subclass <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> and apply it to
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> using
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.params.sync_session_class" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">AsyncSession.sync_session_class</span></code></a>. The inner method must
continue to return <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code> instances, which can be
acquired from a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> using the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.sync_engine" title="sqlalchemy.ext.asyncio.AsyncEngine.sync_engine"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncEngine.sync_engine</span></code></a> attribute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># using example from &quot;Custom Vertical Partitioning&quot;</span>


<span class="kn">import</span> <span class="nn">random</span>

<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">AsyncSession</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">async_sessionmaker</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">Session</span>

<span class="c1"># construct async engines w/ async drivers</span>
<span class="n">engines</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;leader&#39;</span><span class="p">:</span><span class="n">create_async_engine</span><span class="p">(</span><span class="s2">&quot;sqlite+aiosqlite:///leader.db&quot;</span><span class="p">),</span>
    <span class="s1">&#39;other&#39;</span><span class="p">:</span><span class="n">create_async_engine</span><span class="p">(</span><span class="s2">&quot;sqlite+aiosqlite:///other.db&quot;</span><span class="p">),</span>
    <span class="s1">&#39;follower1&#39;</span><span class="p">:</span><span class="n">create_async_engine</span><span class="p">(</span><span class="s2">&quot;sqlite+aiosqlite:///follower1.db&quot;</span><span class="p">),</span>
    <span class="s1">&#39;follower2&#39;</span><span class="p">:</span><span class="n">create_async_engine</span><span class="p">(</span><span class="s2">&quot;sqlite+aiosqlite:///follower2.db&quot;</span><span class="p">),</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">RoutingSession</span><span class="p">(</span><span class="n">Session</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_bind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapper</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">clause</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="c1"># within get_bind(), return sync engines</span>
        <span class="k">if</span> <span class="n">mapper</span> <span class="ow">and</span> <span class="n">issubclass</span><span class="p">(</span><span class="n">mapper</span><span class="o">.</span><span class="n">class_</span><span class="p">,</span> <span class="n">MyOtherClass</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">engines</span><span class="p">[</span><span class="s1">&#39;other&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sync_engine</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flushing</span> <span class="ow">or</span> <span class="n">isinstance</span><span class="p">(</span><span class="n">clause</span><span class="p">,</span> <span class="p">(</span><span class="n">Update</span><span class="p">,</span> <span class="n">Delete</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">engines</span><span class="p">[</span><span class="s1">&#39;leader&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sync_engine</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">engines</span><span class="p">[</span>
                <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;follower1&#39;</span><span class="p">,</span><span class="s1">&#39;follower2&#39;</span><span class="p">])</span>
            <span class="p">]</span><span class="o">.</span><span class="n">sync_engine</span>

<span class="c1"># apply to AsyncSession using sync_session_class</span>
<span class="n">AsyncSessionMaker</span> <span class="o">=</span> <span class="n">async_sessionmaker</span><span class="p">(</span>
    <span class="n">sync_session_class</span><span class="o">=</span><span class="n">RoutingSession</span>
<span class="p">)</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<p>The <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> method is called in a non-asyncio,
implicitly non-blocking context in the same manner as ORM event hooks
and functions that are invoked via <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync" title="sqlalchemy.ext.asyncio.AsyncSession.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.run_sync()</span></code></a>, so
routines that wish to run SQL commands inside of
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> can continue to do so using
blocking-style code, which will be translated to implicitly async calls
at the point of invoking IO on the database drivers.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.get_nested_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">get_nested_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.session.AsyncSessionTransaction"><span class="pre">AsyncSessionTransaction</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.get_nested_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current nested transaction in progress, if any.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a> object, or
<code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.18.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.get_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">get_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.session.AsyncSessionTransaction"><span class="pre">AsyncSessionTransaction</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.get_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current root transaction in progress, if any.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a> object, or
<code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.18.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.identity_key">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">identity_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">class_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ident</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../../core/sqlelement.html#sqlalchemy.sql.expression.Tuple" title="sqlalchemy.sql.expression.Tuple"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Row</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">RowMapping</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identity_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_IdentityKeyType</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.identity_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an identity key.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This is an alias of <a class="reference internal" href="../mapping_api.html#sqlalchemy.orm.util.identity_key" title="sqlalchemy.orm.util.identity_key"><code class="xref py py-func docutils literal notranslate"><span class="pre">identity_key()</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.identity_map">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">identity_map</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.identity_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Proxy for the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.identity_map</span></code> attribute
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.in_nested_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">in_nested_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.in_nested_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> has begun a nested
transaction, e.g. SAVEPOINT.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.in_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">in_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.in_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> has begun a transaction.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.is_active</span></code></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.info">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">info</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.info" title="Permalink to this definition">¶</a></dt>
<dd><p>A user-modifiable dictionary.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>The initial value of this dictionary can be populated using the
<code class="docutils literal notranslate"><span class="pre">info</span></code> argument to the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> constructor or
<code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code> constructor or factory methods.  The dictionary
here is always local to this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> and can be modified
independently of all other <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> objects.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.invalidate">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">invalidate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.invalidate" title="Permalink to this definition">¶</a></dt>
<dd><p>Close this Session, using connection invalidation.</p>
<p>For a complete description, see <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.invalidate()</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.is_active">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">is_active</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.is_active" title="Permalink to this definition">¶</a></dt>
<dd><p>True if this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> not in “partial rollback” state.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> no longer begins
a new transaction immediately, so this attribute will be False
when the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> is first instantiated.</p>
</div>
<p>“partial rollback” state typically indicates that the flush process
of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> has failed, and that the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code> method must be emitted in order to
fully roll back the transaction.</p>
<p>If this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> is not in a transaction at all, the
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> will autobegin when it is first used, so in this
case <code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.is_active</span></code> will return True.</p>
<p>Otherwise, if this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> is within a transaction,
and that transaction has not been rolled back internally, the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.is_active</span></code> will also return True.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../faq/sessions.html#faq-session-rollback"><span class="std std-ref">此Session的事务由于刷新期间之前的异常而被回滚了。 。 （或类似的）</span></a></p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.in_transaction()</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.is_modified">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">is_modified</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_collections</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.is_modified" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the given instance has locally
modified attributes.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This method retrieves the history for each instrumented
attribute on the instance and performs a comparison of the current
value to its previously committed value, if any.</p>
<p>It is in effect a more expensive and accurate
version of checking for the given instance in the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code> collection; a full test for
each attribute’s net “dirty” status is performed.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="n">session</span><span class="o">.</span><span class="n">is_modified</span><span class="p">(</span><span class="n">someobject</span><span class="p">)</span></pre></div>
</div>
<p>A few caveats to this method apply:</p>
<ul>
<li><p>Instances present in the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code> collection may
report <code class="docutils literal notranslate"><span class="pre">False</span></code> when tested with this method.  This is because
the object may have received change events via attribute mutation,
thus placing it in <code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code>, but ultimately the state
is the same as that loaded from the database, resulting in no net
change here.</p></li>
<li><p>Scalar attributes may not have recorded the previously set
value when a new value was applied, if the attribute was not loaded,
or was expired, at the time the new value was received - in these
cases, the attribute is assumed to have a change, even if there is
ultimately no net change against its database value. SQLAlchemy in
most cases does not need the “old” value when a set event occurs, so
it skips the expense of a SQL call if the old value isn’t present,
based on the assumption that an UPDATE of the scalar value is
usually needed, and in those few cases where it isn’t, is less
expensive on average than issuing a defensive SELECT.</p>
<p>The “old” value is fetched unconditionally upon set only if the
attribute container has the <code class="docutils literal notranslate"><span class="pre">active_history</span></code> flag set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.
This flag is set typically for primary key attributes and scalar
object references that are not a simple many-to-one.  To set this
flag for any arbitrary mapped column, use the <code class="docutils literal notranslate"><span class="pre">active_history</span></code>
argument with <code class="xref py py-func docutils literal notranslate"><span class="pre">column_property()</span></code>.</p>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncSession.is_modified.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.is_modified.params.instance">¶</a> – mapped instance to be tested for pending changes.</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncSession.is_modified.params.include_collections"></span><strong>include_collections</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.is_modified.params.include_collections">¶</a> – Indicates if multivalued collections
should be included in the operation.  Setting this to <code class="docutils literal notranslate"><span class="pre">False</span></code> is a
way to detect only local-column based properties (i.e. scalar columns
or many-to-one foreign keys) that would result in an UPDATE for this
instance upon flush.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.merge">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_O</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">ORMOption</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_O</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy the state of a given instance into a corresponding instance
within this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.merge()</span></code> - main documentation for merge</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.new">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">new</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.new" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all instances marked as ‘new’ within this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.no_autoflush">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">no_autoflush</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.no_autoflush" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a context manager that disables autoflush.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">no_autoflush</span><span class="p">:</span>

    <span class="n">some_object</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">()</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">some_object</span><span class="p">)</span>
    <span class="c1"># won&#39;t autoflush</span>
    <span class="n">some_object</span><span class="o">.</span><span class="n">related_thing</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">SomeRelated</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span></pre></div>
</div>
<p>Operations that proceed within the <code class="docutils literal notranslate"><span class="pre">with:</span></code> block
will not be subject to flushes occurring upon query
access.  This is useful when initializing a series
of objects which involve existing database queries,
where the uncompleted object should not yet be flushed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.object_session">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">object_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Session</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.object_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> to which an object belongs.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This is an alias of <code class="xref py py-func docutils literal notranslate"><span class="pre">object_session()</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.refresh">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">refresh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attribute_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_for_update</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ForUpdateParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.refresh" title="Permalink to this definition">¶</a></dt>
<dd><p>Expire and refresh the attributes on the given instance.</p>
<p>A query will be issued to the database and all attributes will be
refreshed with their current database value.</p>
<p>This is the async version of the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code> method.
See that method for a complete description of all options.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code> - main documentation for refresh</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.rollback">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Rollback the current transaction in progress.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.run_sync">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run_sync</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">arg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_T</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync" title="Permalink to this definition">¶</a></dt>
<dd><p>Invoke the given synchronous (i.e. not async) callable,
passing a synchronous-style <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> as the first
argument.</p>
<p>This method allows traditional synchronous SQLAlchemy functions to
run within the context of an asyncio application.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">some_business_method</span><span class="p">(</span><span class="n">session</span><span class="p">:</span> <span class="n">Session</span><span class="p">,</span> <span class="n">param</span><span class="p">:</span> <span class="n">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;A synchronous function that does not require awaiting</span>

<span class="sd">    :param session: a SQLAlchemy Session, used synchronously</span>

<span class="sd">    :return: an optional return value is supported</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">MyObject</span><span class="p">(</span><span class="n">param</span><span class="o">=</span><span class="n">param</span><span class="p">))</span>
    <span class="n">session</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
    <span class="k">return</span> <span class="s2">&quot;success&quot;</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">do_something_async</span><span class="p">(</span><span class="n">async_engine</span><span class="p">:</span> <span class="n">AsyncEngine</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;an async function that uses awaiting&#39;&#39;&#39;</span>

    <span class="k">with</span> <span class="n">AsyncSession</span><span class="p">(</span><span class="n">async_engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">async_session</span><span class="p">:</span>
        <span class="c1"># run some_business_method() with a sync-style</span>
        <span class="c1"># Session, proxied into an awaitable</span>
        <span class="n">return_code</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_session</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">some_business_method</span><span class="p">,</span> <span class="n">param</span><span class="o">=</span><span class="s2">&quot;param1&quot;</span><span class="p">)</span>
        <span class="n">print</span><span class="p">(</span><span class="n">return_code</span><span class="p">)</span></pre></div>
</div>
<p>This method maintains the asyncio event loop all the way through
to the database connection by running the given callable in a
specially instrumented greenlet.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The provided callable is invoked inline within the asyncio event
loop, and will block on traditional IO calls.  IO within this
callable should only call into SQLAlchemy’s asyncio database
APIs which will be properly adapted to the greenlet context.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs" title="sqlalchemy.ext.asyncio.AsyncAttrs"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncAttrs</span></code></a>  - a mixin for ORM mapped classes that provides
a similar feature more succinctly on a per-attribute basis</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.run_sync" title="sqlalchemy.ext.asyncio.AsyncConnection.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.run_sync()</span></code></a></p>
<p><span class="xref std std-ref">session_run_sync</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.scalar">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scalar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.scalar" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return a scalar result.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.scalar()</span></code> - main documentation for scalar</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.scalars">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scalars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ScalarResult</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.scalars" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return scalar results.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a <code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code> object</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.24: </span>Added <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.scalars" title="sqlalchemy.ext.asyncio.AsyncSession.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.scalars()</span></code></a></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.26: </span>Added
<a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.scalars" title="sqlalchemy.ext.asyncio.async_scoped_session.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">async_scoped_session.scalars()</span></code></a></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.scalars()</span></code> - main documentation for scalars</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.stream_scalars" title="sqlalchemy.ext.asyncio.AsyncSession.stream_scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.stream_scalars()</span></code></a> - streaming version</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.stream">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><span class="pre">AsyncResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return a streaming
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.stream_scalars">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stream_scalars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><span class="pre">AsyncScalarResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.stream_scalars" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return a stream of scalar results.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a> object</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.24.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.scalars()</span></code> - main documentation for scalars</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.scalars" title="sqlalchemy.ext.asyncio.AsyncSession.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.scalars()</span></code></a> - non streaming version</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.sync_session">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">sync_session</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Session</span></em><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.sync_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Reference to the underlying <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> proxies requests towards.</p>
<p>This instance can be used as an event target.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">asyncio_events</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSessionTransaction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncSessionTransaction</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for the ORM <code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code> object.</p>
<p>This object is provided so that a transaction-holding object
for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.begin" title="sqlalchemy.ext.asyncio.AsyncSession.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.begin()</span></code></a> may be returned.</p>
<p>The object supports both explicit calls to
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.commit" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSessionTransaction.commit()</span></code></a> and
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.rollback" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSessionTransaction.rollback()</span></code></a>, as well as use as an
async context manager.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.commit"><span class="sig-name descname">commit()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.rollback"><span class="sig-name descname">rollback()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSessionTransaction</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.ReversibleProxy</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.StartableContext</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSessionTransaction.commit">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSessionTransaction.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSessionTransaction.rollback">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSessionTransaction.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Roll back this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a>.</p>
</dd></dl>

</dd></dl>

</section>
</section>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="index.html" title="previous chapter">ORM扩展</a>
        Next:
        <a href="associationproxy.html" title="next chapter">关联代理</a>

    <div id="docs-copyright">
        &copy; <a href="../../copyright.html">Copyright</a> 2007-2023, the SQLAlchemy authors and contributors.


    <p><b>flambé!</b> the dragon and <b><i>The Alchemist</i></b> image designs created and generously donated by <a href="https://github.com/vmalloc">Rotem Yaari</a>.</p>

        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 7.0.1.

    Documentation last generated: 2023/8/18 9:47:28

    </div>
</div>

</div>



        
        

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../../',
          VERSION:     '2.0.19',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>

    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script type="text/javascript" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/sphinx_highlight.js"></script>
        <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
        <script type="text/javascript" src="../../_static/copybutton.js"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../../_static/init.js"></script>


    </body>
</html>


