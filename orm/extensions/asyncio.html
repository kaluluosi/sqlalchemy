<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>
            
    
    异步 I/O (asyncio)
 &mdash;
    SQLAlchemy 2.0 Documentation

        </title>

        
            <!-- begin iterate through site-imported + sphinx environment css_files -->
                <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/sphinx_paramlinks.css" type="text/css" />
            <!-- end iterate through site-imported + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
        <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="top" title="SQLAlchemy 2.0 Documentation" href="../../index.html" />
        <link rel="up" title="ORM扩展" href="index.html" />
        <link rel="next" title="关联代理" href="associationproxy.html" />
        <link rel="prev" title="ORM扩展" href="index.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">2.0.19</span>


        | Release Date: July 15, 2023

    </div>

    <h1><a href="../../index.html">SQLAlchemy 2.0 Documentation</a></h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">



        <div id="docs-sidebar-popout">
            <h3><a href="../../index.html">SQLAlchemy 2.0 Documentation</a></h3>
            <p id="sidebar-topnav">
                <a href="../../index.html">Home</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../../search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12" />
                  </label>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="../index.html" title="SQLAlchemy ORM">SQLAlchemy ORM</a>
        </h3>

        <ul>
<li><span class="link-container"><a class="reference external" href="../quickstart.html">ORM快速入门</a></span></li>
<li><span class="link-container"><a class="reference external" href="../mapper_config.html">ORM映射类配置</a></span></li>
<li><span class="link-container"><a class="reference external" href="../relationships.html">关系配置</a></span></li>
<li><span class="link-container"><a class="reference external" href="../queryguide/index.html">ORM 查询指南</a></span></li>
<li><span class="link-container"><a class="reference external" href="../session.html">用 Session</a></span></li>
<li><span class="link-container"><a class="reference external" href="../extending.html">事件和内部机制</a></span></li>
<li><span class="link-container"><a class="reference external" href="index.html">ORM扩展</a></span><ul>
<li class="selected"><span class="link-container"><strong>异步 I/O (asyncio)</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#io-apple-m1">异步io平台安装说明(包括Apple M1)</a></span></li>
<li><span class="link-container"><a class="reference external" href="#core">概要 - Core</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#asyncio-concurrency">使用异步会话处理并发任务</a></span></li>
<li><span class="link-container"><a class="reference external" href="#asyncsession-io">使用 AsyncSession 时避免隐式 IO</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#orm">异步ORM的集合</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#asyncio">在 asyncio 下运行同步方法和函数</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#gevent-pythonasyncio">1. 与使用“gevent”时不同，我们可以继续使用标准的 Python。使用asyncio扩展处理事件</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#asyncengine-sessions-sessionmakers">使用AsyncEngine / Sessions / Sessionmakers的事件监听器示例</a></span></li>
<li><span class="link-container"><a class="reference external" href="#awaitable">异步操作下使用仅接受 awaitable 的数据库驱动方法</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#register-custom-types-adaptedconnection-dbapi-adaptedconnection-run-async-sqlalchemy-sqlalchemy-asyncio">在 <code class="docutils literal notranslate"><span class="pre">register_custom_types</span></code> 事件处理器中传入的对象是   <code class="xref py py-class docutils literal notranslate"><span class="pre">AdaptedConnection</span></code>  实例，这个实例提供了一个异步数据库驱动程序连接对象的类似 DBAPI 的接口。然后  <code class="xref py py-meth docutils literal notranslate"><span class="pre">AdaptedConnection.run_async()</span></code>  方法可以在事件处理器或其他 SQLAlchemy 内部执行异步方法。可等待环境下的SQLAlchemy Asyncio</a></span></li>
<li><span class="link-container"><a class="reference external" href="#id20">使用多个 asyncio 事件循环</a></span></li>
<li><span class="link-container"><a class="reference external" href="#asyncio-scoped-session">使用 asyncio scoped session</a></span></li>
<li><span class="link-container"><a class="reference external" href="#inspector">使用 inspector 检查架构对象</a></span></li>
<li><span class="link-container"><a class="reference external" href="#api">引擎 API 文档</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.create_async_engine"><code class="docutils literal notranslate"><span class="pre">create_async_engine()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_engine_from_config"><code class="docutils literal notranslate"><span class="pre">async_engine_from_config()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.create_async_pool_from_url"><code class="docutils literal notranslate"><span class="pre">create_async_pool_from_url()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.begin"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.begin()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.clear_compiled_cache"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.clear_compiled_cache()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.connect"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.connect()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.dialect"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.dialect</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.dispose"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.dispose()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.driver"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.driver</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.echo"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.echo</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.engine"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.engine</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.execution_options"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.execution_options()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.get_execution_options"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.get_execution_options()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.name"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.name</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.pool"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.pool</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.raw_connection"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.raw_connection()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.sync_engine"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.sync_engine</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.update_execution_options"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.update_execution_options()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncEngine.url"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.url</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.aclose"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.aclose()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.begin"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.begin()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.begin_nested"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.begin_nested()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.close"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.closed"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.closed</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.commit"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.commit()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.connection"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.connection</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.default_isolation_level"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.default_isolation_level</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.dialect"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.dialect</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.exec_driver_sql"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.exec_driver_sql()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.execute"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.execute()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.execution_options"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.execution_options()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_nested_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.get_nested_transaction()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_raw_connection"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.get_raw_connection()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.get_transaction()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.in_nested_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.in_nested_transaction()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.in_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.in_transaction()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.info"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.info</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.invalidate"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.invalidate()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.invalidated"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.invalidated</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.rollback"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.rollback()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.run_sync"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.run_sync()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.scalar"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.scalar()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.scalars"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.scalars()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.start"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.start()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.stream()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream_scalars"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.stream_scalars()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.sync_connection"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.sync_connection</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncConnection.sync_engine"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.sync_engine</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncTransaction"><code class="docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncTransaction.close"><code class="docutils literal notranslate"><span class="pre">AsyncTransaction.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncTransaction.commit"><code class="docutils literal notranslate"><span class="pre">AsyncTransaction.commit()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncTransaction.rollback"><code class="docutils literal notranslate"><span class="pre">AsyncTransaction.rollback()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncTransaction.start"><code class="docutils literal notranslate"><span class="pre">AsyncTransaction.start()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">AsyncResult</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.all"><code class="docutils literal notranslate"><span class="pre">AsyncResult.all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.close"><code class="docutils literal notranslate"><span class="pre">AsyncResult.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.closed"><code class="docutils literal notranslate"><span class="pre">AsyncResult.closed</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.columns"><code class="docutils literal notranslate"><span class="pre">AsyncResult.columns()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchall"><code class="docutils literal notranslate"><span class="pre">AsyncResult.fetchall()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchmany"><code class="docutils literal notranslate"><span class="pre">AsyncResult.fetchmany()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchone"><code class="docutils literal notranslate"><span class="pre">AsyncResult.fetchone()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.first"><code class="docutils literal notranslate"><span class="pre">AsyncResult.first()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.freeze"><code class="docutils literal notranslate"><span class="pre">AsyncResult.freeze()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.keys"><code class="docutils literal notranslate"><span class="pre">AsyncResult.keys()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.mappings"><code class="docutils literal notranslate"><span class="pre">AsyncResult.mappings()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.one"><code class="docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none"><code class="docutils literal notranslate"><span class="pre">AsyncResult.one_or_none()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.partitions"><code class="docutils literal notranslate"><span class="pre">AsyncResult.partitions()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar"><code class="docutils literal notranslate"><span class="pre">AsyncResult.scalar()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one"><code class="docutils literal notranslate"><span class="pre">AsyncResult.scalar_one()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one_or_none"><code class="docutils literal notranslate"><span class="pre">AsyncResult.scalar_one_or_none()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.t"><code class="docutils literal notranslate"><span class="pre">AsyncResult.t</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.tuples"><code class="docutils literal notranslate"><span class="pre">AsyncResult.tuples()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.unique"><code class="docutils literal notranslate"><span class="pre">AsyncResult.unique()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncResult.yield_per"><code class="docutils literal notranslate"><span class="pre">AsyncResult.yield_per()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.all"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.close"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.closed"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.closed</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.fetchall"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.fetchall()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.fetchmany"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.fetchmany()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.first"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.first()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.one"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.one()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.one_or_none"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.one_or_none()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.partitions"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.partitions()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.unique"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.unique()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.yield_per"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.yield_per()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.all"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.close"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.closed"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.closed</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.columns"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.columns()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchall"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.fetchall()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchmany"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.fetchmany()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchone"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.fetchone()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.first"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.first()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.keys"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.keys()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.one"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.one()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.one_or_none"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.one_or_none()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.partitions"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.partitions()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.unique"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.unique()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.yield_per"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.yield_per()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncTupleResult"><code class="docutils literal notranslate"><span class="pre">AsyncTupleResult</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#orm-api">ORM 会话 API 文档</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_object_session"><code class="docutils literal notranslate"><span class="pre">async_object_session()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_session"><code class="docutils literal notranslate"><span class="pre">async_session()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_sessionmaker"><code class="docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_sessionmaker.__call__"><code class="docutils literal notranslate"><span class="pre">async_sessionmaker.__call__()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_sessionmaker.__init__"><code class="docutils literal notranslate"><span class="pre">async_sessionmaker.__init__()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_sessionmaker.begin"><code class="docutils literal notranslate"><span class="pre">async_sessionmaker.begin()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_sessionmaker.configure"><code class="docutils literal notranslate"><span class="pre">async_sessionmaker.configure()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.__call__"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.__call__()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.__init__"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.__init__()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.aclose"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.aclose()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.add"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.add()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.add_all"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.add_all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.autoflush"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.autoflush</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.begin"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.begin()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.begin_nested"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.begin_nested()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.bind"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.bind</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.close"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.close_all"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.close_all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.commit"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.commit()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.configure"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.configure()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.connection"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.connection()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.delete"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.delete()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.deleted"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.deleted</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.dirty"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.dirty</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.execute"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.execute()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.expire()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire_all"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.expire_all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.expunge"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.expunge()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.expunge_all"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.expunge_all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.flush"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.flush()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.get"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.get()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.get_bind"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.get_bind()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.identity_key"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.identity_key()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.identity_map"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.identity_map</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.info"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.info</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.invalidate"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.invalidate()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_active"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.is_active</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_modified"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.is_modified()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.merge"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.merge()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.new"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.new</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.no_autoflush"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.no_autoflush</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.object_session"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.object_session()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.refresh"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.refresh()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.remove"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.remove()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.rollback"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.rollback()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.scalar"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.scalar()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.scalars"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.scalars()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.session_factory"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.session_factory</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.stream"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.stream()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.async_scoped_session.stream_scalars"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.stream_scalars()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncAttrs"><code class="docutils literal notranslate"><span class="pre">AsyncAttrs</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs"><code class="docutils literal notranslate"><span class="pre">AsyncAttrs.awaitable_attrs</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">AsyncSession</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.sync_session_class"><code class="docutils literal notranslate"><span class="pre">AsyncSession.sync_session_class</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.__init__"><code class="docutils literal notranslate"><span class="pre">AsyncSession.__init__()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.aclose"><code class="docutils literal notranslate"><span class="pre">AsyncSession.aclose()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.add"><code class="docutils literal notranslate"><span class="pre">AsyncSession.add()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.add_all"><code class="docutils literal notranslate"><span class="pre">AsyncSession.add_all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.autoflush"><code class="docutils literal notranslate"><span class="pre">AsyncSession.autoflush</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.begin"><code class="docutils literal notranslate"><span class="pre">AsyncSession.begin()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.begin_nested"><code class="docutils literal notranslate"><span class="pre">AsyncSession.begin_nested()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.close"><code class="docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.close_all"><code class="docutils literal notranslate"><span class="pre">AsyncSession.close_all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.commit"><code class="docutils literal notranslate"><span class="pre">AsyncSession.commit()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.connection"><code class="docutils literal notranslate"><span class="pre">AsyncSession.connection()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.delete"><code class="docutils literal notranslate"><span class="pre">AsyncSession.delete()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.deleted"><code class="docutils literal notranslate"><span class="pre">AsyncSession.deleted</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.dirty"><code class="docutils literal notranslate"><span class="pre">AsyncSession.dirty</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.execute"><code class="docutils literal notranslate"><span class="pre">AsyncSession.execute()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.expire"><code class="docutils literal notranslate"><span class="pre">AsyncSession.expire()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.expire_all"><code class="docutils literal notranslate"><span class="pre">AsyncSession.expire_all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.expunge"><code class="docutils literal notranslate"><span class="pre">AsyncSession.expunge()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.expunge_all"><code class="docutils literal notranslate"><span class="pre">AsyncSession.expunge_all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.flush"><code class="docutils literal notranslate"><span class="pre">AsyncSession.flush()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.get"><code class="docutils literal notranslate"><span class="pre">AsyncSession.get()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.get_bind"><code class="docutils literal notranslate"><span class="pre">AsyncSession.get_bind()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.get_nested_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncSession.get_nested_transaction()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.get_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncSession.get_transaction()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.identity_key"><code class="docutils literal notranslate"><span class="pre">AsyncSession.identity_key()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.identity_map"><code class="docutils literal notranslate"><span class="pre">AsyncSession.identity_map</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.in_nested_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncSession.in_nested_transaction()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.in_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncSession.in_transaction()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.info"><code class="docutils literal notranslate"><span class="pre">AsyncSession.info</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.invalidate"><code class="docutils literal notranslate"><span class="pre">AsyncSession.invalidate()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.is_active"><code class="docutils literal notranslate"><span class="pre">AsyncSession.is_active</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.is_modified"><code class="docutils literal notranslate"><span class="pre">AsyncSession.is_modified()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.merge"><code class="docutils literal notranslate"><span class="pre">AsyncSession.merge()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.new"><code class="docutils literal notranslate"><span class="pre">AsyncSession.new</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.no_autoflush"><code class="docutils literal notranslate"><span class="pre">AsyncSession.no_autoflush</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.object_session"><code class="docutils literal notranslate"><span class="pre">AsyncSession.object_session()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.refresh"><code class="docutils literal notranslate"><span class="pre">AsyncSession.refresh()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.rollback"><code class="docutils literal notranslate"><span class="pre">AsyncSession.rollback()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync"><code class="docutils literal notranslate"><span class="pre">AsyncSession.run_sync()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.scalar"><code class="docutils literal notranslate"><span class="pre">AsyncSession.scalar()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.scalars"><code class="docutils literal notranslate"><span class="pre">AsyncSession.scalars()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.stream"><code class="docutils literal notranslate"><span class="pre">AsyncSession.stream()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.stream_scalars"><code class="docutils literal notranslate"><span class="pre">AsyncSession.stream_scalars()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSession.sync_session"><code class="docutils literal notranslate"><span class="pre">AsyncSession.sync_session</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.commit"><code class="docutils literal notranslate"><span class="pre">AsyncSessionTransaction.commit()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.rollback"><code class="docutils literal notranslate"><span class="pre">AsyncSessionTransaction.rollback()</span></code></a></span></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="associationproxy.html">关联代理</a></span></li>
<li><span class="link-container"><a class="reference external" href="automap.html">自动映射</a></span></li>
<li><span class="link-container"><a class="reference external" href="baked.html">Baked Queries</a></span></li>
<li><span class="link-container"><a class="reference external" href="declarative/index.html">声明式扩展</a></span></li>
<li><span class="link-container"><a class="reference external" href="mypy.html">Mypy / Pep-484 ORM映射支持</a></span></li>
<li><span class="link-container"><a class="reference external" href="mutable.html">变化追踪</a></span></li>
<li><span class="link-container"><a class="reference external" href="orderinglist.html">有序列表</a></span></li>
<li><span class="link-container"><a class="reference external" href="horizontal_shard.html">水平分片</a></span></li>
<li><span class="link-container"><a class="reference external" href="hybrid.html">混合属性</a></span></li>
<li><span class="link-container"><a class="reference external" href="indexable.html">可索引</a></span></li>
<li><span class="link-container"><a class="reference external" href="instrumentation.html">类替代仪器</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="../examples.html">ORM 示例</a></span></li>
</ul>



        </div>

        </div>

    </div>

    <div id="narrow-index-nav">
        <form class="search" action="../../search.html" method="get">
            <label>
                Search terms:
            <input type="text" placeholder="search..." name="q" size="12" />
            </label>
            <input type="submit" value="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>

        <p>
        <a href="../../index.html">Home</a>
        </p>

    </div>


        <div id="docs-narrow-top-navigation">
            <ul>
                <li><b>Previous:</b>
                <a href="index.html" title="previous chapter">ORM扩展</a></li>
                <li><b>Next:</b>
                <a href="associationproxy.html" title="next chapter">关联代理</a></li>

            <li><b>Up:</b> <a href="../../index.html">Home</a></li>
                    <ul><li><a href="../index.html" title="SQLAlchemy ORM">SQLAlchemy ORM</a></li>
                    <ul><li><a href="index.html" title="ORM扩展">ORM扩展</a></li>
                </ul>
                </ul>



            <li><b>On this page:</b></li>
            <ul>
<li><a class="reference internal" href="#i-o-asyncio">异步 I/O (asyncio)</a><ul>
<li><a class="reference internal" href="#io-apple-m1">异步io平台安装说明(包括Apple M1)</a></li>
<li><a class="reference internal" href="#core">概要 - Core</a><ul>
<li><a class="reference internal" href="#asyncio-concurrency">使用异步会话处理并发任务</a></li>
<li><a class="reference internal" href="#asyncsession-io">使用 AsyncSession 时避免隐式 IO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#orm">异步ORM的集合</a><ul>
<li><a class="reference internal" href="#asyncio">在 asyncio 下运行同步方法和函数</a></li>
</ul>
</li>
<li><a class="reference internal" href="#gevent-pythonasyncio">1. 与使用“gevent”时不同，我们可以继续使用标准的 Python。使用asyncio扩展处理事件</a><ul>
<li><a class="reference internal" href="#asyncengine-sessions-sessionmakers">使用AsyncEngine / Sessions / Sessionmakers的事件监听器示例</a></li>
<li><a class="reference internal" href="#awaitable">异步操作下使用仅接受 awaitable 的数据库驱动方法</a></li>
</ul>
</li>
<li><a class="reference internal" href="#register-custom-types-adaptedconnection-dbapi-adaptedconnection-run-async-sqlalchemy-sqlalchemy-asyncio">在 <code class="docutils literal notranslate"><span class="pre">register_custom_types</span></code> 事件处理器中传入的对象是   <code class="xref py py-class docutils literal notranslate"><span class="pre">AdaptedConnection</span></code>  实例，这个实例提供了一个异步数据库驱动程序连接对象的类似 DBAPI 的接口。然后  <code class="xref py py-meth docutils literal notranslate"><span class="pre">AdaptedConnection.run_async()</span></code>  方法可以在事件处理器或其他 SQLAlchemy 内部执行异步方法。可等待环境下的SQLAlchemy Asyncio</a></li>
<li><a class="reference internal" href="#id20">使用多个 asyncio 事件循环</a></li>
<li><a class="reference internal" href="#asyncio-scoped-session">使用 asyncio scoped session</a></li>
<li><a class="reference internal" href="#inspector">使用 inspector 检查架构对象</a></li>
<li><a class="reference internal" href="#api">引擎 API 文档</a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.create_async_engine"><code class="docutils literal notranslate"><span class="pre">create_async_engine()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_engine_from_config"><code class="docutils literal notranslate"><span class="pre">async_engine_from_config()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.create_async_pool_from_url"><code class="docutils literal notranslate"><span class="pre">create_async_pool_from_url()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.begin"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.begin()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.clear_compiled_cache"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.clear_compiled_cache()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.connect"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.connect()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.dialect"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.dialect</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.dispose"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.dispose()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.driver"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.driver</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.echo"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.echo</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.engine"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.engine</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.execution_options"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.execution_options()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.get_execution_options"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.get_execution_options()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.name"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.name</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.pool"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.pool</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.raw_connection"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.raw_connection()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.sync_engine"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.sync_engine</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.update_execution_options"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.update_execution_options()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.url"><code class="docutils literal notranslate"><span class="pre">AsyncEngine.url</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.aclose"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.aclose()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.begin"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.begin()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.begin_nested"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.begin_nested()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.close"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.closed"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.closed</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.commit"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.commit()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.connection"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.connection</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.default_isolation_level"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.default_isolation_level</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.dialect"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.dialect</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.exec_driver_sql"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.exec_driver_sql()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.execute"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.execute()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.execution_options"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.execution_options()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_nested_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.get_nested_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_raw_connection"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.get_raw_connection()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.get_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.in_nested_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.in_nested_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.in_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.in_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.info"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.info</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.invalidate"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.invalidate()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.invalidated"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.invalidated</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.rollback"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.rollback()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.run_sync"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.run_sync()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.scalar"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.scalar()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.scalars"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.scalars()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.start"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.start()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.stream()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream_scalars"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.stream_scalars()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.sync_connection"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.sync_connection</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.sync_engine"><code class="docutils literal notranslate"><span class="pre">AsyncConnection.sync_engine</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction"><code class="docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction.close"><code class="docutils literal notranslate"><span class="pre">AsyncTransaction.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction.commit"><code class="docutils literal notranslate"><span class="pre">AsyncTransaction.commit()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction.rollback"><code class="docutils literal notranslate"><span class="pre">AsyncTransaction.rollback()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction.start"><code class="docutils literal notranslate"><span class="pre">AsyncTransaction.start()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">AsyncResult</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.all"><code class="docutils literal notranslate"><span class="pre">AsyncResult.all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.close"><code class="docutils literal notranslate"><span class="pre">AsyncResult.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.closed"><code class="docutils literal notranslate"><span class="pre">AsyncResult.closed</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.columns"><code class="docutils literal notranslate"><span class="pre">AsyncResult.columns()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchall"><code class="docutils literal notranslate"><span class="pre">AsyncResult.fetchall()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchmany"><code class="docutils literal notranslate"><span class="pre">AsyncResult.fetchmany()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchone"><code class="docutils literal notranslate"><span class="pre">AsyncResult.fetchone()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.first"><code class="docutils literal notranslate"><span class="pre">AsyncResult.first()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.freeze"><code class="docutils literal notranslate"><span class="pre">AsyncResult.freeze()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.keys"><code class="docutils literal notranslate"><span class="pre">AsyncResult.keys()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.mappings"><code class="docutils literal notranslate"><span class="pre">AsyncResult.mappings()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one"><code class="docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none"><code class="docutils literal notranslate"><span class="pre">AsyncResult.one_or_none()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.partitions"><code class="docutils literal notranslate"><span class="pre">AsyncResult.partitions()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar"><code class="docutils literal notranslate"><span class="pre">AsyncResult.scalar()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one"><code class="docutils literal notranslate"><span class="pre">AsyncResult.scalar_one()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one_or_none"><code class="docutils literal notranslate"><span class="pre">AsyncResult.scalar_one_or_none()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.t"><code class="docutils literal notranslate"><span class="pre">AsyncResult.t</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.tuples"><code class="docutils literal notranslate"><span class="pre">AsyncResult.tuples()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.unique"><code class="docutils literal notranslate"><span class="pre">AsyncResult.unique()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.yield_per"><code class="docutils literal notranslate"><span class="pre">AsyncResult.yield_per()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.all"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.close"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.closed"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.closed</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.fetchall"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.fetchall()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.fetchmany"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.fetchmany()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.first"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.first()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.one"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.one()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.one_or_none"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.one_or_none()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.partitions"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.partitions()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.unique"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.unique()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.yield_per"><code class="docutils literal notranslate"><span class="pre">AsyncScalarResult.yield_per()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.all"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.close"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.closed"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.closed</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.columns"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.columns()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchall"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.fetchall()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchmany"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.fetchmany()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchone"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.fetchone()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.first"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.first()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.keys"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.keys()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.one"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.one()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.one_or_none"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.one_or_none()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.partitions"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.partitions()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.unique"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.unique()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.yield_per"><code class="docutils literal notranslate"><span class="pre">AsyncMappingResult.yield_per()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTupleResult"><code class="docutils literal notranslate"><span class="pre">AsyncTupleResult</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#orm-api">ORM 会话 API 文档</a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_object_session"><code class="docutils literal notranslate"><span class="pre">async_object_session()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_session"><code class="docutils literal notranslate"><span class="pre">async_session()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker"><code class="docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker.__call__"><code class="docutils literal notranslate"><span class="pre">async_sessionmaker.__call__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker.__init__"><code class="docutils literal notranslate"><span class="pre">async_sessionmaker.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker.begin"><code class="docutils literal notranslate"><span class="pre">async_sessionmaker.begin()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker.configure"><code class="docutils literal notranslate"><span class="pre">async_sessionmaker.configure()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.__call__"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.__call__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.__init__"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.aclose"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.aclose()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.add"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.add()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.add_all"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.add_all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.autoflush"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.autoflush</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.begin"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.begin()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.begin_nested"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.begin_nested()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.bind"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.bind</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.close"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.close_all"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.close_all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.commit"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.commit()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.configure"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.configure()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.connection"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.connection()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.delete"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.delete()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.deleted"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.deleted</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.dirty"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.dirty</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.execute"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.execute()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.expire()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire_all"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.expire_all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.expunge"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.expunge()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.expunge_all"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.expunge_all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.flush"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.flush()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.get"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.get()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.get_bind"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.get_bind()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.identity_key"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.identity_key()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.identity_map"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.identity_map</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.info"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.info</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.invalidate"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.invalidate()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_active"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.is_active</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_modified"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.is_modified()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.merge"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.merge()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.new"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.new</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.no_autoflush"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.no_autoflush</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.object_session"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.object_session()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.refresh"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.refresh()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.remove"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.remove()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.rollback"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.rollback()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.scalar"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.scalar()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.scalars"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.scalars()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.session_factory"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.session_factory</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.stream"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.stream()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.stream_scalars"><code class="docutils literal notranslate"><span class="pre">async_scoped_session.stream_scalars()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs"><code class="docutils literal notranslate"><span class="pre">AsyncAttrs</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs"><code class="docutils literal notranslate"><span class="pre">AsyncAttrs.awaitable_attrs</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">AsyncSession</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.sync_session_class"><code class="docutils literal notranslate"><span class="pre">AsyncSession.sync_session_class</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.__init__"><code class="docutils literal notranslate"><span class="pre">AsyncSession.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.aclose"><code class="docutils literal notranslate"><span class="pre">AsyncSession.aclose()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.add"><code class="docutils literal notranslate"><span class="pre">AsyncSession.add()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.add_all"><code class="docutils literal notranslate"><span class="pre">AsyncSession.add_all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.autoflush"><code class="docutils literal notranslate"><span class="pre">AsyncSession.autoflush</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.begin"><code class="docutils literal notranslate"><span class="pre">AsyncSession.begin()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.begin_nested"><code class="docutils literal notranslate"><span class="pre">AsyncSession.begin_nested()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close"><code class="docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close_all"><code class="docutils literal notranslate"><span class="pre">AsyncSession.close_all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.commit"><code class="docutils literal notranslate"><span class="pre">AsyncSession.commit()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.connection"><code class="docutils literal notranslate"><span class="pre">AsyncSession.connection()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.delete"><code class="docutils literal notranslate"><span class="pre">AsyncSession.delete()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.deleted"><code class="docutils literal notranslate"><span class="pre">AsyncSession.deleted</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.dirty"><code class="docutils literal notranslate"><span class="pre">AsyncSession.dirty</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.execute"><code class="docutils literal notranslate"><span class="pre">AsyncSession.execute()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expire"><code class="docutils literal notranslate"><span class="pre">AsyncSession.expire()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expire_all"><code class="docutils literal notranslate"><span class="pre">AsyncSession.expire_all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expunge"><code class="docutils literal notranslate"><span class="pre">AsyncSession.expunge()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expunge_all"><code class="docutils literal notranslate"><span class="pre">AsyncSession.expunge_all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.flush"><code class="docutils literal notranslate"><span class="pre">AsyncSession.flush()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.get"><code class="docutils literal notranslate"><span class="pre">AsyncSession.get()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.get_bind"><code class="docutils literal notranslate"><span class="pre">AsyncSession.get_bind()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.get_nested_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncSession.get_nested_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.get_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncSession.get_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.identity_key"><code class="docutils literal notranslate"><span class="pre">AsyncSession.identity_key()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.identity_map"><code class="docutils literal notranslate"><span class="pre">AsyncSession.identity_map</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.in_nested_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncSession.in_nested_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.in_transaction"><code class="docutils literal notranslate"><span class="pre">AsyncSession.in_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.info"><code class="docutils literal notranslate"><span class="pre">AsyncSession.info</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.invalidate"><code class="docutils literal notranslate"><span class="pre">AsyncSession.invalidate()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.is_active"><code class="docutils literal notranslate"><span class="pre">AsyncSession.is_active</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.is_modified"><code class="docutils literal notranslate"><span class="pre">AsyncSession.is_modified()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.merge"><code class="docutils literal notranslate"><span class="pre">AsyncSession.merge()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.new"><code class="docutils literal notranslate"><span class="pre">AsyncSession.new</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.no_autoflush"><code class="docutils literal notranslate"><span class="pre">AsyncSession.no_autoflush</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.object_session"><code class="docutils literal notranslate"><span class="pre">AsyncSession.object_session()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.refresh"><code class="docutils literal notranslate"><span class="pre">AsyncSession.refresh()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.rollback"><code class="docutils literal notranslate"><span class="pre">AsyncSession.rollback()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync"><code class="docutils literal notranslate"><span class="pre">AsyncSession.run_sync()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.scalar"><code class="docutils literal notranslate"><span class="pre">AsyncSession.scalar()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.scalars"><code class="docutils literal notranslate"><span class="pre">AsyncSession.scalars()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.stream"><code class="docutils literal notranslate"><span class="pre">AsyncSession.stream()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.stream_scalars"><code class="docutils literal notranslate"><span class="pre">AsyncSession.stream_scalars()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.sync_session"><code class="docutils literal notranslate"><span class="pre">AsyncSession.sync_session</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.commit"><code class="docutils literal notranslate"><span class="pre">AsyncSessionTransaction.commit()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.rollback"><code class="docutils literal notranslate"><span class="pre">AsyncSessionTransaction.rollback()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


            </ul>

        </div>



    <div id="docs-body" role="main" class="withsidebar orm-extensions-asyncio" >
        
<section id="i-o-asyncio">
<span id="asyncio-toplevel"></span><h1>异步 I/O (asyncio)<a class="headerlink" href="#i-o-asyncio" title="Permalink to this heading">¶</a></h1>
<p>支持Python asyncio。包括Core和ORM使用，使用asyncio兼容的方言。</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>请阅读   <a class="reference internal" href="#asyncio-install"><span class="std std-ref">异步io平台安装说明(包括Apple M1)</span></a>  获取关于安装平台的重要提示，包括**Apple M1 Architecture**。</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../changelog/migration_14.html#change-3414"><span class="std std-ref">Core和ORM现在支持异步IO</span></a>  - 初始特性公告</p>
<p><a class="reference internal" href="../examples.html#examples-asyncio"><span class="std std-ref">Asyncio 集成</span></a>  - 例子脚本展示了Core和ORM在asyncio扩展中的使用。</p>
</div>
<section id="io-apple-m1">
<span id="asyncio-install"></span><h2>异步io平台安装说明(包括Apple M1)<a class="headerlink" href="#io-apple-m1" title="Permalink to this heading">¶</a></h2>
<p>asyncio扩展仅适用于Python 3。它还依赖于 <a class="reference external" href="https://pypi.org/project/greenlet/">greenlet</a> 库。
这个依赖已经在常见的机器平台，包括以下机型默认安装。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>x86_64 aarch64 ppc64le amd64 win32</pre></div>
</div>
<p>对于上述平台，“greenlet”已知可以提供预构建的wheel文件。
对于其他平台，“greenlet”<strong>默认不会安装</strong>；
目前greenlet的文件列表可以在`Greenlet -
下载文件&lt;<a class="reference external" href="https://pypi.org/project/greenlet/#files">https://pypi.org/project/greenlet/#files</a>&gt;`_中看到。
请注意，<strong>有许多架构被省略了，包括Apple M1</strong>。</p>
<p>为了在确保`greenlet`依赖存在时安装SQLAlchemy，无论使用什么平台,
可以如下步骤安装 <code class="docutils literal notranslate"><span class="pre">[asyncio]</span></code> <a class="reference external" href="https://packaging.python.org/en/latest/tutorials/installing-packages/#installing-setuptools-extras">setuptools 额外选项</a>,
这样会将 <code class="docutils literal notranslate"><span class="pre">greenlet</span></code> 也加入安装。:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>pip install sqlalchemy[asyncio]</pre></div>
</div>
<p>在没有预先构建wheel文件的平台上安装``greenlet``，意味着需要从源代码构建``greenlet``，
这需要使用Python的开发库。</p>
</section>
<section id="core">
<h2>概要 - Core<a class="headerlink" href="#core" title="Permalink to this heading">¶</a></h2>
<p>对于Core使用，  <a class="reference internal" href="#sqlalchemy.ext.asyncio.create_async_engine" title="sqlalchemy.ext.asyncio.create_async_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_async_engine()</span></code></a>  函数可以创建一个  :class:<a href="#id1"><span class="problematic" id="id2">`</span></a>_asyncio.AsyncEngine`实例，
该实例通过其 :meth:<a href="#id3"><span class="problematic" id="id4">`</span></a>_asyncio.AsyncEngine.connect`和 :meth:<a href="#id5"><span class="problematic" id="id6">`</span></a>_asyncio.AsyncEngine.begin`方法提供了传统</p>
<blockquote>
<div><p><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>  API的异步版本。   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>  通过提供   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a></p>
</div></blockquote>
<p>来交付异步上下文管理器。可以使用  <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.execute" title="sqlalchemy.ext.asyncio.AsyncConnection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.execute()</span></code></a>  方法通过缓冲   <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>
执行语句，或者使用  <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream" title="sqlalchemy.ext.asyncio.AsyncConnection.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.stream()</span></code></a>  方法通过流服务器端   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a>
执行语句:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Column</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">MetaData</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">String</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Table</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>

<span class="n">meta</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>
<span class="n">t1</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s2">&quot;t1&quot;</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span> <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">async_main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span>
        <span class="s2">&quot;postgresql+asyncpg://scott:tiger@localhost/test&quot;</span><span class="p">,</span>
        <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">meta</span><span class="o">.</span><span class="n">create_all</span><span class="p">)</span>

        <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="n">t1</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;some name 1&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;some name 2&quot;</span><span class="p">}]</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
        <span class="c1"># select a Result, which will be delivered with buffered</span>
        <span class="c1"># results</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">t1</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;some name 1&quot;</span><span class="p">))</span>

        <span class="n">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">fetchall</span><span class="p">())</span>

    <span class="c1"># 为函数范围中创建的async引擎关闭和清理持久连接</span>
    <span class="k">await</span> <span class="n">engine</span><span class="o">.</span><span class="n">dispose</span><span class="p">()</span>


<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">async_main</span><span class="p">())</span></pre></div>
</div>
<p>上述方法中，  <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.run_sync" title="sqlalchemy.ext.asyncio.AsyncConnection.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.run_sync()</span></code></a>   方法可用于调用特殊的 DDL 函数，
例如  <code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code> ，该函数不包含可等待挂钩。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<dl class="simple">
<dt>推荐使用 <code class="docutils literal notranslate"><span class="pre">await</span></code> 调用  <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.dispose" title="sqlalchemy.ext.asyncio.AsyncEngine.dispose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncEngine.dispose()</span></code></a>  方法，</dt><dd><p>如果在一个上下文中使用   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>  对象并且会被垃圾回收，在上面的示例中的
<code class="docutils literal notranslate"><span class="pre">async_main</span></code> 函数中，就像这样确保连接池持有的所有连接都在可等待的上下文中正确处理。与使用阻止IO不同，
SQLAlchemy 不能在 <code class="docutils literal notranslate"><span class="pre">__del__</span></code> 或 weakref终结器中正确处理这些连接，因为没有机会调用 <code class="docutils literal notranslate"><span class="pre">await</span></code>。
如果在范围内未明确处置引擎，则可能会导致发出类似于形式的警告标准输出
<code class="docutils literal notranslate"><span class="pre">RuntimeError:</span> <span class="pre">Event</span> <span class="pre">loop</span> <span class="pre">is</span> <span class="pre">closed</span></code> 中的垃圾回收。</p>
</dd>
</dl>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a>  还通过  <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream" title="sqlalchemy.ext.asyncio.AsyncConnection.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.stream()</span></code></a>   方法提供了一个 “streaming” API，</p>
</div>
<p>返回一个   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a>  对象。该结果对象使用服务器端光标，并提供了一个async await API，例如一个async迭代器:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">async_result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">t1</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">async_result</span><span class="p">:</span>
        <span class="n">print</span><span class="p">(</span><span class="s2">&quot;row: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">row</span><span class="p">,))</span></pre></div>
</div>
<p id="asyncio-orm">概要 - ORM
—————使用  <a class="reference internal" href="../../glossary.html#term-2.0"><span class="xref std std-term">2.0 风格</span></a>  类提供了完整的ORM功能。</p>
<p>在默认使用模式下，必须特别小心，以避免涉及ORM关系和列属性的  <span class="xref std std-term">延迟加载</span>  或其他过期属性访问；下一节  :ref:<a href="#id7"><span class="problematic" id="id8">`</span></a>asyncio_orm_avoid_lazyloads`详细介绍了这一点。</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>一个   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>  实例 <strong>不能安全地用于多个并发任务</strong>。请参阅有关   <a class="reference internal" href="#asyncio-concurrency"><span class="std std-ref">使用异步会话处理并发任务</span></a>  和   <a class="reference internal" href="../session_basics.html#session-faq-threadsafe"><span class="std std-ref">Session 是线程安全的吗？在并发任务中共享 AsyncSession 是安全的吗？</span></a>  的部分内容。</p>
</div>
<p>下面的示例说明了包括映射器和会话配置的完整示例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>

<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">ForeignKey</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">func</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">AsyncAttrs</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">async_sessionmaker</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">AsyncSession</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">DeclarativeBase</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">Mapped</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">mapped_column</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">relationship</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">selectinload</span>


<span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="n">AsyncAttrs</span><span class="p">,</span> <span class="n">DeclarativeBase</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span>

    <span class="n">id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">str</span><span class="p">]</span>
    <span class="n">create_date</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">server_default</span><span class="o">=</span><span class="n">func</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>
    <span class="n">bs</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">B</span><span class="p">]]</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;b&quot;</span>
    <span class="n">id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">a_id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;a.id&quot;</span><span class="p">))</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">str</span><span class="p">]</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">insert_objects</span><span class="p">(</span><span class="n">async_session</span><span class="p">:</span> <span class="n">async_sessionmaker</span><span class="p">[</span><span class="n">AsyncSession</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">async_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
            <span class="n">session</span><span class="o">.</span><span class="n">add_all</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">A</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="p">[</span><span class="n">B</span><span class="p">(),</span> <span class="n">B</span><span class="p">()],</span> <span class="n">data</span><span class="o">=</span><span class="s2">&quot;a1&quot;</span><span class="p">),</span>
                    <span class="n">A</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="p">[],</span> <span class="n">data</span><span class="o">=</span><span class="s2">&quot;a2&quot;</span><span class="p">),</span>
                    <span class="n">A</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="p">[</span><span class="n">B</span><span class="p">(),</span> <span class="n">B</span><span class="p">()],</span> <span class="n">data</span><span class="o">=</span><span class="s2">&quot;a3&quot;</span><span class="p">),</span>
                <span class="p">]</span>
            <span class="p">)</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">select_and_update_objects</span><span class="p">(</span>
    <span class="n">async_session</span><span class="p">:</span> <span class="n">async_sessionmaker</span><span class="p">[</span><span class="n">AsyncSession</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">async_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">selectinload</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">bs</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">a1</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">scalars</span><span class="p">():</span>
            <span class="n">print</span><span class="p">(</span><span class="n">a1</span><span class="p">)</span>
            <span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;created at: </span><span class="si">{</span><span class="n">a1</span><span class="o">.</span><span class="n">create_date</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">b1</span> <span class="ow">in</span> <span class="n">a1</span><span class="o">.</span><span class="n">bs</span><span class="p">:</span>
                <span class="n">print</span><span class="p">(</span><span class="n">b1</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

        <span class="n">a1</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">scalars</span><span class="p">()</span><span class="o">.</span><span class="n">one</span><span class="p">()</span>

        <span class="n">a1</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;new data&quot;</span>

        <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="c1"># access attribute subsequent to commit; this is what</span>
        <span class="c1"># expire_on_commit=False allows</span>
        <span class="n">print</span><span class="p">(</span><span class="n">a1</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

        <span class="c1"># alternatively, AsyncAttrs may be used to access any attribute</span>
        <span class="c1"># as an awaitable (new in 2.0.13)</span>
        <span class="k">for</span> <span class="n">b1</span> <span class="ow">in</span> <span class="k">await</span> <span class="n">a1</span><span class="o">.</span><span class="n">awaitable_attrs</span><span class="o">.</span><span class="n">bs</span><span class="p">:</span>
            <span class="n">print</span><span class="p">(</span><span class="n">b1</span><span class="p">)</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">async_main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span>
        <span class="s2">&quot;postgresql+asyncpg://scott:tiger@localhost/test&quot;</span><span class="p">,</span>
        <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># async_sessionmaker: a factory for new AsyncSession objects.</span>
    <span class="c1"># expire_on_commit - don&#39;t expire objects after transaction commit</span>
    <span class="n">async_session</span> <span class="o">=</span> <span class="n">async_sessionmaker</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="n">expire_on_commit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">)</span>

    <span class="k">await</span> <span class="n">insert_objects</span><span class="p">(</span><span class="n">async_session</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">select_and_update_objects</span><span class="p">(</span><span class="n">async_session</span><span class="p">)</span>

    <span class="c1"># for AsyncEngine created in function scope, close and</span>
    <span class="c1"># clean-up pooled connections</span>
    <span class="k">await</span> <span class="n">engine</span><span class="o">.</span><span class="n">dispose</span><span class="p">()</span>


<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">async_main</span><span class="p">())</span></pre><div class="code-annotations-key"></div></div>
</div>
<p>在上面的示例中，使用可选的   <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a>  助手实例化了   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> ，该助手提供了一个固定参数集的新   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>  对象工厂，这里包括将其与具有特定数据库URL的   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>  关联。然后将其传递给其他方法，其中它可以在 Python 异步上下文管理器（即 <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with:</span></code> 语句）中使用，以便在块结束时自动关闭；这相当于调用  <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close" title="sqlalchemy.ext.asyncio.AsyncSession.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a>  方法。</p>
<section id="asyncio-concurrency">
<span id="id9"></span><h3>使用异步会话处理并发任务<a class="headerlink" href="#asyncio-concurrency" title="Permalink to this heading">¶</a></h3>
<blockquote>
<div><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>  对象是一个**可变的、有状态的对象**，它表示正在进行的**单个有状态的数据库事务**。使用 asyncio 中的并发任务，例如使用 <code class="docutils literal notranslate"><span class="pre">asyncio.gather()</span></code> 等 API，应**对每个单独的任务使用单独的**   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> 。</p>
</div></blockquote>
<p>有关   <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>  和   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>  的一般描述，以及它们在处理并发工作负载时应如何使用的信息，请参见   <a class="reference internal" href="../session_basics.html#session-faq-threadsafe"><span class="std std-ref">Session 是线程安全的吗？在并发任务中共享 AsyncSession 是安全的吗？</span></a>  部分。</p>
</section>
<section id="asyncsession-io">
<span id="asyncio-orm-avoid-lazyloads"></span><h3>使用 AsyncSession 时避免隐式 IO<a class="headerlink" href="#asyncsession-io" title="Permalink to this heading">¶</a></h3>
<p>使用传统的 asyncio，应用程序需要避免任何可能发生 IO 的属性访问点。可以使用以下技术来帮助解决这个问题，其中许多方法在上面的示例中有展示。</p>
<ul class="simple">
<li><p>延迟加载关系、延迟的列或表达式，或正在过期场景下访问的属性可以利用   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs" title="sqlalchemy.ext.asyncio.AsyncAttrs"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncAttrs</span></code></a>  mixin。当添加到特定类或更普遍地添加到 Declarative <code class="docutils literal notranslate"><span class="pre">Base</span></code> 超类时，此 mixin 提供访问器  <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs" title="sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncAttrs.awaitable_attrs</span></code></a> ，可以将任何属性交付为等待的形式：.. _async_orm_collections:</p></li>
</ul>
</section>
</section>
<section id="orm">
<h2>异步ORM的集合<a class="headerlink" href="#orm" title="Permalink to this heading">¶</a></h2>
<p>在异步程序中使用ORM集合存在的关键问题是访问集合时有可能想要访问未被提前加载的集合，此时将会使用惰性加载来访问集合。然而使用惰性加载需要隐式的IO操作，这在asyncio下会失败。为了直接访问该异步属性，你可以通过指定  <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs" title="sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncAttrs.awaitable_attrs</span></code></a>  前缀将属性访问作为一个 awaitable 进行访问。</p>
<p>Add your translations here, for example:
class B(Base):</p>
<blockquote>
<div><p>__tablename__ = “b”</p>
<p># … rest of mapping …</p>
</div></blockquote>
<p>访问 <code class="docutils literal notranslate"><span class="pre">A.bs</span></code> 集合时可以通过提前加载来避免使用惰性加载所需执行的IO操作。最有用的急切加载策略是   <code class="xref py py-func docutils literal notranslate"><span class="pre">selectinload()</span></code>  急切加载器，该急切加载器在前面的例子中使用，用于在 <code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">session.execute()</span></code> 在的范围内急切地加载 <code class="docutils literal notranslate"><span class="pre">A.bs</span></code> 集合。</p>
<p>如果不使用   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs" title="sqlalchemy.ext.asyncio.AsyncAttrs"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncAttrs</span></code></a> ，可以使用``lazy=”raise”<a href="#id10"><span class="problematic" id="id11">``</span></a>声明关系，以便默认情况下它们将不尝试发出SQL操作。为了加载集合将使用急切加载而不是使用惰性加载。</p>
<p>在构建新对象时，<strong>集合总是被分配一个默认的空集合</strong>，例如在上面的示例中是一个列表，以使该 <code class="docutils literal notranslate"><span class="pre">A</span></code> 对象上的 <code class="docutils literal notranslate"><span class="pre">.bs</span></code> 集合在此对象被flush后可以存在和可读；否则，当 <code class="docutils literal notranslate"><span class="pre">A</span></code> 刷新时， <code class="docutils literal notranslate"><span class="pre">.bs</span></code> 将被卸载并在访问时引发错误。</p>
<blockquote>
<div><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>  配置使用   <code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.expire_on_commit</span></code>  设置为False，这样我们可以在调用  <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.commit" title="sqlalchemy.ext.asyncio.AsyncSession.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.commit()</span></code></a>  之后访问对象的属性，例如在末尾访问属性的代码行。</p>
</div></blockquote>
<p>其他一些指导包括：</p>
<ul class="simple">
<li><p>应该避免使用  <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expire" title="sqlalchemy.ext.asyncio.AsyncSession.expire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.expire()</span></code></a>  这样的方法，而要使用  <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.refresh" title="sqlalchemy.ext.asyncio.AsyncSession.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.refresh()</span></code></a> ；<a href="#id12"><span class="problematic" id="id13">**</span></a>如果**绝对需要过期刷新。</p></li>
<li><p>可以使用  <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.refresh" title="sqlalchemy.ext.asyncio.AsyncSession.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.refresh()</span></code></a>  <strong>显式地在asyncio下加载关系</strong>，<a href="#id14"><span class="problematic" id="id15">**</span></a>如果**将期望的属性名称明确定义为  <code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.refresh</span></code>  的参数  <code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.refresh.attribute_names</span></code> 。</p></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.13.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs" title="sqlalchemy.ext.asyncio.AsyncAttrs"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncAttrs</span></code></a></p>
</div>
<p>集合可以使用   <a class="reference internal" href="../large_collections.html#write-only-relationship"><span class="std std-ref">只写关系</span></a>  功能被替换为永不发出隐式IO的**只写集合**。使用此功能，集合不会被读取，仅使用显式SQL调用查询。请参阅   <a class="reference internal" href="../examples.html#examples-asyncio"><span class="std std-ref">Asyncio 集成</span></a>  部分中的 <code class="docutils literal notranslate"><span class="pre">async_orm_writeonly.py</span></code> 示例，这是使用asyncio的写集合的示例，其中许多项目解决使用异步加载集合的具体技术，需要更精细的处理。</p>
<p>注意，使用只写集合的程序行为是简单和易于预测的。但缺点是没有任何内置系统来加载这些集合中的许多集合，这需要手动完成。因此，下面的许多内容都针对使用异步懒惰加载关系进行处理时，需要更多注意事项的情况。* 避免使用   <a class="reference internal" href="../cascades.html#unitofwork-cascades"><span class="std std-ref">级联操作</span></a>  中记录的 <code class="docutils literal notranslate"><span class="pre">all</span></code> 级联选项，而是显式地列出所需的级联特性。<a href="#id16"><span class="problematic" id="id17">``</span></a>all``级联选项暗示了   <span class="xref std std-ref">cascade_refresh_expire</span>  等级联设置，这意味着  <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.refresh" title="sqlalchemy.ext.asyncio.AsyncSession.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.refresh()</span></code></a>  方法将会使相关对象的属性过期，但不一定刷新这些相关对象 ，假设   <code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code>  中没有配置急切加载，它们将保持过期状态。</p>
<ul class="simple">
<li><p>如果使用   <a class="reference internal" href="../queryguide/columns.html#sqlalchemy.orm.deferred" title="sqlalchemy.orm.deferred"><code class="xref py py-func docutils literal notranslate"><span class="pre">deferred()</span></code></a>  列，则应使用适当的加载器选项（如果使用），除了上述注意事项中的   <code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code>  构造。有关延迟列加载的背景，请参阅   <a class="reference internal" href="../queryguide/columns.html#orm-queryguide-column-deferral"><span class="std std-ref">使用列延迟选择要加载的列</span></a> 。</p></li>
</ul>
<ul id="dynamic-asyncio">
<li><p>在   <span class="xref std std-ref">dynamic_relationship</span>  中描述的“动态”关系加载程序策略默认不兼容 asyncio 方法。只有在  <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync" title="sqlalchemy.ext.asyncio.AsyncSession.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.run_sync()</span></code></a>  方法中调用或使用其 <code class="docutils literal notranslate"><span class="pre">.statement</span></code> 属性获取普通选择时，才能直接使用它：</p>
<blockquote>
<div><p>user = await session.get(User, 42)
addresses = (await session.scalars(user.addresses.statement)).all()
stmt = user.addresses.statement.where(Address.email_address.startswith(“patrick”))
addresses_filter = (await session.scalars(stmt)).all()</p>
</div></blockquote>
<p>在 SQLAlchemy 2.0 中，引入了   <a class="reference internal" href="../large_collections.html#write-only-relationship"><span class="std std-ref">write only</span></a>  技术，这种技术与 asyncio 完全兼容，并且应该优先考虑使用。</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">migration_20_dynamic_loaders</span>  - 关于迁移到 2.0 样式的说明</p>
</div>
</li>
<li><p>如果在不支持 RETURNING 的数据库（例如 MySQL 8）上使用 asyncio，则新刷新的对象上的生成的时间戳等服务器默认值将不可用，除非使用  <code class="xref py py-paramref docutils literal notranslate"><span class="pre">Mapper.eager_defaults</span></code>  选项。在 SQLAlchemy 2.0 中，这种行为已自动应用于像 PostgreSQL、SQLite 和 MariaDB 这样的后端，当插入行时使用 RETURNING 获取新值。</p></li>
</ul>
<section id="asyncio">
<span id="session-run-sync"></span><h3>在 asyncio 下运行同步方法和函数<a class="headerlink" href="#asyncio" title="Permalink to this heading">¶</a></h3>
<div class="admonition deepalchemy">
<p class="admonition-title">Deep Alchemy</p>
<p>这种方法本质上是公开了 SQLAlchemy 首次提供 asyncio 接口的机制。虽然这样做没有技术上的问题，但整体而言，这种方法可能被认为是“有争议的”，因为它与 asyncio 编程模型的一些中心哲学相悖，即任何可能导致调用 I/O 的编程语句 <strong>必须</strong> 有一个 <code class="docutils literal notranslate"><span class="pre">await</span></code> 调用，以免程序不明确地在哪些行可能发生 I/O。这种方法不改变这个概念，但它允许一系列同步 I/O 指令在函数调用的范围内被豁免免于这个规则，从而被打包成一个可等待对象。</p>
</div>
<p>作为在 asyncio 事件循环中集成传统 SQLAlchemy“懒加载”的备选手段，提供了一个名为  <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync" title="sqlalchemy.ext.asyncio.AsyncSession.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.run_sync()</span></code></a>  的 <strong>可选</strong> 方法，该方法将在一个 greenlet 中运行任何 Python 函数，传统的同步编程概念将被翻译为在到达数据库驱动程序时使用 <code class="docutils literal notranslate"><span class="pre">await</span></code>。这里的一个假设方法是，面向 asyncio 的应用程序可以将数据库相关方法打包成函数，这些函数将使用  <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync" title="sqlalchemy.ext.asyncio.AsyncSession.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.run_sync()</span></code></a>  被调用。</p>
<p>如果我们没有对 <code class="docutils literal notranslate"><span class="pre">A.bs</span></code> 集合使用   <code class="xref py py-func docutils literal notranslate"><span class="pre">selectinload()</span></code> ，那么我们可以在一个单独的函数中实现对这些属性访问的处理方式，如下所示：</p>
<blockquote>
<div><p>import asyncio</p>
<p>from sqlalchemy import select
from sqlalchemy.ext.asyncio import AsyncSession, create_async_engine</p>
<dl>
<dt>def fetch_and_update_objects(session):</dt><dd><p>“””在将同步风格的 ORM 代码打包到将调用函数的可等待对象中运行。</p>
<p>“””</p>
<p># 这里的会话对象是传统的 ORM 会话。
# 所有功能都可以在这里使用，包括旧版查询。</p>
<p>stmt = select(A)</p>
<p>result = session.execute(stmt)
for a1 in result.scalars():</p>
<blockquote>
<div><p>print(a1)</p>
<p># 延迟加载
for b1 in a1.bs:</p>
<blockquote>
<div><p>print(b1)</p>
</div></blockquote>
</div></blockquote>
<p># 旧版查询
a1 = session.query(A).order_by(A.id).first()</p>
<p>a1.data = “new data”</p>
</dd>
<dt>async def async_main():</dt><dd><dl class="simple">
<dt>engine = create_async_engine(</dt><dd><p>“postgresql+asyncpg://scott:tiger&#64;localhost/test”,
echo=True,</p>
</dd>
</dl>
<p>)
async with engine.begin() as conn:</p>
<blockquote>
<div><p>await conn.run_sync(Base.metadata.drop_all)
await conn.run_sync(Base.metadata.create_all)</p>
</div></blockquote>
<dl>
<dt>async with AsyncSession(engine) as session:</dt><dd><dl>
<dt>async with session.begin():</dt><dd><dl>
<dt>session.add_all(</dt><dd><dl class="simple">
<dt>[</dt><dd><p>A(bs=[B(), B()], data=”a1”),
A(bs=[B()], data=”a2”),
A(bs=[B(), B()], data=”a3”),</p>
</dd>
</dl>
<p>]</p>
</dd>
</dl>
<p>)</p>
</dd>
</dl>
<p>await session.run_sync(fetch_and_update_objects)</p>
<p>await session.commit()</p>
</dd>
</dl>
<p># 对于在函数作用域中创建的 AsyncEngine，关闭它并清理池化的连接
await engine.dispose()</p>
</dd>
</dl>
<p>asyncio.run(async_main())</p>
</div></blockquote>
<p>在“sync”运行器中运行某些函数的上述方法与使用“gevent”这样的基于事件的编程库上的 SQLAlchemy 应用程序有一些相似之处。它们的区别如下：</p>
</section>
</section>
<section id="gevent-pythonasyncio">
<h2>1. 与使用“gevent”时不同，我们可以继续使用标准的 Python。使用asyncio扩展处理事件<a class="headerlink" href="#gevent-pythonasyncio" title="Permalink to this heading">¶</a></h2>
<p>SQLAlchemy  :ref:<a href="#id18"><span class="problematic" id="id19">`</span></a>事件系统 &lt;event_toplevel&gt;`没有直接扩展到asyncio，意味着还没有 SQLalchemy 事件处理程序的“异步”版本。</p>
<p>但是，由于asyncio扩展围绕着通常的同步SQLAlchemy API，因此常规的“同步”风格的事件处理程序可以自由地使用，就像不使用asyncio一样。</p>
<p>如下所述，有两种当前的策略可以注册事件：</p>
<ul class="simple">
<li><p>实例级别可以注册事件（例如，特定的   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>  实例） ，通过关联与直接代理对象引用有关``sync``属性的事件。 例如，要将  <a class="reference internal" href="../../core/events.html#sqlalchemy.events.PoolEvents.connect" title="sqlalchemy.events.PoolEvents.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PoolEvents.connect()</span></code></a>  属性作为目标。目标包括：</p></li>
</ul>
<p>       <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.sync_engine" title="sqlalchemy.ext.asyncio.AsyncEngine.sync_engine"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncEngine.sync_engine</span></code></a></p>
<p>       :attr:` _asyncio.AsyncConnection.sync_connection`</p>
<p>       <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.sync_engine" title="sqlalchemy.ext.asyncio.AsyncConnection.sync_engine"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncConnection.sync_engine</span></code></a></p>
<p>       <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.sync_session" title="sqlalchemy.ext.asyncio.AsyncSession.sync_session"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncSession.sync_session</span></code></a></p>
<ul class="simple">
<li><p>要在类级别上注册事件，以针对同一类型的所有实例（例如所有   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>  实例） ，请使用相应的同步级别类 。例如，要针对   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>  类注册  <a class="reference internal" href="../events.html#sqlalchemy.orm.SessionEvents.before_commit" title="sqlalchemy.orm.SessionEvents.before_commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SessionEvents.before_commit()</span></code></a>  事件，请使用   <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>  作为目标类。</p></li>
<li><p>要在   <code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code>  级别上注册，请结合一个显式的   <code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code>  和  <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a>  ，使用  <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker.params.sync_session_class" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">async_sessionmaker.sync_session_class</span></code></a>  ，将事件与   <code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code>  相关联。</p></li>
</ul>
<p>在执行位于asyncio上下文中的事件处理程序时，像  <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>  这样的对象会在不需要``await``或``async``使用的通常“同步”方式下工作; 当最终由asyncio数据库适配器接收到消息时，就会透明地将调用样式适配回asyncio调用样式。 对于传递DBAPI级别的“连接”对象（如  <a class="reference internal" href="../../core/events.html#sqlalchemy.events.PoolEvents.connect" title="sqlalchemy.events.PoolEvents.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PoolEvents.connect()</span></code></a>  ）的事件，对象是一个符合  <span class="xref std std-term">pep-249</span>  标准的“连接”对象，它会将同步样式调用适配到asyncio驱动程序。</p>
<section id="asyncengine-sessions-sessionmakers">
<h3>使用AsyncEngine / Sessions / Sessionmakers的事件监听器示例<a class="headerlink" href="#asyncengine-sessions-sessionmakers" title="Permalink to this heading">¶</a></h3>
<p>下面是与async-facing API构造关联的同步样式事件处理程序的一些示例：</p>
<ul>
<li><p><strong>在AsyncEngine上处理核心事件</strong></p>
<p>在此示例中，我们访问   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.sync_engine" title="sqlalchemy.ext.asyncio.AsyncEngine.sync_engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">sync_engine</span></code></a>  属性，将其作为  <a class="reference internal" href="../../core/events.html#sqlalchemy.events.ConnectionEvents" title="sqlalchemy.events.ConnectionEvents"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConnectionEvents</span></code></a>  和   <a class="reference internal" href="../../core/events.html#sqlalchemy.events.PoolEvents" title="sqlalchemy.events.PoolEvents"><code class="xref py py-class docutils literal notranslate"><span class="pre">PoolEvents</span></code></a>  的目标：：</p>
<blockquote>
<div><p>import asyncio</p>
<p>from sqlalchemy import event
from sqlalchemy import text
from sqlalchemy.engine import Engine
from sqlalchemy.ext.asyncio import create_async_engine</p>
<p>engine = create_async_engine(“postgresql+asyncpg://scott:tiger&#64;localhost:5432/test”)</p>
<p>#实例Engine上的connect事件
&#64;event.listens_for(engine.sync_engine, “connect”)
def my_on_connect(dbapi_con, connection_record):</p>
<blockquote>
<div><p>print(“New DBAPI connection:”, dbapi_con)
cursor = dbapi_con.cursor()</p>
<p># 在适配的DBAPI连接/游标上使用同步样式API
cursor.execute(“select ‘execute from event’”)
print(cursor.fetchone()[0])</p>
</div></blockquote>
<p># 所有引擎实例的before_execute事件
&#64;event.listens_for(Engine, “before_execute”)
def my_before_execute(</p>
<blockquote>
<div><p>conn,
clauseelement,
multiparams,
params,
execution_options,</p>
</div></blockquote>
<dl>
<dt>):</dt><dd><p>print(“before execute!”)</p>
</dd>
<dt>async def go():</dt><dd><dl class="simple">
<dt>async with engine.connect() as conn:</dt><dd><p>await conn.execute(text(“select 1”))</p>
</dd>
</dl>
<p>await engine.dispose()</p>
</dd>
</dl>
<p>asyncio.run(go())</p>
</div></blockquote>
<p>输出：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>New DBAPI connection: &lt;AdaptedConnection &lt;asyncpg.connection.Connection object at 0x7f33f9b16960&gt;&gt;
execute from event
before execute!</pre></div>
</div>
</li>
<li><p><strong>在AsyncSession上处理ORM事件</strong></p>
<p>在此示例中，我们访问  <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.sync_session" title="sqlalchemy.ext.asyncio.AsyncSession.sync_session"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncSession.sync_session</span></code></a>  作为   <a class="reference internal" href="../events.html#sqlalchemy.orm.SessionEvents" title="sqlalchemy.orm.SessionEvents"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionEvents</span></code></a>  的目标：：</p>
<blockquote>
<div><p>import asyncio</p>
<p>from sqlalchemy import event
from sqlalchemy import text
from sqlalchemy.ext.asyncio import AsyncSession
from sqlalchemy.ext.asyncio import create_async_engine
from sqlalchemy.orm import Session</p>
<p>engine = create_async_engine(“postgresql+asyncpg://scott:tiger&#64;localhost:5432/test”)</p>
<p>session = AsyncSession(engine)</p>
<p># 实例Session上的before_commit事件
&#64;event.listens_for(session.sync_session, “before_commit”)
def my_before_commit(session):</p>
<blockquote>
<div><p>print(“before commit!”)</p>
<p># 在Connection上使用同步样式API
connection = session.connection()</p>
<p># 在游标上使用同步样式API
result = connection.execute(text(“select ‘execute from event’”))异步操作中的SQLAlchemy Events</p>
</div></blockquote>
</div></blockquote>
</li>
</ul>
<hr class="docutils" />
<p>在那些异步应用中需要事件处理的场景下，SQLAlchemy也提供了相应的方法来实现。不同于同步的事件处理，在异步操作中需要使用   <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a>  和   <code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code>  结合使用来实现。</p>
<ul>
<li><p><strong>ORM Events on async_session</strong></p>
<p>首先需要定义一个 ORM 会话类，在这个类上我们可以使用 SQLAlchemy 提供的事件装饰器实现相关的事件监听。</p>
<p>代码示例：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">text</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">AsyncSession</span><span class="p">,</span> <span class="n">create_async_engine</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">test_async_session_events</span><span class="p">():</span>

    <span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span><span class="s1">&#39;postgresql+asyncpg://user:pass@localhost/db&#39;</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;delete from mytable&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">AsyncSession</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>

        <span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="s2">&quot;before_commit&quot;</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">before_commit</span><span class="p">(</span><span class="n">session</span><span class="p">):</span>
            <span class="n">print</span><span class="p">(</span><span class="s2">&quot;before commit!&quot;</span><span class="p">)</span>

        <span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="s2">&quot;after_commit&quot;</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">after_commit</span><span class="p">(</span><span class="n">session</span><span class="p">):</span>
            <span class="n">print</span><span class="p">(</span><span class="s2">&quot;after commit!&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select 1&quot;</span><span class="p">))</span>
        <span class="n">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="n">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">first</span><span class="p">())</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">AsyncSession</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select 1&quot;</span><span class="p">))</span>
        <span class="n">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">first</span><span class="p">())</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">AsyncSession</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select 1&quot;</span><span class="p">))</span>
        <span class="n">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">first</span><span class="p">())</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;delete from mytable&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">AsyncSession</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select 1&quot;</span><span class="p">))</span>
        <span class="n">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">first</span><span class="p">())</span></pre></div>
</div>
<p>返回结果：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SELECT 1
1
1
1</pre></div>
</div>
</li>
<li><p><strong>ORM Events on sessionmaker</strong></p>
<p>在这种管理多个数据库操作会话的场景中，我们可以创建一个   <code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code>  作为我们的事件监听对象。这个会话工厂类可以被赋值给   <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a>  ，在使用时需要注意设置  <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker.params.sync_session_class" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">async_sessionmaker.sync_session_class</span></code></a>  参数。</p>
<p>示例代码：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">event</span><span class="p">,</span> <span class="n">text</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">async_sessionmaker</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">sessionmaker</span>

<span class="n">sync_maker</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">()</span>
<span class="n">maker</span> <span class="o">=</span> <span class="n">async_sessionmaker</span><span class="p">(</span><span class="n">sync_session_class</span><span class="o">=</span><span class="n">sync_maker</span><span class="p">)</span>


<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">sync_maker</span><span class="p">,</span> <span class="s2">&quot;before_commit&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">before_commit</span><span class="p">(</span><span class="n">session</span><span class="p">):</span>
    <span class="n">print</span><span class="p">(</span><span class="s2">&quot;before commit&quot;</span><span class="p">)</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">async_session</span> <span class="o">=</span> <span class="n">maker</span><span class="p">()</span>

    <span class="k">await</span> <span class="n">async_session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>


<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span></pre></div>
</div>
<p>返回结果：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>before commit</pre></div>
</div>
</li>
</ul>
</section>
<section id="awaitable">
<span id="asyncio-events-run-async"></span><h3>异步操作下使用仅接受 awaitable 的数据库驱动方法<a class="headerlink" href="#awaitable" title="Permalink to this heading">¶</a></h3>
<p>在上文提到的对于   <a class="reference internal" href="../../core/events.html#sqlalchemy.events.PoolEvents" title="sqlalchemy.events.PoolEvents"><code class="xref py py-class docutils literal notranslate"><span class="pre">PoolEvents</span></code></a>  事件的处理方式，接收到的连接对象是一个以 sync-style “DBAPI” 连接对象包装的内部 asyncio “driver” 连接对象，该对象能够被 SQLAlchemy 的内部方法使用。当用户自定义事件处理器需要直接使用底层 “driver” 连接对象异步调用连接对象的方法时，就需要使用到 <code class="docutils literal notranslate"><span class="pre">.set_type_codec()</span></code> 方法提供的 asyncpg 驱动程序。</p>
<p>为了解决这个问题，SQLAlchemy’s   <a class="reference internal" href="../../core/internals.html#sqlalchemy.engine.AdaptedConnection" title="sqlalchemy.engine.AdaptedConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AdaptedConnection</span></code></a>  类提供了一个  <a class="reference internal" href="../../core/internals.html#sqlalchemy.engine.AdaptedConnection.run_async" title="sqlalchemy.engine.AdaptedConnection.run_async"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AdaptedConnection.run_async()</span></code></a>  方法，该方法可以在事件处理器或其他 SQLAlchemy 内部执行异步函数。这个方法直接类比于  <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.run_sync" title="sqlalchemy.ext.asyncio.AsyncConnection.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.run_sync()</span></code></a>  方法，后者能够让同步方法在异步环境下执行。</p>
<p>在  <a class="reference internal" href="../../core/internals.html#sqlalchemy.engine.AdaptedConnection.run_async" title="sqlalchemy.engine.AdaptedConnection.run_async"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AdaptedConnection.run_async()</span></code></a>  方法中，我们需要传入一个接受 driver 连接对象的参数并返回一个 awaitable 对象的可调用函数。注意这个传入的函数不需要被声明为 <code class="docutils literal notranslate"><span class="pre">async</span></code>，可以使用 Python 的``lambda``声明一个返回 awaitable 对象的可调用函数：</p>
<blockquote>
<div><p>代码示例：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">event</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>


<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">engine</span><span class="o">.</span><span class="n">sync_engine</span><span class="p">,</span> <span class="s2">&quot;connect&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">register_custom_types</span><span class="p">(</span><span class="n">dbapi_connection</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="n">dbapi_connection</span><span class="o">.</span><span class="n">run_async</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">connection</span><span class="p">:</span> <span class="n">connection</span><span class="o">.</span><span class="n">set_type_codec</span><span class="p">(</span>
            <span class="s2">&quot;MyCustomType&quot;</span><span class="p">,</span>
            <span class="n">encoder</span><span class="p">,</span>
            <span class="n">decoder</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span></pre></div>
</div>
</div></blockquote>
</section>
</section>
<section id="register-custom-types-adaptedconnection-dbapi-adaptedconnection-run-async-sqlalchemy-sqlalchemy-asyncio">
<h2>在 <code class="docutils literal notranslate"><span class="pre">register_custom_types</span></code> 事件处理器中传入的对象是   <a class="reference internal" href="../../core/internals.html#sqlalchemy.engine.AdaptedConnection" title="sqlalchemy.engine.AdaptedConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AdaptedConnection</span></code></a>  实例，这个实例提供了一个异步数据库驱动程序连接对象的类似 DBAPI 的接口。然后  <a class="reference internal" href="../../core/internals.html#sqlalchemy.engine.AdaptedConnection.run_async" title="sqlalchemy.engine.AdaptedConnection.run_async"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AdaptedConnection.run_async()</span></code></a>  方法可以在事件处理器或其他 SQLAlchemy 内部执行异步方法。可等待环境下的SQLAlchemy Asyncio<a class="headerlink" href="#register-custom-types-adaptedconnection-dbapi-adaptedconnection-run-async-sqlalchemy-sqlalchemy-asyncio" title="Permalink to this heading">¶</a></h2>
<p>SQLAlchemy Asyncio 支持可等待协程，它基于 asyncio 驱动层进行操作。</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.30.</span></p>
</div>
</section>
<section id="id20">
<h2>使用多个 asyncio 事件循环<a class="headerlink" href="#id20" title="Permalink to this heading">¶</a></h2>
<p>不同的事件循环一般不共享 :class:<a href="#id21"><span class="problematic" id="id22">`</span></a>_asyncio.AsyncEngine`当使用默认的连接池实现时。这在很少的情况下发生，例如在将 asyncio 与多线程结合使用时。</p>
<p>如果必须要传递   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>  给另一个事件循环，下面的方法必须被调用  <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.dispose" title="sqlalchemy.ext.asyncio.AsyncEngine.dispose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncEngine.dispose()</span></code></a> ，因为在新事件循环开始之前必须在上一个事件循环中清理它。如果不这样做，会导致类似于“Task &lt;Task Pending…&gt;got Future attached to a different loop”的运行时错误。</p>
<p>如果必须将相同的引擎在不同的循环之间共享，可以使用   <a class="reference internal" href="../../core/pooling.html#sqlalchemy.pool.NullPool" title="sqlalchemy.pool.NullPool"><code class="xref py py-class docutils literal notranslate"><span class="pre">NullPool</span></code></a>  禁用池，防止引擎在使用的任何连接上使用多个了：</p>
<blockquote>
<div><p>from sqlalchemy.ext.asyncio import create_async_engine
from sqlalchemy.pool import NullPool</p>
<dl class="simple">
<dt>engine = create_async_engine(</dt><dd><p>“postgresql+asyncpg://user:pass&#64;host/dbname”,
poolclass=NullPool,</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
</section>
<section id="asyncio-scoped-session">
<span id="id23"></span><h2>使用 asyncio scoped session<a class="headerlink" href="#asyncio-scoped-session" title="Permalink to this heading">¶</a></h2>
<p>在使用   <a class="reference internal" href="../contextual.html#sqlalchemy.orm.scoped_session" title="sqlalchemy.orm.scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">scoped_session</span></code></a>  对象的线程化 SQLAlchemy 中使用的 “scoped session” 模式也可以在 asyncio 中使用，只需使用一个经过适配的版本   <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> 。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>在一般情况下，SQLAlchemy 不建议新开发项目中使用“scoped”模式，因为它依赖于必须在大多数情况下显式地关闭其变化的可变全局状态。特别是在使用 asyncio 时，把   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>  直接传递给需要它的可等待函数可能会更好。</p>
</div>
<p>在使用   <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a>  时，由于 asyncio 上下文中没有 “thread-local” 的概念，必须在构造函数中提供“scopefunc”参数。下面的示例展示了使用 <code class="docutils literal notranslate"><span class="pre">asyncio.current_task()</span></code> 函数来实现这个作用：</p>
<blockquote>
<div><p>from asyncio import current_task</p>
<dl class="simple">
<dt>from sqlalchemy.ext.asyncio import (</dt><dd><p>async_scoped_session,
async_sessionmaker,</p>
</dd>
</dl>
<p>)</p>
<dl class="simple">
<dt>async_session_factory = async_sessionmaker(</dt><dd><p>some_async_engine,
expire_on_commit=False,</p>
</dd>
</dl>
<p>)
AsyncScopedSession = async_scoped_session(</p>
<blockquote>
<div><p>async_session_factory,
scopefunc=current_task,</p>
</div></blockquote>
<p>)
some_async_session = AsyncScopedSession()</p>
</div></blockquote>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a>  使用的“scopefunc”在任务中被调用了任意次数（每次访问基础的   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> ），必须作为幂等函数和小型函数来使用，不应尝试创建或修改任何状态（例如创建回调等）。</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>在范围中使用 <code class="docutils literal notranslate"><span class="pre">current_task()</span></code> 时，需要从 outermost 可等待项中调用  <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.remove" title="sqlalchemy.ext.asyncio.async_scoped_session.remove"><code class="xref py py-meth docutils literal notranslate"><span class="pre">async_scoped_session.remove()</span></code></a>  方法，以确保键在任务完成时从注册表中删除，否则任务句柄以及   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>  将留在内存中，从而形成存储器泄漏。请参阅下面的示例，其中演示了  <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.remove" title="sqlalchemy.ext.asyncio.async_scoped_session.remove"><code class="xref py py-meth docutils literal notranslate"><span class="pre">async_scoped_session.remove()</span></code></a>  的正确使用方法。</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a>  包括类似于   <a class="reference internal" href="../contextual.html#sqlalchemy.orm.scoped_session" title="sqlalchemy.orm.scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">scoped_session</span></code></a>  的**代理行为**，这意味着它可以直接被视为   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> ，需要包括通常的 <code class="docutils literal notranslate"><span class="pre">await</span></code> 关键字，包括  <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.remove" title="sqlalchemy.ext.asyncio.async_scoped_session.remove"><code class="xref py py-meth docutils literal notranslate"><span class="pre">async_scoped_session.remove()</span></code></a>  方法：</p>
<blockquote>
<div><dl>
<dt>async def some_function(some_async_session, some_object):</dt><dd><p># 直接使用 AsyncSession
some_async_session.add(some_object)</p>
<p># 通过上下文本地代理使用 AsyncSession
await AsyncScopedSession.commit()</p>
<p># “remove” 当前被代理 AsyncSession，使其脱离本地上下文
await AsyncScopedSession.remove()</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.19.</span></p>
</div>
</section>
<section id="inspector">
<span id="asyncio-inspector"></span><h2>使用 inspector 检查架构对象<a class="headerlink" href="#inspector" title="Permalink to this heading">¶</a></h2>
<p>SQLAlchemy 还没有支持 asyncio 版本的   <code class="xref py py-class docutils literal notranslate"><span class="pre">Inspector</span></code> （在   <span class="xref std std-ref">metadata_reflection_inspector</span>  中介绍），但是在 asyncio 上下文中可以通过使用   <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.run_sync" title="sqlalchemy.ext.asyncio.AsyncConnection.run_sync"><code class="xref py py-class docutils literal notranslate"><span class="pre">run_sync</span></code></a>  方法的现有接口来使用它。</p>
<blockquote>
<div><p>import asyncio</p>
<p>from sqlalchemy import inspect
from sqlalchemy.ext.asyncio import create_async_engine</p>
<p>engine = create_async_engine(“postgresql+asyncpg://scott:tiger&#64;localhost/test”)</p>
<dl class="simple">
<dt>def use_inspector(conn):</dt><dd><p>inspector = inspect(conn)
# use the inspector
print(inspector.get_view_names())
# return any value to the caller
return inspector.get_table_names()</p>
</dd>
<dt>async def async_main():</dt><dd><dl class="simple">
<dt>async with engine.connect() as conn:</dt><dd><p>tables = await conn.run_sync(use_inspector)</p>
</dd>
</dl>
</dd>
</dl>
<p>asyncio.run(async_main())</p>
</div></blockquote>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">metadata_reflection</span></p>
<p><span class="xref std std-ref">inspection_toplevel</span></p>
</div>
</section>
<section id="api">
<h2>引擎 API 文档<a class="headerlink" href="#api" title="Permalink to this heading">¶</a></h2>
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_engine_from_config"><span class="sig-name descname">async_engine_from_config</span></a>(configuration[, prefix], **kwargs)</p></td>
<td><p>Create a new AsyncEngine instance using a configuration dictionary.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><span class="sig-name descname">AsyncConnection</span></a></p></td>
<td><p>An asyncio proxy for a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><span class="sig-name descname">AsyncEngine</span></a></p></td>
<td><p>An asyncio proxy for a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><span class="sig-name descname">AsyncMappingResult</span></a></p></td>
<td><p>A wrapper for a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> that returns dictionary
values rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> values.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><span class="sig-name descname">AsyncResult</span></a></p></td>
<td><p>An asyncio wrapper around a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><span class="sig-name descname">AsyncScalarResult</span></a></p></td>
<td><p>A wrapper for a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> that returns scalar values
rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> values.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction"><span class="sig-name descname">AsyncTransaction</span></a></p></td>
<td><p>An asyncio proxy for a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTupleResult"><span class="sig-name descname">AsyncTupleResult</span></a></p></td>
<td><p>A <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> that’s typed as returning plain
Python tuples instead of rows.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.create_async_engine"><span class="sig-name descname">create_async_engine</span></a>(url, **kw)</p></td>
<td><p>Create a new async engine instance.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.create_async_pool_from_url"><span class="sig-name descname">create_async_pool_from_url</span></a>(url, **kwargs)</p></td>
<td><p>Create a new async engine instance.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.create_async_engine">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">create_async_engine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">URL</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><span class="pre">AsyncEngine</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.create_async_engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new async engine instance.</p>
<p>Arguments passed to <a class="reference internal" href="#sqlalchemy.ext.asyncio.create_async_engine" title="sqlalchemy.ext.asyncio.create_async_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_async_engine()</span></code></a> are mostly
identical to those passed to the <code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code> function.
The specified dialect must be an asyncio-compatible dialect
such as <a class="reference internal" href="../../dialects/postgresql.html#dialect-postgresql-asyncpg"><span class="std std-ref">asyncpg</span></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.ext.asyncio.create_async_engine.params.async_creator"></span><strong>async_creator</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.create_async_engine.params.async_creator">¶</a> – <p>an async callable which returns a driver-level
asyncio connection. If given, the function should take no arguments,
and return a new asyncio connection from the underlying asyncio
database driver; the connection will be wrapped in the appropriate
structures to be used with the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>.   Note that the
parameters specified in the URL are not applied here, and the creator
function should use its own connection parameters.</p>
<p>This parameter is the asyncio equivalent of the
<code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.creator</span></code> parameter of the
<code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code> function.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.16.</span></p>
</div>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_engine_from_config">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">async_engine_from_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'sqlalchemy.'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.engine.AsyncEngine"><span class="pre">AsyncEngine</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_engine_from_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new AsyncEngine instance using a configuration dictionary.</p>
<p>This function is analogous to the <code class="xref py py-func docutils literal notranslate"><span class="pre">engine_from_config()</span></code> function
in SQLAlchemy Core, except that the requested dialect must be an
asyncio-compatible dialect such as <a class="reference internal" href="../../dialects/postgresql.html#dialect-postgresql-asyncpg"><span class="std std-ref">asyncpg</span></a>.
The argument signature of the function is identical to that
of <code class="xref py py-func docutils literal notranslate"><span class="pre">engine_from_config()</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.29.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.create_async_pool_from_url">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">create_async_pool_from_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">URL</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><span class="pre">Pool</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.create_async_pool_from_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new async engine instance.</p>
<p>Arguments passed to <a class="reference internal" href="#sqlalchemy.ext.asyncio.create_async_pool_from_url" title="sqlalchemy.ext.asyncio.create_async_pool_from_url"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_async_pool_from_url()</span></code></a> are mostly
identical to those passed to the <code class="xref py py-func docutils literal notranslate"><span class="pre">create_pool_from_url()</span></code> function.
The specified dialect must be an asyncio-compatible dialect
such as <a class="reference internal" href="../../dialects/postgresql.html#dialect-postgresql-asyncpg"><span class="std std-ref">asyncpg</span></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.10.</span></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncEngine</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="Permalink to this definition">¶</a></dt>
<dd><p>An asyncio proxy for a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> is acquired using the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.create_async_engine" title="sqlalchemy.ext.asyncio.create_async_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_async_engine()</span></code></a> function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+asyncpg://user:pass@host/dbname&quot;</span><span class="p">)</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.begin"><span class="sig-name descname">begin()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.clear_compiled_cache"><span class="sig-name descname">clear_compiled_cache()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.connect"><span class="sig-name descname">connect()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.dialect"><span class="sig-name descname">dialect</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.dispose"><span class="sig-name descname">dispose()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.driver"><span class="sig-name descname">driver</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.echo"><span class="sig-name descname">echo</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.engine"><span class="sig-name descname">engine</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.execution_options"><span class="sig-name descname">execution_options()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.get_execution_options"><span class="sig-name descname">get_execution_options()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.name"><span class="sig-name descname">name</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.pool"><span class="sig-name descname">pool</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.raw_connection"><span class="sig-name descname">raw_connection()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.sync_engine"><span class="sig-name descname">sync_engine</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.update_execution_options"><span class="sig-name descname">update_execution_options()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.url"><span class="sig-name descname">url</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.ProxyComparable</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnectable</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.begin">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">begin</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">AsyncIterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.engine.AsyncConnection"><span class="pre">AsyncConnection</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a context manager which when entered will deliver an
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> with an
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a> established.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">async_engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">text</span><span class="p">(</span><span class="s2">&quot;insert into table (x, y, z) values (1, 2, 3)&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;my_special_procedure(5)&quot;</span><span class="p">))</span></pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.clear_compiled_cache">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">clear_compiled_cache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.clear_compiled_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the compiled cache associated with the dialect.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</div>
<p>This applies <strong>only</strong> to the built-in cache that is established
via the <code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.query_cache_size</span></code> parameter.
It will not impact any dictionary caches that were passed via the
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection.execution_options.params.query_cache" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.query_cache</span></code></a> parameter.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.connect">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.engine.AsyncConnection"><span class="pre">AsyncConnection</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> object.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> will procure a database
connection from the underlying connection pool when it is entered
as an async context manager:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">async_engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">user_table</span><span class="p">))</span></pre></div>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> may also be started outside of a
context manager by invoking its <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.start" title="sqlalchemy.ext.asyncio.AsyncConnection.start"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.start()</span></code></a>
method.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.dialect">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">dialect</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.dialect" title="Permalink to this definition">¶</a></dt>
<dd><p>Proxy for the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Engine.dialect</span></code> attribute
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.dispose">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dispose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">close</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.dispose" title="Permalink to this definition">¶</a></dt>
<dd><p>Dispose of the connection pool used by this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncEngine.dispose.params.close"></span><strong>close</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.dispose.params.close">¶</a> – <p>if left at its default of <code class="docutils literal notranslate"><span class="pre">True</span></code>, has the
effect of fully closing all <strong>currently checked in</strong>
database connections.  Connections that are still checked out
will <strong>not</strong> be closed, however they will no longer be associated
with this <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>,
so when they are closed individually, eventually the
<a class="reference internal" href="../../core/pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> which they are associated with will
be garbage collected and they will be closed out fully, if
not already closed on checkin.</p>
<p>If set to <code class="docutils literal notranslate"><span class="pre">False</span></code>, the previous connection pool is de-referenced,
and otherwise not touched in any way.</p>
</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine.dispose" title="sqlalchemy.engine.Engine.dispose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.dispose()</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.driver">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">driver</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.driver" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver name of the <a class="reference internal" href="../../core/internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.interfaces.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a>
in use by this <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.echo">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">echo</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.echo" title="Permalink to this definition">¶</a></dt>
<dd><p>When <code class="docutils literal notranslate"><span class="pre">True</span></code>, enable log output for this element.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</div>
<p>This has the effect of setting the Python logging level for the namespace
of this element’s class and object reference.  A value of boolean <code class="docutils literal notranslate"><span class="pre">True</span></code>
indicates that the loglevel <code class="docutils literal notranslate"><span class="pre">logging.INFO</span></code> will be set for the logger,
whereas the string value <code class="docutils literal notranslate"><span class="pre">debug</span></code> will set the loglevel to
<code class="docutils literal notranslate"><span class="pre">logging.DEBUG</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.engine">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">engine</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns this <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</div>
<p>Used for legacy schemes that accept <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> /
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> objects within the same variable.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.execution_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">execution_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.engine.AsyncEngine"><span class="pre">AsyncEngine</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.execution_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> that will provide
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> objects with the given execution
options.</p>
<p>Proxied from <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a>.  See that
method for details.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.get_execution_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">get_execution_options</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_ExecuteOptions</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.get_execution_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the non-SQL options which will take effect during execution.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.name">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.name" title="Permalink to this definition">¶</a></dt>
<dd><p>String name of the <a class="reference internal" href="../../core/internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.interfaces.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a>
in use by this <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.pool">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">pool</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Proxy for the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Engine.pool</span></code> attribute
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.raw_connection">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">raw_connection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/pooling.html#sqlalchemy.pool.PoolProxiedConnection" title="sqlalchemy.pool.PoolProxiedConnection"><span class="pre">PoolProxiedConnection</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.raw_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a “raw” DBAPI connection from the connection pool.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../core/connections.html#dbapi-connections"><span class="std std-ref">使用Driver SQL和 Raw DBAPI Connections 工作</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.sync_engine">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">sync_engine</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><span class="pre">Engine</span></a></em><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.sync_engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Reference to the sync-style <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> proxies requests towards.</p>
<p>This instance can be used as an event target.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">asyncio_events</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.update_execution_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">update_execution_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.update_execution_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the default execution_options dictionary
of this <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</div>
<p>The given keys/values in **opt are added to the
default execution options that will be used for
all connections.  The initial contents of this dictionary
can be sent via the <code class="docutils literal notranslate"><span class="pre">execution_options</span></code> parameter
to <code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a></p>
<p><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.url">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">url</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.url" title="Permalink to this definition">¶</a></dt>
<dd><p>Proxy for the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Engine.url</span></code> attribute
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncConnection</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="Permalink to this definition">¶</a></dt>
<dd><p>An asyncio proxy for a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> is acquired using the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.connect" title="sqlalchemy.ext.asyncio.AsyncEngine.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncEngine.connect()</span></code></a>
method of <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+asyncpg://user:pass@host/dbname&quot;</span><span class="p">)</span>

<span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">table</span><span class="p">))</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.aclose"><span class="sig-name descname">aclose()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.begin"><span class="sig-name descname">begin()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.begin_nested"><span class="sig-name descname">begin_nested()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.closed"><span class="sig-name descname">closed</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.commit"><span class="sig-name descname">commit()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.connection"><span class="sig-name descname">connection</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.default_isolation_level"><span class="sig-name descname">default_isolation_level</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.dialect"><span class="sig-name descname">dialect</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.exec_driver_sql"><span class="sig-name descname">exec_driver_sql()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.execute"><span class="sig-name descname">execute()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.execution_options"><span class="sig-name descname">execution_options()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_nested_transaction"><span class="sig-name descname">get_nested_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_raw_connection"><span class="sig-name descname">get_raw_connection()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_transaction"><span class="sig-name descname">get_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.in_nested_transaction"><span class="sig-name descname">in_nested_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.in_transaction"><span class="sig-name descname">in_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.info"><span class="sig-name descname">info</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.invalidate"><span class="sig-name descname">invalidate()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.invalidated"><span class="sig-name descname">invalidated</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.rollback"><span class="sig-name descname">rollback()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.run_sync"><span class="sig-name descname">run_sync()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.scalar"><span class="sig-name descname">scalar()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.scalars"><span class="sig-name descname">scalars()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.start"><span class="sig-name descname">start()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream"><span class="sig-name descname">stream()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream_scalars"><span class="sig-name descname">stream_scalars()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.sync_connection"><span class="sig-name descname">sync_connection</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.sync_engine"><span class="sig-name descname">sync_engine</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.ProxyComparable</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.StartableContext</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnectable</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.aclose">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aclose</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.aclose" title="Permalink to this definition">¶</a></dt>
<dd><p>A synonym for <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.close" title="sqlalchemy.ext.asyncio.AsyncConnection.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.close()</span></code></a>.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.aclose" title="sqlalchemy.ext.asyncio.AsyncConnection.aclose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.aclose()</span></code></a> name is specifically
to support the Python standard library <code class="docutils literal notranslate"><span class="pre">&#64;contextlib.aclosing</span></code>
context manager function.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.20.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.begin">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">begin</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.engine.AsyncTransaction"><span class="pre">AsyncTransaction</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin a transaction prior to autobegin occurring.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.begin_nested">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">begin_nested</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.engine.AsyncTransaction"><span class="pre">AsyncTransaction</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.begin_nested" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin a nested transaction and return a transaction handle.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a>.</p>
<p>This has the effect of also rolling back the transaction if one
is in place.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.closed">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">closed</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.closed" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if this connection is closed.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.commit">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit the transaction that is currently in progress.</p>
<p>This method commits the current transaction if one has been started.
If no transaction was started, the method has no effect, assuming
the connection is in a non-invalidated state.</p>
<p>A transaction is begun on a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> automatically
whenever a statement is first executed, or when the
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method is called.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.connection">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">connection</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Not implemented for async; call
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_raw_connection" title="sqlalchemy.ext.asyncio.AsyncConnection.get_raw_connection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.get_raw_connection()</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.default_isolation_level">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">default_isolation_level</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.default_isolation_level" title="Permalink to this definition">¶</a></dt>
<dd><p>The initial-connection time isolation level associated with the
<a class="reference internal" href="../../core/internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> in use.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> class.</p>
</div>
<p>This value is independent of the
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.isolation_level</span></code></a> and
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine.execution_options.params.isolation_level" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Engine.execution_options.isolation_level</span></code></a> execution
options, and is determined by the <a class="reference internal" href="../../core/internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> when the
first connection is created, by performing a SQL query against the
database for the current isolation level before any additional commands
have been emitted.</p>
<p>Calling this accessor does not invoke any new SQL queries.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection.get_isolation_level" title="sqlalchemy.engine.Connection.get_isolation_level"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_isolation_level()</span></code></a>
- view current actual isolation level</p>
<p><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.isolation_level</span></code>
- set per <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> isolation level</p>
<p><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.isolation_level</span></code></a>
- set per <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> isolation level</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.dialect">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">dialect</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.dialect" title="Permalink to this definition">¶</a></dt>
<dd><p>Proxy for the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Connection.dialect</span></code> attribute
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.exec_driver_sql">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">exec_driver_sql</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_DBAPIAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoreExecuteOptionsParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><span class="pre">CursorResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.exec_driver_sql" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a driver-level SQL string and return buffered
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.execute">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoreExecuteOptionsParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><span class="pre">CursorResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a SQL statement construct and return a buffered
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncConnection.execute.params.object"></span><strong>object</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.execute.params.object">¶</a> – <p>The statement to be executed.  This is always
an object that is in both the <a class="reference internal" href="../../core/foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClauseElement</span></code></a> and
<a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Executable</span></code></a> hierarchies, including:</p>
<ul>
<li><p><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal notranslate"><span class="pre">Select</span></code></a></p></li>
<li><p><a class="reference internal" href="../../core/dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a>, <a class="reference internal" href="../../core/dml.html#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a>,
<a class="reference internal" href="../../core/dml.html#sqlalchemy.sql.expression.Delete" title="sqlalchemy.sql.expression.Delete"><code class="xref py py-class docutils literal notranslate"><span class="pre">Delete</span></code></a></p></li>
<li><p><a class="reference internal" href="../../core/sqlelement.html#sqlalchemy.sql.expression.TextClause" title="sqlalchemy.sql.expression.TextClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextClause</span></code></a> and
<a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.TextualSelect" title="sqlalchemy.sql.expression.TextualSelect"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextualSelect</span></code></a></p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DDL</span></code> and objects which inherit from
<code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutableDDLElement</span></code></p></li>
</ul>
</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncConnection.execute.params.parameters"></span><strong>parameters</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.execute.params.parameters">¶</a> – parameters which will be bound into the statement.
This may be either a dictionary of parameter names to values,
or a mutable sequence (e.g. a list) of dictionaries.  When a
list of dictionaries is passed, the underlying statement execution
will make use of the DBAPI <code class="docutils literal notranslate"><span class="pre">cursor.executemany()</span></code> method.
When a single dictionary is passed, the DBAPI <code class="docutils literal notranslate"><span class="pre">cursor.execute()</span></code>
method will be used.</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncConnection.execute.params.execution_options"></span><strong>execution_options</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.execute.params.execution_options">¶</a> – optional dictionary of execution options,
which will be associated with the statement execution.  This
dictionary can provide a subset of the options that are accepted
by <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.execution_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">execution_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.engine.AsyncConnection"><span class="pre">AsyncConnection</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.execution_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Set non-SQL options for the connection which take effect
during execution.</p>
<p>This returns this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> object with
the new options added.</p>
<p>See <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a> for full details
on this method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.get_nested_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">get_nested_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.engine.AsyncTransaction"><span class="pre">AsyncTransaction</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_nested_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a> representing the current
nested (savepoint) transaction, if any.</p>
<p>This makes use of the underlying synchronous connection’s
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection.get_nested_transaction" title="sqlalchemy.engine.Connection.get_nested_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_nested_transaction()</span></code></a> method to get the
current <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>, which is then proxied in a new
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a> object.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0b2.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.get_raw_connection">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_raw_connection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/pooling.html#sqlalchemy.pool.PoolProxiedConnection" title="sqlalchemy.pool.PoolProxiedConnection"><span class="pre">PoolProxiedConnection</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_raw_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the pooled DBAPI-level connection in use by this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a>.</p>
<p>This is a SQLAlchemy connection-pool proxied connection
which then has the attribute
<code class="xref py py-attr docutils literal notranslate"><span class="pre">_ConnectionFairy.driver_connection</span></code> that refers to the
actual driver connection. Its
<code class="xref py py-attr docutils literal notranslate"><span class="pre">_ConnectionFairy.dbapi_connection</span></code> refers instead
to an <a class="reference internal" href="../../core/internals.html#sqlalchemy.engine.AdaptedConnection" title="sqlalchemy.engine.AdaptedConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AdaptedConnection</span></code></a> instance that
adapts the driver connection to the DBAPI protocol.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.get_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">get_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.engine.AsyncTransaction"><span class="pre">AsyncTransaction</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a> representing the current
transaction, if any.</p>
<p>This makes use of the underlying synchronous connection’s
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection.get_transaction" title="sqlalchemy.engine.Connection.get_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_transaction()</span></code></a> method to get the current
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>, which is then proxied in a new
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a> object.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0b2.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.in_nested_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">in_nested_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.in_nested_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if a transaction is in progress.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0b2.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.in_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">in_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.in_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if a transaction is in progress.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.info">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">info</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection.info" title="sqlalchemy.engine.Connection.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Connection.info</span></code></a> dictionary of the
underlying <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>This dictionary is freely writable for user-defined state to be
associated with the database connection.</p>
<p>This attribute is only available if the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> is
currently connected.   If the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.closed" title="sqlalchemy.ext.asyncio.AsyncConnection.closed"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncConnection.closed</span></code></a> attribute
is <code class="docutils literal notranslate"><span class="pre">True</span></code>, then accessing this attribute will raise
<a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.ResourceClosedError" title="sqlalchemy.exc.ResourceClosedError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceClosedError</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0b2.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.invalidate">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">invalidate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exception</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BaseException</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.invalidate" title="Permalink to this definition">¶</a></dt>
<dd><p>Invalidate the underlying DBAPI connection associated with
this <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>See the method <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection.invalidate" title="sqlalchemy.engine.Connection.invalidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.invalidate()</span></code></a> for full
detail on this method.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.invalidated">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">invalidated</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.invalidated" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if this connection was invalidated.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> class.</p>
</div>
<p>This does not indicate whether or not the connection was
invalidated at the pool level, however</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.rollback">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Roll back the transaction that is currently in progress.</p>
<p>This method rolls back the current transaction if one has been started.
If no transaction was started, the method has no effect.  If a
transaction was started and the connection is in an invalidated state,
the transaction is cleared using this method.</p>
<p>A transaction is begun on a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> automatically
whenever a statement is first executed, or when the
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method is called.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.run_sync">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run_sync</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">arg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_T</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.run_sync" title="Permalink to this definition">¶</a></dt>
<dd><p>Invoke the given synchronous (i.e. not async) callable,
passing a synchronous-style <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> as the first
argument.</p>
<p>This method allows traditional synchronous SQLAlchemy functions to
run within the context of an asyncio application.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">do_something_with_core</span><span class="p">(</span><span class="n">conn</span><span class="p">:</span> <span class="n">Connection</span><span class="p">,</span> <span class="n">arg1</span><span class="p">:</span> <span class="n">int</span><span class="p">,</span> <span class="n">arg2</span><span class="p">:</span> <span class="n">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;A synchronous function that does not require awaiting</span>

<span class="sd">    :param conn: a Core SQLAlchemy Connection, used synchronously</span>

<span class="sd">    :return: an optional return value is supported</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">some_table</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">int_col</span><span class="o">=</span><span class="n">arg1</span><span class="p">,</span> <span class="n">str_col</span><span class="o">=</span><span class="n">arg2</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;success&quot;</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">do_something_async</span><span class="p">(</span><span class="n">async_engine</span><span class="p">:</span> <span class="n">AsyncEngine</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;an async function that uses awaiting&#39;&#39;&#39;</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">async_engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">async_conn</span><span class="p">:</span>
        <span class="c1"># run do_something_with_core() with a sync-style</span>
        <span class="c1"># Connection, proxied into an awaitable</span>
        <span class="n">return_code</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_conn</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">do_something_with_core</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;strval&quot;</span><span class="p">)</span>
        <span class="n">print</span><span class="p">(</span><span class="n">return_code</span><span class="p">)</span></pre></div>
</div>
<p>This method maintains the asyncio event loop all the way through
to the database connection by running the given callable in a
specially instrumented greenlet.</p>
<p>The most rudimentary use of <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.run_sync" title="sqlalchemy.ext.asyncio.AsyncConnection.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.run_sync()</span></code></a> is to
invoke methods such as <code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code>, given
an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> that needs to be provided to
<code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code> as a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># run metadata.create_all(conn) with a sync-style Connection,</span>
<span class="c1"># proxied into an awaitable</span>
<span class="k">with</span> <span class="n">async_engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">)</span></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The provided callable is invoked inline within the asyncio event
loop, and will block on traditional IO calls.  IO within this
callable should only call into SQLAlchemy’s asyncio database
APIs which will be properly adapted to the greenlet context.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync" title="sqlalchemy.ext.asyncio.AsyncSession.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.run_sync()</span></code></a></p>
<p><a class="reference internal" href="#session-run-sync"><span class="std std-ref">在 asyncio 下运行同步方法和函数</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.scalar">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scalar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreSingleExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoreExecuteOptionsParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.scalar" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a SQL statement construct and returns a scalar object.</p>
<p>This method is shorthand for invoking the
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result.scalar" title="sqlalchemy.engine.Result.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar()</span></code></a> method after invoking the
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a> method.  Parameters are equivalent.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a scalar Python value representing the first column of the
first row returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.scalars">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scalars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoreExecuteOptionsParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><span class="pre">ScalarResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.scalars" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a SQL statement construct and returns a scalar objects.</p>
<p>This method is shorthand for invoking the
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> method after invoking the
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a> method.  Parameters are equivalent.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> object.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.24.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.start">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">is_ctxmanager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.engine.AsyncConnection"><span class="pre">AsyncConnection</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> object’s context
outside of using a Python <code class="docutils literal notranslate"><span class="pre">with:</span></code> block.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.stream">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">stream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoreExecuteOptionsParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">AsyncIterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><span class="pre">AsyncResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return an awaitable yielding a
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> object.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">stmt</span><span class="p">):</span>
<span class="k">async</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
    <span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">row</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></pre></div>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream" title="sqlalchemy.ext.asyncio.AsyncConnection.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.stream()</span></code></a>
method supports optional context manager use against the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> object, as in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">conn</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span> <span class="k">as</span> <span class="n">result</span><span class="p">:</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
        <span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">row</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></pre></div>
</div>
<p>In the above pattern, the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.close" title="sqlalchemy.ext.asyncio.AsyncResult.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.close()</span></code></a> method is
invoked unconditionally, even if the iterator is interrupted by an
exception throw.   Context manager use remains optional, however,
and the function may be called in either an <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span> <span class="pre">fn():</span></code> or
<code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">fn()</span></code> style.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0b3: </span>added context manager support</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>an awaitable object that will yield an
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> object.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream_scalars" title="sqlalchemy.ext.asyncio.AsyncConnection.stream_scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.stream_scalars()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.stream_scalars">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">stream_scalars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreSingleExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoreExecuteOptionsParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">AsyncIterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><span class="pre">AsyncScalarResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream_scalars" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return an awaitable yielding a
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a> object.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">stream_scalars</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>
<span class="k">async</span> <span class="k">for</span> <span class="n">scalar</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
    <span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">scalar</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></pre></div>
</div>
<p>This method is shorthand for invoking the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code> method after invoking the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.stream()</span></code> method.  Parameters are equivalent.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream_scalars" title="sqlalchemy.ext.asyncio.AsyncConnection.stream_scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.stream_scalars()</span></code></a>
method supports optional context manager use against the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a> object, as in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">conn</span><span class="o">.</span><span class="n">stream_scalars</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span> <span class="k">as</span> <span class="n">result</span><span class="p">:</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">scalar</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
        <span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">scalar</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></pre></div>
</div>
<p>In the above pattern, the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.close" title="sqlalchemy.ext.asyncio.AsyncScalarResult.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncScalarResult.close()</span></code></a> method is
invoked unconditionally, even if the iterator is interrupted by an
exception throw.  Context manager use remains optional, however,
and the function may be called in either an <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span> <span class="pre">fn():</span></code> or
<code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">fn()</span></code> style.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0b3: </span>added context manager support</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>an awaitable object that will yield an
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a> object.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.24.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream" title="sqlalchemy.ext.asyncio.AsyncConnection.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.stream()</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.sync_connection">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">sync_connection</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><span class="pre">Connection</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.sync_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Reference to the sync-style <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> proxies requests towards.</p>
<p>This instance can be used as an event target.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">asyncio_events</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.sync_engine">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">sync_engine</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><span class="pre">Engine</span></a></em><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.sync_engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Reference to the sync-style <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> is associated with via its underlying
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>This instance can be used as an event target.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">asyncio_events</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncTransaction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncTransaction</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="Permalink to this definition">¶</a></dt>
<dd><p>An asyncio proxy for a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction.commit"><span class="sig-name descname">commit()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction.rollback"><span class="sig-name descname">rollback()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction.start"><span class="sig-name descname">start()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncTransaction</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.ProxyComparable</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.StartableContext</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncTransaction.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncTransaction.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncTransaction.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a>.</p>
<p>If this transaction is the base transaction in a begin/commit
nesting, the transaction will rollback().  Otherwise, the
method returns.</p>
<p>This is used to cancel a Transaction without affecting the scope of
an enclosing transaction.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncTransaction.commit">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncTransaction.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncTransaction.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncTransaction.rollback">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncTransaction.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncTransaction.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Roll back this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncTransaction.start">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncTransaction.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">is_ctxmanager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.engine.AsyncTransaction"><span class="pre">AsyncTransaction</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncTransaction.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a> object’s context
outside of using a Python <code class="docutils literal notranslate"><span class="pre">with:</span></code> block.</p>
</dd></dl>

</dd></dl>

<p>结果集 API 文档
———————————-  <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a>  对象是   <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>  对象的异步版本。使用</p>
<blockquote>
<div><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream" title="sqlalchemy.ext.asyncio.AsyncConnection.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.stream()</span></code></a>   或  <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.stream" title="sqlalchemy.ext.asyncio.AsyncSession.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.stream()</span></code></a>  方法时，才会返回此对象，该方法返回基于活动数据库游标的结果对象。</p>
</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncResult</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult" title="Permalink to this definition">¶</a></dt>
<dd><p>An asyncio wrapper around a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> only applies to statement executions that
use a server-side cursor.  It is returned only from the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream" title="sqlalchemy.ext.asyncio.AsyncConnection.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.stream()</span></code></a> and
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.stream" title="sqlalchemy.ext.asyncio.AsyncSession.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.stream()</span></code></a> methods.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As is the case with <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>, this object is
used for ORM results returned by <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.execute" title="sqlalchemy.ext.asyncio.AsyncSession.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.execute()</span></code></a>,
which can yield instances of ORM mapped objects either individually or
within tuple-like rows.  Note that these result objects do not
deduplicate instances or rows automatically as is the case with the
legacy <a class="reference internal" href="../queryguide/query.html#sqlalchemy.orm.Query" title="sqlalchemy.orm.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> object. For in-Python de-duplication of
instances or rows, use the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.unique" title="sqlalchemy.ext.asyncio.AsyncResult.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.unique()</span></code></a> modifier
method.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.all"><span class="sig-name descname">all()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.closed"><span class="sig-name descname">closed</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.columns"><span class="sig-name descname">columns()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchall"><span class="sig-name descname">fetchall()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchmany"><span class="sig-name descname">fetchmany()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchone"><span class="sig-name descname">fetchone()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.first"><span class="sig-name descname">first()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.freeze"><span class="sig-name descname">freeze()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.keys"><span class="sig-name descname">keys()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.mappings"><span class="sig-name descname">mappings()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one"><span class="sig-name descname">one()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none"><span class="sig-name descname">one_or_none()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.partitions"><span class="sig-name descname">partitions()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar"><span class="sig-name descname">scalar()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one"><span class="sig-name descname">scalar_one()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one_or_none"><span class="sig-name descname">scalar_one_or_none()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars"><span class="sig-name descname">scalars()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.t"><span class="sig-name descname">t</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.tuples"><span class="sig-name descname">tuples()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.unique"><span class="sig-name descname">unique()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.yield_per"><span class="sig-name descname">yield_per()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult</span></code></a> (<code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncCommon</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all rows in a list.</p>
<p>Closes the result set after invocation.   Subsequent invocations
will return an empty list.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a list of <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.close" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncCommon.close()</span></code> <em>method of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncCommon</span></code></p>
</div>
<p>Close this result.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.closed">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">closed</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.closed" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncCommon.closed</span></code> <em>attribute of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncCommon</span></code></p>
</div>
<p>proxies the .closed attribute of the underlying result object,
if any, else raises <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0b3.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.columns">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">col_expressions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_KeyIndexType</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Establish the columns that should be returned in each row.</p>
<p>Refer to <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result.columns" title="sqlalchemy.engine.Result.columns"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.columns()</span></code></a> in the synchronous
SQLAlchemy API for a complete behavioral description.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.fetchall">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fetchall</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchall" title="Permalink to this definition">¶</a></dt>
<dd><p>A synonym for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.all" title="sqlalchemy.ext.asyncio.AsyncResult.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.all()</span></code></a> method.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.fetchmany">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fetchmany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchmany" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch many rows.</p>
<p>When all rows are exhausted, returns an empty list.</p>
<p>This method is provided for backwards compatibility with
SQLAlchemy 1.x.x.</p>
<p>To fetch rows in groups, use the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.partitions" title="sqlalchemy.ext.asyncio.AsyncResult.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.partitions()</span></code></a> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a list of <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.partitions" title="sqlalchemy.ext.asyncio.AsyncResult.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.partitions()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.fetchone">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fetchone</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchone" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch one row.</p>
<p>When all rows are exhausted, returns None.</p>
<p>This method is provided for backwards compatibility with
SQLAlchemy 1.x.x.</p>
<p>To fetch the first row of a result only, use the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.first" title="sqlalchemy.ext.asyncio.AsyncResult.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.first()</span></code></a> method.  To iterate through all
rows, iterate the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> object directly.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> object if no filters are applied,
or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no rows remain.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.first">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">first</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.first" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the first row or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no row is present.</p>
<p>Closes the result set and discards remaining rows.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method returns one <strong>row</strong>, e.g. tuple, by default.
To return exactly one single scalar value, that is, the first
column of the first row, use the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar" title="sqlalchemy.ext.asyncio.AsyncResult.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalar()</span></code></a> method,
or combine <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a> and
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.first" title="sqlalchemy.ext.asyncio.AsyncResult.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.first()</span></code></a>.</p>
<p>Additionally, in contrast to the behavior of the legacy  ORM
<a class="reference internal" href="../queryguide/query.html#sqlalchemy.orm.Query.first" title="sqlalchemy.orm.Query.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.first()</span></code></a> method, <strong>no limit is applied</strong> to the
SQL query which was invoked to produce this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a>;
for a DBAPI driver that buffers results in memory before yielding
rows, all rows will be sent to the Python process and all but
the first row will be discarded.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../changelog/migration_20.html#migration-20-unify-select"><span class="std std-ref">ORM查询与核心选择器统一</span></a></p>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> object, or None
if no rows remain.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar" title="sqlalchemy.ext.asyncio.AsyncResult.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalar()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="sqlalchemy.ext.asyncio.AsyncResult.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.freeze">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">freeze</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.FrozenResult" title="sqlalchemy.engine.result.FrozenResult"><span class="pre">FrozenResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.freeze" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a callable object that will produce copies of this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> when invoked.</p>
<p>The callable object returned is an instance of
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.FrozenResult" title="sqlalchemy.engine.FrozenResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FrozenResult</span></code></a>.</p>
<p>This is used for result set caching.  The method must be called
on the result when it has been unconsumed, and calling the method
will consume the result fully.   When the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.FrozenResult" title="sqlalchemy.engine.FrozenResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FrozenResult</span></code></a>
is retrieved from a cache, it can be called any number of times where
it will produce a new <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object each time
against its stored set of rows.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../session_events.html#do-orm-execute-re-executing"><span class="std std-ref">重新执行语句</span></a> - example usage within the
ORM to implement a result-set cache.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.keys">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RMKeyView</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.keys" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys.keys</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys</span></code></p>
</div>
<p>Return an iterable view which yields the string keys that would
be represented by each <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
<p>The keys can represent the labels of the columns returned by a core
statement or the names of the orm classes returned by an orm
execution.</p>
<p>The view also can be tested for key containment using the Python
<code class="docutils literal notranslate"><span class="pre">in</span></code> operator, which will test both for the string keys represented
in the view, as well as for alternate keys such as column objects.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>a key view object is returned rather than a
plain list.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.mappings">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">mappings</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult" title="sqlalchemy.ext.asyncio.result.AsyncMappingResult"><span class="pre">AsyncMappingResult</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.mappings" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a mappings filter to returned rows, returning an instance of
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult" title="sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncMappingResult</span></code></a>.</p>
<p>When this filter is applied, fetching rows will return
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> objects instead of <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a new <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult" title="sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncMappingResult</span></code></a> filtering object
referring to the underlying <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.one">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="Permalink to this definition">¶</a></dt>
<dd><p>Return exactly one row or raise an exception.</p>
<p>Raises <a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.NoResultFound" title="sqlalchemy.exc.NoResultFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoResultFound</span></code></a> if the result returns no
rows, or <a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a> if multiple rows
would be returned.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method returns one <strong>row</strong>, e.g. tuple, by default.
To return exactly one single scalar value, that is, the first
column of the first row, use the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one" title="sqlalchemy.ext.asyncio.AsyncResult.scalar_one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalar_one()</span></code></a> method, or combine
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a> and
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="sqlalchemy.ext.asyncio.AsyncResult.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a>.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The first <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a>, <a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.NoResultFound" title="sqlalchemy.exc.NoResultFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoResultFound</span></code></a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.first" title="sqlalchemy.ext.asyncio.AsyncResult.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.first()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none" title="sqlalchemy.ext.asyncio.AsyncResult.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one_or_none()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one" title="sqlalchemy.ext.asyncio.AsyncResult.scalar_one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalar_one()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.one_or_none">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Return at most one result or raise an exception.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">None</span></code> if the result has no rows.
Raises <a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a>
if multiple rows are returned.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The first <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no row
is available.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.first" title="sqlalchemy.ext.asyncio.AsyncResult.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.first()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="sqlalchemy.ext.asyncio.AsyncResult.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.partitions">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">partitions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">AsyncIterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.partitions" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate through sub-lists of rows of the size given.</p>
<p>An async iterator is returned:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">scroll_results</span><span class="p">(</span><span class="n">connection</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">connection</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">users_table</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">for</span> <span class="n">partition</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">partitions</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
        <span class="n">print</span><span class="p">(</span><span class="s2">&quot;list of rows: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">partition</span><span class="p">)</span></pre></div>
</div>
<p>Refer to <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a> in the synchronous
SQLAlchemy API for a complete behavioral description.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.scalar">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scalar</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the first column of the first row, and close the result set.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">None</span></code> if there are no rows to fetch.</p>
<p>No validation is performed to test if additional rows remain.</p>
<p>After calling this method, the object is fully closed,
e.g. the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.CursorResult.close" title="sqlalchemy.engine.CursorResult.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.close()</span></code></a>
method will have been called.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a Python scalar value, or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no rows remain.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.scalar_one">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scalar_one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Return exactly one scalar result or raise an exception.</p>
<p>This is equivalent to calling <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a> and
then <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="sqlalchemy.ext.asyncio.AsyncResult.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="sqlalchemy.ext.asyncio.AsyncResult.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.scalar_one_or_none">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scalar_one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one_or_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Return exactly one scalar result or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>This is equivalent to calling <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a> and
then <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none" title="sqlalchemy.ext.asyncio.AsyncResult.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one_or_none()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none" title="sqlalchemy.ext.asyncio.AsyncResult.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one_or_none()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.scalars">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">scalars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_KeyIndexType</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><span class="pre">AsyncScalarResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a> filtering object which
will return single elements rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
<p>Refer to <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> in the synchronous
SQLAlchemy API for a complete behavioral description.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncResult.scalars.params.index"></span><strong>index</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars.params.index">¶</a> – integer or row key indicating the column to be fetched
from each row, defaults to <code class="docutils literal notranslate"><span class="pre">0</span></code> indicating the first column.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a new <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a> filtering object
referring to this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.t">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">t</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.t" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a “typed tuple” typing filter to returned rows.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.t" title="sqlalchemy.ext.asyncio.AsyncResult.t"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncResult.t</span></code></a> attribute is a synonym for
calling the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.tuples" title="sqlalchemy.ext.asyncio.AsyncResult.tuples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.tuples()</span></code></a> method.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.tuples">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">tuples</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTupleResult" title="sqlalchemy.ext.asyncio.result.AsyncTupleResult"><span class="pre">AsyncTupleResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.tuples" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a “typed tuple” typing filter to returned rows.</p>
<p>This method returns the same <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> object
at runtime,
however annotates as returning a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTupleResult" title="sqlalchemy.ext.asyncio.AsyncTupleResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTupleResult</span></code></a>
object that will indicate to <span class="target" id="index-0"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/"><strong>PEP 484</strong></a> typing tools that plain typed
<code class="docutils literal notranslate"><span class="pre">Tuple</span></code> instances are returned rather than rows.  This allows
tuple unpacking and <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> access of <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
objects to by typed, for those cases where the statement invoked
itself included typing information.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the <code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTupleResult</span></code> type at typing time.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.t" title="sqlalchemy.ext.asyncio.AsyncResult.t"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncResult.t</span></code></a> - shorter synonym</p>
<p><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row.t" title="sqlalchemy.engine.Row.t"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row.t</span></code></a> - <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> version</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.unique">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">unique</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_UniqueFilterType</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply unique filtering to the objects returned by this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a>.</p>
<p>Refer to <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result.unique" title="sqlalchemy.engine.Result.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.unique()</span></code></a> in the synchronous
SQLAlchemy API for a complete behavioral description.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.yield_per">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">yield_per</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.yield_per" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.FilterResult.yield_per" title="sqlalchemy.engine.FilterResult.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code></a> <em>method of</em> <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.FilterResult" title="sqlalchemy.engine.FilterResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterResult</span></code></a></p>
</div>
<p>Configure the row-fetching strategy to fetch <code class="docutils literal notranslate"><span class="pre">num</span></code> rows at a time.</p>
<p>The <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.FilterResult.yield_per" title="sqlalchemy.engine.FilterResult.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code></a> method is a pass through
to the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> method.  See that method’s
documentation for usage notes.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.40: </span>- added <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.FilterResult.yield_per" title="sqlalchemy.engine.FilterResult.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code></a>
so that the method is available on all result set implementations</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">engine_stream_results</span> - describes Core behavior for
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a></p>
<p><span class="xref std std-ref">orm_queryguide_yield_per</span> - in the <a class="reference internal" href="../queryguide/index.html"><span class="std std-ref">ORM 查询指南</span></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncScalarResult</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> that returns scalar values
rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> values.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a> object is acquired by calling the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a> method.</p>
<p>Refer to the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> object in the synchronous
SQLAlchemy API for a complete behavioral description.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.all"><span class="sig-name descname">all()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.closed"><span class="sig-name descname">closed</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.fetchall"><span class="sig-name descname">fetchall()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.fetchmany"><span class="sig-name descname">fetchmany()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.first"><span class="sig-name descname">first()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.one"><span class="sig-name descname">one()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.one_or_none"><span class="sig-name descname">one_or_none()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.partitions"><span class="sig-name descname">partitions()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.unique"><span class="sig-name descname">unique()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.yield_per"><span class="sig-name descname">yield_per()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncCommon</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">_R</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all scalar values in a list.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.all" title="sqlalchemy.ext.asyncio.AsyncResult.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.all()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.close" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncCommon.close()</span></code> <em>method of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncCommon</span></code></p>
</div>
<p>Close this result.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.closed">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">closed</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.closed" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncCommon.closed</span></code> <em>attribute of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncCommon</span></code></p>
</div>
<p>proxies the .closed attribute of the underlying result object,
if any, else raises <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0b3.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.fetchall">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fetchall</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">_R</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.fetchall" title="Permalink to this definition">¶</a></dt>
<dd><p>A synonym for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.all" title="sqlalchemy.ext.asyncio.AsyncScalarResult.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncScalarResult.all()</span></code></a> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.fetchmany">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fetchmany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">_R</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.fetchmany" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch many objects.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchmany" title="sqlalchemy.ext.asyncio.AsyncResult.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.fetchmany()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.first">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">first</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_R</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.first" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the first object or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no object is present.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.first" title="sqlalchemy.ext.asyncio.AsyncResult.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.first()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.one">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_R</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.one" title="Permalink to this definition">¶</a></dt>
<dd><p>Return exactly one object or raise an exception.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="sqlalchemy.ext.asyncio.AsyncResult.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.one_or_none">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_R</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.one_or_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Return at most one object or raise an exception.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none" title="sqlalchemy.ext.asyncio.AsyncResult.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one_or_none()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.partitions">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">partitions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">AsyncIterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">_R</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.partitions" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate through sub-lists of elements of the size given.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.partitions" title="sqlalchemy.ext.asyncio.AsyncResult.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.partitions()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.unique">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">unique</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_UniqueFilterType</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply unique filtering to the objects returned by this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a>.</p>
<p>See <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.unique" title="sqlalchemy.ext.asyncio.AsyncResult.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.unique()</span></code></a> for usage details.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.yield_per">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">yield_per</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.yield_per" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.FilterResult.yield_per" title="sqlalchemy.engine.FilterResult.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code></a> <em>method of</em> <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.FilterResult" title="sqlalchemy.engine.FilterResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterResult</span></code></a></p>
</div>
<p>Configure the row-fetching strategy to fetch <code class="docutils literal notranslate"><span class="pre">num</span></code> rows at a time.</p>
<p>The <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.FilterResult.yield_per" title="sqlalchemy.engine.FilterResult.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code></a> method is a pass through
to the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> method.  See that method’s
documentation for usage notes.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.40: </span>- added <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.FilterResult.yield_per" title="sqlalchemy.engine.FilterResult.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code></a>
so that the method is available on all result set implementations</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">engine_stream_results</span> - describes Core behavior for
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a></p>
<p><span class="xref std std-ref">orm_queryguide_yield_per</span> - in the <a class="reference internal" href="../queryguide/index.html"><span class="std std-ref">ORM 查询指南</span></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncMappingResult</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> that returns dictionary
values rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> values.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult" title="sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncMappingResult</span></code></a> object is acquired by calling the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.mappings" title="sqlalchemy.ext.asyncio.AsyncResult.mappings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.mappings()</span></code></a> method.</p>
<p>Refer to the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.MappingResult" title="sqlalchemy.engine.MappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MappingResult</span></code></a> object in the synchronous
SQLAlchemy API for a complete behavioral description.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.all"><span class="sig-name descname">all()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.closed"><span class="sig-name descname">closed</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.columns"><span class="sig-name descname">columns()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchall"><span class="sig-name descname">fetchall()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchmany"><span class="sig-name descname">fetchmany()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchone"><span class="sig-name descname">fetchone()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.first"><span class="sig-name descname">first()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.keys"><span class="sig-name descname">keys()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.one"><span class="sig-name descname">one()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.one_or_none"><span class="sig-name descname">one_or_none()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.partitions"><span class="sig-name descname">partitions()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.unique"><span class="sig-name descname">unique()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.yield_per"><span class="sig-name descname">yield_per()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult" title="sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult</span></code></a> (<code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncCommon</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.row.RowMapping"><span class="pre">RowMapping</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all rows in a list.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.all" title="sqlalchemy.ext.asyncio.AsyncResult.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.all()</span></code></a> except that
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
objects, are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.close" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncCommon.close()</span></code> <em>method of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncCommon</span></code></p>
</div>
<p>Close this result.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.closed">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><span class="sig-name descname"><span class="pre">closed</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.closed" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncCommon.closed</span></code> <em>attribute of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncCommon</span></code></p>
</div>
<p>proxies the .closed attribute of the underlying result object,
if any, else raises <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0b3.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.columns">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><span class="sig-name descname"><span class="pre">columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">col_expressions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_KeyIndexType</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Establish the columns that should be returned in each row.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.fetchall">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fetchall</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.row.RowMapping"><span class="pre">RowMapping</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchall" title="Permalink to this definition">¶</a></dt>
<dd><p>A synonym for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.all" title="sqlalchemy.ext.asyncio.AsyncMappingResult.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncMappingResult.all()</span></code></a> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.fetchmany">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fetchmany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.row.RowMapping"><span class="pre">RowMapping</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchmany" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch many rows.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchmany" title="sqlalchemy.ext.asyncio.AsyncResult.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.fetchmany()</span></code></a> except that
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
objects, are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.fetchone">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fetchone</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.row.RowMapping"><span class="pre">RowMapping</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchone" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch one object.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchone" title="sqlalchemy.ext.asyncio.AsyncResult.fetchone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.fetchone()</span></code></a> except that
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
objects, are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.first">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">first</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.row.RowMapping"><span class="pre">RowMapping</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.first" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the first object or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no object is present.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.first" title="sqlalchemy.ext.asyncio.AsyncResult.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.first()</span></code></a> except that
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
objects, are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.keys">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RMKeyView</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.keys" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys.keys</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys</span></code></p>
</div>
<p>Return an iterable view which yields the string keys that would
be represented by each <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
<p>The keys can represent the labels of the columns returned by a core
statement or the names of the orm classes returned by an orm
execution.</p>
<p>The view also can be tested for key containment using the Python
<code class="docutils literal notranslate"><span class="pre">in</span></code> operator, which will test both for the string keys represented
in the view, as well as for alternate keys such as column objects.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>a key view object is returned rather than a
plain list.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.one">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.row.RowMapping"><span class="pre">RowMapping</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.one" title="Permalink to this definition">¶</a></dt>
<dd><p>Return exactly one object or raise an exception.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="sqlalchemy.ext.asyncio.AsyncResult.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a> except that
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
objects, are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.one_or_none">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.row.RowMapping"><span class="pre">RowMapping</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.one_or_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Return at most one object or raise an exception.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none" title="sqlalchemy.ext.asyncio.AsyncResult.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one_or_none()</span></code></a> except that
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
objects, are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.partitions">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">partitions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">AsyncIterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.row.RowMapping"><span class="pre">RowMapping</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.partitions" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate through sub-lists of elements of the size given.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.partitions" title="sqlalchemy.ext.asyncio.AsyncResult.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.partitions()</span></code></a> except that
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
objects, are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.unique">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><span class="sig-name descname"><span class="pre">unique</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_UniqueFilterType</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply unique filtering to the objects returned by this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult" title="sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncMappingResult</span></code></a>.</p>
<p>See <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.unique" title="sqlalchemy.ext.asyncio.AsyncResult.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.unique()</span></code></a> for usage details.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.yield_per">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><span class="sig-name descname"><span class="pre">yield_per</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.yield_per" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.FilterResult.yield_per" title="sqlalchemy.engine.FilterResult.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code></a> <em>method of</em> <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.FilterResult" title="sqlalchemy.engine.FilterResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterResult</span></code></a></p>
</div>
<p>Configure the row-fetching strategy to fetch <code class="docutils literal notranslate"><span class="pre">num</span></code> rows at a time.</p>
<p>The <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.FilterResult.yield_per" title="sqlalchemy.engine.FilterResult.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code></a> method is a pass through
to the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> method.  See that method’s
documentation for usage notes.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.40: </span>- added <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.FilterResult.yield_per" title="sqlalchemy.engine.FilterResult.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code></a>
so that the method is available on all result set implementations</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">engine_stream_results</span> - describes Core behavior for
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a></p>
<p><span class="xref std std-ref">orm_queryguide_yield_per</span> - in the <a class="reference internal" href="../queryguide/index.html"><span class="std std-ref">ORM 查询指南</span></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncTupleResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncTupleResult</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncTupleResult" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> that’s typed as returning plain
Python tuples instead of rows.</p>
<p>Since <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> acts like a tuple in every way already,
this class is a typing only class, regular <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> is
still used at runtime.</p>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTupleResult" title="sqlalchemy.ext.asyncio.AsyncTupleResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncTupleResult</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncCommon</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.util.langhelpers.TypingOnly</span></code>)</p>
</div>
</dd></dl>

</section>
<section id="orm-api">
<h2>ORM 会话 API 文档<a class="headerlink" href="#orm-api" title="Permalink to this heading">¶</a></h2>
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_object_session"><span class="sig-name descname">async_object_session</span></a>(instance)</p></td>
<td><p>Return the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> to which the given instance
belongs.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><span class="sig-name descname">async_scoped_session</span></a></p></td>
<td><p>Provides scoped management of <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> objects.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_session"><span class="sig-name descname">async_session</span></a>(session)</p></td>
<td><p>Return the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> which is proxying the given
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object, if any.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker"><span class="sig-name descname">async_sessionmaker</span></a></p></td>
<td><p>A configurable <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> factory.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs"><span class="sig-name descname">AsyncAttrs</span></a></p></td>
<td><p>Mixin class which provides an awaitable accessor for all attributes.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><span class="sig-name descname">AsyncSession</span></a></p></td>
<td><p>Asyncio version of <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction"><span class="sig-name descname">AsyncSessionTransaction</span></a></p></td>
<td><p>A wrapper for the ORM <code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code> object.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_object_session">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">async_object_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.session.AsyncSession"><span class="pre">AsyncSession</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_object_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> to which the given instance
belongs.</p>
<p>This function makes use of the sync-API function
<code class="xref py py-class docutils literal notranslate"><span class="pre">object_session</span></code> to retrieve the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> which
refers to the given instance, and from there links it to the original
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>.</p>
<p>If the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> has been garbage collected, the
return value is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>This functionality is also available from the
<a class="reference internal" href="../internals.html#sqlalchemy.orm.InstanceState.async_session" title="sqlalchemy.orm.InstanceState.async_session"><code class="xref py py-attr docutils literal notranslate"><span class="pre">InstanceState.async_session</span></code></a> accessor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.ext.asyncio.async_object_session.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_object_session.params.instance">¶</a> – an ORM mapped instance</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> object, or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.18.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_session">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">async_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.session.AsyncSession"><span class="pre">AsyncSession</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> which is proxying the given
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object, if any.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.ext.asyncio.async_session.params.session"></span><strong>session</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_session.params.session">¶</a> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> instance.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> instance, or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.18.</span></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_sessionmaker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">async_sessionmaker</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="Permalink to this definition">¶</a></dt>
<dd><p>A configurable <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> factory.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a> factory works in the same way as the
<code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code> factory, to generate new <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>
objects when called, creating them given
the configurational arguments established here.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">AsyncSession</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">async_sessionmaker</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">run_some_sql</span><span class="p">(</span><span class="n">async_session</span><span class="p">:</span> <span class="n">async_sessionmaker</span><span class="p">[</span><span class="n">AsyncSession</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">async_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">SomeObject</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s2">&quot;object&quot;</span><span class="p">))</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">SomeOtherObject</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;other object&quot;</span><span class="p">))</span>
        <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># an AsyncEngine, which the AsyncSession will use for connection</span>
    <span class="c1"># resources</span>
    <span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span><span class="s1">&#39;postgresql+asyncpg://scott:tiger@localhost/&#39;</span><span class="p">)</span>

    <span class="c1"># create a reusable factory for new AsyncSession instances</span>
    <span class="n">async_session</span> <span class="o">=</span> <span class="n">async_sessionmaker</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>

    <span class="k">await</span> <span class="n">run_some_sql</span><span class="p">(</span><span class="n">async_session</span><span class="p">)</span>

    <span class="k">await</span> <span class="n">engine</span><span class="o">.</span><span class="n">dispose</span><span class="p">()</span></pre></div>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a> is useful so that different parts
of a program can create new <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> objects with a
fixed configuration established up front.  Note that <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>
objects may also be instantiated directly when not using
<a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0: </span><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a> provides a
<code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code> class that’s dedicated to the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> object, including pep-484 typing support.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">asyncio_orm</span> - shows example use</p>
<dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code>  - general overview of the</dt><dd><p><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code> architecture</p>
</dd>
</dl>
<p><a class="reference internal" href="../session_basics.html#session-getting"><span class="std std-ref">开启和关闭会话</span></a> - introductory text on creating
sessions using <code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code>.</p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker.__call__"><span class="sig-name descname">__call__()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker.begin"><span class="sig-name descname">begin()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker.configure"><span class="sig-name descname">configure()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_sessionmaker</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Generic</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_sessionmaker.__call__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_sessionmaker.</span></code></a><span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">local_kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_AS</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_sessionmaker.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a new <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> object using the configuration
established in this <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a>.</p>
<p>In Python, the <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method is invoked on an object when
it is “called” in the same way as a function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AsyncSession</span> <span class="o">=</span> <span class="n">async_sessionmaker</span><span class="p">(</span><span class="n">async_engine</span><span class="p">,</span> <span class="n">expire_on_commit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">AsyncSession</span><span class="p">()</span>  <span class="c1"># invokes sessionmaker.__call__()</span></pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_sessionmaker.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_sessionmaker.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bind:</span> <span class="pre">Optional[_AsyncSessionBind]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_:</span> <span class="pre">Type[_AS]</span> <span class="pre">=</span> <span class="pre">&lt;class</span> <span class="pre">'sqlalchemy.ext.asyncio.session.AsyncSession'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autoflush:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expire_on_commit:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info:</span> <span class="pre">Optional[_InfoType]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kw:</span> <span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_sessionmaker.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a>.</p>
<p>All arguments here except for <code class="docutils literal notranslate"><span class="pre">class_</span></code> correspond to arguments
accepted by <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> directly. See the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.__init__" title="sqlalchemy.ext.asyncio.AsyncSession.__init__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.__init__()</span></code></a> docstring for more details on
parameters.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_sessionmaker.begin">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_sessionmaker.</span></code></a><span class="sig-name descname"><span class="pre">begin</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_AsyncSessionContextManager</span><span class="p"><span class="pre">[</span></span><span class="pre">_AS</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_sessionmaker.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a context manager that both provides a new
<code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code> as well as a transaction that commits.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">Session</span> <span class="o">=</span> <span class="n">async_sessionmaker</span><span class="p">(</span><span class="n">some_engine</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">Session</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">some_object</span><span class="p">)</span>

    <span class="c1"># commits transaction, closes session</span></pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_sessionmaker.configure">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_sessionmaker.</span></code></a><span class="sig-name descname"><span class="pre">configure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">new_kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_sessionmaker.configure" title="Permalink to this definition">¶</a></dt>
<dd><p>(Re)configure the arguments for this async_sessionmaker.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AsyncSession</span> <span class="o">=</span> <span class="n">async_sessionmaker</span><span class="p">(</span><span class="n">some_engine</span><span class="p">)</span>

<span class="n">AsyncSession</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">create_async_engine</span><span class="p">(</span><span class="s1">&#39;sqlite+aiosqlite://&#39;</span><span class="p">))</span></pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">async_scoped_session</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides scoped management of <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> objects.</p>
<p>See the section <a class="reference internal" href="#asyncio-scoped-session"><span class="std std-ref">使用 asyncio scoped session</span></a> for usage details.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.19.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.__call__"><span class="sig-name descname">__call__()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.aclose"><span class="sig-name descname">aclose()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.add"><span class="sig-name descname">add()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.add_all"><span class="sig-name descname">add_all()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.autoflush"><span class="sig-name descname">autoflush</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.begin"><span class="sig-name descname">begin()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.begin_nested"><span class="sig-name descname">begin_nested()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.bind"><span class="sig-name descname">bind</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.close_all"><span class="sig-name descname">close_all()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.commit"><span class="sig-name descname">commit()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.configure"><span class="sig-name descname">configure()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.connection"><span class="sig-name descname">connection()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.delete"><span class="sig-name descname">delete()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.deleted"><span class="sig-name descname">deleted</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.dirty"><span class="sig-name descname">dirty</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.execute"><span class="sig-name descname">execute()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire"><span class="sig-name descname">expire()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire_all"><span class="sig-name descname">expire_all()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.expunge"><span class="sig-name descname">expunge()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.expunge_all"><span class="sig-name descname">expunge_all()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.flush"><span class="sig-name descname">flush()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.get"><span class="sig-name descname">get()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.get_bind"><span class="sig-name descname">get_bind()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.identity_key"><span class="sig-name descname">identity_key()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.identity_map"><span class="sig-name descname">identity_map</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.info"><span class="sig-name descname">info</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.invalidate"><span class="sig-name descname">invalidate()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_active"><span class="sig-name descname">is_active</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_modified"><span class="sig-name descname">is_modified()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.merge"><span class="sig-name descname">merge()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.new"><span class="sig-name descname">new</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.no_autoflush"><span class="sig-name descname">no_autoflush</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.object_session"><span class="sig-name descname">object_session()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.refresh"><span class="sig-name descname">refresh()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.remove"><span class="sig-name descname">remove()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.rollback"><span class="sig-name descname">rollback()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.scalar"><span class="sig-name descname">scalar()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.scalars"><span class="sig-name descname">scalars()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.session_factory"><span class="sig-name descname">session_factory</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.stream"><span class="sig-name descname">stream()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.stream_scalars"><span class="sig-name descname">stream_scalars()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Generic</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.__call__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_AS</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>, creating it
using the <a class="reference internal" href="../contextual.html#sqlalchemy.orm.scoped_session.session_factory" title="sqlalchemy.orm.scoped_session.session_factory"><code class="xref py py-attr docutils literal notranslate"><span class="pre">scoped_session.session_factory</span></code></a> if not present.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.__call__.params.**kw"></span><strong>**kw</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.__call__.params.**kw">¶</a> – Keyword arguments will be passed to the
<a class="reference internal" href="../contextual.html#sqlalchemy.orm.scoped_session.session_factory" title="sqlalchemy.orm.scoped_session.session_factory"><code class="xref py py-attr docutils literal notranslate"><span class="pre">scoped_session.session_factory</span></code></a> callable, if an existing
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> is not present.  If the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> is present
and keyword arguments have been passed,
<a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> is raised.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session_factory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.session.async_sessionmaker"><span class="pre">async_sessionmaker</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_AS</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scopefunc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.params.session_factory"></span><strong>session_factory</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.params.session_factory">¶</a> – a factory to create new <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>
instances. This is usually, but not necessarily, an instance
of <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.async_sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.params.scopefunc"></span><strong>scopefunc</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.params.scopefunc">¶</a> – function which defines
the current scope.   A function such as <code class="docutils literal notranslate"><span class="pre">asyncio.current_task</span></code>
may be useful here.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.aclose">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aclose</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.aclose" title="Permalink to this definition">¶</a></dt>
<dd><p>A synonym for <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close" title="sqlalchemy.ext.asyncio.AsyncSession.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.aclose" title="sqlalchemy.ext.asyncio.AsyncSession.aclose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.aclose()</span></code></a> name is specifically
to support the Python standard library <code class="docutils literal notranslate"><span class="pre">&#64;contextlib.aclosing</span></code>
context manager function.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.20.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.add">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_warn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Place an object into this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>Objects that are in the <span class="xref std std-term">transient</span> state when passed to the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code> method will move to the
<span class="xref std std-term">pending</span> state, until the next flush, at which point they
will move to the <span class="xref std std-term">persistent</span> state.</p>
<p>Objects that are in the <span class="xref std std-term">detached</span> state when passed to the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code> method will move to the <span class="xref std std-term">persistent</span>
state directly.</p>
<p>If the transaction used by the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> is rolled back,
objects which were transient when they were passed to
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code> will be moved back to the
<span class="xref std std-term">transient</span> state, and will no longer be present within this
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add_all()</span></code></p>
<p><a class="reference internal" href="../session_basics.html#session-adding"><span class="std std-ref">添加新项或现有项</span></a> - at <a class="reference internal" href="../session_basics.html#session-basics"><span class="std std-ref">使用会话的基础</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.add_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">add_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instances</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">object</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.add_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the given collection of instances to this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>See the documentation for <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code> for a general
behavioral description.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code></p>
<p><a class="reference internal" href="../session_basics.html#session-adding"><span class="std std-ref">添加新项或现有项</span></a> - at <a class="reference internal" href="../session_basics.html#session-basics"><span class="std std-ref">使用会话的基础</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.autoflush">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">autoflush</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.autoflush" title="Permalink to this definition">¶</a></dt>
<dd><p>Proxy for the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.autoflush</span></code> attribute
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.begin">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">begin</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><span class="pre">AsyncSessionTransaction</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a> object.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>The underlying <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> will perform the
“begin” action when the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a>
object is entered:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">async_session</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
    <span class="c1"># .. ORM transaction is begun</span></pre></div>
</div>
<p>Note that database IO will not normally occur when the session-level
transaction is begun, as database transactions begin on an
on-demand basis.  However, the begin block is async to accommodate
for a <a class="reference internal" href="../events.html#sqlalchemy.orm.SessionEvents.after_transaction_create" title="sqlalchemy.orm.SessionEvents.after_transaction_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SessionEvents.after_transaction_create()</span></code></a>
event hook that may perform IO.</p>
<p>For a general description of ORM begin, see
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin()</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.begin_nested">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">begin_nested</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><span class="pre">AsyncSessionTransaction</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.begin_nested" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a> object
which will begin a “nested” transaction, e.g. SAVEPOINT.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>Behavior is the same as that of <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.begin" title="sqlalchemy.ext.asyncio.AsyncSession.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.begin()</span></code></a>.</p>
<p>For a general description of ORM begin nested, see
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin_nested()</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.bind">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">bind</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.bind" title="Permalink to this definition">¶</a></dt>
<dd><p>Proxy for the <code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncSession.bind</span></code> attribute
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close out the transactional resources and ORM objects used by this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>This expunges all ORM objects associated with this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>, ends any transaction in progress and
<span class="xref std std-term">releases</span> any <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> objects which
this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> itself has checked out from
associated <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> objects. The operation then
leaves the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> in a state which it may be
used again.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close" title="sqlalchemy.ext.asyncio.AsyncSession.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a> method <strong>does not prevent
the Session from being used again</strong>. The
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> itself does not actually have a
distinct “closed” state; it merely means the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> will release all database
connections and ORM objects.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../session_basics.html#session-closing"><span class="std std-ref">关闭</span></a> - detail on the semantics of
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close" title="sqlalchemy.ext.asyncio.AsyncSession.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.close_all">
<em class="property"><span class="pre">async</span><span class="w"> </span><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">close_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.close_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Close all <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> sessions.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.commit">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit the current transaction in progress.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.configure">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">configure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.configure" title="Permalink to this definition">¶</a></dt>
<dd><p>reconfigure the <code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code> used by this
<a class="reference internal" href="../contextual.html#sqlalchemy.orm.scoped_session" title="sqlalchemy.orm.scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">scoped_session</span></code></a>.</p>
<p>See <code class="xref py py-meth docutils literal notranslate"><span class="pre">sessionmaker.configure()</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.connection">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoreExecuteOptionsParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><span class="pre">AsyncConnection</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> object corresponding to
this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object’s transactional state.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>This method may also be used to establish execution options for the
database connection used by the current transaction.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.24: </span>Added **kw arguments which are passed
through to the underlying <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.connection()</span></code> method.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.connection()</span></code> - main documentation for
“connection”</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.delete">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark an instance as deleted.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>The database delete operation occurs upon <code class="docutils literal notranslate"><span class="pre">flush()</span></code>.</p>
<p>As this operation may need to cascade along unloaded relationships,
it is awaitable to allow for those queries to take place.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.delete()</span></code> - main documentation for delete</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.deleted">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">deleted</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.deleted" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all instances marked as ‘deleted’ within this <code class="docutils literal notranslate"><span class="pre">Session</span></code></p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.dirty">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">dirty</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.dirty" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all persistent instances considered dirty.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">some_mapped_object</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">dirty</span></pre></div>
</div>
<p>Instances are considered dirty when they were modified but not
deleted.</p>
<p>Note that this ‘dirty’ calculation is ‘optimistic’; most
attribute-setting or collection modification operations will
mark an instance as ‘dirty’ and place it in this set, even if
there is no net change to the attribute’s value.  At flush
time, the value of each attribute is compared to its
previously saved value, and if there’s no net change, no SQL
operation will occur (this is a more expensive operation so
it’s only done at flush time).</p>
<p>To check if an instance has actionable net changes to its
attributes, use the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.is_modified()</span></code> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.execute">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><span class="pre">Result</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return a buffered
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code> - main documentation for execute</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.expire">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">expire</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attribute_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire" title="Permalink to this definition">¶</a></dt>
<dd><p>Expire the attributes on an instance.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>Marks the attributes of an instance as out of date. When an expired
attribute is next accessed, a query will be issued to the
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object’s current transactional context in order to
load all expired attributes for the given instance.   Note that
a highly isolated transaction will return the same values as were
previously read in that same transaction, regardless of changes
in database state outside of that transaction.</p>
<p>To expire all objects in the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> simultaneously,
use <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire_all()</span></code>.</p>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object’s default behavior is to
expire all state whenever the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code>
or <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code> methods are called, so that new
state can be loaded for the new transaction.   For this reason,
calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code> only makes sense for the specific
case that a non-ORM SQL statement was emitted in the current
transaction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.expire.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire.params.instance">¶</a> – The instance to be refreshed.</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.expire.params.attribute_names"></span><strong>attribute_names</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire.params.attribute_names">¶</a> – optional list of string attribute names
indicating a subset of attributes to be expired.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../session_state_management.html#session-expire"><span class="std std-ref">刷新/到期</span></a> - introductory material</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code></p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code></p>
<p><a class="reference internal" href="../queryguide/query.html#sqlalchemy.orm.Query.populate_existing" title="sqlalchemy.orm.Query.populate_existing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.populate_existing()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.expire_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">expire_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Expires all persistent instances within this Session.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>When any attributes on a persistent instance is next accessed,
a query will be issued using the
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object’s current transactional context in order to
load all expired attributes for the given instance.   Note that
a highly isolated transaction will return the same values as were
previously read in that same transaction, regardless of changes
in database state outside of that transaction.</p>
<p>To expire individual objects and individual attributes
on those objects, use <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code>.</p>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object’s default behavior is to
expire all state whenever the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code>
or <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code> methods are called, so that new
state can be loaded for the new transaction.   For this reason,
calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire_all()</span></code> is not usually needed,
assuming the transaction is isolated.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../session_state_management.html#session-expire"><span class="std std-ref">刷新/到期</span></a> - introductory material</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code></p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code></p>
<p><a class="reference internal" href="../queryguide/query.html#sqlalchemy.orm.Query.populate_existing" title="sqlalchemy.orm.Query.populate_existing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.populate_existing()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.expunge">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">expunge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.expunge" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the <cite>instance</cite> from this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This will free all internal references to the instance.  Cascading
will be applied according to the <em>expunge</em> cascade rule.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.expunge_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">expunge_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.expunge_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all object instances from this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This is equivalent to calling <code class="docutils literal notranslate"><span class="pre">expunge(obj)</span></code> on all objects in this
<code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.flush">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">objects</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Flush all the object changes to the database.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.flush()</span></code> - main documentation for flush</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.get">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entity</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_EntityBindKey</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ident</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_PKIdentityArgument</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">ORMOption</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">populate_existing</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_for_update</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ForUpdateParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identity_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_O</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance based on the given primary key identifier,
or <code class="docutils literal notranslate"><span class="pre">None</span></code> if not found.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get()</span></code> - main documentation for get</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.get_bind">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">get_bind</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapper</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_EntityBindKey</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clause</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><span class="pre">ClauseElement</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_SessionBind</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><span class="pre">Engine</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><span class="pre">Connection</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.get_bind" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a “bind” to which the synchronous proxied <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>
is bound.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>Unlike the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> method, this method is
currently <strong>not</strong> used by this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> in any way
in order to resolve engines for requests.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method proxies directly to the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code>
method, however is currently <strong>not</strong> useful as an override target,
in contrast to that of the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> method.
The example below illustrates how to implement custom
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> schemes that work with
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> and <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>.</p>
</div>
<p>The pattern introduced at <a class="reference internal" href="../persistence_techniques.html#session-custom-partitioning"><span class="std std-ref">自定义垂直分区</span></a>
illustrates how to apply a custom bind-lookup scheme to a
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> given a set of <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> objects.
To apply a corresponding <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> implementation
for use with a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> and <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>
objects, continue to subclass <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> and apply it to
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> using
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.params.sync_session_class" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">AsyncSession.sync_session_class</span></code></a>. The inner method must
continue to return <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> instances, which can be
acquired from a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> using the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.sync_engine" title="sqlalchemy.ext.asyncio.AsyncEngine.sync_engine"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncEngine.sync_engine</span></code></a> attribute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># using example from &quot;Custom Vertical Partitioning&quot;</span>


<span class="kn">import</span> <span class="nn">random</span>

<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">AsyncSession</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">async_sessionmaker</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">Session</span>

<span class="c1"># construct async engines w/ async drivers</span>
<span class="n">engines</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;leader&#39;</span><span class="p">:</span><span class="n">create_async_engine</span><span class="p">(</span><span class="s2">&quot;sqlite+aiosqlite:///leader.db&quot;</span><span class="p">),</span>
    <span class="s1">&#39;other&#39;</span><span class="p">:</span><span class="n">create_async_engine</span><span class="p">(</span><span class="s2">&quot;sqlite+aiosqlite:///other.db&quot;</span><span class="p">),</span>
    <span class="s1">&#39;follower1&#39;</span><span class="p">:</span><span class="n">create_async_engine</span><span class="p">(</span><span class="s2">&quot;sqlite+aiosqlite:///follower1.db&quot;</span><span class="p">),</span>
    <span class="s1">&#39;follower2&#39;</span><span class="p">:</span><span class="n">create_async_engine</span><span class="p">(</span><span class="s2">&quot;sqlite+aiosqlite:///follower2.db&quot;</span><span class="p">),</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">RoutingSession</span><span class="p">(</span><span class="n">Session</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_bind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapper</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">clause</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="c1"># within get_bind(), return sync engines</span>
        <span class="k">if</span> <span class="n">mapper</span> <span class="ow">and</span> <span class="n">issubclass</span><span class="p">(</span><span class="n">mapper</span><span class="o">.</span><span class="n">class_</span><span class="p">,</span> <span class="n">MyOtherClass</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">engines</span><span class="p">[</span><span class="s1">&#39;other&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sync_engine</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flushing</span> <span class="ow">or</span> <span class="n">isinstance</span><span class="p">(</span><span class="n">clause</span><span class="p">,</span> <span class="p">(</span><span class="n">Update</span><span class="p">,</span> <span class="n">Delete</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">engines</span><span class="p">[</span><span class="s1">&#39;leader&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sync_engine</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">engines</span><span class="p">[</span>
                <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;follower1&#39;</span><span class="p">,</span><span class="s1">&#39;follower2&#39;</span><span class="p">])</span>
            <span class="p">]</span><span class="o">.</span><span class="n">sync_engine</span>

<span class="c1"># apply to AsyncSession using sync_session_class</span>
<span class="n">AsyncSessionMaker</span> <span class="o">=</span> <span class="n">async_sessionmaker</span><span class="p">(</span>
    <span class="n">sync_session_class</span><span class="o">=</span><span class="n">RoutingSession</span>
<span class="p">)</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<p>The <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> method is called in a non-asyncio,
implicitly non-blocking context in the same manner as ORM event hooks
and functions that are invoked via <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync" title="sqlalchemy.ext.asyncio.AsyncSession.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.run_sync()</span></code></a>, so
routines that wish to run SQL commands inside of
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> can continue to do so using
blocking-style code, which will be translated to implicitly async calls
at the point of invoking IO on the database drivers.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.identity_key">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">identity_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">class_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ident</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../../core/sqlelement.html#sqlalchemy.sql.expression.Tuple" title="sqlalchemy.sql.expression.Tuple"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><span class="pre">RowMapping</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identity_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_IdentityKeyType</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.identity_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an identity key.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This is an alias of <code class="xref py py-func docutils literal notranslate"><span class="pre">identity_key()</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.identity_map">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">identity_map</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.identity_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Proxy for the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.identity_map</span></code> attribute
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.info">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">info</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.info" title="Permalink to this definition">¶</a></dt>
<dd><p>A user-modifiable dictionary.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>The initial value of this dictionary can be populated using the
<code class="docutils literal notranslate"><span class="pre">info</span></code> argument to the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> constructor or
<code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code> constructor or factory methods.  The dictionary
here is always local to this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> and can be modified
independently of all other <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> objects.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.invalidate">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">invalidate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.invalidate" title="Permalink to this definition">¶</a></dt>
<dd><p>Close this Session, using connection invalidation.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>For a complete description, see <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.invalidate()</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.is_active">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">is_active</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_active" title="Permalink to this definition">¶</a></dt>
<dd><p>True if this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> not in “partial rollback” state.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> no longer begins
a new transaction immediately, so this attribute will be False
when the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> is first instantiated.</p>
</div>
<p>“partial rollback” state typically indicates that the flush process
of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> has failed, and that the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code> method must be emitted in order to
fully roll back the transaction.</p>
<p>If this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> is not in a transaction at all, the
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> will autobegin when it is first used, so in this
case <code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.is_active</span></code> will return True.</p>
<p>Otherwise, if this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> is within a transaction,
and that transaction has not been rolled back internally, the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.is_active</span></code> will also return True.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../faq/sessions.html#faq-session-rollback"><span class="std std-ref">“This Session’s transaction has been rolled back due to a previous exception during flush.” (或类似消息)</span></a></p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.in_transaction()</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.is_modified">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">is_modified</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_collections</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_modified" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the given instance has locally
modified attributes.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This method retrieves the history for each instrumented
attribute on the instance and performs a comparison of the current
value to its previously committed value, if any.</p>
<p>It is in effect a more expensive and accurate
version of checking for the given instance in the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code> collection; a full test for
each attribute’s net “dirty” status is performed.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="n">session</span><span class="o">.</span><span class="n">is_modified</span><span class="p">(</span><span class="n">someobject</span><span class="p">)</span></pre></div>
</div>
<p>A few caveats to this method apply:</p>
<ul>
<li><p>Instances present in the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code> collection may
report <code class="docutils literal notranslate"><span class="pre">False</span></code> when tested with this method.  This is because
the object may have received change events via attribute mutation,
thus placing it in <code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code>, but ultimately the state
is the same as that loaded from the database, resulting in no net
change here.</p></li>
<li><p>Scalar attributes may not have recorded the previously set
value when a new value was applied, if the attribute was not loaded,
or was expired, at the time the new value was received - in these
cases, the attribute is assumed to have a change, even if there is
ultimately no net change against its database value. SQLAlchemy in
most cases does not need the “old” value when a set event occurs, so
it skips the expense of a SQL call if the old value isn’t present,
based on the assumption that an UPDATE of the scalar value is
usually needed, and in those few cases where it isn’t, is less
expensive on average than issuing a defensive SELECT.</p>
<p>The “old” value is fetched unconditionally upon set only if the
attribute container has the <code class="docutils literal notranslate"><span class="pre">active_history</span></code> flag set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.
This flag is set typically for primary key attributes and scalar
object references that are not a simple many-to-one.  To set this
flag for any arbitrary mapped column, use the <code class="docutils literal notranslate"><span class="pre">active_history</span></code>
argument with <code class="xref py py-func docutils literal notranslate"><span class="pre">column_property()</span></code>.</p>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.is_modified.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_modified.params.instance">¶</a> – mapped instance to be tested for pending changes.</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.is_modified.params.include_collections"></span><strong>include_collections</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_modified.params.include_collections">¶</a> – Indicates if multivalued collections
should be included in the operation.  Setting this to <code class="docutils literal notranslate"><span class="pre">False</span></code> is a
way to detect only local-column based properties (i.e. scalar columns
or many-to-one foreign keys) that would result in an UPDATE for this
instance upon flush.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.merge">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_O</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">ORMOption</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_O</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy the state of a given instance into a corresponding instance
within this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.merge()</span></code> - main documentation for merge</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.new">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">new</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.new" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all instances marked as ‘new’ within this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.no_autoflush">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">no_autoflush</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.no_autoflush" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a context manager that disables autoflush.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">no_autoflush</span><span class="p">:</span>

    <span class="n">some_object</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">()</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">some_object</span><span class="p">)</span>
    <span class="c1"># won&#39;t autoflush</span>
    <span class="n">some_object</span><span class="o">.</span><span class="n">related_thing</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">SomeRelated</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span></pre></div>
</div>
<p>Operations that proceed within the <code class="docutils literal notranslate"><span class="pre">with:</span></code> block
will not be subject to flushes occurring upon query
access.  This is useful when initializing a series
of objects which involve existing database queries,
where the uncompleted object should not yet be flushed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.object_session">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">object_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Session</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.object_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> to which an object belongs.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This is an alias of <code class="xref py py-func docutils literal notranslate"><span class="pre">object_session()</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.refresh">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">refresh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attribute_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_for_update</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ForUpdateParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.refresh" title="Permalink to this definition">¶</a></dt>
<dd><p>Expire and refresh the attributes on the given instance.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>A query will be issued to the database and all attributes will be
refreshed with their current database value.</p>
<p>This is the async version of the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code> method.
See that method for a complete description of all options.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code> - main documentation for refresh</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.remove">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Dispose of the current <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>, if present.</p>
<p>Different from scoped_session’s remove method, this method would use
await to wait for the close method of AsyncSession.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.rollback">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Rollback the current transaction in progress.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.scalar">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scalar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.scalar" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return a scalar result.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.scalar()</span></code> - main documentation for scalar</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.scalars">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scalars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><span class="pre">ScalarResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.scalars" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return scalar results.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> object</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.24: </span>Added <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.scalars" title="sqlalchemy.ext.asyncio.AsyncSession.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.scalars()</span></code></a></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.26: </span>Added
<a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.scalars" title="sqlalchemy.ext.asyncio.async_scoped_session.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">async_scoped_session.scalars()</span></code></a></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.scalars()</span></code> - main documentation for scalars</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.stream_scalars" title="sqlalchemy.ext.asyncio.AsyncSession.stream_scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.stream_scalars()</span></code></a> - streaming version</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.session_factory">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">session_factory</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_sessionmaker" title="sqlalchemy.ext.asyncio.session.async_sessionmaker"><span class="pre">async_sessionmaker</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_AS</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.session_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>The <cite>session_factory</cite> provided to <cite>__init__</cite> is stored in this
attribute and may be accessed at a later time.  This can be useful when
a new non-scoped <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> is needed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.stream">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><span class="pre">AsyncResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return a streaming
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> object.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.stream_scalars">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stream_scalars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><span class="pre">AsyncScalarResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.stream_scalars" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return a stream of scalar results.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a> object</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.24.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.scalars()</span></code> - main documentation for scalars</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.scalars" title="sqlalchemy.ext.asyncio.AsyncSession.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.scalars()</span></code></a> - non streaming version</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncAttrs">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncAttrs</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncAttrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Mixin class which provides an awaitable accessor for all attributes.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>

<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">ForeignKey</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">func</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">AsyncAttrs</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">DeclarativeBase</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">Mapped</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">mapped_column</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">relationship</span>


<span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="n">AsyncAttrs</span><span class="p">,</span> <span class="n">DeclarativeBase</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span>

    <span class="n">id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">str</span><span class="p">]</span>
    <span class="n">bs</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">B</span><span class="p">]]</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;b&quot;</span>
    <span class="n">id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">a_id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;a.id&quot;</span><span class="p">))</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">str</span><span class="p">]</span></pre><div class="code-annotations-key"></div></div>
</div>
<p>In the above example, the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs" title="sqlalchemy.ext.asyncio.AsyncAttrs"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncAttrs</span></code></a> mixin is applied to
the declarative <code class="docutils literal notranslate"><span class="pre">Base</span></code> class where it takes effect for all subclasses.
This mixin adds a single new attribute
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs" title="sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncAttrs.awaitable_attrs</span></code></a> to all classes, which will
yield the value of any attribute as an awaitable. This allows attributes
which may be subject to lazy loading or deferred / unexpiry loading to be
accessed such that IO can still be emitted:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a1</span> <span class="o">=</span> <span class="p">(</span><span class="k">await</span> <span class="n">async_session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)))</span><span class="o">.</span><span class="n">one</span><span class="p">()</span>

<span class="c1"># use the lazy loader on ``a1.bs`` via the ``.awaitable_attrs``</span>
<span class="c1"># interface, so that it may be awaited</span>
<span class="k">for</span> <span class="n">b1</span> <span class="ow">in</span> <span class="k">await</span> <span class="n">a1</span><span class="o">.</span><span class="n">awaitable_attrs</span><span class="o">.</span><span class="n">bs</span><span class="p">:</span>
    <span class="n">print</span><span class="p">(</span><span class="n">b1</span><span class="p">)</span></pre></div>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs" title="sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncAttrs.awaitable_attrs</span></code></a> performs a call against the
attribute that is approximately equivalent to using the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync" title="sqlalchemy.ext.asyncio.AsyncSession.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.run_sync()</span></code></a> method, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">b1</span> <span class="ow">in</span> <span class="k">await</span> <span class="n">async_session</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="k">lambda</span> <span class="n">sess</span><span class="p">:</span> <span class="n">a1</span><span class="o">.</span><span class="n">bs</span><span class="p">):</span>
    <span class="n">print</span><span class="p">(</span><span class="n">b1</span><span class="p">)</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.13.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs"><span class="sig-name descname">awaitable_attrs</span></a></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#asyncio-orm-avoid-lazyloads"><span class="std std-ref">使用 AsyncSession 时避免隐式 IO</span></a></p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncAttrs.</span></code></a><span class="sig-name descname"><span class="pre">awaitable_attrs</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncAttrs.awaitable_attrs" title="Permalink to this definition">¶</a></dt>
<dd><p>provide a namespace of all attributes on this object wrapped
as awaitables.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a1</span> <span class="o">=</span> <span class="p">(</span><span class="k">await</span> <span class="n">async_session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)))</span><span class="o">.</span><span class="n">one</span><span class="p">()</span>

<span class="n">some_attribute</span> <span class="o">=</span> <span class="k">await</span> <span class="n">a1</span><span class="o">.</span><span class="n">awaitable_attrs</span><span class="o">.</span><span class="n">some_deferred_attribute</span>
<span class="n">some_collection</span> <span class="o">=</span> <span class="k">await</span> <span class="n">a1</span><span class="o">.</span><span class="n">awaitable_attrs</span><span class="o">.</span><span class="n">some_collection</span></pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncSession</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession" title="Permalink to this definition">¶</a></dt>
<dd><p>Asyncio version of <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> is a proxy for a traditional
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> instance.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> is <strong>not safe for use in concurrent
tasks.</strong>.  See <a class="reference internal" href="../session_basics.html#session-faq-threadsafe"><span class="std std-ref">Session 是线程安全的吗？在并发任务中共享 AsyncSession 是安全的吗？</span></a> for background.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<p>To use an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> with custom <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>
implementations, see the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.params.sync_session_class" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">AsyncSession.sync_session_class</span></code></a> parameter.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.sync_session_class"><span class="sig-name descname">sync_session_class</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.aclose"><span class="sig-name descname">aclose()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.add"><span class="sig-name descname">add()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.add_all"><span class="sig-name descname">add_all()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.autoflush"><span class="sig-name descname">autoflush</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.begin"><span class="sig-name descname">begin()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.begin_nested"><span class="sig-name descname">begin_nested()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close_all"><span class="sig-name descname">close_all()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.commit"><span class="sig-name descname">commit()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.connection"><span class="sig-name descname">connection()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.delete"><span class="sig-name descname">delete()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.deleted"><span class="sig-name descname">deleted</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.dirty"><span class="sig-name descname">dirty</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.execute"><span class="sig-name descname">execute()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expire"><span class="sig-name descname">expire()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expire_all"><span class="sig-name descname">expire_all()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expunge"><span class="sig-name descname">expunge()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expunge_all"><span class="sig-name descname">expunge_all()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.flush"><span class="sig-name descname">flush()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.get"><span class="sig-name descname">get()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.get_bind"><span class="sig-name descname">get_bind()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.get_nested_transaction"><span class="sig-name descname">get_nested_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.get_transaction"><span class="sig-name descname">get_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.identity_key"><span class="sig-name descname">identity_key()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.identity_map"><span class="sig-name descname">identity_map</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.in_nested_transaction"><span class="sig-name descname">in_nested_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.in_transaction"><span class="sig-name descname">in_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.info"><span class="sig-name descname">info</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.invalidate"><span class="sig-name descname">invalidate()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.is_active"><span class="sig-name descname">is_active</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.is_modified"><span class="sig-name descname">is_modified()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.merge"><span class="sig-name descname">merge()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.new"><span class="sig-name descname">new</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.no_autoflush"><span class="sig-name descname">no_autoflush</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.object_session"><span class="sig-name descname">object_session()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.refresh"><span class="sig-name descname">refresh()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.rollback"><span class="sig-name descname">rollback()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync"><span class="sig-name descname">run_sync()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.scalar"><span class="sig-name descname">scalar()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.scalars"><span class="sig-name descname">scalars()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.stream"><span class="sig-name descname">stream()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.stream_scalars"><span class="sig-name descname">stream_scalars()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.sync_session"><span class="sig-name descname">sync_session</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.ReversibleProxy</span></code>)</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.sync_session_class">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">sync_session_class</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Session</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;class</span> <span class="pre">'sqlalchemy.orm.session.Session'&gt;</span></em><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.sync_session_class" title="Permalink to this definition">¶</a></dt>
<dd><p>The class or callable that provides the
underlying <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> instance for a particular
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>.</p>
<p>At the class level, this attribute is the default value for the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.params.sync_session_class" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">AsyncSession.sync_session_class</span></code></a> parameter. Custom
subclasses of <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> can override this.</p>
<p>At the instance level, this attribute indicates the current class or
callable that was used to provide the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> instance for
this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> instance.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.24.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_AsyncSessionBind</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">_SessionBindKey</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_AsyncSessionBind</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sync_session_class</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Session</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>.</p>
<p>All parameters other than <code class="docutils literal notranslate"><span class="pre">sync_session_class</span></code> are passed to the
<code class="docutils literal notranslate"><span class="pre">sync_session_class</span></code> callable directly to instantiate a new
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>. Refer to <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.__init__()</span></code> for
parameter documentation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncSession.params.sync_session_class"></span><strong>sync_session_class</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.params.sync_session_class">¶</a> – <p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> subclass or other callable which will be used
to construct the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> which will be proxied. This
parameter may be used to provide custom <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>
subclasses. Defaults to the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.sync_session_class" title="sqlalchemy.ext.asyncio.AsyncSession.sync_session_class"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncSession.sync_session_class</span></code></a> class-level
attribute.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.24.</span></p>
</div>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.aclose">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aclose</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.aclose" title="Permalink to this definition">¶</a></dt>
<dd><p>A synonym for <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close" title="sqlalchemy.ext.asyncio.AsyncSession.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a>.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.aclose" title="sqlalchemy.ext.asyncio.AsyncSession.aclose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.aclose()</span></code></a> name is specifically
to support the Python standard library <code class="docutils literal notranslate"><span class="pre">&#64;contextlib.aclosing</span></code>
context manager function.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.20.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.add">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_warn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Place an object into this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>Objects that are in the <span class="xref std std-term">transient</span> state when passed to the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code> method will move to the
<span class="xref std std-term">pending</span> state, until the next flush, at which point they
will move to the <span class="xref std std-term">persistent</span> state.</p>
<p>Objects that are in the <span class="xref std std-term">detached</span> state when passed to the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code> method will move to the <span class="xref std std-term">persistent</span>
state directly.</p>
<p>If the transaction used by the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> is rolled back,
objects which were transient when they were passed to
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code> will be moved back to the
<span class="xref std std-term">transient</span> state, and will no longer be present within this
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add_all()</span></code></p>
<p><a class="reference internal" href="../session_basics.html#session-adding"><span class="std std-ref">添加新项或现有项</span></a> - at <a class="reference internal" href="../session_basics.html#session-basics"><span class="std std-ref">使用会话的基础</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.add_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">add_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instances</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">object</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.add_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the given collection of instances to this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>See the documentation for <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code> for a general
behavioral description.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code></p>
<p><a class="reference internal" href="../session_basics.html#session-adding"><span class="std std-ref">添加新项或现有项</span></a> - at <a class="reference internal" href="../session_basics.html#session-basics"><span class="std std-ref">使用会话的基础</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.autoflush">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">autoflush</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.autoflush" title="Permalink to this definition">¶</a></dt>
<dd><p>Proxy for the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.autoflush</span></code> attribute
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.begin">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">begin</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.session.AsyncSessionTransaction"><span class="pre">AsyncSessionTransaction</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a> object.</p>
<p>The underlying <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> will perform the
“begin” action when the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a>
object is entered:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">async_session</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
    <span class="c1"># .. ORM transaction is begun</span></pre></div>
</div>
<p>Note that database IO will not normally occur when the session-level
transaction is begun, as database transactions begin on an
on-demand basis.  However, the begin block is async to accommodate
for a <a class="reference internal" href="../events.html#sqlalchemy.orm.SessionEvents.after_transaction_create" title="sqlalchemy.orm.SessionEvents.after_transaction_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SessionEvents.after_transaction_create()</span></code></a>
event hook that may perform IO.</p>
<p>For a general description of ORM begin, see
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin()</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.begin_nested">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">begin_nested</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.session.AsyncSessionTransaction"><span class="pre">AsyncSessionTransaction</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.begin_nested" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a> object
which will begin a “nested” transaction, e.g. SAVEPOINT.</p>
<p>Behavior is the same as that of <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.begin" title="sqlalchemy.ext.asyncio.AsyncSession.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.begin()</span></code></a>.</p>
<p>For a general description of ORM begin nested, see
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin_nested()</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close out the transactional resources and ORM objects used by this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>.</p>
<p>This expunges all ORM objects associated with this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>, ends any transaction in progress and
<span class="xref std std-term">releases</span> any <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> objects which
this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> itself has checked out from
associated <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> objects. The operation then
leaves the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> in a state which it may be
used again.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close" title="sqlalchemy.ext.asyncio.AsyncSession.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a> method <strong>does not prevent
the Session from being used again</strong>. The
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> itself does not actually have a
distinct “closed” state; it merely means the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> will release all database
connections and ORM objects.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../session_basics.html#session-closing"><span class="std std-ref">关闭</span></a> - detail on the semantics of
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close" title="sqlalchemy.ext.asyncio.AsyncSession.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.close_all">
<em class="property"><span class="pre">async</span><span class="w"> </span><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">close_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.close_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Close all <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> sessions.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.commit">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit the current transaction in progress.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.connection">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoreExecuteOptionsParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><span class="pre">AsyncConnection</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> object corresponding to
this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object’s transactional state.</p>
<p>This method may also be used to establish execution options for the
database connection used by the current transaction.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.24: </span>Added **kw arguments which are passed
through to the underlying <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.connection()</span></code> method.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.connection()</span></code> - main documentation for
“connection”</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.delete">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark an instance as deleted.</p>
<p>The database delete operation occurs upon <code class="docutils literal notranslate"><span class="pre">flush()</span></code>.</p>
<p>As this operation may need to cascade along unloaded relationships,
it is awaitable to allow for those queries to take place.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.delete()</span></code> - main documentation for delete</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.deleted">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">deleted</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.deleted" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all instances marked as ‘deleted’ within this <code class="docutils literal notranslate"><span class="pre">Session</span></code></p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.dirty">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">dirty</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.dirty" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all persistent instances considered dirty.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">some_mapped_object</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">dirty</span></pre></div>
</div>
<p>Instances are considered dirty when they were modified but not
deleted.</p>
<p>Note that this ‘dirty’ calculation is ‘optimistic’; most
attribute-setting or collection modification operations will
mark an instance as ‘dirty’ and place it in this set, even if
there is no net change to the attribute’s value.  At flush
time, the value of each attribute is compared to its
previously saved value, and if there’s no net change, no SQL
operation will occur (this is a more expensive operation so
it’s only done at flush time).</p>
<p>To check if an instance has actionable net changes to its
attributes, use the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.is_modified()</span></code> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.execute">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><span class="pre">Result</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return a buffered
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code> - main documentation for execute</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.expire">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">expire</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attribute_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.expire" title="Permalink to this definition">¶</a></dt>
<dd><p>Expire the attributes on an instance.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>Marks the attributes of an instance as out of date. When an expired
attribute is next accessed, a query will be issued to the
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object’s current transactional context in order to
load all expired attributes for the given instance.   Note that
a highly isolated transaction will return the same values as were
previously read in that same transaction, regardless of changes
in database state outside of that transaction.</p>
<p>To expire all objects in the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> simultaneously,
use <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire_all()</span></code>.</p>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object’s default behavior is to
expire all state whenever the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code>
or <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code> methods are called, so that new
state can be loaded for the new transaction.   For this reason,
calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code> only makes sense for the specific
case that a non-ORM SQL statement was emitted in the current
transaction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncSession.expire.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expire.params.instance">¶</a> – The instance to be refreshed.</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncSession.expire.params.attribute_names"></span><strong>attribute_names</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expire.params.attribute_names">¶</a> – optional list of string attribute names
indicating a subset of attributes to be expired.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../session_state_management.html#session-expire"><span class="std std-ref">刷新/到期</span></a> - introductory material</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code></p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code></p>
<p><a class="reference internal" href="../queryguide/query.html#sqlalchemy.orm.Query.populate_existing" title="sqlalchemy.orm.Query.populate_existing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.populate_existing()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.expire_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">expire_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.expire_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Expires all persistent instances within this Session.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>When any attributes on a persistent instance is next accessed,
a query will be issued using the
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object’s current transactional context in order to
load all expired attributes for the given instance.   Note that
a highly isolated transaction will return the same values as were
previously read in that same transaction, regardless of changes
in database state outside of that transaction.</p>
<p>To expire individual objects and individual attributes
on those objects, use <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code>.</p>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> object’s default behavior is to
expire all state whenever the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code>
or <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code> methods are called, so that new
state can be loaded for the new transaction.   For this reason,
calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire_all()</span></code> is not usually needed,
assuming the transaction is isolated.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../session_state_management.html#session-expire"><span class="std std-ref">刷新/到期</span></a> - introductory material</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code></p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code></p>
<p><a class="reference internal" href="../queryguide/query.html#sqlalchemy.orm.Query.populate_existing" title="sqlalchemy.orm.Query.populate_existing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.populate_existing()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.expunge">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">expunge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.expunge" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the <cite>instance</cite> from this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This will free all internal references to the instance.  Cascading
will be applied according to the <em>expunge</em> cascade rule.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.expunge_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">expunge_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.expunge_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all object instances from this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This is equivalent to calling <code class="docutils literal notranslate"><span class="pre">expunge(obj)</span></code> on all objects in this
<code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.flush">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">objects</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Flush all the object changes to the database.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.flush()</span></code> - main documentation for flush</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.get">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entity</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_EntityBindKey</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ident</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_PKIdentityArgument</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">ORMOption</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">populate_existing</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_for_update</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ForUpdateParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identity_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_O</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance based on the given primary key identifier,
or <code class="docutils literal notranslate"><span class="pre">None</span></code> if not found.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get()</span></code> - main documentation for get</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.get_bind">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">get_bind</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapper</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_EntityBindKey</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clause</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><span class="pre">ClauseElement</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_SessionBind</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><span class="pre">Engine</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><span class="pre">Connection</span></a></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.get_bind" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a “bind” to which the synchronous proxied <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>
is bound.</p>
<p>Unlike the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> method, this method is
currently <strong>not</strong> used by this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> in any way
in order to resolve engines for requests.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method proxies directly to the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code>
method, however is currently <strong>not</strong> useful as an override target,
in contrast to that of the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> method.
The example below illustrates how to implement custom
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> schemes that work with
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> and <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>.</p>
</div>
<p>The pattern introduced at <a class="reference internal" href="../persistence_techniques.html#session-custom-partitioning"><span class="std std-ref">自定义垂直分区</span></a>
illustrates how to apply a custom bind-lookup scheme to a
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> given a set of <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> objects.
To apply a corresponding <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> implementation
for use with a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> and <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>
objects, continue to subclass <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> and apply it to
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> using
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.params.sync_session_class" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">AsyncSession.sync_session_class</span></code></a>. The inner method must
continue to return <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> instances, which can be
acquired from a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> using the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.sync_engine" title="sqlalchemy.ext.asyncio.AsyncEngine.sync_engine"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncEngine.sync_engine</span></code></a> attribute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># using example from &quot;Custom Vertical Partitioning&quot;</span>


<span class="kn">import</span> <span class="nn">random</span>

<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">AsyncSession</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">async_sessionmaker</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">Session</span>

<span class="c1"># construct async engines w/ async drivers</span>
<span class="n">engines</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;leader&#39;</span><span class="p">:</span><span class="n">create_async_engine</span><span class="p">(</span><span class="s2">&quot;sqlite+aiosqlite:///leader.db&quot;</span><span class="p">),</span>
    <span class="s1">&#39;other&#39;</span><span class="p">:</span><span class="n">create_async_engine</span><span class="p">(</span><span class="s2">&quot;sqlite+aiosqlite:///other.db&quot;</span><span class="p">),</span>
    <span class="s1">&#39;follower1&#39;</span><span class="p">:</span><span class="n">create_async_engine</span><span class="p">(</span><span class="s2">&quot;sqlite+aiosqlite:///follower1.db&quot;</span><span class="p">),</span>
    <span class="s1">&#39;follower2&#39;</span><span class="p">:</span><span class="n">create_async_engine</span><span class="p">(</span><span class="s2">&quot;sqlite+aiosqlite:///follower2.db&quot;</span><span class="p">),</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">RoutingSession</span><span class="p">(</span><span class="n">Session</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_bind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapper</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">clause</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="c1"># within get_bind(), return sync engines</span>
        <span class="k">if</span> <span class="n">mapper</span> <span class="ow">and</span> <span class="n">issubclass</span><span class="p">(</span><span class="n">mapper</span><span class="o">.</span><span class="n">class_</span><span class="p">,</span> <span class="n">MyOtherClass</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">engines</span><span class="p">[</span><span class="s1">&#39;other&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sync_engine</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flushing</span> <span class="ow">or</span> <span class="n">isinstance</span><span class="p">(</span><span class="n">clause</span><span class="p">,</span> <span class="p">(</span><span class="n">Update</span><span class="p">,</span> <span class="n">Delete</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">engines</span><span class="p">[</span><span class="s1">&#39;leader&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sync_engine</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">engines</span><span class="p">[</span>
                <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;follower1&#39;</span><span class="p">,</span><span class="s1">&#39;follower2&#39;</span><span class="p">])</span>
            <span class="p">]</span><span class="o">.</span><span class="n">sync_engine</span>

<span class="c1"># apply to AsyncSession using sync_session_class</span>
<span class="n">AsyncSessionMaker</span> <span class="o">=</span> <span class="n">async_sessionmaker</span><span class="p">(</span>
    <span class="n">sync_session_class</span><span class="o">=</span><span class="n">RoutingSession</span>
<span class="p">)</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<p>The <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> method is called in a non-asyncio,
implicitly non-blocking context in the same manner as ORM event hooks
and functions that are invoked via <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync" title="sqlalchemy.ext.asyncio.AsyncSession.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.run_sync()</span></code></a>, so
routines that wish to run SQL commands inside of
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code> can continue to do so using
blocking-style code, which will be translated to implicitly async calls
at the point of invoking IO on the database drivers.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.get_nested_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">get_nested_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.session.AsyncSessionTransaction"><span class="pre">AsyncSessionTransaction</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.get_nested_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current nested transaction in progress, if any.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a> object, or
<code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.18.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.get_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">get_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.session.AsyncSessionTransaction"><span class="pre">AsyncSessionTransaction</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.get_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current root transaction in progress, if any.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a> object, or
<code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.18.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.identity_key">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">identity_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">class_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ident</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../../core/sqlelement.html#sqlalchemy.sql.expression.Tuple" title="sqlalchemy.sql.expression.Tuple"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><span class="pre">RowMapping</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identity_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_IdentityKeyType</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.identity_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an identity key.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This is an alias of <code class="xref py py-func docutils literal notranslate"><span class="pre">identity_key()</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.identity_map">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">identity_map</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.identity_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Proxy for the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.identity_map</span></code> attribute
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.in_nested_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">in_nested_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.in_nested_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> has begun a nested
transaction, e.g. SAVEPOINT.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.in_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">in_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.in_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> has begun a transaction.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.is_active</span></code></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.info">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">info</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.info" title="Permalink to this definition">¶</a></dt>
<dd><p>A user-modifiable dictionary.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>The initial value of this dictionary can be populated using the
<code class="docutils literal notranslate"><span class="pre">info</span></code> argument to the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> constructor or
<code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code> constructor or factory methods.  The dictionary
here is always local to this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> and can be modified
independently of all other <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> objects.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.invalidate">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">invalidate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.invalidate" title="Permalink to this definition">¶</a></dt>
<dd><p>Close this Session, using connection invalidation.</p>
<p>For a complete description, see <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.invalidate()</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.is_active">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">is_active</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.is_active" title="Permalink to this definition">¶</a></dt>
<dd><p>True if this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> not in “partial rollback” state.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> no longer begins
a new transaction immediately, so this attribute will be False
when the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> is first instantiated.</p>
</div>
<p>“partial rollback” state typically indicates that the flush process
of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> has failed, and that the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code> method must be emitted in order to
fully roll back the transaction.</p>
<p>If this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> is not in a transaction at all, the
<code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> will autobegin when it is first used, so in this
case <code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.is_active</span></code> will return True.</p>
<p>Otherwise, if this <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> is within a transaction,
and that transaction has not been rolled back internally, the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.is_active</span></code> will also return True.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../faq/sessions.html#faq-session-rollback"><span class="std std-ref">“This Session’s transaction has been rolled back due to a previous exception during flush.” (或类似消息)</span></a></p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.in_transaction()</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.is_modified">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">is_modified</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_collections</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.is_modified" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the given instance has locally
modified attributes.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This method retrieves the history for each instrumented
attribute on the instance and performs a comparison of the current
value to its previously committed value, if any.</p>
<p>It is in effect a more expensive and accurate
version of checking for the given instance in the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code> collection; a full test for
each attribute’s net “dirty” status is performed.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="n">session</span><span class="o">.</span><span class="n">is_modified</span><span class="p">(</span><span class="n">someobject</span><span class="p">)</span></pre></div>
</div>
<p>A few caveats to this method apply:</p>
<ul>
<li><p>Instances present in the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code> collection may
report <code class="docutils literal notranslate"><span class="pre">False</span></code> when tested with this method.  This is because
the object may have received change events via attribute mutation,
thus placing it in <code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code>, but ultimately the state
is the same as that loaded from the database, resulting in no net
change here.</p></li>
<li><p>Scalar attributes may not have recorded the previously set
value when a new value was applied, if the attribute was not loaded,
or was expired, at the time the new value was received - in these
cases, the attribute is assumed to have a change, even if there is
ultimately no net change against its database value. SQLAlchemy in
most cases does not need the “old” value when a set event occurs, so
it skips the expense of a SQL call if the old value isn’t present,
based on the assumption that an UPDATE of the scalar value is
usually needed, and in those few cases where it isn’t, is less
expensive on average than issuing a defensive SELECT.</p>
<p>The “old” value is fetched unconditionally upon set only if the
attribute container has the <code class="docutils literal notranslate"><span class="pre">active_history</span></code> flag set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.
This flag is set typically for primary key attributes and scalar
object references that are not a simple many-to-one.  To set this
flag for any arbitrary mapped column, use the <code class="docutils literal notranslate"><span class="pre">active_history</span></code>
argument with <code class="xref py py-func docutils literal notranslate"><span class="pre">column_property()</span></code>.</p>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncSession.is_modified.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.is_modified.params.instance">¶</a> – mapped instance to be tested for pending changes.</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncSession.is_modified.params.include_collections"></span><strong>include_collections</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.is_modified.params.include_collections">¶</a> – Indicates if multivalued collections
should be included in the operation.  Setting this to <code class="docutils literal notranslate"><span class="pre">False</span></code> is a
way to detect only local-column based properties (i.e. scalar columns
or many-to-one foreign keys) that would result in an UPDATE for this
instance upon flush.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.merge">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_O</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">ORMOption</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_O</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy the state of a given instance into a corresponding instance
within this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.merge()</span></code> - main documentation for merge</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.new">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">new</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.new" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all instances marked as ‘new’ within this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.no_autoflush">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">no_autoflush</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.no_autoflush" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a context manager that disables autoflush.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class
on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">no_autoflush</span><span class="p">:</span>

    <span class="n">some_object</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">()</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">some_object</span><span class="p">)</span>
    <span class="c1"># won&#39;t autoflush</span>
    <span class="n">some_object</span><span class="o">.</span><span class="n">related_thing</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">SomeRelated</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span></pre></div>
</div>
<p>Operations that proceed within the <code class="docutils literal notranslate"><span class="pre">with:</span></code> block
will not be subject to flushes occurring upon query
access.  This is useful when initializing a series
of objects which involve existing database queries,
where the uncompleted object should not yet be flushed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.object_session">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">object_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Session</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.object_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> to which an object belongs.</p>
<div class="class-bases docutils container">
<p>Proxied for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> class on
behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This is an alias of <code class="xref py py-func docutils literal notranslate"><span class="pre">object_session()</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.refresh">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">refresh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attribute_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_for_update</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ForUpdateParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.refresh" title="Permalink to this definition">¶</a></dt>
<dd><p>Expire and refresh the attributes on the given instance.</p>
<p>A query will be issued to the database and all attributes will be
refreshed with their current database value.</p>
<p>This is the async version of the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code> method.
See that method for a complete description of all options.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code> - main documentation for refresh</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.rollback">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Rollback the current transaction in progress.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.run_sync">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run_sync</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">arg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_T</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync" title="Permalink to this definition">¶</a></dt>
<dd><p>Invoke the given synchronous (i.e. not async) callable,
passing a synchronous-style <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> as the first
argument.</p>
<p>This method allows traditional synchronous SQLAlchemy functions to
run within the context of an asyncio application.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">some_business_method</span><span class="p">(</span><span class="n">session</span><span class="p">:</span> <span class="n">Session</span><span class="p">,</span> <span class="n">param</span><span class="p">:</span> <span class="n">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;A synchronous function that does not require awaiting</span>

<span class="sd">    :param session: a SQLAlchemy Session, used synchronously</span>

<span class="sd">    :return: an optional return value is supported</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">MyObject</span><span class="p">(</span><span class="n">param</span><span class="o">=</span><span class="n">param</span><span class="p">))</span>
    <span class="n">session</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
    <span class="k">return</span> <span class="s2">&quot;success&quot;</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">do_something_async</span><span class="p">(</span><span class="n">async_engine</span><span class="p">:</span> <span class="n">AsyncEngine</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;an async function that uses awaiting&#39;&#39;&#39;</span>

    <span class="k">with</span> <span class="n">AsyncSession</span><span class="p">(</span><span class="n">async_engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">async_session</span><span class="p">:</span>
        <span class="c1"># run some_business_method() with a sync-style</span>
        <span class="c1"># Session, proxied into an awaitable</span>
        <span class="n">return_code</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_session</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">some_business_method</span><span class="p">,</span> <span class="n">param</span><span class="o">=</span><span class="s2">&quot;param1&quot;</span><span class="p">)</span>
        <span class="n">print</span><span class="p">(</span><span class="n">return_code</span><span class="p">)</span></pre></div>
</div>
<p>This method maintains the asyncio event loop all the way through
to the database connection by running the given callable in a
specially instrumented greenlet.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The provided callable is invoked inline within the asyncio event
loop, and will block on traditional IO calls.  IO within this
callable should only call into SQLAlchemy’s asyncio database
APIs which will be properly adapted to the greenlet context.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncAttrs" title="sqlalchemy.ext.asyncio.AsyncAttrs"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncAttrs</span></code></a>  - a mixin for ORM mapped classes that provides
a similar feature more succinctly on a per-attribute basis</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.run_sync" title="sqlalchemy.ext.asyncio.AsyncConnection.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.run_sync()</span></code></a></p>
<p><a class="reference internal" href="#session-run-sync"><span class="std std-ref">在 asyncio 下运行同步方法和函数</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.scalar">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scalar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.scalar" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return a scalar result.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.scalar()</span></code> - main documentation for scalar</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.scalars">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scalars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><span class="pre">ScalarResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.scalars" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return scalar results.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> object</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.24: </span>Added <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.scalars" title="sqlalchemy.ext.asyncio.AsyncSession.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.scalars()</span></code></a></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.26: </span>Added
<a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.scalars" title="sqlalchemy.ext.asyncio.async_scoped_session.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">async_scoped_session.scalars()</span></code></a></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.scalars()</span></code> - main documentation for scalars</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.stream_scalars" title="sqlalchemy.ext.asyncio.AsyncSession.stream_scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.stream_scalars()</span></code></a> - streaming version</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.stream">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><span class="pre">AsyncResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return a streaming
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.stream_scalars">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stream_scalars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><span class="pre">AsyncScalarResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.stream_scalars" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return a stream of scalar results.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a> object</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.24.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.scalars()</span></code> - main documentation for scalars</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.scalars" title="sqlalchemy.ext.asyncio.AsyncSession.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.scalars()</span></code></a> - non streaming version</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.sync_session">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">sync_session</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Session</span></em><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.sync_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Reference to the underlying <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> proxies requests towards.</p>
<p>This instance can be used as an event target.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">asyncio_events</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSessionTransaction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncSessionTransaction</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for the ORM <code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code> object.</p>
<p>This object is provided so that a transaction-holding object
for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.begin" title="sqlalchemy.ext.asyncio.AsyncSession.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.begin()</span></code></a> may be returned.</p>
<p>The object supports both explicit calls to
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.commit" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSessionTransaction.commit()</span></code></a> and
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.rollback" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSessionTransaction.rollback()</span></code></a>, as well as use as an
async context manager.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.commit"><span class="sig-name descname">commit()</span></a>, <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.rollback"><span class="sig-name descname">rollback()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSessionTransaction</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.ReversibleProxy</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.StartableContext</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSessionTransaction.commit">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSessionTransaction.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSessionTransaction.rollback">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSessionTransaction.</span></code></a><em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Roll back this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a>.</p>
</dd></dl>

</dd></dl>

</section>
</section>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="index.html" title="previous chapter">ORM扩展</a>
        Next:
        <a href="associationproxy.html" title="next chapter">关联代理</a>

    <div id="docs-copyright">
        &copy; <a href="../../copyright.html">Copyright</a> 2007-2023, the SQLAlchemy authors and contributors.


    <p><b>flambé!</b> the dragon and <b><i>The Alchemist</i></b> image designs created and generously donated by <a href="https://github.com/vmalloc">Rotem Yaari</a>.</p>

        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 7.0.1.

    Documentation last generated: 2023/8/18 18:43:58

    </div>
</div>

</div>



        
        

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../../',
          VERSION:     '2.0.19',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>

    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script type="text/javascript" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/sphinx_highlight.js"></script>
        <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
        <script type="text/javascript" src="../../_static/copybutton.js"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../../_static/init.js"></script>


    </body>
</html>


