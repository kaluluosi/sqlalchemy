<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>
            
    
    会话API
 &mdash;
    SQLAlchemy 2.0 Documentation

        </title>

        
            <!-- begin iterate through site-imported + sphinx environment css_files -->
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/default.css" type="text/css" />
                <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
                <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../_static/sphinx_paramlinks.css" type="text/css" />
            <!-- end iterate through site-imported + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
        <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="SQLAlchemy 2.0 Documentation" href="../index.html" />
        <link rel="up" title="用 Session" href="session.html" />
        <link rel="next" title="事件和内部机制" href="extending.html" />
        <link rel="prev" title="使用事件追踪查询、对象和会话更改" href="session_events.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">2.0.19</span>


        | Release Date: July 15, 2023

    </div>

    <h1><a href="../index.html">SQLAlchemy 2.0 Documentation</a></h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">



        <div id="docs-sidebar-popout">
            <h3><a href="../index.html">SQLAlchemy 2.0 Documentation</a></h3>
            <p id="sidebar-topnav">
                <a href="../index.html">Home</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12" />
                  </label>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="index.html" title="SQLAlchemy ORM">SQLAlchemy ORM</a>
        </h3>

        <ul>
<li><span class="link-container"><a class="reference external" href="quickstart.html">ORM快速入门</a></span></li>
<li><span class="link-container"><a class="reference external" href="mapper_config.html">ORM映射类配置</a></span></li>
<li><span class="link-container"><a class="reference external" href="relationships.html">关系配置</a></span></li>
<li><span class="link-container"><a class="reference external" href="queryguide/index.html">ORM 查询指南</a></span></li>
<li><span class="link-container"><a class="reference external" href="session.html">用 Session</a></span><ul>
<li><span class="link-container"><a class="reference external" href="session_basics.html">会话基础知识</a></span></li>
<li><span class="link-container"><a class="reference external" href="session_state_management.html">状态管理</a></span></li>
<li><span class="link-container"><a class="reference external" href="session_transaction.html">事务和连接管理</a></span></li>
<li><span class="link-container"><a class="reference external" href="persistence_techniques.html">附加的持久化技术</a></span></li>
<li><span class="link-container"><a class="reference external" href="persistence_techniques.html#sql-flush">将SQL插入/更新表达式嵌入到Flush中</a></span></li>
<li><span class="link-container"><a class="reference external" href="persistence_techniques.html#sessionssql">在Sessions中使用SQL表达式</a></span></li>
<li><span class="link-container"><a class="reference external" href="persistence_techniques.html#null">在具有默认值的列上强制执行NULL</a></span></li>
<li><span class="link-container"><a class="reference external" href="persistence_techniques.html#orm-server-defaults">提取服务器生成的默认值</a></span></li>
<li><span class="link-container"><a class="reference external" href="persistence_techniques.html#insertupdateon-conflict-upsert-orm">使用INSERT、UPDATE和ON CONFLICT（即upsert）返回ORM对象</a></span></li>
<li><span class="link-container"><a class="reference external" href="persistence_techniques.html#session">分区策略（例如 Session 上的多个数据库后端）</a></span></li>
<li><span class="link-container"><a class="reference external" href="persistence_techniques.html#bulk-operations">批量操作</a></span></li>
<li><span class="link-container"><a class="reference external" href="contextual.html">上下文/线程本地会话</a></span></li>
<li><span class="link-container"><a class="reference external" href="session_events.html">使用事件追踪查询、对象和会话更改</a></span></li>
<li class="selected"><span class="link-container"><strong>会话API</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sessionmaker">会话和sessionmaker()</a></span></li>
<li><span class="link-container"><a class="reference external" href="#id1">会话工具</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.util.was_deleted"><code class="docutils literal notranslate"><span class="pre">was_deleted()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#id2">属性和状态管理工具</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.util.object_state"><code class="docutils literal notranslate"><span class="pre">object_state()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.attributes.del_attribute"><code class="docutils literal notranslate"><span class="pre">del_attribute()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.attributes.get_attribute"><code class="docutils literal notranslate"><span class="pre">get_attribute()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.attributes.get_history"><code class="docutils literal notranslate"><span class="pre">get_history()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.attributes.init_collection"><code class="docutils literal notranslate"><span class="pre">init_collection()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.attributes.flag_modified"><code class="docutils literal notranslate"><span class="pre">flag_modified()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.attributes.flag_dirty"><code class="docutils literal notranslate"><span class="pre">flag_dirty()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.attributes.instance_state"><code class="docutils literal notranslate"><span class="pre">instance_state()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.instrumentation.is_instrumented"><code class="docutils literal notranslate"><span class="pre">is_instrumented()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.attributes.set_attribute"><code class="docutils literal notranslate"><span class="pre">set_attribute()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.attributes.set_committed_value"><code class="docutils literal notranslate"><span class="pre">set_committed_value()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.attributes.History"><code class="docutils literal notranslate"><span class="pre">History</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.attributes.History.added"><code class="docutils literal notranslate"><span class="pre">History.added</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.attributes.History.deleted"><code class="docutils literal notranslate"><span class="pre">History.deleted</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.attributes.History.empty"><code class="docutils literal notranslate"><span class="pre">History.empty()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.attributes.History.has_changes"><code class="docutils literal notranslate"><span class="pre">History.has_changes()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.attributes.History.non_added"><code class="docutils literal notranslate"><span class="pre">History.non_added()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.attributes.History.non_deleted"><code class="docutils literal notranslate"><span class="pre">History.non_deleted()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.attributes.History.sum"><code class="docutils literal notranslate"><span class="pre">History.sum()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.orm.attributes.History.unchanged"><code class="docutils literal notranslate"><span class="pre">History.unchanged</span></code></a></span></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="extending.html">事件和内部机制</a></span></li>
<li><span class="link-container"><a class="reference external" href="extensions/index.html">ORM扩展</a></span></li>
<li><span class="link-container"><a class="reference external" href="examples.html">ORM 示例</a></span></li>
</ul>



        </div>

        </div>

    </div>

    <div id="narrow-index-nav">
        <form class="search" action="../search.html" method="get">
            <label>
                Search terms:
            <input type="text" placeholder="search..." name="q" size="12" />
            </label>
            <input type="submit" value="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>

        <p>
        <a href="../index.html">Home</a>
        </p>

    </div>


        <div id="docs-narrow-top-navigation">
            <ul>
                <li><b>Previous:</b>
                <a href="session_events.html" title="previous chapter">使用事件追踪查询、对象和会话更改</a></li>
                <li><b>Next:</b>
                <a href="extending.html" title="next chapter">事件和内部机制</a></li>

            <li><b>Up:</b> <a href="../index.html">Home</a></li>
                    <ul><li><a href="index.html" title="SQLAlchemy ORM">SQLAlchemy ORM</a></li>
                    <ul><li><a href="session.html" title="用 Session">用 Session</a></li>
                </ul>
                </ul>



            <li><b>On this page:</b></li>
            <ul>
<li><a class="reference internal" href="#api">会话API</a><ul>
<li><a class="reference internal" href="#sessionmaker">会话和sessionmaker()</a></li>
<li><a class="reference internal" href="#id1">会话工具</a><ul>
<li><a class="reference internal" href="#sqlalchemy.orm.util.was_deleted"><code class="docutils literal notranslate"><span class="pre">was_deleted()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#id2">属性和状态管理工具</a><ul>
<li><a class="reference internal" href="#sqlalchemy.orm.util.object_state"><code class="docutils literal notranslate"><span class="pre">object_state()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.del_attribute"><code class="docutils literal notranslate"><span class="pre">del_attribute()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.get_attribute"><code class="docutils literal notranslate"><span class="pre">get_attribute()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.get_history"><code class="docutils literal notranslate"><span class="pre">get_history()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.init_collection"><code class="docutils literal notranslate"><span class="pre">init_collection()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.flag_modified"><code class="docutils literal notranslate"><span class="pre">flag_modified()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.flag_dirty"><code class="docutils literal notranslate"><span class="pre">flag_dirty()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.instance_state"><code class="docutils literal notranslate"><span class="pre">instance_state()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.instrumentation.is_instrumented"><code class="docutils literal notranslate"><span class="pre">is_instrumented()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.set_attribute"><code class="docutils literal notranslate"><span class="pre">set_attribute()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.set_committed_value"><code class="docutils literal notranslate"><span class="pre">set_committed_value()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.History"><code class="docutils literal notranslate"><span class="pre">History</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.History.added"><code class="docutils literal notranslate"><span class="pre">History.added</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.History.deleted"><code class="docutils literal notranslate"><span class="pre">History.deleted</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.History.empty"><code class="docutils literal notranslate"><span class="pre">History.empty()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.History.has_changes"><code class="docutils literal notranslate"><span class="pre">History.has_changes()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.History.non_added"><code class="docutils literal notranslate"><span class="pre">History.non_added()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.History.non_deleted"><code class="docutils literal notranslate"><span class="pre">History.non_deleted()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.History.sum"><code class="docutils literal notranslate"><span class="pre">History.sum()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.History.unchanged"><code class="docutils literal notranslate"><span class="pre">History.unchanged</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


            </ul>

        </div>



    <div id="docs-body" role="main" class="withsidebar orm-session_api" >
        
<section id="api">
<h1>会话API<a class="headerlink" href="#api" title="Permalink to this heading">¶</a></h1>
<section id="sessionmaker">
<h2>会话和sessionmaker()<a class="headerlink" href="#sessionmaker" title="Permalink to this heading">¶</a></h2>
</section>
<section id="id1">
<h2>会话工具<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h2>
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.util.was_deleted"><span class="sig-name descname">was_deleted</span></a>(object_)</p></td>
<td><p>Return True if the given object was deleted
within a session flush.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.util.was_deleted">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.util.</span></span><span class="sig-name descname"><span class="pre">was_deleted</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">object_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.orm.util.was_deleted" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the given object was deleted
within a session flush.</p>
<p>This is regardless of whether or not the object is
persistent or detached.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="internals.html#sqlalchemy.orm.InstanceState.was_deleted" title="sqlalchemy.orm.InstanceState.was_deleted"><code class="xref py py-attr docutils literal notranslate"><span class="pre">InstanceState.was_deleted</span></code></a></p>
</div>
</dd></dl>

</section>
<section id="id2">
<h2>属性和状态管理工具<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h2>
<p>这些函数由SQLAlchemy属性工具API提供，以提供一个详细的接口来处理实例、属性值和历史记录。当构建事件监听器函数时，其中一些函数是有用的，例如在 <a class="reference internal" href="events.html"><span class="doc">ORM 事件</span></a> 中描述的函数。</p>
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.attributes.del_attribute"><span class="sig-name descname">del_attribute</span></a>(instance, key)</p></td>
<td><p>Delete the value of an attribute, firing history events.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.attributes.flag_dirty"><span class="sig-name descname">flag_dirty</span></a>(instance)</p></td>
<td><p>Mark an instance as ‘dirty’ without any specific attribute mentioned.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.attributes.flag_modified"><span class="sig-name descname">flag_modified</span></a>(instance, key)</p></td>
<td><p>Mark an attribute on an instance as ‘modified’.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.attributes.get_attribute"><span class="sig-name descname">get_attribute</span></a>(instance, key)</p></td>
<td><p>Get the value of an attribute, firing any callables required.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.attributes.get_history"><span class="sig-name descname">get_history</span></a>(obj, key[, passive])</p></td>
<td><p>Return a <a class="reference internal" href="#sqlalchemy.orm.attributes.History" title="sqlalchemy.orm.attributes.History"><code class="xref py py-class docutils literal notranslate"><span class="pre">History</span></code></a> record for the given object
and attribute key.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.attributes.History"><span class="sig-name descname">History</span></a></p></td>
<td><p>A 3-tuple of added, unchanged and deleted values,
representing the changes which have occurred on an instrumented
attribute.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.attributes.init_collection"><span class="sig-name descname">init_collection</span></a>(obj, key)</p></td>
<td><p>Initialize a collection attribute and return the collection adapter.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.attributes.instance_state"><span class="sig-name descname">instance_state</span></a></p></td>
<td><p>返回给定映射对象的   <a class="reference internal" href="internals.html#sqlalchemy.orm.InstanceState" title="sqlalchemy.orm.InstanceState"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstanceState</span></code></a> 。</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.instrumentation.is_instrumented"><span class="sig-name descname">is_instrumented</span></a>(instance, key)</p></td>
<td><p>Return True if the given attribute on the given instance is
instrumented by the attributes package.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.util.object_state"><span class="sig-name descname">object_state</span></a>(instance)</p></td>
<td><p>Given an object, return the <a class="reference internal" href="internals.html#sqlalchemy.orm.InstanceState" title="sqlalchemy.orm.InstanceState"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstanceState</span></code></a>
associated with the object.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.attributes.set_attribute"><span class="sig-name descname">set_attribute</span></a>(instance, key, value[, initiator])</p></td>
<td><p>Set the value of an attribute, firing history events.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.attributes.set_committed_value"><span class="sig-name descname">set_committed_value</span></a>(instance, key, value)</p></td>
<td><p>Set the value of an attribute with no history events.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.util.object_state">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.util.</span></span><span class="sig-name descname"><span class="pre">object_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_T</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="internals.html#sqlalchemy.orm.InstanceState" title="sqlalchemy.orm.InstanceState"><span class="pre">InstanceState</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.util.object_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an object, return the <a class="reference internal" href="internals.html#sqlalchemy.orm.InstanceState" title="sqlalchemy.orm.InstanceState"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstanceState</span></code></a>
associated with the object.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.orm.exc.UnmappedInstanceError" title="sqlalchemy.orm.exc.UnmappedInstanceError"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.exc.UnmappedInstanceError</span></code></a>
if no mapping is configured.</p>
<p>Equivalent functionality is available via the <a class="reference internal" href="../core/inspection.html#sqlalchemy.inspect" title="sqlalchemy.inspect"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect()</span></code></a>
function as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inspect</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span></pre></div>
</div>
<p>Using the inspection system will raise
<a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.NoInspectionAvailable" title="sqlalchemy.exc.NoInspectionAvailable"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.exc.NoInspectionAvailable</span></code></a> if the instance is
not part of a mapping.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.del_attribute">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.attributes.</span></span><span class="sig-name descname"><span class="pre">del_attribute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.del_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the value of an attribute, firing history events.</p>
<p>This function may be used regardless of instrumentation
applied directly to the class, i.e. no descriptors are required.
Custom attribute management schemes will need to make usage
of this method to establish attribute state as understood
by SQLAlchemy.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.get_attribute">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.attributes.</span></span><span class="sig-name descname"><span class="pre">get_attribute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.get_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the value of an attribute, firing any callables required.</p>
<p>This function may be used regardless of instrumentation
applied directly to the class, i.e. no descriptors are required.
Custom attribute management schemes will need to make usage
of this method to make usage of attribute state as understood
by SQLAlchemy.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.get_history">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.attributes.</span></span><span class="sig-name descname"><span class="pre">get_history</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">passive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PassiveFlag</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">symbol('PASSIVE_OFF')</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.orm.attributes.History" title="sqlalchemy.orm.attributes.History"><span class="pre">History</span></a></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.get_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="#sqlalchemy.orm.attributes.History" title="sqlalchemy.orm.attributes.History"><code class="xref py py-class docutils literal notranslate"><span class="pre">History</span></code></a> record for the given object
and attribute key.</p>
<p>This is the <strong>pre-flush</strong> history for a given attribute, which is
reset each time the <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> flushes changes to the
current database transaction.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Prefer to use the <a class="reference internal" href="internals.html#sqlalchemy.orm.AttributeState.history" title="sqlalchemy.orm.AttributeState.history"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AttributeState.history</span></code></a> and
<a class="reference internal" href="internals.html#sqlalchemy.orm.AttributeState.load_history" title="sqlalchemy.orm.AttributeState.load_history"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AttributeState.load_history()</span></code></a> accessors to retrieve the
<a class="reference internal" href="#sqlalchemy.orm.attributes.History" title="sqlalchemy.orm.attributes.History"><code class="xref py py-class docutils literal notranslate"><span class="pre">History</span></code></a> for instance attributes.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.attributes.get_history.params.obj"></span><strong>obj</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.get_history.params.obj">¶</a> – an object whose class is instrumented by the
attributes package.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.attributes.get_history.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.get_history.params.key">¶</a> – string attribute name.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.attributes.get_history.params.passive"></span><strong>passive</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.get_history.params.passive">¶</a> – indicates loading behavior for the attribute
if the value is not already present.   This is a
bitflag attribute, which defaults to the symbol
<code class="xref py py-attr docutils literal notranslate"><span class="pre">PASSIVE_OFF</span></code> indicating all necessary SQL
should be emitted.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="internals.html#sqlalchemy.orm.AttributeState.history" title="sqlalchemy.orm.AttributeState.history"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AttributeState.history</span></code></a></p>
<p><a class="reference internal" href="internals.html#sqlalchemy.orm.AttributeState.load_history" title="sqlalchemy.orm.AttributeState.load_history"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AttributeState.load_history()</span></code></a> - retrieve history
using loader callables if the value is not locally present.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.init_collection">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.attributes.</span></span><span class="sig-name descname"><span class="pre">init_collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="collection_api.html#sqlalchemy.orm.collections.CollectionAdapter" title="sqlalchemy.orm.collections.CollectionAdapter"><span class="pre">CollectionAdapter</span></a></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.init_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a collection attribute and return the collection adapter.</p>
<p>This function is used to provide direct access to collection internals
for a previously unloaded attribute.  e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">collection_adapter</span> <span class="o">=</span> <span class="n">init_collection</span><span class="p">(</span><span class="n">someobject</span><span class="p">,</span> <span class="s1">&#39;elements&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
    <span class="n">collection_adapter</span><span class="o">.</span><span class="n">append_without_event</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span></pre></div>
</div>
<p>For an easier way to do the above, see
<a class="reference internal" href="#sqlalchemy.orm.attributes.set_committed_value" title="sqlalchemy.orm.attributes.set_committed_value"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_committed_value()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.attributes.init_collection.params.obj"></span><strong>obj</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.init_collection.params.obj">¶</a> – a mapped object</p></li>
<li><p><span class="target" id="sqlalchemy.orm.attributes.init_collection.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.init_collection.params.key">¶</a> – string attribute name where the collection is located.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.flag_modified">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.attributes.</span></span><span class="sig-name descname"><span class="pre">flag_modified</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.flag_modified" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark an attribute on an instance as ‘modified’.</p>
<p>This sets the ‘modified’ flag on the instance and
establishes an unconditional change event for the given attribute.
The attribute must have a value present, else an
<a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> is raised.</p>
<p>To mark an object “dirty” without referring to any specific attribute
so that it is considered within a flush, use the
<a class="reference internal" href="#sqlalchemy.orm.attributes.flag_dirty" title="sqlalchemy.orm.attributes.flag_dirty"><code class="xref py py-func docutils literal notranslate"><span class="pre">flag_dirty()</span></code></a> call.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.orm.attributes.flag_dirty" title="sqlalchemy.orm.attributes.flag_dirty"><code class="xref py py-func docutils literal notranslate"><span class="pre">flag_dirty()</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.flag_dirty">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.attributes.</span></span><span class="sig-name descname"><span class="pre">flag_dirty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.flag_dirty" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark an instance as ‘dirty’ without any specific attribute mentioned.</p>
<p>This is a special operation that will allow the object to travel through
the flush process for interception by events such as
<a class="reference internal" href="events.html#sqlalchemy.orm.SessionEvents.before_flush" title="sqlalchemy.orm.SessionEvents.before_flush"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SessionEvents.before_flush()</span></code></a>.   Note that no SQL will be emitted in
the flush process for an object that has no changes, even if marked dirty
via this method.  However, a <a class="reference internal" href="events.html#sqlalchemy.orm.SessionEvents.before_flush" title="sqlalchemy.orm.SessionEvents.before_flush"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SessionEvents.before_flush()</span></code></a> handler
will be able to see the object in the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code> collection and
may establish changes on it, which will then be included in the SQL
emitted.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.2.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.orm.attributes.flag_modified" title="sqlalchemy.orm.attributes.flag_modified"><code class="xref py py-func docutils literal notranslate"><span class="pre">flag_modified()</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.instance_state">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.attributes.</span></span><span class="sig-name descname"><span class="pre">instance_state</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.attributes.instance_state" title="Permalink to this definition">¶</a></dt>
<dd><p>返回给定映射对象的   <a class="reference internal" href="internals.html#sqlalchemy.orm.InstanceState" title="sqlalchemy.orm.InstanceState"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstanceState</span></code></a> 。</p>
<p>此函数是   <a class="reference internal" href="#sqlalchemy.orm.util.object_state" title="sqlalchemy.orm.util.object_state"><code class="xref py py-func docutils literal notranslate"><span class="pre">object_state()</span></code></a>  的内部版本。
这里建议使用 `  <a class="reference internal" href="#sqlalchemy.orm.util.object_state" title="sqlalchemy.orm.util.object_state"><code class="xref py py-func docutils literal notranslate"><span class="pre">object_state()</span></code></a>  和/或
`  <a class="reference internal" href="../core/inspection.html#sqlalchemy.inspect" title="sqlalchemy.inspect"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect()</span></code></a>  函数，因为如果给定的对象未映射，它们都会发出一个可读的异常。</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.instrumentation.is_instrumented">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.instrumentation.</span></span><span class="sig-name descname"><span class="pre">is_instrumented</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.instrumentation.is_instrumented" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the given attribute on the given instance is
instrumented by the attributes package.</p>
<p>This function may be used regardless of instrumentation
applied directly to the class, i.e. no descriptors are required.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.set_attribute">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.attributes.</span></span><span class="sig-name descname"><span class="pre">set_attribute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initiator</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="internals.html#sqlalchemy.orm.AttributeEventToken" title="sqlalchemy.orm.attributes.AttributeEventToken"><span class="pre">AttributeEventToken</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.set_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the value of an attribute, firing history events.</p>
<p>This function may be used regardless of instrumentation
applied directly to the class, i.e. no descriptors are required.
Custom attribute management schemes will need to make usage
of this method to establish attribute state as understood
by SQLAlchemy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.attributes.set_attribute.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.set_attribute.params.instance">¶</a> – the object that will be modified</p></li>
<li><p><span class="target" id="sqlalchemy.orm.attributes.set_attribute.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.set_attribute.params.key">¶</a> – string name of the attribute</p></li>
<li><p><span class="target" id="sqlalchemy.orm.attributes.set_attribute.params.value"></span><strong>value</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.set_attribute.params.value">¶</a> – value to assign</p></li>
<li><p><span class="target" id="sqlalchemy.orm.attributes.set_attribute.params.initiator"></span><strong>initiator</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.set_attribute.params.initiator">¶</a> – <p>an instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">Event</span></code> that would have
been propagated from a previous event listener.  This argument
is used when the <a class="reference internal" href="#sqlalchemy.orm.attributes.set_attribute" title="sqlalchemy.orm.attributes.set_attribute"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_attribute()</span></code></a> function is being used within
an existing event listening function where an <code class="xref py py-class docutils literal notranslate"><span class="pre">Event</span></code> object
is being supplied; the object may be used to track the origin of the
chain of events.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.2.3.</span></p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.set_committed_value">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.attributes.</span></span><span class="sig-name descname"><span class="pre">set_committed_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.attributes.set_committed_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the value of an attribute with no history events.</p>
<p>Cancels any previous history present.  The value should be
a scalar value for scalar-holding attributes, or
an iterable for any collection-holding attribute.</p>
<p>This is the same underlying method used when a lazy loader
fires off and loads additional data from the database.
In particular, this method can be used by application code
which has loaded additional attributes or collections through
separate queries, which can then be attached to an instance
as though it were part of its original loaded state.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.History">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.attributes.</span></span><span class="sig-name descname"><span class="pre">History</span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.History" title="Permalink to this definition">¶</a></dt>
<dd><p>A 3-tuple of added, unchanged and deleted values,
representing the changes which have occurred on an instrumented
attribute.</p>
<p>The easiest way to get a <a class="reference internal" href="#sqlalchemy.orm.attributes.History" title="sqlalchemy.orm.attributes.History"><code class="xref py py-class docutils literal notranslate"><span class="pre">History</span></code></a> object for a particular
attribute on an object is to use the <a class="reference internal" href="../core/inspection.html#sqlalchemy.inspect" title="sqlalchemy.inspect"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect()</span></code></a> function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">inspect</span>

<span class="n">hist</span> <span class="o">=</span> <span class="n">inspect</span><span class="p">(</span><span class="n">myobject</span><span class="p">)</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">myattribute</span><span class="o">.</span><span class="n">history</span></pre></div>
</div>
<p>Each tuple member is an iterable sequence:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">added</span></code> - the collection of items added to the attribute (the first
tuple element).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unchanged</span></code> - the collection of items that have not changed on the
attribute (the second tuple element).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">deleted</span></code> - the collection of items that have been removed from the
attribute (the third tuple element).</p></li>
</ul>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.orm.attributes.History.added"><span class="sig-name descname">added</span></a>, <a class="reference internal" href="#sqlalchemy.orm.attributes.History.deleted"><span class="sig-name descname">deleted</span></a>, <a class="reference internal" href="#sqlalchemy.orm.attributes.History.empty"><span class="sig-name descname">empty()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.attributes.History.has_changes"><span class="sig-name descname">has_changes()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.attributes.History.non_added"><span class="sig-name descname">non_added()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.attributes.History.non_deleted"><span class="sig-name descname">non_deleted()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.attributes.History.sum"><span class="sig-name descname">sum()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.attributes.History.unchanged"><span class="sig-name descname">unchanged</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.History</span></code> (<code class="docutils literal notranslate"><span class="pre">builtins.tuple</span></code>)</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.History.added">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.attributes.History"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.attributes.History.</span></code></a><span class="sig-name descname"><span class="pre">added</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.orm.attributes.History.added" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.History.deleted">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.attributes.History"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.attributes.History.</span></code></a><span class="sig-name descname"><span class="pre">deleted</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.orm.attributes.History.deleted" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.History.empty">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.attributes.History"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.attributes.History.</span></code></a><span class="sig-name descname"><span class="pre">empty</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.History.empty" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if this <a class="reference internal" href="#sqlalchemy.orm.attributes.History" title="sqlalchemy.orm.attributes.History"><code class="xref py py-class docutils literal notranslate"><span class="pre">History</span></code></a> has no changes
and no existing, unchanged state.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.History.has_changes">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.attributes.History"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.attributes.History.</span></code></a><span class="sig-name descname"><span class="pre">has_changes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.History.has_changes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if this <a class="reference internal" href="#sqlalchemy.orm.attributes.History" title="sqlalchemy.orm.attributes.History"><code class="xref py py-class docutils literal notranslate"><span class="pre">History</span></code></a> has changes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.History.non_added">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.attributes.History"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.attributes.History.</span></code></a><span class="sig-name descname"><span class="pre">non_added</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.History.non_added" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a collection of unchanged + deleted.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.History.non_deleted">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.attributes.History"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.attributes.History.</span></code></a><span class="sig-name descname"><span class="pre">non_deleted</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.History.non_deleted" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a collection of added + unchanged.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.History.sum">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.attributes.History"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.attributes.History.</span></code></a><span class="sig-name descname"><span class="pre">sum</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.History.sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a collection of added + unchanged + deleted.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.History.unchanged">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.attributes.History"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.attributes.History.</span></code></a><span class="sig-name descname"><span class="pre">unchanged</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.orm.attributes.History.unchanged" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

</dd></dl>

</section>
</section>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="session_events.html" title="previous chapter">使用事件追踪查询、对象和会话更改</a>
        Next:
        <a href="extending.html" title="next chapter">事件和内部机制</a>

    <div id="docs-copyright">
        &copy; <a href="../copyright.html">Copyright</a> 2007-2023, the SQLAlchemy authors and contributors.


    <p><b>flambé!</b> the dragon and <b><i>The Alchemist</i></b> image designs created and generously donated by <a href="https://github.com/vmalloc">Rotem Yaari</a>.</p>

        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 7.0.1.

    Documentation last generated: 2023/8/18 18:59:03

    </div>
</div>

</div>



        
        

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '2.0.19',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>

    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script type="text/javascript" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/sphinx_highlight.js"></script>
        <script type="text/javascript" src="../_static/clipboard.min.js"></script>
        <script type="text/javascript" src="../_static/copybutton.js"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../_static/init.js"></script>


    </body>
</html>


